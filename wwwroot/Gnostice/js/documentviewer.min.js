!function (e) { function t(e) { return typeof e !== "undefined" } function n(t, n, r) { var i = function () { }; i.prototype = n.prototype; t.prototype = new i; t.prototype.constructor = t; n.prototype.constructor = n; t._super = n.prototype; if (r) { e.extend(t.prototype, r) } } function s(e, n) { var s; if (typeof e === "string") { n = e; e = document } for (var o = 0; o < r.length; ++o) { n = n.replace(r[o][0], r[o][1]); for (var u = 0; u < i.length; ++u) { s = i[u]; s += u === 0 ? n : n.charAt(0).toUpperCase() + n.substr(1); if (t(e[s])) { return e[s] } } } return void 0 } var r = [["", ""], ["exit", "cancel"], ["screen", "Screen"]]; var i = ["", "o", "ms", "moz", "webkit", "webkitCurrent"]; var o = navigator.userAgent; var u = s("fullscreenEnabled"); var a = o.indexOf("Android") !== -1 && o.indexOf("Chrome") !== -1; var f = !a && t(s("fullscreenElement")) && (!t(u) || u === true); var l = e.fn.jquery.split("."); var c = parseInt(l[0]) < 2 && parseInt(l[1]) < 7; var h = function () { this.__options = null; this._fullScreenElement = null; this.__savedStyles = {} }; h.prototype = { "native": s, _DEFAULT_OPTIONS: { styles: { boxSizing: "border-box", MozBoxSizing: "border-box", WebkitBoxSizing: "border-box" }, toggleClass: null }, __documentOverflow: "", __htmlOverflow: "", _preventDocumentScroll: function () { this.__documentOverflow = document.body.style.overflow; this.__htmlOverflow = document.documentElement.style.overflow; if (!e(this._fullScreenElement).is("body, html")) { e("body, html").css("overflow", "hidden") } }, _allowDocumentScroll: function () { document.body.style.overflow = this.__documentOverflow; document.documentElement.style.overflow = this.__htmlOverflow }, _fullScreenChange: function () { if (!this.__options) { return } if (!this.isFullScreen()) { this._allowDocumentScroll(); this._revertStyles(); this._triggerEvents(); this._fullScreenElement = null } else { this._preventDocumentScroll(); this._triggerEvents() } }, _fullScreenError: function (t) { if (!this.__options) { return } this._revertStyles(); this._fullScreenElement = null; if (t) { e(document).trigger("fscreenerror", [t]) } }, _triggerEvents: function () { e(this._fullScreenElement).trigger(this.isFullScreen() ? "fscreenopen" : "fscreenclose"); e(document).trigger("fscreenchange", [this.isFullScreen(), this._fullScreenElement]) }, _saveAndApplyStyles: function () { var t = e(this._fullScreenElement); this.__savedStyles = {}; for (var n in this.__options.styles) { this.__savedStyles[n] = this._fullScreenElement.style[n]; this._fullScreenElement.style[n] = this.__options.styles[n] } if (t.is("body")) { document.documentElement.style.overflow = this.__options.styles.overflow } if (this.__options.toggleClass) { t.addClass(this.__options.toggleClass) } }, _revertStyles: function () { var t = e(this._fullScreenElement); for (var n in this.__options.styles) { this._fullScreenElement.style[n] = this.__savedStyles[n] } if (t.is("body")) { document.documentElement.style.overflow = this.__savedStyles.overflow } if (this.__options.toggleClass) { t.removeClass(this.__options.toggleClass) } }, open: function (t, n) { if (t === this._fullScreenElement) { return } if (this.isFullScreen()) { this.exit() } this._fullScreenElement = t; this.__options = e.extend(true, {}, this._DEFAULT_OPTIONS, n); this._saveAndApplyStyles() }, exit: null, isFullScreen: null, isNativelySupported: function () { return f } }; var p = function () { p._super.constructor.apply(this, arguments); this.exit = e.proxy(s("exitFullscreen"), document); this._DEFAULT_OPTIONS = e.extend(true, {}, this._DEFAULT_OPTIONS, { styles: { width: "100%", height: "100%" } }); e(document).bind(this._prefixedString("fullscreenchange") + " MSFullscreenChange", e.proxy(this._fullScreenChange, this)).bind(this._prefixedString("fullscreenerror") + " MSFullscreenError", e.proxy(this._fullScreenError, this)) }; n(p, h, { VENDOR_PREFIXES: ["", "o", "moz", "webkit"], _prefixedString: function (t) { return e.map(this.VENDOR_PREFIXES, function (e) { return e + t }).join(" ") }, open: function (e, t) { p._super.open.apply(this, arguments); var n = s(e, "requestFullscreen"); n.call(e) }, exit: e.noop, isFullScreen: function () { return s("fullscreenElement") !== null }, element: function () { return s("fullscreenElement") } }); var d = function () { d._super.constructor.apply(this, arguments); this._DEFAULT_OPTIONS = e.extend({}, this._DEFAULT_OPTIONS, { styles: { position: "absolute", zIndex: "2147483647", left: 0, top: 0, bottom: 0, right: 0 } }); this.__delegateKeydownHandler() }; n(d, h, { __isFullScreen: false, __delegateKeydownHandler: function () { var t = e(document); t.delegate("*", "keydown.fullscreen", e.proxy(this.__keydownHandler, this)); var n = c ? t.data("events") : e._data(document).events; var r = n["keydown"]; if (!c) { r.splice(0, 0, r.splice(r.delegateCount - 1, 1)[0]) } else { n.live.unshift(n.live.pop()) } }, __keydownHandler: function (e) { if (this.isFullScreen() && e.which === 27) { this.exit(); return false } return true }, _revertStyles: function () { d._super._revertStyles.apply(this, arguments); this._fullScreenElement.offsetHeight }, open: function (e) { d._super.open.apply(this, arguments); this.__isFullScreen = true; this._fullScreenChange() }, exit: function () { if (!this.__isFullScreen) { return } this.__isFullScreen = false; this._fullScreenChange() }, isFullScreen: function () { return this.__isFullScreen }, element: function () { return this.__isFullScreen ? this._fullScreenElement : null } }); e.fullscreen = f ? new p : new d; e.fn.fullscreen = function (t) { var n = this[0]; t = e.extend({ toggleClass: null, overflow: "hidden" }, t); t.styles = { overflow: t.overflow }; delete t.overflow; if (n) { e.fullscreen.open(n, t) } return this } }(jQuery);




/**
 * Copyright (c) 2007-2015 Ariel Flesler - aflesler ○ gmail • com | http://flesler.blogspot.com
 * Licensed under MIT
 * @author Ariel Flesler
 * @version 2.1.3
 */
; (function (f) { "use strict"; "function" === typeof define && define.amd ? define(["jquery"], f) : "undefined" !== typeof module && module.exports ? module.exports = f(require("jquery")) : f(jQuery) })(function ($) { "use strict"; function n(a) { return !a.nodeName || -1 !== $.inArray(a.nodeName.toLowerCase(), ["iframe", "#document", "html", "body"]) } function h(a) { return $.isFunction(a) || $.isPlainObject(a) ? a : { top: a, left: a } } var p = $.scrollTo = function (a, d, b) { return $(window).scrollTo(a, d, b) }; p.defaults = { axis: "xy", duration: 0, limit: !0 }; $.fn.scrollTo = function (a, d, b) { "object" === typeof d && (b = d, d = 0); "function" === typeof b && (b = { onAfter: b }); "max" === a && (a = 9E9); b = $.extend({}, p.defaults, b); d = d || b.duration; var u = b.queue && 1 < b.axis.length; u && (d /= 2); b.offset = h(b.offset); b.over = h(b.over); return this.each(function () { function k(a) { var k = $.extend({}, b, { queue: !0, duration: d, complete: a && function () { a.call(q, e, b) } }); r.animate(f, k) } if (null !== a) { var l = n(this), q = l ? this.contentWindow || window : this, r = $(q), e = a, f = {}, t; switch (typeof e) { case "number": case "string": if (/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(e)) { e = h(e); break } e = l ? $(e) : $(e, q); case "object": if (e.length === 0) return; if (e.is || e.style) t = (e = $(e)).offset() } var v = $.isFunction(b.offset) && b.offset(q, e) || b.offset; $.each(b.axis.split(""), function (a, c) { var d = "x" === c ? "Left" : "Top", m = d.toLowerCase(), g = "scroll" + d, h = r[g](), n = p.max(q, c); t ? (f[g] = t[m] + (l ? 0 : h - r.offset()[m]), b.margin && (f[g] -= parseInt(e.css("margin" + d), 10) || 0, f[g] -= parseInt(e.css("border" + d + "Width"), 10) || 0), f[g] += v[m] || 0, b.over[m] && (f[g] += e["x" === c ? "width" : "height"]() * b.over[m])) : (d = e[m], f[g] = d.slice && "%" === d.slice(-1) ? parseFloat(d) / 100 * n : d); b.limit && /^\d+$/.test(f[g]) && (f[g] = 0 >= f[g] ? 0 : Math.min(f[g], n)); !a && 1 < b.axis.length && (h === f[g] ? f = {} : u && (k(b.onAfterFirst), f = {})) }); k(b.onAfter) } }) }; p.max = function (a, d) { var b = "x" === d ? "Width" : "Height", h = "scroll" + b; if (!n(a)) return a[h] - $(a)[b.toLowerCase()](); var b = "client" + b, k = a.ownerDocument || a.document, l = k.documentElement, k = k.body; return Math.max(l[h], k[h]) - Math.min(l[b], k[b]) }; $.Tween.propHooks.scrollLeft = $.Tween.propHooks.scrollTop = { get: function (a) { return $(a.elem)[a.prop]() }, set: function (a) { var d = this.get(a); if (a.options.interrupt && a._last && a._last !== d) return $(a.elem).stop(); var b = Math.round(a.now); d !== b && ($(a.elem)[a.prop](b), a._last = this.get(a)) } }; return p });

/*IE 9 : Added Support for callback functions of JavaScript timers*/

/*\
|*|
|*|  Polyfill which enables the passage of arbitrary arguments to the
|*|  callback functions of JavaScript timers (HTML5 standard syntax).
|*|
|*|  https://developer.mozilla.org/en-US/docs/DOM/window.setInterval
|*|
|*|  Syntax:
|*|  var timeoutID = window.setTimeout(func, delay[, param1, param2, ...]);
|*|  var timeoutID = window.setTimeout(code, delay);
|*|  var intervalID = window.setInterval(func, delay[, param1, param2, ...]);
|*|  var intervalID = window.setInterval(code, delay);
|*|
\*/
/*!
* screenfull
* v3.0.0
*/


(function () {
    setTimeout(function (arg1) {
        if (arg1 === 'test') {
            // feature test is passed, no need for polyfill
            return;
        }
        var __nativeST__ = window.setTimeout;
        window.setTimeout = function (vCallback, nDelay /*, argumentToPass1, argumentToPass2, etc. */) {
            var aArgs = Array.prototype.slice.call(arguments, 2);
            return __nativeST__(vCallback instanceof Function ? function () {
                vCallback.apply(null, aArgs);
            } : vCallback, nDelay);
        };
    }, 0, 'test');

    var interval = setInterval(function (arg1) {
        clearInterval(interval);
        if (arg1 === 'test') {
            // feature test is passed, no need for polyfill
            return;
        }
        var __nativeSI__ = window.setInterval;
        window.setInterval = function (vCallback, nDelay /*, argumentToPass1, argumentToPass2, etc. */) {
            var aArgs = Array.prototype.slice.call(arguments, 2);
            return __nativeSI__(vCallback instanceof Function ? function () {
                vCallback.apply(null, aArgs);
            } : vCallback, nDelay);
        };
    }, 0, 'test');
}());

/*End of setTimeout support in IE 9.*/
!function () { "use strict"; var a = "undefined" != typeof module && module.exports, b = "undefined" != typeof Element && "ALLOW_KEYBOARD_INPUT" in Element, c = function () { for (var a, b, c = [["requestFullscreen", "exitFullscreen", "fullscreenElement", "fullscreenEnabled", "fullscreenchange", "fullscreenerror"], ["webkitRequestFullscreen", "webkitExitFullscreen", "webkitFullscreenElement", "webkitFullscreenEnabled", "webkitfullscreenchange", "webkitfullscreenerror"], ["webkitRequestFullScreen", "webkitCancelFullScreen", "webkitCurrentFullScreenElement", "webkitCancelFullScreen", "webkitfullscreenchange", "webkitfullscreenerror"], ["mozRequestFullScreen", "mozCancelFullScreen", "mozFullScreenElement", "mozFullScreenEnabled", "mozfullscreenchange", "mozfullscreenerror"], ["msRequestFullscreen", "msExitFullscreen", "msFullscreenElement", "msFullscreenEnabled", "MSFullscreenChange", "MSFullscreenError"]], d = 0, e = c.length, f = {}; e > d; d++) if (a = c[d], a && a[1] in document) { for (d = 0, b = a.length; b > d; d++) f[c[0][d]] = a[d]; return f } return !1 }(), d = { request: function (a) { var d = c.requestFullscreen; a = a || document.documentElement, /5\.1[\.\d]* Safari/.test(navigator.userAgent) ? a[d]() : a[d](b && Element.ALLOW_KEYBOARD_INPUT) }, exit: function () { document[c.exitFullscreen]() }, toggle: function (a) { this.isFullscreen ? this.exit() : this.request(a) }, raw: c }; return c ? (Object.defineProperties(d, { isFullscreen: { get: function () { return Boolean(document[c.fullscreenElement]) } }, element: { enumerable: !0, get: function () { return document[c.fullscreenElement] } }, enabled: { enumerable: !0, get: function () { return Boolean(document[c.fullscreenEnabled]) } } }), void (a ? module.exports = d : window.screenfull = d)) : void (a ? module.exports = !1 : window.screenfull = !1) }();

/*Splitter added*/
!function (t, i) { var e = 0, n = null, r = [], o = null; t.fn.split = function (s) { function l(t) { if ("number" == typeof t) return t; if ("string" == typeof t) { var i = t.match(/^([0-9\.]+)(px|%)$/); if (i) { if ("px" == i[2]) return +i[1]; if ("vertical" == u.orientation) return c * +i[1] / 100; if ("horizontal" == u.orientation) return f * +i[1] / 100 } } } var a = this.data("splitter"); if (a) return a; var h, p, u = t.extend({ limit: 100, orientation: "horizontal", position: "50%", invisible: !1, onDragStart: t.noop, onDragEnd: t.noop, onDrag: t.noop }, s || {}); this.settings = u; var d, g = this.children(); "vertical" == u.orientation ? (h = g.first().addClass("left_panel"), p = h.next().addClass("right_panel"), d = "vsplitter") : "horizontal" == u.orientation && (h = g.first().addClass("top_panel"), p = h.next().addClass("bottom_panel"), d = "hsplitter"), u.invisible && (d += " splitter-invisible"); var c = this.width(), f = this.height(), v = e++; this.addClass("splitter_panel"); var m, b = t("<div/>").addClass(d).bind("mouseenter touchstart", function () { n = v }).bind("mouseleave touchend", function () { n = null }).insertAfter(h), z = t.extend(this, { refresh: function () { var t = this.width(), i = this.height(); (c != t || f != i) && (c = this.width(), f = this.height(), z.position(m)) }, position: function () { return "vertical" == u.orientation ? function (t, e) { if (t === i) return m; m = l(t); var n, r = b.width(), o = r / 2; return u.invisible ? (n = h.width(m).outerWidth(), p.width(z.width() - n), b.css("left", n - o)) : (n = h.width(m - o).outerWidth(), p.width(z.width() - n - r), b.css("left", n)), h.find(".splitter_panel").eq(0).height(z.height()), p.find(".splitter_panel").eq(0).height(z.height()), u.onDragEnd(null), e || (z.trigger("splitter.resize"), z.find(".splitter_panel").trigger("splitter.resize")), z } : "horizontal" == u.orientation ? function (t, e) { if (t === i) return m; m = l(t); var n, r = b.height(), o = r / 2; return u.invisible ? (n = h.height(m).outerHeight(), p.height(z.height() - n), b.css("top", n - o)) : (n = h.height(m - o).outerHeight(), p.height(z.height() - n - r), b.css("top", n)), u.onDragEnd(null), e || (z.trigger("splitter.resize"), z.find(".splitter_panel").trigger("splitter.resize")), z } : t.noop }(), orientation: u.orientation, limit: u.limit, isActive: function () { return n === v }, destroy: function () { z.removeClass("splitter_panel"), b.unbind("mouseenter"), b.unbind("mouseleave"), b.unbind("touchstart"), b.unbind("touchmove"), b.unbind("touchend"), b.unbind("touchleave"), b.unbind("touchcancel"), "vertical" == u.orientation ? (h.removeClass("left_panel"), p.removeClass("right_panel")) : "horizontal" == u.orientation && (h.removeClass("top_panel"), p.removeClass("bottom_panel")), z.unbind("splitter.resize"), z.trigger("splitter.resize"), z.find(".splitter_panel").trigger("splitter.resize"), r[v] = null, e--, b.remove(), z.removeData("splitter"); for (var i = !1, n = r.length; n--;) if (null !== r[n]) { i = !0; break } i || (t(document.documentElement).unbind(".splitter"), t(window).unbind("resize.splitter"), r = [], e = 0) } }); z.bind("splitter.resize", function (t) { var i = z.position(); "vertical" == z.orientation && i > z.width() ? i = z.width() - z.limit - 1 : "horizontal" == z.orientation && i > z.height() && (i = z.height() - z.limit - 1), i < z.limit && (i = z.limit + 1), t.stopPropagation(), z.position(i, !0) }); var w; "vertical" == u.orientation ? w = w > c - u.limit ? c - u.limit : l(u.position) : "horizontal" == u.orientation && (w = w > f - u.limit ? f - u.limit : l(u.position)), w < u.limit && (w = u.limit), z.position(w, !0); var _ = this.closest(".splitter_panel"); return _.length && this.height(_.height()), 0 === r.filter(Boolean).length && (t(window).bind("resize.splitter", function () { t.each(r, function (t, i) { i && i.refresh() }) }), t(document.documentElement).on("mousedown.splitter touchstart.splitter", function (i) { null !== n && (i.preventDefault(), o = r[n], setTimeout(function () { t('<div class="splitterMask"></div>').css("cursor", o.children().eq(1).css("cursor")).insertAfter(o) }), o.settings.onDragStart(i)) }).bind("mouseup.splitter touchend.splitter touchleave.splitter touchcancel.splitter", function (i) { o && (setTimeout(function () { t(".splitterMask").remove() }), o.settings.onDragEnd(i), o = null) }).bind("mousemove.splitter touchmove.splitter", function (t) { if (null !== o) { var i = o.limit, e = o.offset(); if ("vertical" == o.orientation) { var n = t.pageX; t.originalEvent && t.originalEvent.changedTouches && (n = t.originalEvent.changedTouches[0].pageX); var r = n - e.left; r <= o.limit ? r = o.limit + 1 : r >= o.width() - i && (r = o.width() - i - 1), r > o.limit && r < o.width() - i && (o.position(r, !0), o.trigger("splitter.resize"), o.find(".splitter_panel").trigger("splitter.resize")) } else if ("horizontal" == o.orientation) { var s = t.pageY; t.originalEvent && t.originalEvent.changedTouches && (s = t.originalEvent.changedTouches[0].pageY); var l = s - e.top; l <= o.limit ? l = o.limit + 1 : l >= o.height() - i && (l = o.height() - i - 1), l > o.limit && l < o.height() - i && (o.position(l, !0), o.trigger("splitter.resize"), o.find(".splitter_panel").trigger("splitter.resize")) } o.settings.onDrag(t) } })), r[v] = z, z.data("splitter", z), z } }(jQuery);

/*Jquery Tree*/
!function e(t, n, o) { function r(s, l) { if (!n[s]) { if (!t[s]) { var d = "function" == typeof require && require; if (!l && d) return d(s, !0); if (i) return i(s, !0); var a = new Error("Cannot find module '" + s + "'"); throw a.code = "MODULE_NOT_FOUND", a } var u = n[s] = { exports: {} }; t[s][0].call(u.exports, function (e) { var n = t[s][1][e]; return r(n ? n : e) }, u, u.exports, e, t, n, o) } return n[s].exports } for (var i = "function" == typeof require && require, s = 0; s < o.length; s++) r(o[s]); return r }({
    1: [function (e, t, n) { var o, r, i, s, l, d, a, u, h = function (e, t) { function n() { this.constructor = e } for (var o in t) p.call(t, o) && (e[o] = t[o]); return n.prototype = t.prototype, e.prototype = new n, e.__super__ = t.prototype, e }, p = {}.hasOwnProperty; a = e("./node"), u = e("./util"), l = a.Position, o = jQuery, r = function () { function e(e) { this.tree_widget = e, this.hovered_area = null, this.$ghost = null, this.hit_areas = [], this.is_dragging = !1, this.current_item = null } return e.prototype.mouseCapture = function (e) { var t, n; return t = o(e.target), this.mustCaptureElement(t) ? this.tree_widget.options.onIsMoveHandle && !this.tree_widget.options.onIsMoveHandle(t) ? null : (n = this.tree_widget._getNodeElement(t), n && this.tree_widget.options.onCanMove && (this.tree_widget.options.onCanMove(n.node) || (n = null)), this.current_item = n, null !== this.current_item) : null }, e.prototype.mouseStart = function (e) { var t, n, r; return this.refresh(), r = o(e.target).offset(), t = this.current_item.node, n = this.tree_widget.options.autoEscape ? u.html_escape(t.name) : t.name, this.drag_element = new i(n, e.page_x - r.left, e.page_y - r.top, this.tree_widget.element), this.is_dragging = !0, this.current_item.$element.addClass("jqtree-moving"), !0 }, e.prototype.mouseDrag = function (e) { var t, n; return this.drag_element.move(e.page_x, e.page_y), t = this.findHoveredArea(e.page_x, e.page_y), n = this.canMoveToArea(t), n && t ? (t.node.isFolder() || this.stopOpenFolderTimer(), this.hovered_area !== t && (this.hovered_area = t, this.mustOpenFolderTimer(t) ? this.startOpenFolderTimer(t.node) : this.stopOpenFolderTimer(), this.updateDropHint())) : (this.removeHover(), this.removeDropHint(), this.stopOpenFolderTimer()), t || null != this.tree_widget.options.onDragMove && this.tree_widget.options.onDragMove(this.current_item.node, e.original_event), !0 }, e.prototype.mustCaptureElement = function (e) { return !e.is("input,select,textarea") }, e.prototype.canMoveToArea = function (e) { var t; return e ? this.tree_widget.options.onCanMoveTo ? (t = l.getName(e.position), this.tree_widget.options.onCanMoveTo(this.current_item.node, e.node, t)) : !0 : !1 }, e.prototype.mouseStop = function (e) { var t; return this.moveItem(e), this.clear(), this.removeHover(), this.removeDropHint(), this.removeHitAreas(), t = this.current_item, this.current_item && (this.current_item.$element.removeClass("jqtree-moving"), this.current_item = null), this.is_dragging = !1, !this.hovered_area && t && null != this.tree_widget.options.onDragStop && this.tree_widget.options.onDragStop(t.node, e.original_event), !1 }, e.prototype.refresh = function () { return this.removeHitAreas(), this.current_item && (this.generateHitAreas(), this.current_item = this.tree_widget._getNodeElementForNode(this.current_item.node), this.is_dragging) ? this.current_item.$element.addClass("jqtree-moving") : void 0 }, e.prototype.removeHitAreas = function () { return this.hit_areas = [] }, e.prototype.clear = function () { return this.drag_element.remove(), this.drag_element = null }, e.prototype.removeDropHint = function () { return this.previous_ghost ? this.previous_ghost.remove() : void 0 }, e.prototype.removeHover = function () { return this.hovered_area = null }, e.prototype.generateHitAreas = function () { var e; return e = new s(this.tree_widget.tree, this.current_item.node, this.getTreeDimensions().bottom), this.hit_areas = e.generate() }, e.prototype.findHoveredArea = function (e, t) { var n, o, r, i, s; if (o = this.getTreeDimensions(), e < o.left || t < o.top || e > o.right || t > o.bottom) return null; for (i = 0, r = this.hit_areas.length; r > i;) if (s = i + r >> 1, n = this.hit_areas[s], t < n.top) r = s; else { if (!(t > n.bottom)) return n; i = s + 1 } return null }, e.prototype.mustOpenFolderTimer = function (e) { var t; return t = e.node, t.isFolder() && !t.is_open && e.position === l.INSIDE }, e.prototype.updateDropHint = function () { var e; if (this.hovered_area) return this.removeDropHint(), e = this.tree_widget._getNodeElementForNode(this.hovered_area.node), this.previous_ghost = e.addDropHint(this.hovered_area.position) }, e.prototype.startOpenFolderTimer = function (e) { var t; return t = function (t) { return function () { return t.tree_widget._openNode(e, t.tree_widget.options.slide, function () { return t.refresh(), t.updateDropHint() }) } }(this), this.stopOpenFolderTimer(), this.open_folder_timer = setTimeout(t, this.tree_widget.options.openFolderDelay) }, e.prototype.stopOpenFolderTimer = function () { return this.open_folder_timer ? (clearTimeout(this.open_folder_timer), this.open_folder_timer = null) : void 0 }, e.prototype.moveItem = function (e) { var t, n, o, r, i, s; return this.hovered_area && this.hovered_area.position !== l.NONE && this.canMoveToArea(this.hovered_area) && (o = this.current_item.node, s = this.hovered_area.node, r = this.hovered_area.position, i = o.parent, r === l.INSIDE && (this.hovered_area.node.is_open = !0), t = function (e) { return function () { return e.tree_widget.tree.moveNode(o, s, r), e.tree_widget.element.empty(), e.tree_widget._refreshElements() } }(this), n = this.tree_widget._triggerEvent("tree.move", { move_info: { moved_node: o, target_node: s, position: l.getName(r), previous_parent: i, do_move: t, original_event: e.original_event } }), !n.isDefaultPrevented()) ? t() : void 0 }, e.prototype.getTreeDimensions = function () { var e; return e = this.tree_widget.element.offset(), { left: e.left, top: e.top, right: e.left + this.tree_widget.element.width(), bottom: e.top + this.tree_widget.element.height() + 16 } }, e }(), d = function () { function e(e) { this.tree = e } return e.prototype.iterate = function () { var e, t; return t = !0, (e = function (n) { return function (r, i) { var s, l, d, a, u, h, p, c; if (p = (r.is_open || !r.element) && r.hasChildren(), r.element) { if (s = o(r.element), !s.is(":visible")) return; t && (n.handleFirstNode(r, s), t = !1), r.hasChildren() ? r.is_open ? n.handleOpenFolder(r, s) || (p = !1) : n.handleClosedFolder(r, i, s) : n.handleNode(r, i, s) } if (p) { for (d = r.children.length, c = r.children, a = u = 0, h = c.length; h > u; a = ++u) l = c[a], a === d - 1 ? e(r.children[a], null) : e(r.children[a], r.children[a + 1]); if (r.is_open) return n.handleAfterOpenFolder(r, i, s) } } }(this))(this.tree, null) }, e.prototype.handleNode = function (e, t, n) { }, e.prototype.handleOpenFolder = function (e, t) { }, e.prototype.handleClosedFolder = function (e, t, n) { }, e.prototype.handleAfterOpenFolder = function (e, t, n) { }, e.prototype.handleFirstNode = function (e, t) { }, e }(), s = function (e) { function t(e, n, o) { t.__super__.constructor.call(this, e), this.current_node = n, this.tree_bottom = o } return h(t, e), t.prototype.generate = function () { return this.positions = [], this.last_top = 0, this.iterate(), this.generateHitAreas(this.positions) }, t.prototype.getTop = function (e) { return e.offset().top }, t.prototype.addPosition = function (e, t, n) { var o; return o = { top: n, node: e, position: t }, this.positions.push(o), this.last_top = n }, t.prototype.handleNode = function (e, t, n) { var o; return o = this.getTop(n), e === this.current_node ? this.addPosition(e, l.NONE, o) : this.addPosition(e, l.INSIDE, o), t === this.current_node || e === this.current_node ? this.addPosition(e, l.NONE, o) : this.addPosition(e, l.AFTER, o) }, t.prototype.handleOpenFolder = function (e, t) { return e === this.current_node ? !1 : (e.children[0] !== this.current_node && this.addPosition(e, l.INSIDE, this.getTop(t)), !0) }, t.prototype.handleClosedFolder = function (e, t, n) { var o; return o = this.getTop(n), e === this.current_node ? this.addPosition(e, l.NONE, o) : (this.addPosition(e, l.INSIDE, o), t !== this.current_node ? this.addPosition(e, l.AFTER, o) : void 0) }, t.prototype.handleFirstNode = function (e, t) { return e !== this.current_node ? this.addPosition(e, l.BEFORE, this.getTop(o(e.element))) : void 0 }, t.prototype.handleAfterOpenFolder = function (e, t, n) { return e === this.current_node.node || t === this.current_node.node ? this.addPosition(e, l.NONE, this.last_top) : this.addPosition(e, l.AFTER, this.last_top) }, t.prototype.generateHitAreas = function (e) { var t, n, o, r, i, s; for (s = -1, t = [], n = [], o = 0, r = e.length; r > o; o++) i = e[o], i.top !== s && t.length && (t.length && this.generateHitAreasForGroup(n, t, s, i.top), s = i.top, t = []), t.push(i); return this.generateHitAreasForGroup(n, t, s, this.tree_bottom), n }, t.prototype.generateHitAreasForGroup = function (e, t, n, o) { var r, i, s, l, d; for (d = Math.min(t.length, 4), r = Math.round((o - n) / d), i = n, s = 0; d > s;) l = t[s], e.push({ top: i, bottom: i + r, node: l.node, position: l.position }), i += r, s += 1; return null }, t }(d), i = function () { function e(e, t, n, r) { this.offset_x = t, this.offset_y = n, this.$element = o('<span class="jqtree-title jqtree-dragging">' + e + "</span>"), this.$element.css("position", "absolute"), r.append(this.$element) } return e.prototype.move = function (e, t) { return this.$element.offset({ left: e - this.offset_x, top: t - this.offset_y }) }, e.prototype.remove = function () { return this.$element.remove() }, e }(), t.exports = { DragAndDropHandler: r, DragElement: i, HitAreasGenerator: s } }, { "./node": 5, "./util": 12 }], 2: [function (e, t, n) { var o, r, i, s, l, d; l = e("./node_element"), i = l.NodeElement, d = e("./util"), s = d.html_escape, o = jQuery, r = function () { function e(e) { this.tree_widget = e, this.opened_icon_element = this.createButtonElement(e.options.openedIcon), this.closed_icon_element = this.createButtonElement(e.options.closedIcon) } return e.prototype.render = function (e) { return e && e.parent ? this.renderFromNode(e) : this.renderFromRoot() }, e.prototype.renderFromRoot = function () { var e; return e = this.tree_widget.element, e.empty(), this.createDomElements(e[0], this.tree_widget.tree.children, !0, !0, 1) }, e.prototype.renderFromNode = function (e) { var t, n; return t = o(e.element), n = this.createLi(e, e.getLevel()), this.attachNodeData(e, n), t.after(n), t.remove(), e.children ? this.createDomElements(n, e.children, !1, !1, e.getLevel() + 1) : void 0 }, e.prototype.createDomElements = function (e, t, n, o, r) { var i, s, l, d, a; for (a = this.createUl(n), e.appendChild(a), s = 0, l = t.length; l > s; s++) i = t[s], d = this.createLi(i, r), a.appendChild(d), this.attachNodeData(i, d), i.hasChildren() && this.createDomElements(d, i.children, !1, i.is_open, r + 1); return null }, e.prototype.attachNodeData = function (e, t) { return e.element = t, o(t).data("node", e) }, e.prototype.createUl = function (e) { var t, n, o; return e ? (t = "jqtree-tree", n = "tree", this.tree_widget.options.rtl && (t += " jqtree-rtl")) : (t = "", n = "group"), o = document.createElement("ul"), o.className = "jqtree_common " + t, o.setAttribute("role", n), o }, e.prototype.createLi = function (e, t) { var n, r; return n = this.tree_widget.select_node_handler && this.tree_widget.select_node_handler.isNodeSelected(e), r = e.isFolder() ? this.createFolderLi(e, t, n) : this.createNodeLi(e, t, n), this.tree_widget.options.onCreateLi && this.tree_widget.options.onCreateLi(e, o(r)), r }, e.prototype.createFolderLi = function (e, t, n) { var o, r, i, s, l, d, a; return o = this.getButtonClasses(e), s = this.getFolderClasses(e, n), l = e.is_open ? this.opened_icon_element : this.closed_icon_element, a = document.createElement("li"), a.className = "jqtree_common " + s, a.setAttribute("role", "presentation"), i = document.createElement("div"), i.className = "jqtree-element jqtree_common", i.setAttribute("role", "presentation"), a.appendChild(i), r = document.createElement("a"), r.className = o, r.appendChild(l.cloneNode(!1)), r.setAttribute("role", "presentation"), r.setAttribute("aria-hidden", "true"), this.tree_widget.options.buttonLeft && i.appendChild(r), i.appendChild(this.createTitleSpan(e.name, t, n, e.is_open, d = !0)), this.tree_widget.options.buttonLeft || i.appendChild(r), a }, e.prototype.createNodeLi = function (e, t, n) { var o, r, i, s, l; return l = ["jqtree_common"], n && l.push("jqtree-selected"), o = l.join(" "), s = document.createElement("li"), s.className = o, s.setAttribute("role", "presentation"), r = document.createElement("div"), r.className = "jqtree-element jqtree_common", r.setAttribute("role", "presentation"), s.appendChild(r), r.appendChild(this.createTitleSpan(e.name, t, n, e.is_open, i = !1)), s }, e.prototype.createTitleSpan = function (e, t, n, o, r) { var i, s; return s = document.createElement("span"), i = "jqtree-title jqtree_common", r && (i += " jqtree-title-folder"), s.className = i, s.setAttribute("role", "treeitem"), s.setAttribute("aria-level", t), s.setAttribute("aria-selected", d.getBoolString(n)), s.setAttribute("aria-expanded", d.getBoolString(o)), n && s.setAttribute("tabindex", 0), s.innerHTML = this.escapeIfNecessary(e), s }, e.prototype.getButtonClasses = function (e) { var t; return t = ["jqtree-toggler", "jqtree_common"], e.is_open || t.push("jqtree-closed"), this.tree_widget.options.buttonLeft ? t.push("jqtree-toggler-left") : t.push("jqtree-toggler-right"), t.join(" ") }, e.prototype.getFolderClasses = function (e, t) { var n; return n = ["jqtree-folder"], e.is_open || n.push("jqtree-closed"), t && n.push("jqtree-selected"), e.is_loading && n.push("jqtree-loading"), n.join(" ") }, e.prototype.escapeIfNecessary = function (e) { return this.tree_widget.options.autoEscape ? s(e) : e }, e.prototype.createButtonElement = function (e) { var t; return "string" == typeof e ? (t = document.createElement("div"), t.innerHTML = e, document.createTextNode(t.innerHTML)) : o(e)[0] }, e }(), t.exports = r }, { "./node_element": 6, "./util": 12 }], 3: [function (e, t, n) { var o, r, i = function (e, t) { return function () { return e.apply(t, arguments) } }; o = jQuery, r = function () { function e(e) { this.selectNode = i(this.selectNode, this), this.tree_widget = e, e.options.keyboardSupport && o(document).bind("keydown.jqtree", o.proxy(this.handleKeyDown, this)) } var t, n, r, s; return n = 37, s = 38, r = 39, t = 40, e.prototype.deinit = function () { return o(document).unbind("keydown.jqtree") }, e.prototype.moveDown = function () { var e; return e = this.tree_widget.getSelectedNode(), e ? this.selectNode(e.getNextNode()) : !1 }, e.prototype.moveUp = function () { var e; return e = this.tree_widget.getSelectedNode(), e ? this.selectNode(e.getPreviousNode()) : !1 }, e.prototype.moveRight = function () { var e; return e = this.tree_widget.getSelectedNode(), e && e.isFolder() ? e.is_open ? this.selectNode(e.getNextNode()) : (this.tree_widget.openNode(e), !1) : !0 }, e.prototype.moveLeft = function () { var e; return e = this.tree_widget.getSelectedNode(), e ? e.isFolder() && e.is_open ? (this.tree_widget.closeNode(e), !1) : this.selectNode(e.getParent()) : !0 }, e.prototype.handleKeyDown = function (e) { var i; if (!this.tree_widget.options.keyboardSupport) return !0; if (o(document.activeElement).is("textarea,input,select")) return !0; if (!this.tree_widget.getSelectedNode()) return !0; switch (i = e.which) { case t: return this.moveDown(); case s: return this.moveUp(); case r: return this.moveRight(); case n: return this.moveLeft() } return !0 }, e.prototype.selectNode = function (e) { return e ? (this.tree_widget.selectNode(e), this.tree_widget.scroll_handler && !this.tree_widget.scroll_handler.isScrolledIntoView(o(e.element).find(".jqtree-element")) && this.tree_widget.scrollToNode(e), !1) : !0 }, e }(), t.exports = r }, {}], 4: [function (e, t, n) { var o, r, i, s = function (e, t) { function n() { this.constructor = e } for (var o in t) l.call(t, o) && (e[o] = t[o]); return n.prototype = t.prototype, e.prototype = new n, e.__super__ = t.prototype, e }, l = {}.hasOwnProperty; i = e("./simple.widget"), o = jQuery, r = function (e) { function t() { return t.__super__.constructor.apply(this, arguments) } return s(t, e), t.is_mouse_handled = !1, t.prototype._init = function () { return this.$el.bind("mousedown.mousewidget", o.proxy(this._mouseDown, this)), this.$el.bind("touchstart.mousewidget", o.proxy(this._touchStart, this)), this.is_mouse_started = !1, this.mouse_delay = 0, this._mouse_delay_timer = null, this._is_mouse_delay_met = !0, this.mouse_down_info = null }, t.prototype._deinit = function () { var e; return this.$el.unbind("mousedown.mousewidget"), this.$el.unbind("touchstart.mousewidget"), e = o(document), e.unbind("mousemove.mousewidget"), e.unbind("mouseup.mousewidget") }, t.prototype._mouseDown = function (e) { var t; if (1 === e.which) return t = this._handleMouseDown(e, this._getPositionInfo(e)), t && e.preventDefault(), t }, t.prototype._handleMouseDown = function (e, n) { return !t.is_mouse_handled && (this.is_mouse_started && this._handleMouseUp(n), this.mouse_down_info = n, this._mouseCapture(n)) ? (this._handleStartMouse(), this.is_mouse_handled = !0, !0) : void 0 }, t.prototype._handleStartMouse = function () { var e; return e = o(document), e.bind("mousemove.mousewidget", o.proxy(this._mouseMove, this)), e.bind("touchmove.mousewidget", o.proxy(this._touchMove, this)), e.bind("mouseup.mousewidget", o.proxy(this._mouseUp, this)), e.bind("touchend.mousewidget", o.proxy(this._touchEnd, this)), this.mouse_delay ? this._startMouseDelayTimer() : void 0 }, t.prototype._startMouseDelayTimer = function () { return this._mouse_delay_timer && clearTimeout(this._mouse_delay_timer), this._mouse_delay_timer = setTimeout(function (e) { return function () { return e._is_mouse_delay_met = !0 } }(this), this.mouse_delay), this._is_mouse_delay_met = !1 }, t.prototype._mouseMove = function (e) { return this._handleMouseMove(e, this._getPositionInfo(e)) }, t.prototype._handleMouseMove = function (e, t) { return this.is_mouse_started ? (this._mouseDrag(t), e.preventDefault()) : this.mouse_delay && !this._is_mouse_delay_met ? !0 : (this.is_mouse_started = this._mouseStart(this.mouse_down_info) !== !1, this.is_mouse_started ? this._mouseDrag(t) : this._handleMouseUp(t), !this.is_mouse_started) }, t.prototype._getPositionInfo = function (e) { return { page_x: e.pageX, page_y: e.pageY, target: e.target, original_event: e } }, t.prototype._mouseUp = function (e) { return this._handleMouseUp(this._getPositionInfo(e)) }, t.prototype._handleMouseUp = function (e) { var t; t = o(document), t.unbind("mousemove.mousewidget"), t.unbind("touchmove.mousewidget"), t.unbind("mouseup.mousewidget"), t.unbind("touchend.mousewidget"), this.is_mouse_started && (this.is_mouse_started = !1, this._mouseStop(e)) }, t.prototype._mouseCapture = function (e) { return !0 }, t.prototype._mouseStart = function (e) { return null }, t.prototype._mouseDrag = function (e) { return null }, t.prototype._mouseStop = function (e) { return null }, t.prototype.setMouseDelay = function (e) { return this.mouse_delay = e }, t.prototype._touchStart = function (e) { var t; if (!(e.originalEvent.touches.length > 1)) return t = e.originalEvent.changedTouches[0], this._handleMouseDown(e, this._getPositionInfo(t)) }, t.prototype._touchMove = function (e) { var t; if (!(e.originalEvent.touches.length > 1)) return t = e.originalEvent.changedTouches[0], this._handleMouseMove(e, this._getPositionInfo(t)) }, t.prototype._touchEnd = function (e) { var t; if (!(e.originalEvent.touches.length > 1)) return t = e.originalEvent.changedTouches[0], this._handleMouseUp(this._getPositionInfo(t)) }, t }(i), t.exports = r }, { "./simple.widget": 10 }], 5: [function (e, t, n) { var o, r, i; o = jQuery, i = { getName: function (e) { return i.strings[e - 1] }, nameToIndex: function (e) { var t, n, o; for (t = n = 1, o = i.strings.length; o >= 1 ? o >= n : n >= o; t = o >= 1 ? ++n : --n) if (i.strings[t - 1] === e) return t; return 0 } }, i.BEFORE = 1, i.AFTER = 2, i.INSIDE = 3, i.NONE = 4, i.strings = ["before", "after", "inside", "none"], r = function () { function e(t, n, o) { null == n && (n = !1), null == o && (o = e), this.name = "", this.setData(t), this.children = [], this.parent = null, n && (this.id_mapping = {}, this.tree = this, this.node_class = o) } return e.prototype.setData = function (e) { var t, n, o; if (n = function (e) { return function (t) { return null !== t ? e.name = t : void 0 } }(this), "object" != typeof e) n(e); else for (t in e) o = e[t], "label" === t ? n(o) : "children" !== t && (this[t] = o); return null }, e.prototype.initFromData = function (e) { var t, n; return n = function (e) { return function (n) { return e.setData(n), n.children ? t(n.children) : void 0 } }(this), t = function (e) { return function (t) { var n, o, r, i; for (o = 0, r = t.length; r > o; o++) n = t[o], i = new e.tree.node_class(""), i.initFromData(n), e.addChild(i); return null } }(this), n(e), null }, e.prototype.loadFromData = function (e) { var t, n, o, r; for (this.removeChildren(), t = 0, n = e.length; n > t; t++) r = e[t], o = new this.tree.node_class(r), this.addChild(o), "object" == typeof r && r.children && o.loadFromData(r.children); return null }, e.prototype.addChild = function (e) { return this.children.push(e), e._setParent(this) }, e.prototype.addChildAtPosition = function (e, t) { return this.children.splice(t, 0, e), e._setParent(this) }, e.prototype._setParent = function (e) { return this.parent = e, this.tree = e.tree, this.tree.addNodeToIndex(this) }, e.prototype.removeChild = function (e) { return e.removeChildren(), this._removeChild(e) }, e.prototype._removeChild = function (e) { return this.children.splice(this.getChildIndex(e), 1), this.tree.removeNodeFromIndex(e) }, e.prototype.getChildIndex = function (e) { return o.inArray(e, this.children) }, e.prototype.hasChildren = function () { return 0 !== this.children.length }, e.prototype.isFolder = function () { return this.hasChildren() || this.load_on_demand }, e.prototype.iterate = function (e) { var t; return t = function (n, o) { var r, i, s, l, d; if (n.children) { for (l = n.children, i = 0, s = l.length; s > i; i++) r = l[i], d = e(r, o), d && r.hasChildren() && t(r, o + 1); return null } }, t(this, 0), null }, e.prototype.moveNode = function (e, t, n) { return e.isParentOf(t) ? void 0 : (e.parent._removeChild(e), n === i.AFTER ? t.parent.addChildAtPosition(e, t.parent.getChildIndex(t) + 1) : n === i.BEFORE ? t.parent.addChildAtPosition(e, t.parent.getChildIndex(t)) : n === i.INSIDE ? t.addChildAtPosition(e, 0) : void 0) }, e.prototype.getData = function (e) { var t; return null == e && (e = !1), (t = function (e) { var n, o, r, i, s, l, d; for (n = [], o = 0, i = e.length; i > o; o++) { s = e[o], l = {}; for (r in s) d = s[r], "parent" !== r && "children" !== r && "element" !== r && "tree" !== r && Object.prototype.hasOwnProperty.call(s, r) && (l[r] = d); s.hasChildren() && (l.children = t(s.children)), n.push(l) } return n })(e ? [this] : this.children) }, e.prototype.getNodeByName = function (e) { return this.getNodeByCallback(function (t) { return t.name === e }) }, e.prototype.getNodeByCallback = function (e) { var t; return t = null, this.iterate(function (n) { return e(n) ? (t = n, !1) : !0 }), t }, e.prototype.addAfter = function (e) { var t, n; return this.parent ? (n = new this.tree.node_class(e), t = this.parent.getChildIndex(this), this.parent.addChildAtPosition(n, t + 1), "object" == typeof e && e.children && e.children.length && n.loadFromData(e.children), n) : null }, e.prototype.addBefore = function (e) { var t, n; return this.parent ? (n = new this.tree.node_class(e), t = this.parent.getChildIndex(this), this.parent.addChildAtPosition(n, t), "object" == typeof e && e.children && e.children.length && n.loadFromData(e.children), n) : null }, e.prototype.addParent = function (e) { var t, n, o, r, i, s; if (this.parent) { for (r = new this.tree.node_class(e), r._setParent(this.tree), i = this.parent, s = i.children, n = 0, o = s.length; o > n; n++) t = s[n], r.addChild(t); return i.children = [], i.addChild(r), r } return null }, e.prototype.remove = function () { return this.parent ? (this.parent.removeChild(this), this.parent = null) : void 0 }, e.prototype.append = function (e) { var t; return t = new this.tree.node_class(e), this.addChild(t), "object" == typeof e && e.children && e.children.length && t.loadFromData(e.children), t }, e.prototype.prepend = function (e) { var t; return t = new this.tree.node_class(e), this.addChildAtPosition(t, 0), "object" == typeof e && e.children && e.children.length && t.loadFromData(e.children), t }, e.prototype.isParentOf = function (e) { var t; for (t = e.parent; t;) { if (t === this) return !0; t = t.parent } return !1 }, e.prototype.getLevel = function () { var e, t; for (e = 0, t = this; t.parent;) e += 1, t = t.parent; return e }, e.prototype.getNodeById = function (e) { return this.id_mapping[e] }, e.prototype.addNodeToIndex = function (e) { return null != e.id ? this.id_mapping[e.id] = e : void 0 }, e.prototype.removeNodeFromIndex = function (e) { return null != e.id ? delete this.id_mapping[e.id] : void 0 }, e.prototype.removeChildren = function () { return this.iterate(function (e) { return function (t) { return e.tree.removeNodeFromIndex(t), !0 } }(this)), this.children = [] }, e.prototype.getPreviousSibling = function () { var e; return this.parent ? (e = this.parent.getChildIndex(this) - 1, e >= 0 ? this.parent.children[e] : null) : null }, e.prototype.getNextSibling = function () { var e; return this.parent ? (e = this.parent.getChildIndex(this) + 1, e < this.parent.children.length ? this.parent.children[e] : null) : null }, e.prototype.getNodesByProperty = function (e, t) { return this.filter(function (n) { return n[e] === t }) }, e.prototype.filter = function (e) { var t; return t = [], this.iterate(function (n) { return e(n) && t.push(n), !0 }), t }, e.prototype.getNextNode = function (e) { var t; return null == e && (e = !0), e && this.hasChildren() && this.is_open ? this.children[0] : this.parent ? (t = this.getNextSibling(), t ? t : this.parent.getNextNode(!1)) : null }, e.prototype.getPreviousNode = function () { var e; return this.parent ? (e = this.getPreviousSibling(), e ? e.hasChildren() && e.is_open ? e.getLastChild() : e : this.getParent()) : null }, e.prototype.getParent = function () { return this.parent && this.parent.parent ? this.parent : null }, e.prototype.getLastChild = function () { var e; return this.hasChildren() ? (e = this.children[this.children.length - 1], e.hasChildren() && e.is_open ? e.getLastChild() : e) : null }, e }(), t.exports = { Node: r, Position: i } }, {}], 6: [function (e, t, n) { var o, r, i, s, l, d, a, u = function (e, t) { function n() { this.constructor = e } for (var o in t) h.call(t, o) && (e[o] = t[o]); return n.prototype = t.prototype, e.prototype = new n, e.__super__ = t.prototype, e }, h = {}.hasOwnProperty; a = e("./node"), d = a.Position, o = jQuery, l = function () { function e(e, t) { this.init(e, t) } return e.prototype.init = function (e, t) { return this.node = e, this.tree_widget = t, e.element || (e.element = this.tree_widget.element), this.$element = o(e.element) }, e.prototype.getUl = function () { return this.$element.children("ul:first") }, e.prototype.getSpan = function () { return this.$element.children(".jqtree-element").find("span.jqtree-title") }, e.prototype.getLi = function () { return this.$element }, e.prototype.addDropHint = function (e) { return e === d.INSIDE ? new r(this.$element) : new s(this.node, this.$element, e) }, e.prototype.select = function () { var e, t; return e = this.getLi(), e.addClass("jqtree-selected"), e.attr("aria-selected", "true"), t = this.getSpan(), t.attr("tabindex", 0) }, e.prototype.deselect = function () { var e, t; return e = this.getLi(), e.removeClass("jqtree-selected"), e.attr("aria-selected", "false"), t = this.getSpan(), t.attr("tabindex", -1) }, e }(), i = function (e) { function t() { return t.__super__.constructor.apply(this, arguments) } return u(t, e), t.prototype.open = function (e, t) { var n, o; return null == t && (t = !0), this.node.is_open ? void 0 : (this.node.is_open = !0, n = this.getButton(), n.removeClass("jqtree-closed"), n.html(""), n.append(this.tree_widget.renderer.opened_icon_element.cloneNode(!1)), o = function (t) { return function () { var n, o; return n = t.getLi(), n.removeClass("jqtree-closed"), o = t.getSpan(), o.attr("aria-expanded", "true"), e && e(), t.tree_widget._triggerEvent("tree.open", { node: t.node }) } }(this), t ? this.getUl().slideDown("fast", o) : (this.getUl().show(), o())) }, t.prototype.close = function (e) { var t, n; return null == e && (e = !0), this.node.is_open ? (this.node.is_open = !1, t = this.getButton(), t.addClass("jqtree-closed"), t.html(""), t.append(this.tree_widget.renderer.closed_icon_element.cloneNode(!1)), n = function (e) { return function () { var t, n; return t = e.getLi(), t.addClass("jqtree-closed"), n = e.getSpan(), n.attr("aria-expanded", "false"), e.tree_widget._triggerEvent("tree.close", { node: e.node }) } }(this), e ? this.getUl().slideUp("fast", n) : (this.getUl().hide(), n())) : void 0 }, t.prototype.getButton = function () { return this.$element.children(".jqtree-element").find("a.jqtree-toggler") }, t.prototype.addDropHint = function (e) { return this.node.is_open || e !== d.INSIDE ? new s(this.node, this.$element, e) : new r(this.$element) }, t }(l), r = function () { function e(e) { var t, n; t = e.children(".jqtree-element"), n = e.width() - 4, this.$hint = o('<span class="jqtree-border"></span>'), t.append(this.$hint), this.$hint.css({ width: n, height: t.outerHeight() - 4 }) } return e.prototype.remove = function () { return this.$hint.remove() }, e }(), s = function () { function e(e, t, n) { this.$element = t, this.node = e, this.$ghost = o('<li class="jqtree_common jqtree-ghost"><span class="jqtree_common jqtree-circle"></span><span class="jqtree_common jqtree-line"></span></li>'), n === d.AFTER ? this.moveAfter() : n === d.BEFORE ? this.moveBefore() : n === d.INSIDE && (e.isFolder() && e.is_open ? this.moveInsideOpenFolder() : this.moveInside()) } return e.prototype.remove = function () { return this.$ghost.remove() }, e.prototype.moveAfter = function () { return this.$element.after(this.$ghost) }, e.prototype.moveBefore = function () { return this.$element.before(this.$ghost) }, e.prototype.moveInsideOpenFolder = function () { return o(this.node.children[0].element).before(this.$ghost) }, e.prototype.moveInside = function () { return this.$element.after(this.$ghost), this.$ghost.addClass("jqtree-inside") }, e }(), t.exports = { BorderDropHint: r, FolderElement: i, GhostDropHint: s, NodeElement: l } }, { "./node": 5 }], 7: [function (e, t, n) { var o, r, i, s, l; l = e("./util"), i = l.indexOf, s = l.isInt, o = jQuery, r = function () { function e(e) { this.tree_widget = e } return e.prototype.saveState = function () { var e; return e = JSON.stringify(this.getState()), this.tree_widget.options.onSetStateFromStorage ? this.tree_widget.options.onSetStateFromStorage(e) : this.supportsLocalStorage() ? localStorage.setItem(this.getCookieName(), e) : o.cookie ? (o.cookie.raw = !0, o.cookie(this.getCookieName(), e, { path: "/" })) : void 0 }, e.prototype.getStateFromStorage = function () { var e; return e = this._loadFromStorage(), e ? this._parseState(e) : null }, e.prototype._parseState = function (e) { var t; return t = o.parseJSON(e), t && t.selected_node && s(t.selected_node) && (t.selected_node = [t.selected_node]), t }, e.prototype._loadFromStorage = function () { return this.tree_widget.options.onGetStateFromStorage ? this.tree_widget.options.onGetStateFromStorage() : this.supportsLocalStorage() ? localStorage.getItem(this.getCookieName()) : o.cookie ? (o.cookie.raw = !0, o.cookie(this.getCookieName())) : null }, e.prototype.getState = function () { var e, t; return e = function (e) { return function () { var t; return t = [], e.tree_widget.tree.iterate(function (e) { return e.is_open && e.id && e.hasChildren() && t.push(e.id), !0 }), t } }(this), t = function (e) { return function () { var t; return function () { var e, n, o, r; for (o = this.tree_widget.getSelectedNodes(), r = [], e = 0, n = o.length; n > e; e++) t = o[e], r.push(t.id); return r }.call(e) } }(this), { open_nodes: e(), selected_node: t() } }, e.prototype.setInitialState = function (e) { var t; return e ? (t = this._openInitialNodes(e.open_nodes), this._selectInitialNodes(e.selected_node), t) : !1 }, e.prototype._openInitialNodes = function (e) { var t, n, o, r, i; for (o = !1, t = 0, n = e.length; n > t; t++) i = e[t], r = this.tree_widget.getNodeById(i), r && (r.load_on_demand ? o = !0 : r.is_open = !0); return o }, e.prototype._selectInitialNodes = function (e) { var t, n, o, r, i; for (i = 0, t = 0, n = e.length; n > t; t++) r = e[t], o = this.tree_widget.getNodeById(r), o && (i += 1, this.tree_widget.select_node_handler.addToSelection(o)); return 0 !== i }, e.prototype.setInitialStateOnDemand = function (e, t) { return e ? this._setInitialStateOnDemand(e.open_nodes, e.selected_node, t) : t() }, e.prototype._setInitialStateOnDemand = function (e, t, n) { var o, r, i; return r = 0, i = function (i) { return function () { var s, l, d, a, u; for (d = [], s = 0, l = e.length; l > s; s++) u = e[s], a = i.tree_widget.getNodeById(u), a ? a.is_loading || (a.load_on_demand ? o(a) : i.tree_widget._openNode(a, !1)) : d.push(u); return e = d, i._selectInitialNodes(t) && i.tree_widget._refreshElements(), 0 === r ? n() : void 0 } }(this), o = function (e) { return function (t) { return r += 1, e.tree_widget._openNode(t, !1, function () { return r -= 1, i() }) } }(this), i() }, e.prototype.getCookieName = function () { return "string" == typeof this.tree_widget.options.saveState ? this.tree_widget.options.saveState : "tree" }, e.prototype.supportsLocalStorage = function () { var e; return e = function () { var e, t; if ("undefined" == typeof localStorage || null === localStorage) return !1; try { t = "_storage_test", sessionStorage.setItem(t, !0), sessionStorage.removeItem(t) } catch (n) { return e = n, !1 } return !0 }, null == this._supportsLocalStorage && (this._supportsLocalStorage = e()), this._supportsLocalStorage }, e.prototype.getNodeIdToBeSelected = function () { var e; return e = this.getStateFromStorage(), e && e.selected_node ? e.selected_node[0] : null }, e }(), t.exports = r }, { "./util": 12 }], 8: [function (e, t, n) {
        var o, r; o = jQuery, r = function () {
            function e(e) { this.tree_widget = e, this.previous_top = -1, this.is_initialized = !1, this._initScrollParent() } return e.prototype._initScrollParent = function () { var e, t, n; return t = function (e) { return function () { var t, n, r, i, s, l; if (t = ["overflow", "overflow-y"], (r = function (e) { var n, r, i, s; for (r = 0, i = t.length; i > r; r++) if (n = t[r], "auto" === (s = o.css(e, n)) || "scroll" === s) return !0; return !1 })(e.tree_widget.$el[0])) return e.tree_widget.$el; for (l = e.tree_widget.$el.parents(), i = 0, s = l.length; s > i; i++) if (n = l[i], r(n)) return o(n); return null } }(this), n = function (e) { return function () { return e.scroll_parent_top = 0, e.$scroll_parent = null } }(this), "fixed" === this.tree_widget.$el.css("position") && n(), e = t(), e && e.length && "HTML" !== e[0].tagName ? (this.$scroll_parent = e, this.scroll_parent_top = this.$scroll_parent.offset().top) : n(), this.is_initialized = !0 }, e.prototype._ensureInit = function () { return this.is_initialized ? void 0 : this._initScrollParent() }, e.prototype.checkScrolling = function () { var e; return this._ensureInit(), e = this.tree_widget.dnd_handler.hovered_area, e && e.top !== this.previous_top ? (this.previous_top = e.top, this.$scroll_parent ? this._handleScrollingWithScrollParent(e) : this._handleScrollingWithDocument(e)) : void 0 }, e.prototype._handleScrollingWithScrollParent = function (e) {
                var t; return t = this.scroll_parent_top + this.$scroll_parent[0].offsetHeight - e.bottom, 20 > t ? (this.$scroll_parent[0].scrollTop += 20, this.tree_widget.refreshHitAreas(), this.previous_top = -1) : e.top - this.scroll_parent_top < 20 ? (this.$scroll_parent[0].scrollTop -= 20, this.tree_widget.refreshHitAreas(), this.previous_top = -1) : void 0
            }, e.prototype._handleScrollingWithDocument = function (e) { var t; return t = e.top - o(document).scrollTop(), 20 > t ? o(document).scrollTop(o(document).scrollTop() - 20) : o(window).height() - (e.bottom - o(document).scrollTop()) < 20 ? o(document).scrollTop(o(document).scrollTop() + 20) : void 0 }, e.prototype.scrollTo = function (e) { var t; return this._ensureInit(), this.$scroll_parent ? this.$scroll_parent[0].scrollTop = e : (t = this.tree_widget.$el.offset().top, o(document).scrollTop(e + t)) }, e.prototype.isScrolledIntoView = function (e) { var t, n, r, i, s; return this._ensureInit(), t = o(e), this.$scroll_parent ? (s = 0, i = this.$scroll_parent.height(), r = t.offset().top - this.scroll_parent_top, n = r + t.height()) : (s = o(window).scrollTop(), i = s + o(window).height(), r = t.offset().top, n = r + t.height()), i >= n && r >= s }, e
        }(), t.exports = r
    }, {}], 9: [function (e, t, n) { var o, r; o = jQuery, r = function () { function e(e) { this.tree_widget = e, this.clear() } return e.prototype.getSelectedNode = function () { var e; return e = this.getSelectedNodes(), e.length ? e[0] : !1 }, e.prototype.getSelectedNodes = function () { var e, t, n; if (this.selected_single_node) return [this.selected_single_node]; n = []; for (e in this.selected_nodes) t = this.tree_widget.getNodeById(e), t && n.push(t); return n }, e.prototype.getSelectedNodesUnder = function (e) { var t, n, o; if (this.selected_single_node) return e.isParentOf(this.selected_single_node) ? [this.selected_single_node] : []; o = []; for (t in this.selected_nodes) n = this.tree_widget.getNodeById(t), n && e.isParentOf(n) && o.push(n); return o }, e.prototype.isNodeSelected = function (e) { return e ? e.id ? this.selected_nodes[e.id] ? !0 : !1 : this.selected_single_node ? this.selected_single_node.element === e.element : !1 : !1 }, e.prototype.clear = function () { return this.selected_nodes = {}, this.selected_single_node = null }, e.prototype.removeFromSelection = function (e, t) { if (null == t && (t = !1), e.id) { if (delete this.selected_nodes[e.id], t) return e.iterate(function (t) { return function (n) { return delete t.selected_nodes[e.id], !0 } }(this)) } else if (this.selected_single_node && e.element === this.selected_single_node.element) return this.selected_single_node = null }, e.prototype.addToSelection = function (e) { return e.id ? this.selected_nodes[e.id] = !0 : this.selected_single_node = e }, e }(), t.exports = r }, {}], 10: [function (e, t, n) { var o, r, i = [].slice; o = jQuery, r = function () { function e(e, t) { this.$el = o(e), this.options = o.extend({}, this.defaults, t) } return e.prototype.defaults = {}, e.prototype.destroy = function () { return this._deinit() }, e.prototype._init = function () { return null }, e.prototype._deinit = function () { return null }, e.register = function (t, n) { var r, s, l, d, a; return d = function () { return "simple_widget_" + n }, a = function (t, n) { var r; return r = o.data(t, n), r && r instanceof e ? r : null }, s = function (e, n) { var r, i, s, l, u, h; for (r = d(), l = 0, u = e.length; u > l; l++) i = e[l], s = a(i, r), s || (h = new t(i, n), o.data(i, r) || o.data(i, r, h), h._init()); return e }, l = function (e) { var t, n, r, i, s, l; for (t = d(), s = [], r = 0, i = e.length; i > r; r++) n = e[r], l = a(n, t), l && l.destroy(), s.push(o.removeData(n, t)); return s }, r = function (t, n, r) { var i, s, l, a, u, h; for (a = null, s = 0, l = t.length; l > s; s++) i = t[s], u = o.data(i, d()), u && u instanceof e && (h = u[n], h && "function" == typeof h && (a = h.apply(u, r))); return a }, o.fn[n] = function () { var e, n, o, d, a; return o = arguments[0], n = 2 <= arguments.length ? i.call(arguments, 1) : [], e = this, void 0 === o || "object" == typeof o ? (a = o, s(e, a)) : "string" == typeof o && "_" !== o[0] ? (d = o, "destroy" === d ? l(e) : "get_widget_class" === d ? t : r(e, d, n)) : void 0 } }, e }(), t.exports = r }, {}], 11: [function (e, t, n) { var o, r, i, s, l, d, a, u, h, p, c, _, f, g, m, v, y, N, S, w, D, F, C, E = function (e, t) { function n() { this.constructor = e } for (var o in t) I.call(t, o) && (e[o] = t[o]); return n.prototype = t.prototype, e.prototype = new n, e.__super__ = t.prototype, e }, I = {}.hasOwnProperty; S = e("./version"), w = e("./drag_and_drop_handler"), l = e("./elements_renderer"), p = e("./key_handler"), c = e("./mouse.widget"), m = e("./save_state_handler"), v = e("./scroll_handler"), y = e("./select_node_handler"), N = e("./simple.widget"), D = e("./node"), _ = D.Node, g = D.Position, C = e("./util"), F = e("./node_element"), r = F.BorderDropHint, d = F.FolderElement, a = F.GhostDropHint, f = F.NodeElement, i = w.DragAndDropHandler, s = w.DragElement, u = w.HitAreasGenerator, o = jQuery, h = function (e) { function t() { return t.__super__.constructor.apply(this, arguments) } return E(t, e), t.prototype.BorderDropHint = r, t.prototype.DragElement = s, t.prototype.DragAndDropHandler = i, t.prototype.ElementsRenderer = l, t.prototype.GhostDropHint = a, t.prototype.HitAreasGenerator = u, t.prototype.Node = _, t.prototype.SaveStateHandler = m, t.prototype.ScrollHandler = v, t.prototype.SelectNodeHandler = y, t.prototype.defaults = { autoOpen: !1, saveState: !1, dragAndDrop: !1, selectable: !0, useContextMenu: !0, onCanSelectNode: null, onSetStateFromStorage: null, onGetStateFromStorage: null, onCreateLi: null, onIsMoveHandle: null, onCanMove: null, onCanMoveTo: null, onLoadFailed: null, autoEscape: !0, dataUrl: null, closedIcon: null, openedIcon: "&#x25bc;", slide: !0, nodeClass: _, dataFilter: null, keyboardSupport: !0, openFolderDelay: 500, rtl: null, onDragMove: null, onDragStop: null, buttonLeft: !0, onLoading: null }, t.prototype.toggle = function (e, t) { return null == t && (t = null), null === t && (t = this.options.slide), e.is_open ? this.closeNode(e, t) : this.openNode(e, t), this.element }, t.prototype.getTree = function () { return this.tree }, t.prototype.selectNode = function (e) { return this._selectNode(e, !1), this.element }, t.prototype._selectNode = function (e, t) { var n, o, r, i; if (null == t && (t = !1), this.select_node_handler) { if (n = function (t) { return function () { return t.options.onCanSelectNode ? t.options.selectable && t.options.onCanSelectNode(e) : t.options.selectable } }(this), r = function (t) { return function () { var n; return n = e.parent, n && n.parent && !n.is_open ? t.openNode(n, !1) : void 0 } }(this), i = function (e) { return function () { return e.options.saveState ? e.save_state_handler.saveState() : void 0 } }(this), !e) return this._deselectCurrentNode(), void i(); if (n()) return this.select_node_handler.isNodeSelected(e) ? t && (this._deselectCurrentNode(), this._triggerEvent("tree.select", { node: null, previous_node: e })) : (o = this.getSelectedNode(), this._deselectCurrentNode(), this.addToSelection(e), this._triggerEvent("tree.select", { node: e, deselected_node: o }), r()), i() } }, t.prototype.getSelectedNode = function () { return this.select_node_handler ? this.select_node_handler.getSelectedNode() : null }, t.prototype.toJson = function () { return JSON.stringify(this.tree.getData()) }, t.prototype.loadData = function (e, t) { return this._loadData(e, t), this.element }, t.prototype.loadDataFromUrl = function (e, t, n) { return "string" === o.type(e) ? this._loadDataFromUrl(e, t, n) : this._loadDataFromUrl(null, e, t), this.element }, t.prototype.reload = function (e) { return this._loadDataFromUrl(null, null, e), this.element }, t.prototype._loadDataFromUrl = function (e, t, n) { var r, i, s, l, d, a, u, h; r = null, i = function (e) { return function () { return r = t ? o(t.element) : e.element, r.addClass("jqtree-loading"), e._notifyLoading(!0, t, r) } }(this), h = function (e) { return function () { return r ? (r.removeClass("jqtree-loading"), e._notifyLoading(!1, t, r)) : void 0 } }(this), u = function () { return "string" === o.type(e) ? { url: e } : (e.method || (e.method = "get"), e) }, s = function (e) { return function (r) { return h(), e._loadData(r, t), n && o.isFunction(n) ? n() : void 0 } }(this), d = function (e) { return function (t) { var n; return n = o.isArray(t) || "object" == typeof t ? t : null != n ? o.parseJSON(t) : [], e.options.dataFilter && (n = e.options.dataFilter(n)), s(n) } }(this), l = function (e) { return function (t) { return h(), e.options.onLoadFailed ? e.options.onLoadFailed(t) : void 0 } }(this), a = function () { return e = u(), o.ajax(o.extend({}, e, { method: null != e.method ? e.method.toUpperCase() : "GET", cache: !1, dataType: "json", success: d, error: l })) }, e || (e = this._getDataUrlInfo(t)), i(), e ? o.isArray(e) ? s(e) : a() : h() }, t.prototype._loadData = function (e, t) { var n, o; return null == t && (t = null), n = function (e) { return function () { var n, o, r, i; if (e.select_node_handler) for (i = e.select_node_handler.getSelectedNodesUnder(t), n = 0, o = i.length; o > n; n++) r = i[n], e.select_node_handler.removeFromSelection(r); return null } }(this), o = function (n) { return function () { return t.loadFromData(e), t.load_on_demand = !1, t.is_loading = !1, n._refreshElements(t) } }(this), e ? (this._triggerEvent("tree.load_data", { tree_data: e }), t ? (n(), o()) : this._initTree(e), this.isDragging() ? this.dnd_handler.refresh() : void 0) : void 0 }, t.prototype.getNodeById = function (e) { return this.tree.getNodeById(e) }, t.prototype.getNodeByName = function (e) { return this.tree.getNodeByName(e) }, t.prototype.getNodesByProperty = function (e, t) { return this.tree.getNodesByProperty(e, t) }, t.prototype.getNodeByHtmlElement = function (e) { return this._getNode(o(e)) }, t.prototype.getNodeByCallback = function (e) { return this.tree.getNodeByCallback(e) }, t.prototype.openNode = function (e, t) { return null == t && (t = null), e && (null === t && (t = this.options.slide), this._openNode(e, t)), this.element }, t.prototype._openNode = function (e, t, n) { var o, r; if (null == t && (t = !0), o = function (e) { return function (t, n, o) { var r; return r = new d(t, e), r.open(o, n) } }(this), e.isFolder()) { if (e.load_on_demand) return this._loadFolderOnDemand(e, t, n); for (r = e.parent; r;) r.parent && o(r, !1, null), r = r.parent; return o(e, t, n), this._saveState() } }, t.prototype._loadFolderOnDemand = function (e, t, n) { return null == t && (t = !0), e.is_loading = !0, this._loadDataFromUrl(null, e, function (o) { return function () { return o._openNode(e, t, n) } }(this)) }, t.prototype.closeNode = function (e, t) { return null == t && (t = null), null === t && (t = this.options.slide), e.isFolder() && (new d(e, this).close(t), this._saveState()), this.element }, t.prototype.isDragging = function () { return this.dnd_handler ? this.dnd_handler.is_dragging : !1 }, t.prototype.refreshHitAreas = function () { return this.dnd_handler.refresh(), this.element }, t.prototype.addNodeAfter = function (e, t) { var n; return n = t.addAfter(e), this._refreshElements(t.parent), n }, t.prototype.addNodeBefore = function (e, t) { var n; return n = t.addBefore(e), this._refreshElements(t.parent), n }, t.prototype.addParentNode = function (e, t) { var n; return n = t.addParent(e), this._refreshElements(n.parent), n }, t.prototype.removeNode = function (e) { var t; return t = e.parent, t && (this.select_node_handler.removeFromSelection(e, !0), e.remove(), this._refreshElements(t)), this.element }, t.prototype.appendNode = function (e, t) { var n; return t = t || this.tree, n = t.append(e), this._refreshElements(t), n }, t.prototype.prependNode = function (e, t) { var n; return t || (t = this.tree), n = t.prepend(e), this._refreshElements(t), n }, t.prototype.updateNode = function (e, t) { var n; return n = t.id && t.id !== e.id, n && this.tree.removeNodeFromIndex(e), e.setData(t), n && this.tree.addNodeToIndex(e), "object" == typeof t && t.children && (e.removeChildren(), t.children.length && e.loadFromData(t.children)), this.renderer.renderFromNode(e), this._selectCurrentNode(), this.element }, t.prototype.moveNode = function (e, t, n) { var o; return o = g.nameToIndex(n), this.tree.moveNode(e, t, o), this._refreshElements(), this.element }, t.prototype.getStateFromStorage = function () { return this.save_state_handler.getStateFromStorage() }, t.prototype.addToSelection = function (e) { return e && (this.select_node_handler.addToSelection(e), this._getNodeElementForNode(e).select(), this._saveState()), this.element }, t.prototype.getSelectedNodes = function () { return this.select_node_handler.getSelectedNodes() }, t.prototype.isNodeSelected = function (e) { return this.select_node_handler.isNodeSelected(e) }, t.prototype.removeFromSelection = function (e) { return this.select_node_handler.removeFromSelection(e), this._getNodeElementForNode(e).deselect(), this._saveState(), this.element }, t.prototype.scrollToNode = function (e) { var t, n; return t = o(e.element), n = t.offset().top - this.$el.offset().top, this.scroll_handler.scrollTo(n), this.element }, t.prototype.getState = function () { return this.save_state_handler.getState() }, t.prototype.setState = function (e) { return this.save_state_handler.setInitialState(e), this._refreshElements(), this.element }, t.prototype.setOption = function (e, t) { return this.options[e] = t, this.element }, t.prototype.moveDown = function () { return this.key_handler && this.key_handler.moveDown(), this.element }, t.prototype.moveUp = function () { return this.key_handler && this.key_handler.moveUp(), this.element }, t.prototype.getVersion = function () { return S }, t.prototype._init = function () { return t.__super__._init.call(this), this.element = this.$el, this.mouse_delay = 300, this.is_initialized = !1, this.options.rtl = this._getRtlOption(), this.options.closedIcon || (this.options.closedIcon = this._getDefaultClosedIcon()), this.renderer = new l(this), null != m ? this.save_state_handler = new m(this) : this.options.saveState = !1, null != y && (this.select_node_handler = new y(this)), null != i ? this.dnd_handler = new i(this) : this.options.dragAndDrop = !1, null != v && (this.scroll_handler = new v(this)), null != p && null != y && (this.key_handler = new p(this)), this._initData(), this.element.click(o.proxy(this._click, this)), this.element.dblclick(o.proxy(this._dblclick, this)), this.options.useContextMenu ? this.element.bind("contextmenu", o.proxy(this._contextmenu, this)) : void 0 }, t.prototype._deinit = function () { return this.element.empty(), this.element.unbind(), this.key_handler && this.key_handler.deinit(), this.tree = null, t.__super__._deinit.call(this) }, t.prototype._initData = function () { var e; return this.options.data ? this._loadData(this.options.data) : (e = this._getDataUrlInfo(), e ? this._loadDataFromUrl() : this._loadData([])) }, t.prototype._getDataUrlInfo = function (e) { var t, n; return t = this.options.dataUrl || this.element.data("url"), n = function (n) { return function () { var o, r, i; return i = { url: t }, e && e.id ? (o = { node: e.id }, i.data = o) : (r = n._getNodeIdToBeSelected(), r && (o = { selected_node: r }, i.data = o)), i } }(this), o.isFunction(t) ? t(e) : "string" === o.type(t) ? n() : t }, t.prototype._getNodeIdToBeSelected = function () { return this.options.saveState ? this.save_state_handler.getNodeIdToBeSelected() : null }, t.prototype._initTree = function (e) { var t, n; return t = function (e) { return function () { return e.is_initialized ? void 0 : (e.is_initialized = !0, e._triggerEvent("tree.init")) } }(this), this.tree = new this.options.nodeClass(null, !0, this.options.nodeClass), this.select_node_handler && this.select_node_handler.clear(), this.tree.loadFromData(e), n = this._setInitialState(), this._refreshElements(), n ? this._setInitialStateOnDemand(t) : t() }, t.prototype._setInitialState = function () { var e, t, n, o, r; return r = function (e) { return function () { var t, n; return e.options.saveState && e.save_state_handler ? (n = e.save_state_handler.getStateFromStorage(), n ? (t = e.save_state_handler.setInitialState(n), [!0, t]) : [!1, !1]) : [!1, !1] } }(this), e = function (e) { return function () { var t, n; return e.options.autoOpen === !1 ? !1 : (t = e._getAutoOpenMaxLevel(), n = !1, e.tree.iterate(function (e, o) { return e.load_on_demand ? (n = !0, !1) : e.hasChildren() ? (e.is_open = !0, o !== t) : !1 }), n) } }(this), o = r(), t = o[0], n = o[1], t || (n = e()), n }, t.prototype._setInitialStateOnDemand = function (e) { var t, n; return n = function (t) { return function () { var n; return t.options.saveState && t.save_state_handler ? (n = t.save_state_handler.getStateFromStorage(), n ? (t.save_state_handler.setInitialStateOnDemand(n, e), !0) : !1) : !1 } }(this), t = function (t) { return function () { var n, o, r, i; return r = t._getAutoOpenMaxLevel(), o = 0, n = function (e) { return o += 1, t._openNode(e, !1, function () { return o -= 1, i() }) }, (i = function () { return t.tree.iterate(function (e, o) { return e.load_on_demand ? (e.is_loading || n(e), !1) : (t._openNode(e, !1), o !== r) }), 0 === o ? e() : void 0 })() } }(this), n() ? void 0 : t() }, t.prototype._getAutoOpenMaxLevel = function () { return this.options.autoOpen === !0 ? -1 : parseInt(this.options.autoOpen) }, t.prototype._refreshElements = function (e) { return null == e && (e = null), this.renderer.render(e), this._triggerEvent("tree.refresh") }, t.prototype._click = function (e) { var t, n, o; if (t = this._getClickTarget(e.target)) { if ("button" === t.type) return this.toggle(t.node, this.options.slide), e.preventDefault(), e.stopPropagation(); if ("label" === t.type && (o = t.node, n = this._triggerEvent("tree.click", { node: o, click_event: e }), !n.isDefaultPrevented())) return this._selectNode(o, !0) } }, t.prototype._dblclick = function (e) { var t; return t = this._getClickTarget(e.target), t && "label" === t.type ? this._triggerEvent("tree.dblclick", { node: t.node, click_event: e }) : void 0 }, t.prototype._getClickTarget = function (e) { var t, n, r, i; if (r = o(e), t = r.closest(".jqtree-toggler"), t.length) { if (i = this._getNode(t)) return { type: "button", node: i } } else if (n = r.closest(".jqtree-element"), n.length && (i = this._getNode(n))) return { type: "label", node: i }; return null }, t.prototype._getNode = function (e) { var t; return t = e.closest("li.jqtree_common"), 0 === t.length ? null : t.data("node") }, t.prototype._getNodeElementForNode = function (e) { return e.isFolder() ? new d(e, this) : new f(e, this) }, t.prototype._getNodeElement = function (e) { var t; return t = this._getNode(e), t ? this._getNodeElementForNode(t) : null }, t.prototype._contextmenu = function (e) { var t, n; return t = o(e.target).closest("ul.jqtree-tree .jqtree-element"), t.length && (n = this._getNode(t)) ? (e.preventDefault(), e.stopPropagation(), this._triggerEvent("tree.contextmenu", { node: n, click_event: e }), !1) : void 0 }, t.prototype._saveState = function () { return this.options.saveState ? this.save_state_handler.saveState() : void 0 }, t.prototype._mouseCapture = function (e) { return this.options.dragAndDrop ? this.dnd_handler.mouseCapture(e) : !1 }, t.prototype._mouseStart = function (e) { return this.options.dragAndDrop ? this.dnd_handler.mouseStart(e) : !1 }, t.prototype._mouseDrag = function (e) { var t; return this.options.dragAndDrop ? (t = this.dnd_handler.mouseDrag(e), this.scroll_handler && this.scroll_handler.checkScrolling(), t) : !1 }, t.prototype._mouseStop = function (e) { return this.options.dragAndDrop ? this.dnd_handler.mouseStop(e) : !1 }, t.prototype._triggerEvent = function (e, t) { var n; return n = o.Event(e), o.extend(n, t), this.element.trigger(n), n }, t.prototype.testGenerateHitAreas = function (e) { return this.dnd_handler.current_item = this._getNodeElementForNode(e), this.dnd_handler.generateHitAreas(), this.dnd_handler.hit_areas }, t.prototype._selectCurrentNode = function () { var e, t; return e = this.getSelectedNode(), e && (t = this._getNodeElementForNode(e)) ? t.select() : void 0 }, t.prototype._deselectCurrentNode = function () { var e; return e = this.getSelectedNode(), e ? this.removeFromSelection(e) : void 0 }, t.prototype._getDefaultClosedIcon = function () { return this.options.rtl ? "&#x25c0;" : "&#x25ba;" }, t.prototype._getRtlOption = function () { var e; return null !== this.options.rtl ? this.options.rtl : (e = this.element.data("rtl"), null != e && e !== !1 ? !0 : !1) }, t.prototype._notifyLoading = function (e, t, n) { return this.options.onLoading ? this.options.onLoading(e, t, n) : void 0 }, t }(c), h.getModule = function (e) { var t; return t = { node: D, util: C, drag_and_drop_handler: w }, t[e] }, N.register(h, "tree") }, { "./drag_and_drop_handler": 1, "./elements_renderer": 2, "./key_handler": 3, "./mouse.widget": 4, "./node": 5, "./node_element": 6, "./save_state_handler": 7, "./scroll_handler": 8, "./select_node_handler": 9, "./simple.widget": 10, "./util": 12, "./version": 13 }], 12: [function (e, t, n) { var o, r, i, s, l; o = function (e, t) { var n, o, r, i; for (n = o = 0, r = e.length; r > o; n = ++o) if (i = e[n], i === t) return n; return -1 }, s = function (e, t) { return e.indexOf ? e.indexOf(t) : o(e, t) }, l = function (e) { return "number" == typeof e && e % 1 === 0 }, i = function (e) { return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#x27;").replace(/\//g, "&#x2F;") }, r = function (e) { return e ? "true" : "false" }, t.exports = { _indexOf: o, getBoolString: r, html_escape: i, indexOf: s, isInt: l } }, {}], 13: [function (e, t, n) { t.exports = "1.3.6" }, {}]
}, {}, [11]);

/* raphael.min.js */
!function t(e, r) { "object" == typeof exports && "object" == typeof module ? module.exports = r() : "function" == typeof define && define.amd ? define([], r) : "object" == typeof exports ? exports.Raphael = r() : e.Raphael = r() }(this, function () {
    return function (t) { function e(i) { if (r[i]) return r[i].exports; var n = r[i] = { exports: {}, id: i, loaded: !1 }; return t[i].call(n.exports, n, n.exports, e), n.loaded = !0, n.exports } var r = {}; return e.m = t, e.c = r, e.p = "", e(0) }([function (t, e, r) { var i, n; i = [r(1), r(3), r(4)], n = function (t) { return t }.apply(e, i), !(void 0 !== n && (t.exports = n)) }, function (t, e, r) {
        var i, n; i = [r(2)], n = function (t) {
            function e(r) { if (e.is(r, "function")) return w ? r() : t.on("raphael.DOMload", r); if (e.is(r, Q)) return e._engine.create[z](e, r.splice(0, 3 + e.is(r[0], $))).add(r); var i = Array.prototype.slice.call(arguments, 0); if (e.is(i[i.length - 1], "function")) { var n = i.pop(); return w ? n.call(e._engine.create[z](e, i)) : t.on("raphael.DOMload", function () { n.call(e._engine.create[z](e, i)) }) } return e._engine.create[z](e, arguments) } function r(t) { if ("function" == typeof t || Object(t) !== t) return t; var e = new t.constructor; for (var i in t) t[A](i) && (e[i] = r(t[i])); return e } function i(t, e) { for (var r = 0, i = t.length; r < i; r++) if (t[r] === e) return t.push(t.splice(r, 1)[0]) } function n(t, e, r) { function n() { var a = Array.prototype.slice.call(arguments, 0), s = a.join("␀"), o = n.cache = n.cache || {}, l = n.count = n.count || []; return o[A](s) ? (i(l, s), r ? r(o[s]) : o[s]) : (l.length >= 1e3 && delete o[l.shift()], l.push(s), o[s] = t[z](e, a), r ? r(o[s]) : o[s]) } return n } function a() { return this.hex } function s(t, e) { for (var r = [], i = 0, n = t.length; n - 2 * !e > i; i += 2) { var a = [{ x: +t[i - 2], y: +t[i - 1] }, { x: +t[i], y: +t[i + 1] }, { x: +t[i + 2], y: +t[i + 3] }, { x: +t[i + 4], y: +t[i + 5] }]; e ? i ? n - 4 == i ? a[3] = { x: +t[0], y: +t[1] } : n - 2 == i && (a[2] = { x: +t[0], y: +t[1] }, a[3] = { x: +t[2], y: +t[3] }) : a[0] = { x: +t[n - 2], y: +t[n - 1] } : n - 4 == i ? a[3] = a[2] : i || (a[0] = { x: +t[i], y: +t[i + 1] }), r.push(["C", (-a[0].x + 6 * a[1].x + a[2].x) / 6, (-a[0].y + 6 * a[1].y + a[2].y) / 6, (a[1].x + 6 * a[2].x - a[3].x) / 6, (a[1].y + 6 * a[2].y - a[3].y) / 6, a[2].x, a[2].y]) } return r } function o(t, e, r, i, n) { var a = -3 * e + 9 * r - 9 * i + 3 * n, s = t * a + 6 * e - 12 * r + 6 * i; return t * s - 3 * e + 3 * r } function l(t, e, r, i, n, a, s, l, h) { null == h && (h = 1), h = h > 1 ? 1 : h < 0 ? 0 : h; for (var u = h / 2, c = 12, f = [-.1252, .1252, -.3678, .3678, -.5873, .5873, -.7699, .7699, -.9041, .9041, -.9816, .9816], p = [.2491, .2491, .2335, .2335, .2032, .2032, .1601, .1601, .1069, .1069, .0472, .0472], d = 0, g = 0; g < c; g++) { var v = u * f[g] + u, x = o(v, t, r, n, s), y = o(v, e, i, a, l), m = x * x + y * y; d += p[g] * Y.sqrt(m) } return u * d } function h(t, e, r, i, n, a, s, o, h) { if (!(h < 0 || l(t, e, r, i, n, a, s, o) < h)) { var u = 1, c = u / 2, f = u - c, p, d = .01; for (p = l(t, e, r, i, n, a, s, o, f) ; H(p - h) > d;) c /= 2, f += (p < h ? 1 : -1) * c, p = l(t, e, r, i, n, a, s, o, f); return f } } function u(t, e, r, i, n, a, s, o) { if (!(W(t, r) < G(n, s) || G(t, r) > W(n, s) || W(e, i) < G(a, o) || G(e, i) > W(a, o))) { var l = (t * i - e * r) * (n - s) - (t - r) * (n * o - a * s), h = (t * i - e * r) * (a - o) - (e - i) * (n * o - a * s), u = (t - r) * (a - o) - (e - i) * (n - s); if (u) { var c = l / u, f = h / u, p = +c.toFixed(2), d = +f.toFixed(2); if (!(p < +G(t, r).toFixed(2) || p > +W(t, r).toFixed(2) || p < +G(n, s).toFixed(2) || p > +W(n, s).toFixed(2) || d < +G(e, i).toFixed(2) || d > +W(e, i).toFixed(2) || d < +G(a, o).toFixed(2) || d > +W(a, o).toFixed(2))) return { x: c, y: f } } } } function c(t, e) { return p(t, e) } function f(t, e) { return p(t, e, 1) } function p(t, r, i) { var n = e.bezierBBox(t), a = e.bezierBBox(r); if (!e.isBBoxIntersect(n, a)) return i ? 0 : []; for (var s = l.apply(0, t), o = l.apply(0, r), h = W(~~(s / 5), 1), c = W(~~(o / 5), 1), f = [], p = [], d = {}, g = i ? 0 : [], v = 0; v < h + 1; v++) { var x = e.findDotsAtSegment.apply(e, t.concat(v / h)); f.push({ x: x.x, y: x.y, t: v / h }) } for (v = 0; v < c + 1; v++) x = e.findDotsAtSegment.apply(e, r.concat(v / c)), p.push({ x: x.x, y: x.y, t: v / c }); for (v = 0; v < h; v++) for (var y = 0; y < c; y++) { var m = f[v], b = f[v + 1], _ = p[y], w = p[y + 1], k = H(b.x - m.x) < .001 ? "y" : "x", B = H(w.x - _.x) < .001 ? "y" : "x", C = u(m.x, m.y, b.x, b.y, _.x, _.y, w.x, w.y); if (C) { if (d[C.x.toFixed(4)] == C.y.toFixed(4)) continue; d[C.x.toFixed(4)] = C.y.toFixed(4); var S = m.t + H((C[k] - m[k]) / (b[k] - m[k])) * (b.t - m.t), A = _.t + H((C[B] - _[B]) / (w[B] - _[B])) * (w.t - _.t); S >= 0 && S <= 1.001 && A >= 0 && A <= 1.001 && (i ? g++ : g.push({ x: C.x, y: C.y, t1: G(S, 1), t2: G(A, 1) })) } } return g } function d(t, r, i) { t = e._path2curve(t), r = e._path2curve(r); for (var n, a, s, o, l, h, u, c, f, d, g = i ? 0 : [], v = 0, x = t.length; v < x; v++) { var y = t[v]; if ("M" == y[0]) n = l = y[1], a = h = y[2]; else { "C" == y[0] ? (f = [n, a].concat(y.slice(1)), n = f[6], a = f[7]) : (f = [n, a, n, a, l, h, l, h], n = l, a = h); for (var m = 0, b = r.length; m < b; m++) { var _ = r[m]; if ("M" == _[0]) s = u = _[1], o = c = _[2]; else { "C" == _[0] ? (d = [s, o].concat(_.slice(1)), s = d[6], o = d[7]) : (d = [s, o, s, o, u, c, u, c], s = u, o = c); var w = p(f, d, i); if (i) g += w; else { for (var k = 0, B = w.length; k < B; k++) w[k].segment1 = v, w[k].segment2 = m, w[k].bez1 = f, w[k].bez2 = d; g = g.concat(w) } } } } } return g } function g(t, e, r, i, n, a) { null != t ? (this.a = +t, this.b = +e, this.c = +r, this.d = +i, this.e = +n, this.f = +a) : (this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.e = 0, this.f = 0) } function v() { return this.x + j + this.y } function x() { return this.x + j + this.y + j + this.width + " × " + this.height } function y(t, e, r, i, n, a) { function s(t) { return ((c * t + u) * t + h) * t } function o(t, e) { var r = l(t, e); return ((d * r + p) * r + f) * r } function l(t, e) { var r, i, n, a, o, l; for (n = t, l = 0; l < 8; l++) { if (a = s(n) - t, H(a) < e) return n; if (o = (3 * c * n + 2 * u) * n + h, H(o) < 1e-6) break; n -= a / o } if (r = 0, i = 1, n = t, n < r) return r; if (n > i) return i; for (; r < i;) { if (a = s(n), H(a - t) < e) return n; t > a ? r = n : i = n, n = (i - r) / 2 + r } return n } var h = 3 * e, u = 3 * (i - e) - h, c = 1 - h - u, f = 3 * r, p = 3 * (n - r) - f, d = 1 - f - p; return o(t, 1 / (200 * a)) } function m(t, e) { var r = [], i = {}; if (this.ms = e, this.times = 1, t) { for (var n in t) t[A](n) && (i[ht(n)] = t[n], r.push(ht(n))); r.sort(Bt) } this.anim = i, this.top = r[r.length - 1], this.percents = r } function b(r, i, n, a, s, o) { n = ht(n); var l, h, u, c = [], f, p, d, v = r.ms, x = {}, m = {}, b = {}; if (a) for (w = 0, B = Ee.length; w < B; w++) { var _ = Ee[w]; if (_.el.id == i.id && _.anim == r) { _.percent != n ? (Ee.splice(w, 1), u = 1) : h = _, i.attr(_.totalOrigin); break } } else a = +m; for (var w = 0, B = r.percents.length; w < B; w++) { if (r.percents[w] == n || r.percents[w] > a * r.top) { n = r.percents[w], p = r.percents[w - 1] || 0, v = v / r.top * (n - p), f = r.percents[w + 1], l = r.anim[n]; break } a && i.attr(r.anim[r.percents[w]]) } if (l) { if (h) h.initstatus = a, h.start = new Date - h.ms * a; else { for (var C in l) if (l[A](C) && (pt[A](C) || i.paper.customAttributes[A](C))) switch (x[C] = i.attr(C), null == x[C] && (x[C] = ft[C]), m[C] = l[C], pt[C]) { case $: b[C] = (m[C] - x[C]) / v; break; case "colour": x[C] = e.getRGB(x[C]); var S = e.getRGB(m[C]); b[C] = { r: (S.r - x[C].r) / v, g: (S.g - x[C].g) / v, b: (S.b - x[C].b) / v }; break; case "path": var T = Qt(x[C], m[C]), E = T[1]; for (x[C] = T[0], b[C] = [], w = 0, B = x[C].length; w < B; w++) { b[C][w] = [0]; for (var M = 1, N = x[C][w].length; M < N; M++) b[C][w][M] = (E[w][M] - x[C][w][M]) / v } break; case "transform": var L = i._, z = le(L[C], m[C]); if (z) for (x[C] = z.from, m[C] = z.to, b[C] = [], b[C].real = !0, w = 0, B = x[C].length; w < B; w++) for (b[C][w] = [x[C][w][0]], M = 1, N = x[C][w].length; M < N; M++) b[C][w][M] = (m[C][w][M] - x[C][w][M]) / v; else { var F = i.matrix || new g, R = { _: { transform: L.transform }, getBBox: function () { return i.getBBox(1) } }; x[C] = [F.a, F.b, F.c, F.d, F.e, F.f], se(R, m[C]), m[C] = R._.transform, b[C] = [(R.matrix.a - F.a) / v, (R.matrix.b - F.b) / v, (R.matrix.c - F.c) / v, (R.matrix.d - F.d) / v, (R.matrix.e - F.e) / v, (R.matrix.f - F.f) / v] } break; case "csv": var j = I(l[C])[q](k), D = I(x[C])[q](k); if ("clip-rect" == C) for (x[C] = D, b[C] = [], w = D.length; w--;) b[C][w] = (j[w] - x[C][w]) / v; m[C] = j; break; default: for (j = [][P](l[C]), D = [][P](x[C]), b[C] = [], w = i.paper.customAttributes[C].length; w--;) b[C][w] = ((j[w] || 0) - (D[w] || 0)) / v } var V = l.easing, O = e.easing_formulas[V]; if (!O) if (O = I(V).match(st), O && 5 == O.length) { var Y = O; O = function (t) { return y(t, +Y[1], +Y[2], +Y[3], +Y[4], v) } } else O = St; if (d = l.start || r.start || +new Date, _ = { anim: r, percent: n, timestamp: d, start: d + (r.del || 0), status: 0, initstatus: a || 0, stop: !1, ms: v, easing: O, from: x, diff: b, to: m, el: i, callback: l.callback, prev: p, next: f, repeat: o || r.times, origin: i.attr(), totalOrigin: s }, Ee.push(_), a && !h && !u && (_.stop = !0, _.start = new Date - v * a, 1 == Ee.length)) return Ne(); u && (_.start = new Date - _.ms * a), 1 == Ee.length && Me(Ne) } t("raphael.anim.start." + i.id, i, r) } } function _(t) { for (var e = 0; e < Ee.length; e++) Ee[e].el.paper == t && Ee.splice(e--, 1) } e.version = "2.2.0", e.eve = t; var w, k = /[, ]+/, B = { circle: 1, rect: 1, path: 1, ellipse: 1, text: 1, image: 1 }, C = /\{(\d+)\}/g, S = "prototype", A = "hasOwnProperty", T = { doc: document, win: window }, E = { was: Object.prototype[A].call(T.win, "Raphael"), is: T.win.Raphael }, M = function () { this.ca = this.customAttributes = {} }, N, L = "appendChild", z = "apply", P = "concat", F = "ontouchstart" in T.win || T.win.DocumentTouch && T.doc instanceof DocumentTouch, R = "", j = " ", I = String, q = "split", D = "click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[q](j), V = { mousedown: "touchstart", mousemove: "touchmove", mouseup: "touchend" }, O = I.prototype.toLowerCase, Y = Math, W = Y.max, G = Y.min, H = Y.abs, X = Y.pow, U = Y.PI, $ = "number", Z = "string", Q = "array", J = "toString", K = "fill", tt = Object.prototype.toString, et = {}, rt = "push", it = e._ISURL = /^url\(['"]?(.+?)['"]?\)$/i, nt = /^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i, at = { NaN: 1, Infinity: 1, "-Infinity": 1 }, st = /^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/, ot = Y.round, lt = "setAttribute", ht = parseFloat, ut = parseInt, ct = I.prototype.toUpperCase, ft = e._availableAttrs = { "arrow-end": "none", "arrow-start": "none", blur: 0, "clip-rect": "0 0 1e9 1e9", cursor: "default", cx: 0, cy: 0, fill: "#fff", "fill-opacity": 1, font: '10px "Arial"', "font-family": '"Arial"', "font-size": "10", "font-style": "normal", "font-weight": 400, gradient: 0, height: 0, href: "http://raphaeljs.com/", "letter-spacing": 0, opacity: 1, path: "M0,0", r: 0, rx: 0, ry: 0, src: "", stroke: "#000", "stroke-dasharray": "", "stroke-linecap": "butt", "stroke-linejoin": "butt", "stroke-miterlimit": 0, "stroke-opacity": 1, "stroke-width": 1, target: "_blank", "text-anchor": "middle", title: "Raphael", transform: "", width: 0, x: 0, y: 0, "class": "" }, pt = e._availableAnimAttrs = { blur: $, "clip-rect": "csv", cx: $, cy: $, fill: "colour", "fill-opacity": $, "font-size": $, height: $, opacity: $, path: "path", r: $, rx: $, ry: $, stroke: "colour", "stroke-opacity": $, "stroke-width": $, transform: "transform", width: $, x: $, y: $ }, dt = /[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g, gt = /[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/, vt = { hs: 1, rg: 1 }, xt = /,?([achlmqrstvxz]),?/gi, yt = /([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi, mt = /([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi, bt = /(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi, _t = e._radial_gradient = /^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/, wt = {}, kt = function (t, e) { return t.key - e.key }, Bt = function (t, e) { return ht(t) - ht(e) }, Ct = function () { }, St = function (t) { return t }, At = e._rectPath = function (t, e, r, i, n) { return n ? [["M", t + n, e], ["l", r - 2 * n, 0], ["a", n, n, 0, 0, 1, n, n], ["l", 0, i - 2 * n], ["a", n, n, 0, 0, 1, -n, n], ["l", 2 * n - r, 0], ["a", n, n, 0, 0, 1, -n, -n], ["l", 0, 2 * n - i], ["a", n, n, 0, 0, 1, n, -n], ["z"]] : [["M", t, e], ["l", r, 0], ["l", 0, i], ["l", -r, 0], ["z"]] }, Tt = function (t, e, r, i) { return null == i && (i = r), [["M", t, e], ["m", 0, -i], ["a", r, i, 0, 1, 1, 0, 2 * i], ["a", r, i, 0, 1, 1, 0, -2 * i], ["z"]] }, Et = e._getPath = { path: function (t) { return t.attr("path") }, circle: function (t) { var e = t.attrs; return Tt(e.cx, e.cy, e.r) }, ellipse: function (t) { var e = t.attrs; return Tt(e.cx, e.cy, e.rx, e.ry) }, rect: function (t) { var e = t.attrs; return At(e.x, e.y, e.width, e.height, e.r) }, image: function (t) { var e = t.attrs; return At(e.x, e.y, e.width, e.height) }, text: function (t) { var e = t._getBBox(); return At(e.x, e.y, e.width, e.height) }, set: function (t) { var e = t._getBBox(); return At(e.x, e.y, e.width, e.height) } }, Mt = e.mapPath = function (t, e) { if (!e) return t; var r, i, n, a, s, o, l; for (t = Qt(t), n = 0, s = t.length; n < s; n++) for (l = t[n], a = 1, o = l.length; a < o; a += 2) r = e.x(l[a], l[a + 1]), i = e.y(l[a], l[a + 1]), l[a] = r, l[a + 1] = i; return t }; if (e._g = T, e.type = T.win.SVGAngle || T.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1") ? "SVG" : "VML", "VML" == e.type) { var Nt = T.doc.createElement("div"), Lt; if (Nt.innerHTML = '<v:shape adj="1"/>', Lt = Nt.firstChild, Lt.style.behavior = "url(#default#VML)", !Lt || "object" != typeof Lt.adj) return e.type = R; Nt = null } e.svg = !(e.vml = "VML" == e.type), e._Paper = M, e.fn = N = M.prototype = e.prototype, e._id = 0, e.is = function (t, e) { return e = O.call(e), "finite" == e ? !at[A](+t) : "array" == e ? t instanceof Array : "null" == e && null === t || e == typeof t && null !== t || "object" == e && t === Object(t) || "array" == e && Array.isArray && Array.isArray(t) || tt.call(t).slice(8, -1).toLowerCase() == e }, e.angle = function (t, r, i, n, a, s) { if (null == a) { var o = t - i, l = r - n; return o || l ? (180 + 180 * Y.atan2(-l, -o) / U + 360) % 360 : 0 } return e.angle(t, r, a, s) - e.angle(i, n, a, s) }, e.rad = function (t) { return t % 360 * U / 180 }, e.deg = function (t) { return Math.round(180 * t / U % 360 * 1e3) / 1e3 }, e.snapTo = function (t, r, i) { if (i = e.is(i, "finite") ? i : 10, e.is(t, Q)) { for (var n = t.length; n--;) if (H(t[n] - r) <= i) return t[n] } else { t = +t; var a = r % t; if (a < i) return r - a; if (a > t - i) return r - a + t } return r }; var zt = e.createUUID = function (t, e) { return function () { return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t, e).toUpperCase() } }(/[xy]/g, function (t) { var e = 16 * Y.random() | 0, r = "x" == t ? e : 3 & e | 8; return r.toString(16) }); e.setWindow = function (r) { t("raphael.setWindow", e, T.win, r), T.win = r, T.doc = T.win.document, e._engine.initWin && e._engine.initWin(T.win) }; var Pt = function (t) { if (e.vml) { var r = /^\s+|\s+$/g, i; try { var a = new ActiveXObject("htmlfile"); a.write("<body>"), a.close(), i = a.body } catch (s) { i = createPopup().document.body } var o = i.createTextRange(); Pt = n(function (t) { try { i.style.color = I(t).replace(r, R); var e = o.queryCommandValue("ForeColor"); return e = (255 & e) << 16 | 65280 & e | (16711680 & e) >>> 16, "#" + ("000000" + e.toString(16)).slice(-6) } catch (n) { return "none" } }) } else { var l = T.doc.createElement("i"); l.title = "Raphaël Colour Picker", l.style.display = "none", T.doc.body.appendChild(l), Pt = n(function (t) { return l.style.color = t, T.doc.defaultView.getComputedStyle(l, R).getPropertyValue("color") }) } return Pt(t) }, Ft = function () { return "hsb(" + [this.h, this.s, this.b] + ")" }, Rt = function () { return "hsl(" + [this.h, this.s, this.l] + ")" }, jt = function () { return this.hex }, It = function (t, r, i) { if (null == r && e.is(t, "object") && "r" in t && "g" in t && "b" in t && (i = t.b, r = t.g, t = t.r), null == r && e.is(t, Z)) { var n = e.getRGB(t); t = n.r, r = n.g, i = n.b } return (t > 1 || r > 1 || i > 1) && (t /= 255, r /= 255, i /= 255), [t, r, i] }, qt = function (t, r, i, n) { t *= 255, r *= 255, i *= 255; var a = { r: t, g: r, b: i, hex: e.rgb(t, r, i), toString: jt }; return e.is(n, "finite") && (a.opacity = n), a }; e.color = function (t) { var r; return e.is(t, "object") && "h" in t && "s" in t && "b" in t ? (r = e.hsb2rgb(t), t.r = r.r, t.g = r.g, t.b = r.b, t.hex = r.hex) : e.is(t, "object") && "h" in t && "s" in t && "l" in t ? (r = e.hsl2rgb(t), t.r = r.r, t.g = r.g, t.b = r.b, t.hex = r.hex) : (e.is(t, "string") && (t = e.getRGB(t)), e.is(t, "object") && "r" in t && "g" in t && "b" in t ? (r = e.rgb2hsl(t), t.h = r.h, t.s = r.s, t.l = r.l, r = e.rgb2hsb(t), t.v = r.b) : (t = { hex: "none" }, t.r = t.g = t.b = t.h = t.s = t.v = t.l = -1)), t.toString = jt, t }, e.hsb2rgb = function (t, e, r, i) { this.is(t, "object") && "h" in t && "s" in t && "b" in t && (r = t.b, e = t.s, i = t.o, t = t.h), t *= 360; var n, a, s, o, l; return t = t % 360 / 60, l = r * e, o = l * (1 - H(t % 2 - 1)), n = a = s = r - l, t = ~~t, n += [l, o, 0, 0, o, l][t], a += [o, l, l, o, 0, 0][t], s += [0, 0, o, l, l, o][t], qt(n, a, s, i) }, e.hsl2rgb = function (t, e, r, i) { this.is(t, "object") && "h" in t && "s" in t && "l" in t && (r = t.l, e = t.s, t = t.h), (t > 1 || e > 1 || r > 1) && (t /= 360, e /= 100, r /= 100), t *= 360; var n, a, s, o, l; return t = t % 360 / 60, l = 2 * e * (r < .5 ? r : 1 - r), o = l * (1 - H(t % 2 - 1)), n = a = s = r - l / 2, t = ~~t, n += [l, o, 0, 0, o, l][t], a += [o, l, l, o, 0, 0][t], s += [0, 0, o, l, l, o][t], qt(n, a, s, i) }, e.rgb2hsb = function (t, e, r) { r = It(t, e, r), t = r[0], e = r[1], r = r[2]; var i, n, a, s; return a = W(t, e, r), s = a - G(t, e, r), i = 0 == s ? null : a == t ? (e - r) / s : a == e ? (r - t) / s + 2 : (t - e) / s + 4, i = (i + 360) % 6 * 60 / 360, n = 0 == s ? 0 : s / a, { h: i, s: n, b: a, toString: Ft } }, e.rgb2hsl = function (t, e, r) { r = It(t, e, r), t = r[0], e = r[1], r = r[2]; var i, n, a, s, o, l; return s = W(t, e, r), o = G(t, e, r), l = s - o, i = 0 == l ? null : s == t ? (e - r) / l : s == e ? (r - t) / l + 2 : (t - e) / l + 4, i = (i + 360) % 6 * 60 / 360, a = (s + o) / 2, n = 0 == l ? 0 : a < .5 ? l / (2 * a) : l / (2 - 2 * a), { h: i, s: n, l: a, toString: Rt } }, e._path2string = function () { return this.join(",").replace(xt, "$1") }; var Dt = e._preload = function (t, e) { var r = T.doc.createElement("img"); r.style.cssText = "position:absolute;left:-9999em;top:-9999em", r.onload = function () { e.call(this), this.onload = null, T.doc.body.removeChild(this) }, r.onerror = function () { T.doc.body.removeChild(this) }, T.doc.body.appendChild(r), r.src = t }; e.getRGB = n(function (t) { if (!t || (t = I(t)).indexOf("-") + 1) return { r: -1, g: -1, b: -1, hex: "none", error: 1, toString: a }; if ("none" == t) return { r: -1, g: -1, b: -1, hex: "none", toString: a }; !(vt[A](t.toLowerCase().substring(0, 2)) || "#" == t.charAt()) && (t = Pt(t)); var r, i, n, s, o, l, h, u = t.match(nt); return u ? (u[2] && (s = ut(u[2].substring(5), 16), n = ut(u[2].substring(3, 5), 16), i = ut(u[2].substring(1, 3), 16)), u[3] && (s = ut((l = u[3].charAt(3)) + l, 16), n = ut((l = u[3].charAt(2)) + l, 16), i = ut((l = u[3].charAt(1)) + l, 16)), u[4] && (h = u[4][q](gt), i = ht(h[0]), "%" == h[0].slice(-1) && (i *= 2.55), n = ht(h[1]), "%" == h[1].slice(-1) && (n *= 2.55), s = ht(h[2]), "%" == h[2].slice(-1) && (s *= 2.55), "rgba" == u[1].toLowerCase().slice(0, 4) && (o = ht(h[3])), h[3] && "%" == h[3].slice(-1) && (o /= 100)), u[5] ? (h = u[5][q](gt), i = ht(h[0]), "%" == h[0].slice(-1) && (i *= 2.55), n = ht(h[1]), "%" == h[1].slice(-1) && (n *= 2.55), s = ht(h[2]), "%" == h[2].slice(-1) && (s *= 2.55), ("deg" == h[0].slice(-3) || "°" == h[0].slice(-1)) && (i /= 360), "hsba" == u[1].toLowerCase().slice(0, 4) && (o = ht(h[3])), h[3] && "%" == h[3].slice(-1) && (o /= 100), e.hsb2rgb(i, n, s, o)) : u[6] ? (h = u[6][q](gt), i = ht(h[0]), "%" == h[0].slice(-1) && (i *= 2.55), n = ht(h[1]), "%" == h[1].slice(-1) && (n *= 2.55), s = ht(h[2]), "%" == h[2].slice(-1) && (s *= 2.55), ("deg" == h[0].slice(-3) || "°" == h[0].slice(-1)) && (i /= 360), "hsla" == u[1].toLowerCase().slice(0, 4) && (o = ht(h[3])), h[3] && "%" == h[3].slice(-1) && (o /= 100), e.hsl2rgb(i, n, s, o)) : (u = { r: i, g: n, b: s, toString: a }, u.hex = "#" + (16777216 | s | n << 8 | i << 16).toString(16).slice(1), e.is(o, "finite") && (u.opacity = o), u)) : { r: -1, g: -1, b: -1, hex: "none", error: 1, toString: a } }, e), e.hsb = n(function (t, r, i) { return e.hsb2rgb(t, r, i).hex }), e.hsl = n(function (t, r, i) { return e.hsl2rgb(t, r, i).hex }), e.rgb = n(function (t, e, r) { function i(t) { return t + .5 | 0 } return "#" + (16777216 | i(r) | i(e) << 8 | i(t) << 16).toString(16).slice(1) }), e.getColor = function (t) { var e = this.getColor.start = this.getColor.start || { h: 0, s: 1, b: t || .75 }, r = this.hsb2rgb(e.h, e.s, e.b); return e.h += .075, e.h > 1 && (e.h = 0, e.s -= .2, e.s <= 0 && (this.getColor.start = { h: 0, s: 1, b: e.b })), r.hex }, e.getColor.reset = function () { delete this.start }, e.parsePathString = function (t) { if (!t) return null; var r = Vt(t); if (r.arr) return Yt(r.arr); var i = { a: 7, c: 6, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, z: 0 }, n = []; return e.is(t, Q) && e.is(t[0], Q) && (n = Yt(t)), n.length || I(t).replace(yt, function (t, e, r) { var a = [], s = e.toLowerCase(); if (r.replace(bt, function (t, e) { e && a.push(+e) }), "m" == s && a.length > 2 && (n.push([e][P](a.splice(0, 2))), s = "l", e = "m" == e ? "l" : "L"), "r" == s) n.push([e][P](a)); else for (; a.length >= i[s] && (n.push([e][P](a.splice(0, i[s]))), i[s]) ;); }), n.toString = e._path2string, r.arr = Yt(n), n }, e.parseTransformString = n(function (t) { if (!t) return null; var r = { r: 3, s: 4, t: 2, m: 6 }, i = []; return e.is(t, Q) && e.is(t[0], Q) && (i = Yt(t)), i.length || I(t).replace(mt, function (t, e, r) { var n = [], a = O.call(e); r.replace(bt, function (t, e) { e && n.push(+e) }), i.push([e][P](n)) }), i.toString = e._path2string, i }); var Vt = function (t) { var e = Vt.ps = Vt.ps || {}; return e[t] ? e[t].sleep = 100 : e[t] = { sleep: 100 }, setTimeout(function () { for (var r in e) e[A](r) && r != t && (e[r].sleep--, !e[r].sleep && delete e[r]) }), e[t] }; e.findDotsAtSegment = function (t, e, r, i, n, a, s, o, l) { var h = 1 - l, u = X(h, 3), c = X(h, 2), f = l * l, p = f * l, d = u * t + 3 * c * l * r + 3 * h * l * l * n + p * s, g = u * e + 3 * c * l * i + 3 * h * l * l * a + p * o, v = t + 2 * l * (r - t) + f * (n - 2 * r + t), x = e + 2 * l * (i - e) + f * (a - 2 * i + e), y = r + 2 * l * (n - r) + f * (s - 2 * n + r), m = i + 2 * l * (a - i) + f * (o - 2 * a + i), b = h * t + l * r, _ = h * e + l * i, w = h * n + l * s, k = h * a + l * o, B = 90 - 180 * Y.atan2(v - y, x - m) / U; return (v > y || x < m) && (B += 180), { x: d, y: g, m: { x: v, y: x }, n: { x: y, y: m }, start: { x: b, y: _ }, end: { x: w, y: k }, alpha: B } }, e.bezierBBox = function (t, r, i, n, a, s, o, l) { e.is(t, "array") || (t = [t, r, i, n, a, s, o, l]); var h = Zt.apply(null, t); return { x: h.min.x, y: h.min.y, x2: h.max.x, y2: h.max.y, width: h.max.x - h.min.x, height: h.max.y - h.min.y } }, e.isPointInsideBBox = function (t, e, r) { return e >= t.x && e <= t.x2 && r >= t.y && r <= t.y2 }, e.isBBoxIntersect = function (t, r) { var i = e.isPointInsideBBox; return i(r, t.x, t.y) || i(r, t.x2, t.y) || i(r, t.x, t.y2) || i(r, t.x2, t.y2) || i(t, r.x, r.y) || i(t, r.x2, r.y) || i(t, r.x, r.y2) || i(t, r.x2, r.y2) || (t.x < r.x2 && t.x > r.x || r.x < t.x2 && r.x > t.x) && (t.y < r.y2 && t.y > r.y || r.y < t.y2 && r.y > t.y) }, e.pathIntersection = function (t, e) { return d(t, e) }, e.pathIntersectionNumber = function (t, e) { return d(t, e, 1) }, e.isPointInsidePath = function (t, r, i) { var n = e.pathBBox(t); return e.isPointInsideBBox(n, r, i) && d(t, [["M", r, i], ["H", n.x2 + 10]], 1) % 2 == 1 }, e._removedFactory = function (e) { return function () { t("raphael.log", null, "Raphaël: you are calling to method “" + e + "” of removed object", e) } }; var Ot = e.pathBBox = function (t) { var e = Vt(t); if (e.bbox) return r(e.bbox); if (!t) return { x: 0, y: 0, width: 0, height: 0, x2: 0, y2: 0 }; t = Qt(t); for (var i = 0, n = 0, a = [], s = [], o, l = 0, h = t.length; l < h; l++) if (o = t[l], "M" == o[0]) i = o[1], n = o[2], a.push(i), s.push(n); else { var u = Zt(i, n, o[1], o[2], o[3], o[4], o[5], o[6]); a = a[P](u.min.x, u.max.x), s = s[P](u.min.y, u.max.y), i = o[5], n = o[6] } var c = G[z](0, a), f = G[z](0, s), p = W[z](0, a), d = W[z](0, s), g = p - c, v = d - f, x = { x: c, y: f, x2: p, y2: d, width: g, height: v, cx: c + g / 2, cy: f + v / 2 }; return e.bbox = r(x), x }, Yt = function (t) { var i = r(t); return i.toString = e._path2string, i }, Wt = e._pathToRelative = function (t) { var r = Vt(t); if (r.rel) return Yt(r.rel); e.is(t, Q) && e.is(t && t[0], Q) || (t = e.parsePathString(t)); var i = [], n = 0, a = 0, s = 0, o = 0, l = 0; "M" == t[0][0] && (n = t[0][1], a = t[0][2], s = n, o = a, l++, i.push(["M", n, a])); for (var h = l, u = t.length; h < u; h++) { var c = i[h] = [], f = t[h]; if (f[0] != O.call(f[0])) switch (c[0] = O.call(f[0]), c[0]) { case "a": c[1] = f[1], c[2] = f[2], c[3] = f[3], c[4] = f[4], c[5] = f[5], c[6] = +(f[6] - n).toFixed(3), c[7] = +(f[7] - a).toFixed(3); break; case "v": c[1] = +(f[1] - a).toFixed(3); break; case "m": s = f[1], o = f[2]; default: for (var p = 1, d = f.length; p < d; p++) c[p] = +(f[p] - (p % 2 ? n : a)).toFixed(3) } else { c = i[h] = [], "m" == f[0] && (s = f[1] + n, o = f[2] + a); for (var g = 0, v = f.length; g < v; g++) i[h][g] = f[g] } var x = i[h].length; switch (i[h][0]) { case "z": n = s, a = o; break; case "h": n += +i[h][x - 1]; break; case "v": a += +i[h][x - 1]; break; default: n += +i[h][x - 2], a += +i[h][x - 1] } } return i.toString = e._path2string, r.rel = Yt(i), i }, Gt = e._pathToAbsolute = function (t) { var r = Vt(t); if (r.abs) return Yt(r.abs); if (e.is(t, Q) && e.is(t && t[0], Q) || (t = e.parsePathString(t)), !t || !t.length) return [["M", 0, 0]]; var i = [], n = 0, a = 0, o = 0, l = 0, h = 0; "M" == t[0][0] && (n = +t[0][1], a = +t[0][2], o = n, l = a, h++, i[0] = ["M", n, a]); for (var u = 3 == t.length && "M" == t[0][0] && "R" == t[1][0].toUpperCase() && "Z" == t[2][0].toUpperCase(), c, f, p = h, d = t.length; p < d; p++) { if (i.push(c = []), f = t[p], f[0] != ct.call(f[0])) switch (c[0] = ct.call(f[0]), c[0]) { case "A": c[1] = f[1], c[2] = f[2], c[3] = f[3], c[4] = f[4], c[5] = f[5], c[6] = +(f[6] + n), c[7] = +(f[7] + a); break; case "V": c[1] = +f[1] + a; break; case "H": c[1] = +f[1] + n; break; case "R": for (var g = [n, a][P](f.slice(1)), v = 2, x = g.length; v < x; v++) g[v] = +g[v] + n, g[++v] = +g[v] + a; i.pop(), i = i[P](s(g, u)); break; case "M": o = +f[1] + n, l = +f[2] + a; default: for (v = 1, x = f.length; v < x; v++) c[v] = +f[v] + (v % 2 ? n : a) } else if ("R" == f[0]) g = [n, a][P](f.slice(1)), i.pop(), i = i[P](s(g, u)), c = ["R"][P](f.slice(-2)); else for (var y = 0, m = f.length; y < m; y++) c[y] = f[y]; switch (c[0]) { case "Z": n = o, a = l; break; case "H": n = c[1]; break; case "V": a = c[1]; break; case "M": o = c[c.length - 2], l = c[c.length - 1]; default: n = c[c.length - 2], a = c[c.length - 1] } } return i.toString = e._path2string, r.abs = Yt(i), i }, Ht = function (t, e, r, i) { return [t, e, r, i, r, i] }, Xt = function (t, e, r, i, n, a) { var s = 1 / 3, o = 2 / 3; return [s * t + o * r, s * e + o * i, s * n + o * r, s * a + o * i, n, a] }, Ut = function (t, e, r, i, a, s, o, l, h, u) { var c = 120 * U / 180, f = U / 180 * (+a || 0), p = [], d, g = n(function (t, e, r) { var i = t * Y.cos(r) - e * Y.sin(r), n = t * Y.sin(r) + e * Y.cos(r); return { x: i, y: n } }); if (u) S = u[0], A = u[1], B = u[2], C = u[3]; else { d = g(t, e, -f), t = d.x, e = d.y, d = g(l, h, -f), l = d.x, h = d.y; var v = Y.cos(U / 180 * a), x = Y.sin(U / 180 * a), y = (t - l) / 2, m = (e - h) / 2, b = y * y / (r * r) + m * m / (i * i); b > 1 && (b = Y.sqrt(b), r = b * r, i = b * i); var _ = r * r, w = i * i, k = (s == o ? -1 : 1) * Y.sqrt(H((_ * w - _ * m * m - w * y * y) / (_ * m * m + w * y * y))), B = k * r * m / i + (t + l) / 2, C = k * -i * y / r + (e + h) / 2, S = Y.asin(((e - C) / i).toFixed(9)), A = Y.asin(((h - C) / i).toFixed(9)); S = t < B ? U - S : S, A = l < B ? U - A : A, S < 0 && (S = 2 * U + S), A < 0 && (A = 2 * U + A), o && S > A && (S -= 2 * U), !o && A > S && (A -= 2 * U) } var T = A - S; if (H(T) > c) { var E = A, M = l, N = h; A = S + c * (o && A > S ? 1 : -1), l = B + r * Y.cos(A), h = C + i * Y.sin(A), p = Ut(l, h, r, i, a, 0, o, M, N, [A, E, B, C]) } T = A - S; var L = Y.cos(S), z = Y.sin(S), F = Y.cos(A), R = Y.sin(A), j = Y.tan(T / 4), I = 4 / 3 * r * j, D = 4 / 3 * i * j, V = [t, e], O = [t + I * z, e - D * L], W = [l + I * R, h - D * F], G = [l, h]; if (O[0] = 2 * V[0] - O[0], O[1] = 2 * V[1] - O[1], u) return [O, W, G][P](p); p = [O, W, G][P](p).join()[q](","); for (var X = [], $ = 0, Z = p.length; $ < Z; $++) X[$] = $ % 2 ? g(p[$ - 1], p[$], f).y : g(p[$], p[$ + 1], f).x; return X }, $t = function (t, e, r, i, n, a, s, o, l) { var h = 1 - l; return { x: X(h, 3) * t + 3 * X(h, 2) * l * r + 3 * h * l * l * n + X(l, 3) * s, y: X(h, 3) * e + 3 * X(h, 2) * l * i + 3 * h * l * l * a + X(l, 3) * o } }, Zt = n(function (t, e, r, i, n, a, s, o) { var l = n - 2 * r + t - (s - 2 * n + r), h = 2 * (r - t) - 2 * (n - r), u = t - r, c = (-h + Y.sqrt(h * h - 4 * l * u)) / 2 / l, f = (-h - Y.sqrt(h * h - 4 * l * u)) / 2 / l, p = [e, o], d = [t, s], g; return H(c) > "1e12" && (c = .5), H(f) > "1e12" && (f = .5), c > 0 && c < 1 && (g = $t(t, e, r, i, n, a, s, o, c), d.push(g.x), p.push(g.y)), f > 0 && f < 1 && (g = $t(t, e, r, i, n, a, s, o, f), d.push(g.x), p.push(g.y)), l = a - 2 * i + e - (o - 2 * a + i), h = 2 * (i - e) - 2 * (a - i), u = e - i, c = (-h + Y.sqrt(h * h - 4 * l * u)) / 2 / l, f = (-h - Y.sqrt(h * h - 4 * l * u)) / 2 / l, H(c) > "1e12" && (c = .5), H(f) > "1e12" && (f = .5), c > 0 && c < 1 && (g = $t(t, e, r, i, n, a, s, o, c), d.push(g.x), p.push(g.y)), f > 0 && f < 1 && (g = $t(t, e, r, i, n, a, s, o, f), d.push(g.x), p.push(g.y)), { min: { x: G[z](0, d), y: G[z](0, p) }, max: { x: W[z](0, d), y: W[z](0, p) } } }), Qt = e._path2curve = n(function (t, e) { var r = !e && Vt(t); if (!e && r.curve) return Yt(r.curve); for (var i = Gt(t), n = e && Gt(e), a = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, s = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, o = (function (t, e, r) { var i, n, a = { T: 1, Q: 1 }; if (!t) return ["C", e.x, e.y, e.x, e.y, e.x, e.y]; switch (!(t[0] in a) && (e.qx = e.qy = null), t[0]) { case "M": e.X = t[1], e.Y = t[2]; break; case "A": t = ["C"][P](Ut[z](0, [e.x, e.y][P](t.slice(1)))); break; case "S": "C" == r || "S" == r ? (i = 2 * e.x - e.bx, n = 2 * e.y - e.by) : (i = e.x, n = e.y), t = ["C", i, n][P](t.slice(1)); break; case "T": "Q" == r || "T" == r ? (e.qx = 2 * e.x - e.qx, e.qy = 2 * e.y - e.qy) : (e.qx = e.x, e.qy = e.y), t = ["C"][P](Xt(e.x, e.y, e.qx, e.qy, t[1], t[2])); break; case "Q": e.qx = t[1], e.qy = t[2], t = ["C"][P](Xt(e.x, e.y, t[1], t[2], t[3], t[4])); break; case "L": t = ["C"][P](Ht(e.x, e.y, t[1], t[2])); break; case "H": t = ["C"][P](Ht(e.x, e.y, t[1], e.y)); break; case "V": t = ["C"][P](Ht(e.x, e.y, e.x, t[1])); break; case "Z": t = ["C"][P](Ht(e.x, e.y, e.X, e.Y)) } return t }), l = function (t, e) { if (t[e].length > 7) { t[e].shift(); for (var r = t[e]; r.length;) u[e] = "A", n && (c[e] = "A"), t.splice(e++, 0, ["C"][P](r.splice(0, 6))); t.splice(e, 1), g = W(i.length, n && n.length || 0) } }, h = function (t, e, r, a, s) { t && e && "M" == t[s][0] && "M" != e[s][0] && (e.splice(s, 0, ["M", a.x, a.y]), r.bx = 0, r.by = 0, r.x = t[s][1], r.y = t[s][2], g = W(i.length, n && n.length || 0)) }, u = [], c = [], f = "", p = "", d = 0, g = W(i.length, n && n.length || 0) ; d < g; d++) { i[d] && (f = i[d][0]), "C" != f && (u[d] = f, d && (p = u[d - 1])), i[d] = o(i[d], a, p), "A" != u[d] && "C" == f && (u[d] = "C"), l(i, d), n && (n[d] && (f = n[d][0]), "C" != f && (c[d] = f, d && (p = c[d - 1])), n[d] = o(n[d], s, p), "A" != c[d] && "C" == f && (c[d] = "C"), l(n, d)), h(i, n, a, s, d), h(n, i, s, a, d); var v = i[d], x = n && n[d], y = v.length, m = n && x.length; a.x = v[y - 2], a.y = v[y - 1], a.bx = ht(v[y - 4]) || a.x, a.by = ht(v[y - 3]) || a.y, s.bx = n && (ht(x[m - 4]) || s.x), s.by = n && (ht(x[m - 3]) || s.y), s.x = n && x[m - 2], s.y = n && x[m - 1] } return n || (r.curve = Yt(i)), n ? [i, n] : i }, null, Yt), Jt = e._parseDots = n(function (t) { for (var r = [], i = 0, n = t.length; i < n; i++) { var a = {}, s = t[i].match(/^([^:]*):?([\d\.]*)/); if (a.color = e.getRGB(s[1]), a.color.error) return null; a.opacity = a.color.opacity, a.color = a.color.hex, s[2] && (a.offset = s[2] + "%"), r.push(a) } for (i = 1, n = r.length - 1; i < n; i++) if (!r[i].offset) { for (var o = ht(r[i - 1].offset || 0), l = 0, h = i + 1; h < n; h++) if (r[h].offset) { l = r[h].offset; break } l || (l = 100, h = n), l = ht(l); for (var u = (l - o) / (h - i + 1) ; i < h; i++) o += u, r[i].offset = o + "%" } return r }), Kt = e._tear = function (t, e) { t == e.top && (e.top = t.prev), t == e.bottom && (e.bottom = t.next), t.next && (t.next.prev = t.prev), t.prev && (t.prev.next = t.next) }, te = e._tofront = function (t, e) { e.top !== t && (Kt(t, e), t.next = null, t.prev = e.top, e.top.next = t, e.top = t) }, ee = e._toback = function (t, e) { e.bottom !== t && (Kt(t, e), t.next = e.bottom, t.prev = null, e.bottom.prev = t, e.bottom = t) }, re = e._insertafter = function (t, e, r) { Kt(t, r), e == r.top && (r.top = t), e.next && (e.next.prev = t), t.next = e.next, t.prev = e, e.next = t }, ie = e._insertbefore = function (t, e, r) { Kt(t, r), e == r.bottom && (r.bottom = t), e.prev && (e.prev.next = t), t.prev = e.prev, e.prev = t, t.next = e }, ne = e.toMatrix = function (t, e) { var r = Ot(t), i = { _: { transform: R }, getBBox: function () { return r } }; return se(i, e), i.matrix }, ae = e.transformPath = function (t, e) { return Mt(t, ne(t, e)) }, se = e._extractTransform = function (t, r) { if (null == r) return t._.transform; r = I(r).replace(/\.{3}|\u2026/g, t._.transform || R); var i = e.parseTransformString(r), n = 0, a = 0, s = 0, o = 1, l = 1, h = t._, u = new g; if (h.transform = i || [], i) for (var c = 0, f = i.length; c < f; c++) { var p = i[c], d = p.length, v = I(p[0]).toLowerCase(), x = p[0] != v, y = x ? u.invert() : 0, m, b, _, w, k; "t" == v && 3 == d ? x ? (m = y.x(0, 0), b = y.y(0, 0), _ = y.x(p[1], p[2]), w = y.y(p[1], p[2]), u.translate(_ - m, w - b)) : u.translate(p[1], p[2]) : "r" == v ? 2 == d ? (k = k || t.getBBox(1), u.rotate(p[1], k.x + k.width / 2, k.y + k.height / 2), n += p[1]) : 4 == d && (x ? (_ = y.x(p[2], p[3]), w = y.y(p[2], p[3]), u.rotate(p[1], _, w)) : u.rotate(p[1], p[2], p[3]), n += p[1]) : "s" == v ? 2 == d || 3 == d ? (k = k || t.getBBox(1), u.scale(p[1], p[d - 1], k.x + k.width / 2, k.y + k.height / 2), o *= p[1], l *= p[d - 1]) : 5 == d && (x ? (_ = y.x(p[3], p[4]), w = y.y(p[3], p[4]), u.scale(p[1], p[2], _, w)) : u.scale(p[1], p[2], p[3], p[4]), o *= p[1], l *= p[2]) : "m" == v && 7 == d && u.add(p[1], p[2], p[3], p[4], p[5], p[6]), h.dirtyT = 1, t.matrix = u } t.matrix = u, h.sx = o, h.sy = l, h.deg = n, h.dx = a = u.e, h.dy = s = u.f, 1 == o && 1 == l && !n && h.bbox ? (h.bbox.x += +a, h.bbox.y += +s) : h.dirtyT = 1 }, oe = function (t) { var e = t[0]; switch (e.toLowerCase()) { case "t": return [e, 0, 0]; case "m": return [e, 1, 0, 0, 1, 0, 0]; case "r": return 4 == t.length ? [e, 0, t[2], t[3]] : [e, 0]; case "s": return 5 == t.length ? [e, 1, 1, t[3], t[4]] : 3 == t.length ? [e, 1, 1] : [e, 1] } }, le = e._equaliseTransform = function (t, r) { r = I(r).replace(/\.{3}|\u2026/g, t), t = e.parseTransformString(t) || [], r = e.parseTransformString(r) || []; for (var i = W(t.length, r.length), n = [], a = [], s = 0, o, l, h, u; s < i; s++) { if (h = t[s] || oe(r[s]), u = r[s] || oe(h), h[0] != u[0] || "r" == h[0].toLowerCase() && (h[2] != u[2] || h[3] != u[3]) || "s" == h[0].toLowerCase() && (h[3] != u[3] || h[4] != u[4])) return; for (n[s] = [], a[s] = [], o = 0, l = W(h.length, u.length) ; o < l; o++) o in h && (n[s][o] = h[o]), o in u && (a[s][o] = u[o]) } return { from: n, to: a } }; e._getContainer = function (t, r, i, n) { var a; if (a = null != n || e.is(t, "object") ? t : T.doc.getElementById(t), null != a) return a.tagName ? null == r ? { container: a, width: a.style.pixelWidth || a.offsetWidth, height: a.style.pixelHeight || a.offsetHeight } : { container: a, width: r, height: i } : { container: 1, x: t, y: r, width: i, height: n } }, e.pathToRelative = Wt, e._engine = {}, e.path2curve = Qt, e.matrix = function (t, e, r, i, n, a) { return new g(t, e, r, i, n, a) }, function (t) {
                function r(t) { return t[0] * t[0] + t[1] * t[1] } function i(t) { var e = Y.sqrt(r(t)); t[0] && (t[0] /= e), t[1] && (t[1] /= e) } t.add = function (t, e, r, i, n, a) { var s = [[], [], []], o = [[this.a, this.c, this.e], [this.b, this.d, this.f], [0, 0, 1]], l = [[t, r, n], [e, i, a], [0, 0, 1]], h, u, c, f; for (t && t instanceof g && (l = [[t.a, t.c, t.e], [t.b, t.d, t.f], [0, 0, 1]]), h = 0; h < 3; h++) for (u = 0; u < 3; u++) { for (f = 0, c = 0; c < 3; c++) f += o[h][c] * l[c][u]; s[h][u] = f } this.a = s[0][0], this.b = s[1][0], this.c = s[0][1], this.d = s[1][1], this.e = s[0][2], this.f = s[1][2] }, t.invert = function () { var t = this, e = t.a * t.d - t.b * t.c; return new g(t.d / e, -t.b / e, -t.c / e, t.a / e, (t.c * t.f - t.d * t.e) / e, (t.b * t.e - t.a * t.f) / e) }, t.clone = function () { return new g(this.a, this.b, this.c, this.d, this.e, this.f) }, t.translate = function (t, e) {
                    this.add(1, 0, 0, 1, t, e)
                }, t.scale = function (t, e, r, i) { null == e && (e = t), (r || i) && this.add(1, 0, 0, 1, r, i), this.add(t, 0, 0, e, 0, 0), (r || i) && this.add(1, 0, 0, 1, -r, -i) }, t.rotate = function (t, r, i) { t = e.rad(t), r = r || 0, i = i || 0; var n = +Y.cos(t).toFixed(9), a = +Y.sin(t).toFixed(9); this.add(n, a, -a, n, r, i), this.add(1, 0, 0, 1, -r, -i) }, t.x = function (t, e) { return t * this.a + e * this.c + this.e }, t.y = function (t, e) { return t * this.b + e * this.d + this.f }, t.get = function (t) { return +this[I.fromCharCode(97 + t)].toFixed(4) }, t.toString = function () { return e.svg ? "matrix(" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + ")" : [this.get(0), this.get(2), this.get(1), this.get(3), 0, 0].join() }, t.toFilter = function () { return "progid:DXImageTransform.Microsoft.Matrix(M11=" + this.get(0) + ", M12=" + this.get(2) + ", M21=" + this.get(1) + ", M22=" + this.get(3) + ", Dx=" + this.get(4) + ", Dy=" + this.get(5) + ", sizingmethod='auto expand')" }, t.offset = function () { return [this.e.toFixed(4), this.f.toFixed(4)] }, t.split = function () { var t = {}; t.dx = this.e, t.dy = this.f; var n = [[this.a, this.c], [this.b, this.d]]; t.scalex = Y.sqrt(r(n[0])), i(n[0]), t.shear = n[0][0] * n[1][0] + n[0][1] * n[1][1], n[1] = [n[1][0] - n[0][0] * t.shear, n[1][1] - n[0][1] * t.shear], t.scaley = Y.sqrt(r(n[1])), i(n[1]), t.shear /= t.scaley; var a = -n[0][1], s = n[1][1]; return s < 0 ? (t.rotate = e.deg(Y.acos(s)), a < 0 && (t.rotate = 360 - t.rotate)) : t.rotate = e.deg(Y.asin(a)), t.isSimple = !(+t.shear.toFixed(9) || t.scalex.toFixed(9) != t.scaley.toFixed(9) && t.rotate), t.isSuperSimple = !+t.shear.toFixed(9) && t.scalex.toFixed(9) == t.scaley.toFixed(9) && !t.rotate, t.noRotation = !+t.shear.toFixed(9) && !t.rotate, t }, t.toTransformString = function (t) { var e = t || this[q](); return e.isSimple ? (e.scalex = +e.scalex.toFixed(4), e.scaley = +e.scaley.toFixed(4), e.rotate = +e.rotate.toFixed(4), (e.dx || e.dy ? "t" + [e.dx, e.dy] : R) + (1 != e.scalex || 1 != e.scaley ? "s" + [e.scalex, e.scaley, 0, 0] : R) + (e.rotate ? "r" + [e.rotate, 0, 0] : R)) : "m" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)] }
            }(g.prototype); for (var he = function () { this.returnValue = !1 }, ue = function () { return this.originalEvent.preventDefault() }, ce = function () { this.cancelBubble = !0 }, fe = function () { return this.originalEvent.stopPropagation() }, pe = function (t) { var e = T.doc.documentElement.scrollTop || T.doc.body.scrollTop, r = T.doc.documentElement.scrollLeft || T.doc.body.scrollLeft; return { x: t.clientX + r, y: t.clientY + e } }, de = function () { return T.doc.addEventListener ? function (t, e, r, i) { var n = function (t) { var e = pe(t); return r.call(i, t, e.x, e.y) }; if (t.addEventListener(e, n, !1), F && V[e]) { var a = function (e) { for (var n = pe(e), a = e, s = 0, o = e.targetTouches && e.targetTouches.length; s < o; s++) if (e.targetTouches[s].target == t) { e = e.targetTouches[s], e.originalEvent = a, e.preventDefault = ue, e.stopPropagation = fe; break } return r.call(i, e, n.x, n.y) }; t.addEventListener(V[e], a, !1) } return function () { return t.removeEventListener(e, n, !1), F && V[e] && t.removeEventListener(V[e], a, !1), !0 } } : T.doc.attachEvent ? function (t, e, r, i) { var n = function (t) { t = t || T.win.event; var e = T.doc.documentElement.scrollTop || T.doc.body.scrollTop, n = T.doc.documentElement.scrollLeft || T.doc.body.scrollLeft, a = t.clientX + n, s = t.clientY + e; return t.preventDefault = t.preventDefault || he, t.stopPropagation = t.stopPropagation || ce, r.call(i, t, a, s) }; t.attachEvent("on" + e, n); var a = function () { return t.detachEvent("on" + e, n), !0 }; return a } : void 0 }(), ge = [], ve = function (e) { for (var r = e.clientX, i = e.clientY, n = T.doc.documentElement.scrollTop || T.doc.body.scrollTop, a = T.doc.documentElement.scrollLeft || T.doc.body.scrollLeft, s, o = ge.length; o--;) { if (s = ge[o], F && e.touches) { for (var l = e.touches.length, h; l--;) if (h = e.touches[l], h.identifier == s.el._drag.id) { r = h.clientX, i = h.clientY, (e.originalEvent ? e.originalEvent : e).preventDefault(); break } } else e.preventDefault(); var u = s.el.node, c, f = u.nextSibling, p = u.parentNode, d = u.style.display; T.win.opera && p.removeChild(u), u.style.display = "none", c = s.el.paper.getElementByPoint(r, i), u.style.display = d, T.win.opera && (f ? p.insertBefore(u, f) : p.appendChild(u)), c && t("raphael.drag.over." + s.el.id, s.el, c), r += a, i += n, t("raphael.drag.move." + s.el.id, s.move_scope || s.el, r - s.el._drag.x, i - s.el._drag.y, r, i, e) } }, xe = function (r) { e.unmousemove(ve).unmouseup(xe); for (var i = ge.length, n; i--;) n = ge[i], n.el._drag = {}, t("raphael.drag.end." + n.el.id, n.end_scope || n.start_scope || n.move_scope || n.el, r); ge = [] }, ye = e.el = {}, me = D.length; me--;) !function (t) { e[t] = ye[t] = function (r, i) { return e.is(r, "function") && (this.events = this.events || [], this.events.push({ name: t, f: r, unbind: de(this.shape || this.node || T.doc, t, r, i || this) })), this }, e["un" + t] = ye["un" + t] = function (r) { for (var i = this.events || [], n = i.length; n--;) i[n].name != t || !e.is(r, "undefined") && i[n].f != r || (i[n].unbind(), i.splice(n, 1), !i.length && delete this.events); return this } }(D[me]); ye.data = function (r, i) { var n = wt[this.id] = wt[this.id] || {}; if (0 == arguments.length) return n; if (1 == arguments.length) { if (e.is(r, "object")) { for (var a in r) r[A](a) && this.data(a, r[a]); return this } return t("raphael.data.get." + this.id, this, n[r], r), n[r] } return n[r] = i, t("raphael.data.set." + this.id, this, i, r), this }, ye.removeData = function (t) { return null == t ? wt[this.id] = {} : wt[this.id] && delete wt[this.id][t], this }, ye.getData = function () { return r(wt[this.id] || {}) }, ye.hover = function (t, e, r, i) { return this.mouseover(t, r).mouseout(e, i || r) }, ye.unhover = function (t, e) { return this.unmouseover(t).unmouseout(e) }; var be = []; ye.drag = function (r, i, n, a, s, o) { function l(l) { (l.originalEvent || l).preventDefault(); var h = l.clientX, u = l.clientY, c = T.doc.documentElement.scrollTop || T.doc.body.scrollTop, f = T.doc.documentElement.scrollLeft || T.doc.body.scrollLeft; if (this._drag.id = l.identifier, F && l.touches) for (var p = l.touches.length, d; p--;) if (d = l.touches[p], this._drag.id = d.identifier, d.identifier == this._drag.id) { h = d.clientX, u = d.clientY; break } this._drag.x = h + f, this._drag.y = u + c, !ge.length && e.mousemove(ve).mouseup(xe), ge.push({ el: this, move_scope: a, start_scope: s, end_scope: o }), i && t.on("raphael.drag.start." + this.id, i), r && t.on("raphael.drag.move." + this.id, r), n && t.on("raphael.drag.end." + this.id, n), t("raphael.drag.start." + this.id, s || a || this, l.clientX + f, l.clientY + c, l) } return this._drag = {}, be.push({ el: this, start: l }), this.mousedown(l), this }, ye.onDragOver = function (e) { e ? t.on("raphael.drag.over." + this.id, e) : t.unbind("raphael.drag.over." + this.id) }, ye.undrag = function () { for (var r = be.length; r--;) be[r].el == this && (this.unmousedown(be[r].start), be.splice(r, 1), t.unbind("raphael.drag.*." + this.id)); !be.length && e.unmousemove(ve).unmouseup(xe), ge = [] }, N.circle = function (t, r, i) { var n = e._engine.circle(this, t || 0, r || 0, i || 0); return this.__set__ && this.__set__.push(n), n }, N.rect = function (t, r, i, n, a) { var s = e._engine.rect(this, t || 0, r || 0, i || 0, n || 0, a || 0); return this.__set__ && this.__set__.push(s), s }, N.ellipse = function (t, r, i, n) { var a = e._engine.ellipse(this, t || 0, r || 0, i || 0, n || 0); return this.__set__ && this.__set__.push(a), a }, N.path = function (t) { t && !e.is(t, Z) && !e.is(t[0], Q) && (t += R); var r = e._engine.path(e.format[z](e, arguments), this); return this.__set__ && this.__set__.push(r), r }, N.image = function (t, r, i, n, a) { var s = e._engine.image(this, t || "about:blank", r || 0, i || 0, n || 0, a || 0); return this.__set__ && this.__set__.push(s), s }, N.text = function (t, r, i) { var n = e._engine.text(this, t || 0, r || 0, I(i)); return this.__set__ && this.__set__.push(n), n }, N.set = function (t) { !e.is(t, "array") && (t = Array.prototype.splice.call(arguments, 0, arguments.length)); var r = new ze(t); return this.__set__ && this.__set__.push(r), r.paper = this, r.type = "set", r }, N.setStart = function (t) { this.__set__ = t || this.set() }, N.setFinish = function (t) { var e = this.__set__; return delete this.__set__, e }, N.getSize = function () { var t = this.canvas.parentNode; return { width: t.offsetWidth, height: t.offsetHeight } }, N.setSize = function (t, r) { return e._engine.setSize.call(this, t, r) }, N.setViewBox = function (t, r, i, n, a) { return e._engine.setViewBox.call(this, t, r, i, n, a) }, N.top = N.bottom = null, N.raphael = e; var _e = function (t) { var e = t.getBoundingClientRect(), r = t.ownerDocument, i = r.body, n = r.documentElement, a = n.clientTop || i.clientTop || 0, s = n.clientLeft || i.clientLeft || 0, o = e.top + (T.win.pageYOffset || n.scrollTop || i.scrollTop) - a, l = e.left + (T.win.pageXOffset || n.scrollLeft || i.scrollLeft) - s; return { y: o, x: l } }; N.getElementByPoint = function (t, e) { var r = this, i = r.canvas, n = T.doc.elementFromPoint(t, e); if (T.win.opera && "svg" == n.tagName) { var a = _e(i), s = i.createSVGRect(); s.x = t - a.x, s.y = e - a.y, s.width = s.height = 1; var o = i.getIntersectionList(s, null); o.length && (n = o[o.length - 1]) } if (!n) return null; for (; n.parentNode && n != i.parentNode && !n.raphael;) n = n.parentNode; return n == r.canvas.parentNode && (n = i), n = n && n.raphael ? r.getById(n.raphaelid) : null }, N.getElementsByBBox = function (t) { var r = this.set(); return this.forEach(function (i) { e.isBBoxIntersect(i.getBBox(), t) && r.push(i) }), r }, N.getById = function (t) { for (var e = this.bottom; e;) { if (e.id == t) return e; e = e.next } return null }, N.forEach = function (t, e) { for (var r = this.bottom; r;) { if (t.call(e, r) === !1) return this; r = r.next } return this }, N.getElementsByPoint = function (t, e) { var r = this.set(); return this.forEach(function (i) { i.isPointInside(t, e) && r.push(i) }), r }, ye.isPointInside = function (t, r) { var i = this.realPath = Et[this.type](this); return this.attr("transform") && this.attr("transform").length && (i = e.transformPath(i, this.attr("transform"))), e.isPointInsidePath(i, t, r) }, ye.getBBox = function (t) { if (this.removed) return {}; var e = this._; return t ? (!e.dirty && e.bboxwt || (this.realPath = Et[this.type](this), e.bboxwt = Ot(this.realPath), e.bboxwt.toString = x, e.dirty = 0), e.bboxwt) : ((e.dirty || e.dirtyT || !e.bbox) && (!e.dirty && this.realPath || (e.bboxwt = 0, this.realPath = Et[this.type](this)), e.bbox = Ot(Mt(this.realPath, this.matrix)), e.bbox.toString = x, e.dirty = e.dirtyT = 0), e.bbox) }, ye.clone = function () { if (this.removed) return null; var t = this.paper[this.type]().attr(this.attr()); return this.__set__ && this.__set__.push(t), t }, ye.glow = function (t) { if ("text" == this.type) return null; t = t || {}; var e = { width: (t.width || 10) + (+this.attr("stroke-width") || 1), fill: t.fill || !1, opacity: null == t.opacity ? .5 : t.opacity, offsetx: t.offsetx || 0, offsety: t.offsety || 0, color: t.color || "#000" }, r = e.width / 2, i = this.paper, n = i.set(), a = this.realPath || Et[this.type](this); a = this.matrix ? Mt(a, this.matrix) : a; for (var s = 1; s < r + 1; s++) n.push(i.path(a).attr({ stroke: e.color, fill: e.fill ? e.color : "none", "stroke-linejoin": "round", "stroke-linecap": "round", "stroke-width": +(e.width / r * s).toFixed(3), opacity: +(e.opacity / r).toFixed(3) })); return n.insertBefore(this).translate(e.offsetx, e.offsety) }; var we = {}, ke = function (t, r, i, n, a, s, o, u, c) { return null == c ? l(t, r, i, n, a, s, o, u) : e.findDotsAtSegment(t, r, i, n, a, s, o, u, h(t, r, i, n, a, s, o, u, c)) }, Be = function (t, r) { return function (i, n, a) { i = Qt(i); for (var s, o, l, h, u = "", c = {}, f, p = 0, d = 0, g = i.length; d < g; d++) { if (l = i[d], "M" == l[0]) s = +l[1], o = +l[2]; else { if (h = ke(s, o, l[1], l[2], l[3], l[4], l[5], l[6]), p + h > n) { if (r && !c.start) { if (f = ke(s, o, l[1], l[2], l[3], l[4], l[5], l[6], n - p), u += ["C" + f.start.x, f.start.y, f.m.x, f.m.y, f.x, f.y], a) return u; c.start = u, u = ["M" + f.x, f.y + "C" + f.n.x, f.n.y, f.end.x, f.end.y, l[5], l[6]].join(), p += h, s = +l[5], o = +l[6]; continue } if (!t && !r) return f = ke(s, o, l[1], l[2], l[3], l[4], l[5], l[6], n - p), { x: f.x, y: f.y, alpha: f.alpha } } p += h, s = +l[5], o = +l[6] } u += l.shift() + l } return c.end = u, f = t ? p : r ? c : e.findDotsAtSegment(s, o, l[0], l[1], l[2], l[3], l[4], l[5], 1), f.alpha && (f = { x: f.x, y: f.y, alpha: f.alpha }), f } }, Ce = Be(1), Se = Be(), Ae = Be(0, 1); e.getTotalLength = Ce, e.getPointAtLength = Se, e.getSubpath = function (t, e, r) { if (this.getTotalLength(t) - r < 1e-6) return Ae(t, e).end; var i = Ae(t, r, 1); return e ? Ae(i, e).end : i }, ye.getTotalLength = function () { var t = this.getPath(); if (t) return this.node.getTotalLength ? this.node.getTotalLength() : Ce(t) }, ye.getPointAtLength = function (t) { var e = this.getPath(); if (e) return Se(e, t) }, ye.getPath = function () { var t, r = e._getPath[this.type]; if ("text" != this.type && "set" != this.type) return r && (t = r(this)), t }, ye.getSubpath = function (t, r) { var i = this.getPath(); if (i) return e.getSubpath(i, t, r) }; var Te = e.easing_formulas = { linear: function (t) { return t }, "<": function (t) { return X(t, 1.7) }, ">": function (t) { return X(t, .48) }, "<>": function (t) { var e = .48 - t / 1.04, r = Y.sqrt(.1734 + e * e), i = r - e, n = X(H(i), 1 / 3) * (i < 0 ? -1 : 1), a = -r - e, s = X(H(a), 1 / 3) * (a < 0 ? -1 : 1), o = n + s + .5; return 3 * (1 - o) * o * o + o * o * o }, backIn: function (t) { var e = 1.70158; return t * t * ((e + 1) * t - e) }, backOut: function (t) { t -= 1; var e = 1.70158; return t * t * ((e + 1) * t + e) + 1 }, elastic: function (t) { return t == !!t ? t : X(2, -10 * t) * Y.sin((t - .075) * (2 * U) / .3) + 1 }, bounce: function (t) { var e = 7.5625, r = 2.75, i; return t < 1 / r ? i = e * t * t : t < 2 / r ? (t -= 1.5 / r, i = e * t * t + .75) : t < 2.5 / r ? (t -= 2.25 / r, i = e * t * t + .9375) : (t -= 2.625 / r, i = e * t * t + .984375), i } }; Te.easeIn = Te["ease-in"] = Te["<"], Te.easeOut = Te["ease-out"] = Te[">"], Te.easeInOut = Te["ease-in-out"] = Te["<>"], Te["back-in"] = Te.backIn, Te["back-out"] = Te.backOut; var Ee = [], Me = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (t) { setTimeout(t, 16) }, Ne = function () { for (var r = +new Date, i = 0; i < Ee.length; i++) { var n = Ee[i]; if (!n.el.removed && !n.paused) { var a = r - n.start, s = n.ms, o = n.easing, l = n.from, h = n.diff, u = n.to, c = n.t, f = n.el, p = {}, d, g = {}, v; if (n.initstatus ? (a = (n.initstatus * n.anim.top - n.prev) / (n.percent - n.prev) * s, n.status = n.initstatus, delete n.initstatus, n.stop && Ee.splice(i--, 1)) : n.status = (n.prev + (n.percent - n.prev) * (a / s)) / n.anim.top, !(a < 0)) if (a < s) { var x = o(a / s); for (var y in l) if (l[A](y)) { switch (pt[y]) { case $: d = +l[y] + x * s * h[y]; break; case "colour": d = "rgb(" + [Le(ot(l[y].r + x * s * h[y].r)), Le(ot(l[y].g + x * s * h[y].g)), Le(ot(l[y].b + x * s * h[y].b))].join(",") + ")"; break; case "path": d = []; for (var m = 0, _ = l[y].length; m < _; m++) { d[m] = [l[y][m][0]]; for (var w = 1, k = l[y][m].length; w < k; w++) d[m][w] = +l[y][m][w] + x * s * h[y][m][w]; d[m] = d[m].join(j) } d = d.join(j); break; case "transform": if (h[y].real) for (d = [], m = 0, _ = l[y].length; m < _; m++) for (d[m] = [l[y][m][0]], w = 1, k = l[y][m].length; w < k; w++) d[m][w] = l[y][m][w] + x * s * h[y][m][w]; else { var B = function (t) { return +l[y][t] + x * s * h[y][t] }; d = [["m", B(0), B(1), B(2), B(3), B(4), B(5)]] } break; case "csv": if ("clip-rect" == y) for (d = [], m = 4; m--;) d[m] = +l[y][m] + x * s * h[y][m]; break; default: var C = [][P](l[y]); for (d = [], m = f.paper.customAttributes[y].length; m--;) d[m] = +C[m] + x * s * h[y][m] } p[y] = d } f.attr(p), function (e, r, i) { setTimeout(function () { t("raphael.anim.frame." + e, r, i) }) }(f.id, f, n.anim) } else { if (function (r, i, n) { setTimeout(function () { t("raphael.anim.frame." + i.id, i, n), t("raphael.anim.finish." + i.id, i, n), e.is(r, "function") && r.call(i) }) }(n.callback, f, n.anim), f.attr(u), Ee.splice(i--, 1), n.repeat > 1 && !n.next) { for (v in u) u[A](v) && (g[v] = n.totalOrigin[v]); n.el.attr(g), b(n.anim, n.el, n.anim.percents[0], null, n.totalOrigin, n.repeat - 1) } n.next && !n.stop && b(n.anim, n.el, n.next, null, n.totalOrigin, n.repeat) } } } Ee.length && Me(Ne) }, Le = function (t) { return t > 255 ? 255 : t < 0 ? 0 : t }; ye.animateWith = function (t, r, i, n, a, s) { var o = this; if (o.removed) return s && s.call(o), o; var l = i instanceof m ? i : e.animation(i, n, a, s), h, u; b(l, o, l.percents[0], null, o.attr()); for (var c = 0, f = Ee.length; c < f; c++) if (Ee[c].anim == r && Ee[c].el == t) { Ee[f - 1].start = Ee[c].start; break } return o }, ye.onAnimation = function (e) { return e ? t.on("raphael.anim.frame." + this.id, e) : t.unbind("raphael.anim.frame." + this.id), this }, m.prototype.delay = function (t) { var e = new m(this.anim, this.ms); return e.times = this.times, e.del = +t || 0, e }, m.prototype.repeat = function (t) { var e = new m(this.anim, this.ms); return e.del = this.del, e.times = Y.floor(W(t, 0)) || 1, e }, e.animation = function (t, r, i, n) { if (t instanceof m) return t; !e.is(i, "function") && i || (n = n || i || null, i = null), t = Object(t), r = +r || 0; var a = {}, s, o; for (o in t) t[A](o) && ht(o) != o && ht(o) + "%" != o && (s = !0, a[o] = t[o]); if (s) return i && (a.easing = i), n && (a.callback = n), new m({ 100: a }, r); if (n) { var l = 0; for (var h in t) { var u = ut(h); t[A](h) && u > l && (l = u) } l += "%", !t[l].callback && (t[l].callback = n) } return new m(t, r) }, ye.animate = function (t, r, i, n) { var a = this; if (a.removed) return n && n.call(a), a; var s = t instanceof m ? t : e.animation(t, r, i, n); return b(s, a, s.percents[0], null, a.attr()), a }, ye.setTime = function (t, e) { return t && null != e && this.status(t, G(e, t.ms) / t.ms), this }, ye.status = function (t, e) { var r = [], i = 0, n, a; if (null != e) return b(t, this, -1, G(e, 1)), this; for (n = Ee.length; i < n; i++) if (a = Ee[i], a.el.id == this.id && (!t || a.anim == t)) { if (t) return a.status; r.push({ anim: a.anim, status: a.status }) } return t ? 0 : r }, ye.pause = function (e) { for (var r = 0; r < Ee.length; r++) Ee[r].el.id != this.id || e && Ee[r].anim != e || t("raphael.anim.pause." + this.id, this, Ee[r].anim) !== !1 && (Ee[r].paused = !0); return this }, ye.resume = function (e) { for (var r = 0; r < Ee.length; r++) if (Ee[r].el.id == this.id && (!e || Ee[r].anim == e)) { var i = Ee[r]; t("raphael.anim.resume." + this.id, this, i.anim) !== !1 && (delete i.paused, this.status(i.anim, i.status)) } return this }, ye.stop = function (e) { for (var r = 0; r < Ee.length; r++) Ee[r].el.id != this.id || e && Ee[r].anim != e || t("raphael.anim.stop." + this.id, this, Ee[r].anim) !== !1 && Ee.splice(r--, 1); return this }, t.on("raphael.remove", _), t.on("raphael.clear", _), ye.toString = function () { return "Raphaël’s object" }; var ze = function (t) { if (this.items = [], this.length = 0, this.type = "set", t) for (var e = 0, r = t.length; e < r; e++) !t[e] || t[e].constructor != ye.constructor && t[e].constructor != ze || (this[this.items.length] = this.items[this.items.length] = t[e], this.length++) }, Pe = ze.prototype; Pe.push = function () { for (var t, e, r = 0, i = arguments.length; r < i; r++) t = arguments[r], !t || t.constructor != ye.constructor && t.constructor != ze || (e = this.items.length, this[e] = this.items[e] = t, this.length++); return this }, Pe.pop = function () { return this.length && delete this[this.length--], this.items.pop() }, Pe.forEach = function (t, e) { for (var r = 0, i = this.items.length; r < i; r++) if (t.call(e, this.items[r], r) === !1) return this; return this }; for (var Fe in ye) ye[A](Fe) && (Pe[Fe] = function (t) { return function () { var e = arguments; return this.forEach(function (r) { r[t][z](r, e) }) } }(Fe)); return Pe.attr = function (t, r) { if (t && e.is(t, Q) && e.is(t[0], "object")) for (var i = 0, n = t.length; i < n; i++) this.items[i].attr(t[i]); else for (var a = 0, s = this.items.length; a < s; a++) this.items[a].attr(t, r); return this }, Pe.clear = function () { for (; this.length;) this.pop() }, Pe.splice = function (t, e, r) { t = t < 0 ? W(this.length + t, 0) : t, e = W(0, G(this.length - t, e)); var i = [], n = [], a = [], s; for (s = 2; s < arguments.length; s++) a.push(arguments[s]); for (s = 0; s < e; s++) n.push(this[t + s]); for (; s < this.length - t; s++) i.push(this[t + s]); var o = a.length; for (s = 0; s < o + i.length; s++) this.items[t + s] = this[t + s] = s < o ? a[s] : i[s - o]; for (s = this.items.length = this.length -= e - o; this[s];) delete this[s++]; return new ze(n) }, Pe.exclude = function (t) { for (var e = 0, r = this.length; e < r; e++) if (this[e] == t) return this.splice(e, 1), !0 }, Pe.animate = function (t, r, i, n) { (e.is(i, "function") || !i) && (n = i || null); var a = this.items.length, s = a, o, l = this, h; if (!a) return this; n && (h = function () { !--a && n.call(l) }), i = e.is(i, Z) ? i : h; var u = e.animation(t, r, i, h); for (o = this.items[--s].animate(u) ; s--;) this.items[s] && !this.items[s].removed && this.items[s].animateWith(o, u, u), this.items[s] && !this.items[s].removed || a--; return this }, Pe.insertAfter = function (t) { for (var e = this.items.length; e--;) this.items[e].insertAfter(t); return this }, Pe.getBBox = function () { for (var t = [], e = [], r = [], i = [], n = this.items.length; n--;) if (!this.items[n].removed) { var a = this.items[n].getBBox(); t.push(a.x), e.push(a.y), r.push(a.x + a.width), i.push(a.y + a.height) } return t = G[z](0, t), e = G[z](0, e), r = W[z](0, r), i = W[z](0, i), { x: t, y: e, x2: r, y2: i, width: r - t, height: i - e } }, Pe.clone = function (t) { t = this.paper.set(); for (var e = 0, r = this.items.length; e < r; e++) t.push(this.items[e].clone()); return t }, Pe.toString = function () { return "Raphaël‘s set" }, Pe.glow = function (t) { var e = this.paper.set(); return this.forEach(function (r, i) { var n = r.glow(t); null != n && n.forEach(function (t, r) { e.push(t) }) }), e }, Pe.isPointInside = function (t, e) { var r = !1; return this.forEach(function (i) { if (i.isPointInside(t, e)) return r = !0, !1 }), r }, e.registerFont = function (t) { if (!t.face) return t; this.fonts = this.fonts || {}; var e = { w: t.w, face: {}, glyphs: {} }, r = t.face["font-family"]; for (var i in t.face) t.face[A](i) && (e.face[i] = t.face[i]); if (this.fonts[r] ? this.fonts[r].push(e) : this.fonts[r] = [e], !t.svg) { e.face["units-per-em"] = ut(t.face["units-per-em"], 10); for (var n in t.glyphs) if (t.glyphs[A](n)) { var a = t.glyphs[n]; if (e.glyphs[n] = { w: a.w, k: {}, d: a.d && "M" + a.d.replace(/[mlcxtrv]/g, function (t) { return { l: "L", c: "C", x: "z", t: "m", r: "l", v: "c" }[t] || "M" }) + "z" }, a.k) for (var s in a.k) a[A](s) && (e.glyphs[n].k[s] = a.k[s]) } } return t }, N.getFont = function (t, r, i, n) { if (n = n || "normal", i = i || "normal", r = +r || { normal: 400, bold: 700, lighter: 300, bolder: 800 }[r] || 400, e.fonts) { var a = e.fonts[t]; if (!a) { var s = new RegExp("(^|\\s)" + t.replace(/[^\w\d\s+!~.:_-]/g, R) + "(\\s|$)", "i"); for (var o in e.fonts) if (e.fonts[A](o) && s.test(o)) { a = e.fonts[o]; break } } var l; if (a) for (var h = 0, u = a.length; h < u && (l = a[h], l.face["font-weight"] != r || l.face["font-style"] != i && l.face["font-style"] || l.face["font-stretch"] != n) ; h++); return l } }, N.print = function (t, r, i, n, a, s, o, l) { s = s || "middle", o = W(G(o || 0, 1), -1), l = W(G(l || 1, 3), 1); var h = I(i)[q](R), u = 0, c = 0, f = R, p; if (e.is(n, "string") && (n = this.getFont(n)), n) { p = (a || 16) / n.face["units-per-em"]; for (var d = n.face.bbox[q](k), g = +d[0], v = d[3] - d[1], x = 0, y = +d[1] + ("baseline" == s ? v + +n.face.descent : v / 2), m = 0, b = h.length; m < b; m++) { if ("\n" == h[m]) u = 0, w = 0, c = 0, x += v * l; else { var _ = c && n.glyphs[h[m - 1]] || {}, w = n.glyphs[h[m]]; u += c ? (_.w || n.w) + (_.k && _.k[h[m]] || 0) + n.w * o : 0, c = 1 } w && w.d && (f += e.transformPath(w.d, ["t", u * p, x * p, "s", p, p, g, y, "t", (t - g) / p, (r - y) / p])) } } return this.path(f).attr({ fill: "#000", stroke: "none" }) }, N.add = function (t) { if (e.is(t, "array")) for (var r = this.set(), i = 0, n = t.length, a; i < n; i++) a = t[i] || {}, B[A](a.type) && r.push(this[a.type]().attr(a)); return r }, e.format = function (t, r) { var i = e.is(r, Q) ? [0][P](r) : arguments; return t && e.is(t, Z) && i.length - 1 && (t = t.replace(C, function (t, e) { return null == i[++e] ? R : i[e] })), t || R }, e.fullfill = function () { var t = /\{([^\}]+)\}/g, e = /(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g, r = function (t, r, i) { var n = i; return r.replace(e, function (t, e, r, i, a) { e = e || i, n && (e in n && (n = n[e]), "function" == typeof n && a && (n = n())) }), n = (null == n || n == i ? t : n) + "" }; return function (e, i) { return String(e).replace(t, function (t, e) { return r(t, e, i) }) } }(), e.ninja = function () { if (E.was) T.win.Raphael = E.is; else { window.Raphael = void 0; try { delete window.Raphael } catch (t) { } } return e }, e.st = Pe, t.on("raphael.DOMload", function () { w = !0 }), function (t, r, i) { function n() { /in/.test(t.readyState) ? setTimeout(n, 9) : e.eve("raphael.DOMload") } null == t.readyState && t.addEventListener && (t.addEventListener(r, i = function () { t.removeEventListener(r, i, !1), t.readyState = "complete" }, !1), t.readyState = "loading"), n() }(document, "DOMContentLoaded"), e
        }.apply(e, i), !(void 0 !== n && (t.exports = n))
    }, function (t, e, r) { var i, n; !function (r) { var a = "0.5.0", s = "hasOwnProperty", o = /[\.\/]/, l = /\s*,\s*/, h = "*", u = function () { }, c = function (t, e) { return t - e }, f, p, d = { n: {} }, g = function () { for (var t = 0, e = this.length; t < e; t++) if ("undefined" != typeof this[t]) return this[t] }, v = function () { for (var t = this.length; --t;) if ("undefined" != typeof this[t]) return this[t] }, x = Object.prototype.toString, y = String, m = Array.isArray || function (t) { return t instanceof Array || "[object Array]" == x.call(t) }; eve = function (t, e) { var r = d, i = p, n = Array.prototype.slice.call(arguments, 2), a = eve.listeners(t), s = 0, o = !1, l, h = [], u = {}, x = [], y = f, m = []; x.firstDefined = g, x.lastDefined = v, f = t, p = 0; for (var b = 0, _ = a.length; b < _; b++) "zIndex" in a[b] && (h.push(a[b].zIndex), a[b].zIndex < 0 && (u[a[b].zIndex] = a[b])); for (h.sort(c) ; h[s] < 0;) if (l = u[h[s++]], x.push(l.apply(e, n)), p) return p = i, x; for (b = 0; b < _; b++) if (l = a[b], "zIndex" in l) if (l.zIndex == h[s]) { if (x.push(l.apply(e, n)), p) break; do if (s++, l = u[h[s]], l && x.push(l.apply(e, n)), p) break; while (l) } else u[l.zIndex] = l; else if (x.push(l.apply(e, n)), p) break; return p = i, f = y, x }, eve._events = d, eve.listeners = function (t) { var e = m(t) ? t : t.split(o), r = d, i, n, a, s, l, u, c, f, p = [r], g = []; for (s = 0, l = e.length; s < l; s++) { for (f = [], u = 0, c = p.length; u < c; u++) for (r = p[u].n, n = [r[e[s]], r[h]], a = 2; a--;) i = n[a], i && (f.push(i), g = g.concat(i.f || [])); p = f } return g }, eve.separator = function (t) { t ? (t = y(t).replace(/(?=[\.\^\]\[\-])/g, "\\"), t = "[" + t + "]", o = new RegExp(t)) : o = /[\.\/]/ }, eve.on = function (t, e) { if ("function" != typeof e) return function () { }; for (var r = m(t) ? m(t[0]) ? t : [t] : y(t).split(l), i = 0, n = r.length; i < n; i++) !function (t) { for (var r = m(t) ? t : y(t).split(o), i = d, n, a = 0, s = r.length; a < s; a++) i = i.n, i = i.hasOwnProperty(r[a]) && i[r[a]] || (i[r[a]] = { n: {} }); for (i.f = i.f || [], a = 0, s = i.f.length; a < s; a++) if (i.f[a] == e) { n = !0; break } !n && i.f.push(e) }(r[i]); return function (t) { +t == +t && (e.zIndex = +t) } }, eve.f = function (t) { var e = [].slice.call(arguments, 1); return function () { eve.apply(null, [t, null].concat(e).concat([].slice.call(arguments, 0))) } }, eve.stop = function () { p = 1 }, eve.nt = function (t) { var e = m(f) ? f.join(".") : f; return t ? new RegExp("(?:\\.|\\/|^)" + t + "(?:\\.|\\/|$)").test(e) : e }, eve.nts = function () { return m(f) ? f : f.split(o) }, eve.off = eve.unbind = function (t, e) { if (!t) return void (eve._events = d = { n: {} }); var r = m(t) ? m(t[0]) ? t : [t] : y(t).split(l); if (r.length > 1) for (var i = 0, n = r.length; i < n; i++) eve.off(r[i], e); else { r = m(t) ? t : y(t).split(o); var a, u, c, i, n, f, p, g = [d]; for (i = 0, n = r.length; i < n; i++) for (f = 0; f < g.length; f += c.length - 2) { if (c = [f, 1], a = g[f].n, r[i] != h) a[r[i]] && c.push(a[r[i]]); else for (u in a) a[s](u) && c.push(a[u]); g.splice.apply(g, c) } for (i = 0, n = g.length; i < n; i++) for (a = g[i]; a.n;) { if (e) { if (a.f) { for (f = 0, p = a.f.length; f < p; f++) if (a.f[f] == e) { a.f.splice(f, 1); break } !a.f.length && delete a.f } for (u in a.n) if (a.n[s](u) && a.n[u].f) { var v = a.n[u].f; for (f = 0, p = v.length; f < p; f++) if (v[f] == e) { v.splice(f, 1); break } !v.length && delete a.n[u].f } } else { delete a.f; for (u in a.n) a.n[s](u) && a.n[u].f && delete a.n[u].f } a = a.n } } }, eve.once = function (t, e) { var r = function () { return eve.off(t, r), e.apply(this, arguments) }; return eve.on(t, r) }, eve.version = a, eve.toString = function () { return "You are running Eve " + a }, "undefined" != typeof t && t.exports ? t.exports = eve : (i = [], n = function () { return eve }.apply(e, i), !(void 0 !== n && (t.exports = n))) }(this) }, function (t, e, r) {
        var i, n; i = [r(1)], n = function (t) {
            if (!t || t.svg) {
                var e = "hasOwnProperty", r = String, i = parseFloat, n = parseInt, a = Math, s = a.max, o = a.abs, l = a.pow, h = /[, ]+/, u = t.eve, c = "", f = " ", p = "http://www.w3.org/1999/xlink", d = { block: "M5,0 0,2.5 5,5z", classic: "M5,0 0,2.5 5,5 3.5,3 3.5,2z", diamond: "M2.5,0 5,2.5 2.5,5 0,2.5z", open: "M6,1 1,3.5 6,6", oval: "M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z" }, g = {}; t.toString = function () { return "Your browser supports SVG.\nYou are running Raphaël " + this.version }; var v = function (i, n) { if (n) { "string" == typeof i && (i = v(i)); for (var a in n) n[e](a) && ("xlink:" == a.substring(0, 6) ? i.setAttributeNS(p, a.substring(6), r(n[a])) : i.setAttribute(a, r(n[a]))) } else i = t._g.doc.createElementNS("http://www.w3.org/2000/svg", i), i.style && (i.style.webkitTapHighlightColor = "rgba(0,0,0,0)"); return i }, x = function (e, n) { var h = "linear", u = e.id + n, f = .5, p = .5, d = e.node, g = e.paper, x = d.style, y = t._g.doc.getElementById(u); if (!y) { if (n = r(n).replace(t._radial_gradient, function (t, e, r) { if (h = "radial", e && r) { f = i(e), p = i(r); var n = 2 * (p > .5) - 1; l(f - .5, 2) + l(p - .5, 2) > .25 && (p = a.sqrt(.25 - l(f - .5, 2)) * n + .5) && .5 != p && (p = p.toFixed(5) - 1e-5 * n) } return c }), n = n.split(/\s*\-\s*/), "linear" == h) { var b = n.shift(); if (b = -i(b), isNaN(b)) return null; var _ = [0, 0, a.cos(t.rad(b)), a.sin(t.rad(b))], w = 1 / (s(o(_[2]), o(_[3])) || 1); _[2] *= w, _[3] *= w, _[2] < 0 && (_[0] = -_[2], _[2] = 0), _[3] < 0 && (_[1] = -_[3], _[3] = 0) } var k = t._parseDots(n); if (!k) return null; if (u = u.replace(/[\(\)\s,\xb0#]/g, "_"), e.gradient && u != e.gradient.id && (g.defs.removeChild(e.gradient), delete e.gradient), !e.gradient) { y = v(h + "Gradient", { id: u }), e.gradient = y, v(y, "radial" == h ? { fx: f, fy: p } : { x1: _[0], y1: _[1], x2: _[2], y2: _[3], gradientTransform: e.matrix.invert() }), g.defs.appendChild(y); for (var B = 0, C = k.length; B < C; B++) y.appendChild(v("stop", { offset: k[B].offset ? k[B].offset : B ? "100%" : "0%", "stop-color": k[B].color || "#fff", "stop-opacity": isFinite(k[B].opacity) ? k[B].opacity : 1 })) } } return v(d, { fill: m(u), opacity: 1, "fill-opacity": 1 }), x.fill = c, x.opacity = 1, x.fillOpacity = 1, 1 }, y = function () { var t = document.documentMode; return t && (9 === t || 10 === t) }, m = function (t) { if (y()) return "url('#" + t + "')"; var e = document.location, r = e.protocol + "//" + e.host + e.pathname + e.search; return "url('" + r + "#" + t + "')" }, b = function (t) { var e = t.getBBox(1); v(t.pattern, { patternTransform: t.matrix.invert() + " translate(" + e.x + "," + e.y + ")" }) }, _ = function (i, n, a) { if ("path" == i.type) { for (var s = r(n).toLowerCase().split("-"), o = i.paper, l = a ? "end" : "start", h = i.node, u = i.attrs, f = u["stroke-width"], p = s.length, x = "classic", y, m, b, _, w, k = 3, B = 3, C = 5; p--;) switch (s[p]) { case "block": case "classic": case "oval": case "diamond": case "open": case "none": x = s[p]; break; case "wide": B = 5; break; case "narrow": B = 2; break; case "long": k = 5; break; case "short": k = 2 } if ("open" == x ? (k += 2, B += 2, C += 2, b = 1, _ = a ? 4 : 1, w = { fill: "none", stroke: u.stroke }) : (_ = b = k / 2, w = { fill: u.stroke, stroke: "none" }), i._.arrows ? a ? (i._.arrows.endPath && g[i._.arrows.endPath]--, i._.arrows.endMarker && g[i._.arrows.endMarker]--) : (i._.arrows.startPath && g[i._.arrows.startPath]--, i._.arrows.startMarker && g[i._.arrows.startMarker]--) : i._.arrows = {}, "none" != x) { var S = "raphael-marker-" + x, A = "raphael-marker-" + l + x + k + B + "-obj" + i.id; t._g.doc.getElementById(S) ? g[S]++ : (o.defs.appendChild(v(v("path"), { "stroke-linecap": "round", d: d[x], id: S })), g[S] = 1); var T = t._g.doc.getElementById(A), E; T ? (g[A]++, E = T.getElementsByTagName("use")[0]) : (T = v(v("marker"), { id: A, markerHeight: B, markerWidth: k, orient: "auto", refX: _, refY: B / 2 }), E = v(v("use"), { "xlink:href": "#" + S, transform: (a ? "rotate(180 " + k / 2 + " " + B / 2 + ") " : c) + "scale(" + k / C + "," + B / C + ")", "stroke-width": (1 / ((k / C + B / C) / 2)).toFixed(4) }), T.appendChild(E), o.defs.appendChild(T), g[A] = 1), v(E, w); var M = b * ("diamond" != x && "oval" != x); a ? (y = i._.arrows.startdx * f || 0, m = t.getTotalLength(u.path) - M * f) : (y = M * f, m = t.getTotalLength(u.path) - (i._.arrows.enddx * f || 0)), w = {}, w["marker-" + l] = "url(#" + A + ")", (m || y) && (w.d = t.getSubpath(u.path, y, m)), v(h, w), i._.arrows[l + "Path"] = S, i._.arrows[l + "Marker"] = A, i._.arrows[l + "dx"] = M, i._.arrows[l + "Type"] = x, i._.arrows[l + "String"] = n } else a ? (y = i._.arrows.startdx * f || 0, m = t.getTotalLength(u.path) - y) : (y = 0, m = t.getTotalLength(u.path) - (i._.arrows.enddx * f || 0)), i._.arrows[l + "Path"] && v(h, { d: t.getSubpath(u.path, y, m) }), delete i._.arrows[l + "Path"], delete i._.arrows[l + "Marker"], delete i._.arrows[l + "dx"], delete i._.arrows[l + "Type"], delete i._.arrows[l + "String"]; for (w in g) if (g[e](w) && !g[w]) { var N = t._g.doc.getElementById(w); N && N.parentNode.removeChild(N) } } }, w = { "-": [3, 1], ".": [1, 1], "-.": [3, 1, 1, 1], "-..": [3, 1, 1, 1, 1, 1], ". ": [1, 3], "- ": [4, 3], "--": [8, 3], "- .": [4, 3, 1, 3], "--.": [8, 3, 1, 3], "--..": [8, 3, 1, 3, 1, 3] }, k = function (t, e, i) { if (e = w[r(e).toLowerCase()]) { for (var n = t.attrs["stroke-width"] || "1", a = { round: n, square: n, butt: 0 }[t.attrs["stroke-linecap"] || i["stroke-linecap"]] || 0, s = [], o = e.length; o--;) s[o] = e[o] * n + (o % 2 ? 1 : -1) * a; v(t.node, { "stroke-dasharray": s.join(",") }) } else v(t.node, { "stroke-dasharray": "none" }) }, B = function (i, a) {
                    var l = i.node, u = i.attrs, f = l.style.visibility; l.style.visibility = "hidden"; for (var d in a) if (a[e](d)) {
                        if (!t._availableAttrs[e](d)) continue; var g = a[d]; switch (u[d] = g, d) {
                            case "blur": i.blur(g); break; case "title": var y = l.getElementsByTagName("title"); if (y.length && (y = y[0])) y.firstChild.nodeValue = g; else { y = v("title"); var m = t._g.doc.createTextNode(g); y.appendChild(m), l.appendChild(y) } break; case "href": case "target": var w = l.parentNode; if ("a" != w.tagName.toLowerCase()) { var B = v("a"); w.insertBefore(B, l), B.appendChild(l), w = B } "target" == d ? w.setAttributeNS(p, "show", "blank" == g ? "new" : g) : w.setAttributeNS(p, d, g); break; case "cursor": l.style.cursor = g; break; case "transform": i.transform(g); break; case "arrow-start": _(i, g); break; case "arrow-end": _(i, g, 1); break; case "clip-rect": var C = r(g).split(h); if (4 == C.length) { i.clip && i.clip.parentNode.parentNode.removeChild(i.clip.parentNode); var A = v("clipPath"), T = v("rect"); A.id = t.createUUID(), v(T, { x: C[0], y: C[1], width: C[2], height: C[3] }), A.appendChild(T), i.paper.defs.appendChild(A), v(l, { "clip-path": "url(#" + A.id + ")" }), i.clip = T } if (!g) { var E = l.getAttribute("clip-path"); if (E) { var M = t._g.doc.getElementById(E.replace(/(^url\(#|\)$)/g, c)); M && M.parentNode.removeChild(M), v(l, { "clip-path": c }), delete i.clip } } break; case "path": "path" == i.type && (v(l, { d: g ? u.path = t._pathToAbsolute(g) : "M0,0" }), i._.dirty = 1, i._.arrows && ("startString" in i._.arrows && _(i, i._.arrows.startString), "endString" in i._.arrows && _(i, i._.arrows.endString, 1))); break; case "width": if (l.setAttribute(d, g), i._.dirty = 1, !u.fx) break; d = "x", g = u.x; case "x": u.fx && (g = -u.x - (u.width || 0)); case "rx": if ("rx" == d && "rect" == i.type) break; case "cx": l.setAttribute(d, g), i.pattern && b(i), i._.dirty = 1; break; case "height": if (l.setAttribute(d, g), i._.dirty = 1, !u.fy) break; d = "y", g = u.y; case "y": u.fy && (g = -u.y - (u.height || 0)); case "ry": if ("ry" == d && "rect" == i.type) break; case "cy": l.setAttribute(d, g), i.pattern && b(i), i._.dirty = 1; break; case "r": "rect" == i.type ? v(l, { rx: g, ry: g }) : l.setAttribute(d, g), i._.dirty = 1; break; case "src": "image" == i.type && l.setAttributeNS(p, "href", g); break; case "stroke-width": 1 == i._.sx && 1 == i._.sy || (g /= s(o(i._.sx), o(i._.sy)) || 1), l.setAttribute(d, g), u["stroke-dasharray"] && k(i, u["stroke-dasharray"], a),
                            i._.arrows && ("startString" in i._.arrows && _(i, i._.arrows.startString), "endString" in i._.arrows && _(i, i._.arrows.endString, 1)); break; case "stroke-dasharray": k(i, g, a); break; case "fill": var N = r(g).match(t._ISURL); if (N) { A = v("pattern"); var L = v("image"); A.id = t.createUUID(), v(A, { x: 0, y: 0, patternUnits: "userSpaceOnUse", height: 1, width: 1 }), v(L, { x: 0, y: 0, "xlink:href": N[1] }), A.appendChild(L), function (e) { t._preload(N[1], function () { var t = this.offsetWidth, r = this.offsetHeight; v(e, { width: t, height: r }), v(L, { width: t, height: r }) }) }(A), i.paper.defs.appendChild(A), v(l, { fill: "url(#" + A.id + ")" }), i.pattern = A, i.pattern && b(i); break } var z = t.getRGB(g); if (z.error) { if (("circle" == i.type || "ellipse" == i.type || "r" != r(g).charAt()) && x(i, g)) { if ("opacity" in u || "fill-opacity" in u) { var P = t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g, c)); if (P) { var F = P.getElementsByTagName("stop"); v(F[F.length - 1], { "stop-opacity": ("opacity" in u ? u.opacity : 1) * ("fill-opacity" in u ? u["fill-opacity"] : 1) }) } } u.gradient = g, u.fill = "none"; break } } else delete a.gradient, delete u.gradient, !t.is(u.opacity, "undefined") && t.is(a.opacity, "undefined") && v(l, { opacity: u.opacity }), !t.is(u["fill-opacity"], "undefined") && t.is(a["fill-opacity"], "undefined") && v(l, { "fill-opacity": u["fill-opacity"] }); z[e]("opacity") && v(l, { "fill-opacity": z.opacity > 1 ? z.opacity / 100 : z.opacity }); case "stroke": z = t.getRGB(g), l.setAttribute(d, z.hex), "stroke" == d && z[e]("opacity") && v(l, { "stroke-opacity": z.opacity > 1 ? z.opacity / 100 : z.opacity }), "stroke" == d && i._.arrows && ("startString" in i._.arrows && _(i, i._.arrows.startString), "endString" in i._.arrows && _(i, i._.arrows.endString, 1)); break; case "gradient": ("circle" == i.type || "ellipse" == i.type || "r" != r(g).charAt()) && x(i, g); break; case "opacity": u.gradient && !u[e]("stroke-opacity") && v(l, { "stroke-opacity": g > 1 ? g / 100 : g }); case "fill-opacity": if (u.gradient) { P = t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g, c)), P && (F = P.getElementsByTagName("stop"), v(F[F.length - 1], { "stop-opacity": g })); break } default: "font-size" == d && (g = n(g, 10) + "px"); var R = d.replace(/(\-.)/g, function (t) { return t.substring(1).toUpperCase() }); l.style[R] = g, i._.dirty = 1, l.setAttribute(d, g)
                        }
                    } S(i, a), l.style.visibility = f
                }, C = 1.2, S = function (i, a) { if ("text" == i.type && (a[e]("text") || a[e]("font") || a[e]("font-size") || a[e]("x") || a[e]("y"))) { var s = i.attrs, o = i.node, l = o.firstChild ? n(t._g.doc.defaultView.getComputedStyle(o.firstChild, c).getPropertyValue("font-size"), 10) : 10; if (a[e]("text")) { for (s.text = a.text; o.firstChild;) o.removeChild(o.firstChild); for (var h = r(a.text).split("\n"), u = [], f, p = 0, d = h.length; p < d; p++) f = v("tspan"), p && v(f, { dy: l * C, x: s.x }), f.appendChild(t._g.doc.createTextNode(h[p])), o.appendChild(f), u[p] = f } else for (u = o.getElementsByTagName("tspan"), p = 0, d = u.length; p < d; p++) p ? v(u[p], { dy: l * C, x: s.x }) : v(u[0], { dy: 0 }); v(o, { x: s.x, y: s.y }), i._.dirty = 1; var g = i._getBBox(), x = s.y - (g.y + g.height / 2); x && t.is(x, "finite") && v(u[0], { dy: x }) } }, A = function (t) { return t.parentNode && "a" === t.parentNode.tagName.toLowerCase() ? t.parentNode : t }, T = function (e, r) { function i() { return ("0000" + (Math.random() * Math.pow(36, 5) << 0).toString(36)).slice(-5) } var n = 0, a = 0; this[0] = this.node = e, e.raphael = !0, this.id = i(), e.raphaelid = this.id, this.matrix = t.matrix(), this.realPath = null, this.paper = r, this.attrs = this.attrs || {}, this._ = { transform: [], sx: 1, sy: 1, deg: 0, dx: 0, dy: 0, dirty: 1 }, !r.bottom && (r.bottom = this), this.prev = r.top, r.top && (r.top.next = this), r.top = this, this.next = null }, E = t.el; T.prototype = E, E.constructor = T, t._engine.path = function (t, e) { var r = v("path"); e.canvas && e.canvas.appendChild(r); var i = new T(r, e); return i.type = "path", B(i, { fill: "none", stroke: "#000", path: t }), i }, E.rotate = function (t, e, n) { if (this.removed) return this; if (t = r(t).split(h), t.length - 1 && (e = i(t[1]), n = i(t[2])), t = i(t[0]), null == n && (e = n), null == e || null == n) { var a = this.getBBox(1); e = a.x + a.width / 2, n = a.y + a.height / 2 } return this.transform(this._.transform.concat([["r", t, e, n]])), this }, E.scale = function (t, e, n, a) { if (this.removed) return this; if (t = r(t).split(h), t.length - 1 && (e = i(t[1]), n = i(t[2]), a = i(t[3])), t = i(t[0]), null == e && (e = t), null == a && (n = a), null == n || null == a) var s = this.getBBox(1); return n = null == n ? s.x + s.width / 2 : n, a = null == a ? s.y + s.height / 2 : a, this.transform(this._.transform.concat([["s", t, e, n, a]])), this }, E.translate = function (t, e) { return this.removed ? this : (t = r(t).split(h), t.length - 1 && (e = i(t[1])), t = i(t[0]) || 0, e = +e || 0, this.transform(this._.transform.concat([["t", t, e]])), this) }, E.transform = function (r) { var i = this._; if (null == r) return i.transform; if (t._extractTransform(this, r), this.clip && v(this.clip, { transform: this.matrix.invert() }), this.pattern && b(this), this.node && v(this.node, { transform: this.matrix }), 1 != i.sx || 1 != i.sy) { var n = this.attrs[e]("stroke-width") ? this.attrs["stroke-width"] : 1; this.attr({ "stroke-width": n }) } return this }, E.hide = function () { return this.removed || (this.node.style.display = "none"), this }, E.show = function () { return this.removed || (this.node.style.display = ""), this }, E.remove = function () { var e = A(this.node); if (!this.removed && e.parentNode) { var r = this.paper; r.__set__ && r.__set__.exclude(this), u.unbind("raphael.*.*." + this.id), this.gradient && r.defs.removeChild(this.gradient), t._tear(this, r), e.parentNode.removeChild(e), this.removeData(); for (var i in this) this[i] = "function" == typeof this[i] ? t._removedFactory(i) : null; this.removed = !0 } }, E._getBBox = function () { if ("none" == this.node.style.display) { this.show(); var t = !0 } var e = !1, r; this.paper.canvas.parentElement ? r = this.paper.canvas.parentElement.style : this.paper.canvas.parentNode && (r = this.paper.canvas.parentNode.style), r && "none" == r.display && (e = !0, r.display = ""); var i = {}; try { i = this.node.getBBox() } catch (n) { i = { x: this.node.clientLeft, y: this.node.clientTop, width: this.node.clientWidth, height: this.node.clientHeight } } finally { i = i || {}, e && (r.display = "none") } return t && this.hide(), i }, E.attr = function (r, i) { if (this.removed) return this; if (null == r) { var n = {}; for (var a in this.attrs) this.attrs[e](a) && (n[a] = this.attrs[a]); return n.gradient && "none" == n.fill && (n.fill = n.gradient) && delete n.gradient, n.transform = this._.transform, n } if (null == i && t.is(r, "string")) { if ("fill" == r && "none" == this.attrs.fill && this.attrs.gradient) return this.attrs.gradient; if ("transform" == r) return this._.transform; for (var s = r.split(h), o = {}, l = 0, c = s.length; l < c; l++) r = s[l], r in this.attrs ? o[r] = this.attrs[r] : t.is(this.paper.customAttributes[r], "function") ? o[r] = this.paper.customAttributes[r].def : o[r] = t._availableAttrs[r]; return c - 1 ? o : o[s[0]] } if (null == i && t.is(r, "array")) { for (o = {}, l = 0, c = r.length; l < c; l++) o[r[l]] = this.attr(r[l]); return o } if (null != i) { var f = {}; f[r] = i } else null != r && t.is(r, "object") && (f = r); for (var p in f) u("raphael.attr." + p + "." + this.id, this, f[p]); for (p in this.paper.customAttributes) if (this.paper.customAttributes[e](p) && f[e](p) && t.is(this.paper.customAttributes[p], "function")) { var d = this.paper.customAttributes[p].apply(this, [].concat(f[p])); this.attrs[p] = f[p]; for (var g in d) d[e](g) && (f[g] = d[g]) } return B(this, f), this }, E.toFront = function () { if (this.removed) return this; var e = A(this.node); e.parentNode.appendChild(e); var r = this.paper; return r.top != this && t._tofront(this, r), this }, E.toBack = function () { if (this.removed) return this; var e = A(this.node), r = e.parentNode; r.insertBefore(e, r.firstChild), t._toback(this, this.paper); var i = this.paper; return this }, E.insertAfter = function (e) { if (this.removed || !e) return this; var r = A(this.node), i = A(e.node || e[e.length - 1].node); return i.nextSibling ? i.parentNode.insertBefore(r, i.nextSibling) : i.parentNode.appendChild(r), t._insertafter(this, e, this.paper), this }, E.insertBefore = function (e) { if (this.removed || !e) return this; var r = A(this.node), i = A(e.node || e[0].node); return i.parentNode.insertBefore(r, i), t._insertbefore(this, e, this.paper), this }, E.blur = function (e) { var r = this; if (0 !== +e) { var i = v("filter"), n = v("feGaussianBlur"); r.attrs.blur = e, i.id = t.createUUID(), v(n, { stdDeviation: +e || 1.5 }), i.appendChild(n), r.paper.defs.appendChild(i), r._blur = i, v(r.node, { filter: "url(#" + i.id + ")" }) } else r._blur && (r._blur.parentNode.removeChild(r._blur), delete r._blur, delete r.attrs.blur), r.node.removeAttribute("filter"); return r }, t._engine.circle = function (t, e, r, i) { var n = v("circle"); t.canvas && t.canvas.appendChild(n); var a = new T(n, t); return a.attrs = { cx: e, cy: r, r: i, fill: "none", stroke: "#000" }, a.type = "circle", v(n, a.attrs), a }, t._engine.rect = function (t, e, r, i, n, a) { var s = v("rect"); t.canvas && t.canvas.appendChild(s); var o = new T(s, t); return o.attrs = { x: e, y: r, width: i, height: n, rx: a || 0, ry: a || 0, fill: "none", stroke: "#000" }, o.type = "rect", v(s, o.attrs), o }, t._engine.ellipse = function (t, e, r, i, n) { var a = v("ellipse"); t.canvas && t.canvas.appendChild(a); var s = new T(a, t); return s.attrs = { cx: e, cy: r, rx: i, ry: n, fill: "none", stroke: "#000" }, s.type = "ellipse", v(a, s.attrs), s }, t._engine.image = function (t, e, r, i, n, a) { var s = v("image"); v(s, { x: r, y: i, width: n, height: a, preserveAspectRatio: "none" }), s.setAttributeNS(p, "href", e), t.canvas && t.canvas.appendChild(s); var o = new T(s, t); return o.attrs = { x: r, y: i, width: n, height: a, src: e }, o.type = "image", o }, t._engine.text = function (e, r, i, n) { var a = v("text"); e.canvas && e.canvas.appendChild(a); var s = new T(a, e); return s.attrs = { x: r, y: i, "text-anchor": "middle", text: n, "font-family": t._availableAttrs["font-family"], "font-size": t._availableAttrs["font-size"], stroke: "none", fill: "#000" }, s.type = "text", B(s, s.attrs), s }, t._engine.setSize = function (t, e) { return this.width = t || this.width, this.height = e || this.height, this.canvas.setAttribute("width", this.width), this.canvas.setAttribute("height", this.height), this._viewBox && this.setViewBox.apply(this, this._viewBox), this }, t._engine.create = function () { var e = t._getContainer.apply(0, arguments), r = e && e.container, i = e.x, n = e.y, a = e.width, s = e.height; if (!r) throw new Error("SVG container not found."); var o = v("svg"), l = "overflow:hidden;", h; return i = i || 0, n = n || 0, a = a || 512, s = s || 342, v(o, { height: s, version: 1.1, width: a, xmlns: "http://www.w3.org/2000/svg", "xmlns:xlink": "http://www.w3.org/1999/xlink" }), 1 == r ? (o.style.cssText = l + "position:absolute;left:" + i + "px;top:" + n + "px", t._g.doc.body.appendChild(o), h = 1) : (o.style.cssText = l + "position:relative", r.firstChild ? r.insertBefore(o, r.firstChild) : r.appendChild(o)), r = new t._Paper, r.width = a, r.height = s, r.canvas = o, r.clear(), r._left = r._top = 0, h && (r.renderfix = function () { }), r.renderfix(), r }, t._engine.setViewBox = function (t, e, r, i, n) { u("raphael.setViewBox", this, this._viewBox, [t, e, r, i, n]); var a = this.getSize(), o = s(r / a.width, i / a.height), l = this.top, h = n ? "xMidYMid meet" : "xMinYMin", c, p; for (null == t ? (this._vbSize && (o = 1), delete this._vbSize, c = "0 0 " + this.width + f + this.height) : (this._vbSize = o, c = t + f + e + f + r + f + i), v(this.canvas, { viewBox: c, preserveAspectRatio: h }) ; o && l;) p = "stroke-width" in l.attrs ? l.attrs["stroke-width"] : 1, l.attr({ "stroke-width": p }), l._.dirty = 1, l._.dirtyT = 1, l = l.prev; return this._viewBox = [t, e, r, i, !!n], this }, t.prototype.renderfix = function () { var t = this.canvas, e = t.style, r; try { r = t.getScreenCTM() || t.createSVGMatrix() } catch (i) { r = t.createSVGMatrix() } var n = -r.e % 1, a = -r.f % 1; (n || a) && (n && (this._left = (this._left + n) % 1, e.left = this._left + "px"), a && (this._top = (this._top + a) % 1, e.top = this._top + "px")) }, t.prototype.clear = function () { t.eve("raphael.clear", this); for (var e = this.canvas; e.firstChild;) e.removeChild(e.firstChild); this.bottom = this.top = null, (this.desc = v("desc")).appendChild(t._g.doc.createTextNode("Created with Raphaël " + t.version)), e.appendChild(this.desc), e.appendChild(this.defs = v("defs")) }, t.prototype.remove = function () { u("raphael.remove", this), this.canvas.parentNode && this.canvas.parentNode.removeChild(this.canvas); for (var e in this) this[e] = "function" == typeof this[e] ? t._removedFactory(e) : null }; var M = t.st; for (var N in E) E[e](N) && !M[e](N) && (M[N] = function (t) { return function () { var e = arguments; return this.forEach(function (r) { r[t].apply(r, e) }) } }(N))
            }
        }.apply(e, i), !(void 0 !== n && (t.exports = n))
    }, function (t, e, r) { var i, n; i = [r(1)], n = function (t) { if (!t || t.vml) { var e = "hasOwnProperty", r = String, i = parseFloat, n = Math, a = n.round, s = n.max, o = n.min, l = n.abs, h = "fill", u = /[, ]+/, c = t.eve, f = " progid:DXImageTransform.Microsoft", p = " ", d = "", g = { M: "m", L: "l", C: "c", Z: "x", m: "t", l: "r", c: "v", z: "x" }, v = /([clmz]),?([^clmz]*)/gi, x = / progid:\S+Blur\([^\)]+\)/g, y = /-?[^,\s-]+/g, m = "position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)", b = 21600, _ = { path: 1, rect: 1, image: 1 }, w = { circle: 1, ellipse: 1 }, k = function (e) { var i = /[ahqstv]/gi, n = t._pathToAbsolute; if (r(e).match(i) && (n = t._path2curve), i = /[clmz]/g, n == t._pathToAbsolute && !r(e).match(i)) { var s = r(e).replace(v, function (t, e, r) { var i = [], n = "m" == e.toLowerCase(), s = g[e]; return r.replace(y, function (t) { n && 2 == i.length && (s += i + g["m" == e ? "l" : "L"], i = []), i.push(a(t * b)) }), s + i }); return s } var o = n(e), l, h; s = []; for (var u = 0, c = o.length; u < c; u++) { l = o[u], h = o[u][0].toLowerCase(), "z" == h && (h = "x"); for (var f = 1, x = l.length; f < x; f++) h += a(l[f] * b) + (f != x - 1 ? "," : d); s.push(h) } return s.join(p) }, B = function (e, r, i) { var n = t.matrix(); return n.rotate(-e, .5, .5), { dx: n.x(r, i), dy: n.y(r, i) } }, C = function (t, e, r, i, n, a) { var s = t._, o = t.matrix, u = s.fillpos, c = t.node, f = c.style, d = 1, g = "", v, x = b / e, y = b / r; if (f.visibility = "hidden", e && r) { if (c.coordsize = l(x) + p + l(y), f.rotation = a * (e * r < 0 ? -1 : 1), a) { var m = B(a, i, n); i = m.dx, n = m.dy } if (e < 0 && (g += "x"), r < 0 && (g += " y") && (d = -1), f.flip = g, c.coordorigin = i * -x + p + n * -y, u || s.fillsize) { var _ = c.getElementsByTagName(h); _ = _ && _[0], c.removeChild(_), u && (m = B(a, o.x(u[0], u[1]), o.y(u[0], u[1])), _.position = m.dx * d + p + m.dy * d), s.fillsize && (_.size = s.fillsize[0] * l(e) + p + s.fillsize[1] * l(r)), c.appendChild(_) } f.visibility = "visible" } }; t.toString = function () { return "Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël " + this.version }; var S = function (t, e, i) { for (var n = r(e).toLowerCase().split("-"), a = i ? "end" : "start", s = n.length, o = "classic", l = "medium", h = "medium"; s--;) switch (n[s]) { case "block": case "classic": case "oval": case "diamond": case "open": case "none": o = n[s]; break; case "wide": case "narrow": h = n[s]; break; case "long": case "short": l = n[s] } var u = t.node.getElementsByTagName("stroke")[0]; u[a + "arrow"] = o, u[a + "arrowlength"] = l, u[a + "arrowwidth"] = h }, A = function (n, l) { n.attrs = n.attrs || {}; var c = n.node, f = n.attrs, g = c.style, v, x = _[n.type] && (l.x != f.x || l.y != f.y || l.width != f.width || l.height != f.height || l.cx != f.cx || l.cy != f.cy || l.rx != f.rx || l.ry != f.ry || l.r != f.r), y = w[n.type] && (f.cx != l.cx || f.cy != l.cy || f.r != l.r || f.rx != l.rx || f.ry != l.ry), m = n; for (var B in l) l[e](B) && (f[B] = l[B]); if (x && (f.path = t._getPath[n.type](n), n._.dirty = 1), l.href && (c.href = l.href), l.title && (c.title = l.title), l.target && (c.target = l.target), l.cursor && (g.cursor = l.cursor), "blur" in l && n.blur(l.blur), (l.path && "path" == n.type || x) && (c.path = k(~r(f.path).toLowerCase().indexOf("r") ? t._pathToAbsolute(f.path) : f.path), n._.dirty = 1, "image" == n.type && (n._.fillpos = [f.x, f.y], n._.fillsize = [f.width, f.height], C(n, 1, 1, 0, 0, 0))), "transform" in l && n.transform(l.transform), y) { var A = +f.cx, E = +f.cy, M = +f.rx || +f.r || 0, L = +f.ry || +f.r || 0; c.path = t.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x", a((A - M) * b), a((E - L) * b), a((A + M) * b), a((E + L) * b), a(A * b)), n._.dirty = 1 } if ("clip-rect" in l) { var z = r(l["clip-rect"]).split(u); if (4 == z.length) { z[2] = +z[2] + +z[0], z[3] = +z[3] + +z[1]; var P = c.clipRect || t._g.doc.createElement("div"), F = P.style; F.clip = t.format("rect({1}px {2}px {3}px {0}px)", z), c.clipRect || (F.position = "absolute", F.top = 0, F.left = 0, F.width = n.paper.width + "px", F.height = n.paper.height + "px", c.parentNode.insertBefore(P, c), P.appendChild(c), c.clipRect = P) } l["clip-rect"] || c.clipRect && (c.clipRect.style.clip = "auto") } if (n.textpath) { var R = n.textpath.style; l.font && (R.font = l.font), l["font-family"] && (R.fontFamily = '"' + l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g, d) + '"'), l["font-size"] && (R.fontSize = l["font-size"]), l["font-weight"] && (R.fontWeight = l["font-weight"]), l["font-style"] && (R.fontStyle = l["font-style"]) } if ("arrow-start" in l && S(m, l["arrow-start"]), "arrow-end" in l && S(m, l["arrow-end"], 1), null != l.opacity || null != l.fill || null != l.src || null != l.stroke || null != l["stroke-width"] || null != l["stroke-opacity"] || null != l["fill-opacity"] || null != l["stroke-dasharray"] || null != l["stroke-miterlimit"] || null != l["stroke-linejoin"] || null != l["stroke-linecap"]) { var j = c.getElementsByTagName(h), I = !1; if (j = j && j[0], !j && (I = j = N(h)), "image" == n.type && l.src && (j.src = l.src), l.fill && (j.on = !0), null != j.on && "none" != l.fill && null !== l.fill || (j.on = !1), j.on && l.fill) { var q = r(l.fill).match(t._ISURL); if (q) { j.parentNode == c && c.removeChild(j), j.rotate = !0, j.src = q[1], j.type = "tile"; var D = n.getBBox(1); j.position = D.x + p + D.y, n._.fillpos = [D.x, D.y], t._preload(q[1], function () { n._.fillsize = [this.offsetWidth, this.offsetHeight] }) } else j.color = t.getRGB(l.fill).hex, j.src = d, j.type = "solid", t.getRGB(l.fill).error && (m.type in { circle: 1, ellipse: 1 } || "r" != r(l.fill).charAt()) && T(m, l.fill, j) && (f.fill = "none", f.gradient = l.fill, j.rotate = !1) } if ("fill-opacity" in l || "opacity" in l) { var V = ((+f["fill-opacity"] + 1 || 2) - 1) * ((+f.opacity + 1 || 2) - 1) * ((+t.getRGB(l.fill).o + 1 || 2) - 1); V = o(s(V, 0), 1), j.opacity = V, j.src && (j.color = "none") } c.appendChild(j); var O = c.getElementsByTagName("stroke") && c.getElementsByTagName("stroke")[0], Y = !1; !O && (Y = O = N("stroke")), (l.stroke && "none" != l.stroke || l["stroke-width"] || null != l["stroke-opacity"] || l["stroke-dasharray"] || l["stroke-miterlimit"] || l["stroke-linejoin"] || l["stroke-linecap"]) && (O.on = !0), ("none" == l.stroke || null === l.stroke || null == O.on || 0 == l.stroke || 0 == l["stroke-width"]) && (O.on = !1); var W = t.getRGB(l.stroke); O.on && l.stroke && (O.color = W.hex), V = ((+f["stroke-opacity"] + 1 || 2) - 1) * ((+f.opacity + 1 || 2) - 1) * ((+W.o + 1 || 2) - 1); var G = .75 * (i(l["stroke-width"]) || 1); if (V = o(s(V, 0), 1), null == l["stroke-width"] && (G = f["stroke-width"]), l["stroke-width"] && (O.weight = G), G && G < 1 && (V *= G) && (O.weight = 1), O.opacity = V, l["stroke-linejoin"] && (O.joinstyle = l["stroke-linejoin"] || "miter"), O.miterlimit = l["stroke-miterlimit"] || 8, l["stroke-linecap"] && (O.endcap = "butt" == l["stroke-linecap"] ? "flat" : "square" == l["stroke-linecap"] ? "square" : "round"), "stroke-dasharray" in l) { var H = { "-": "shortdash", ".": "shortdot", "-.": "shortdashdot", "-..": "shortdashdotdot", ". ": "dot", "- ": "dash", "--": "longdash", "- .": "dashdot", "--.": "longdashdot", "--..": "longdashdotdot" }; O.dashstyle = H[e](l["stroke-dasharray"]) ? H[l["stroke-dasharray"]] : d } Y && c.appendChild(O) } if ("text" == m.type) { m.paper.canvas.style.display = d; var X = m.paper.span, U = 100, $ = f.font && f.font.match(/\d+(?:\.\d*)?(?=px)/); g = X.style, f.font && (g.font = f.font), f["font-family"] && (g.fontFamily = f["font-family"]), f["font-weight"] && (g.fontWeight = f["font-weight"]), f["font-style"] && (g.fontStyle = f["font-style"]), $ = i(f["font-size"] || $ && $[0]) || 10, g.fontSize = $ * U + "px", m.textpath.string && (X.innerHTML = r(m.textpath.string).replace(/</g, "&#60;").replace(/&/g, "&#38;").replace(/\n/g, "<br>")); var Z = X.getBoundingClientRect(); m.W = f.w = (Z.right - Z.left) / U, m.H = f.h = (Z.bottom - Z.top) / U, m.X = f.x, m.Y = f.y + m.H / 2, ("x" in l || "y" in l) && (m.path.v = t.format("m{0},{1}l{2},{1}", a(f.x * b), a(f.y * b), a(f.x * b) + 1)); for (var Q = ["x", "y", "text", "font", "font-family", "font-weight", "font-style", "font-size"], J = 0, K = Q.length; J < K; J++) if (Q[J] in l) { m._.dirty = 1; break } switch (f["text-anchor"]) { case "start": m.textpath.style["v-text-align"] = "left", m.bbx = m.W / 2; break; case "end": m.textpath.style["v-text-align"] = "right", m.bbx = -m.W / 2; break; default: m.textpath.style["v-text-align"] = "center", m.bbx = 0 } m.textpath.style["v-text-kern"] = !0 } }, T = function (e, a, s) { e.attrs = e.attrs || {}; var o = e.attrs, l = Math.pow, h, u, c = "linear", f = ".5 .5"; if (e.attrs.gradient = a, a = r(a).replace(t._radial_gradient, function (t, e, r) { return c = "radial", e && r && (e = i(e), r = i(r), l(e - .5, 2) + l(r - .5, 2) > .25 && (r = n.sqrt(.25 - l(e - .5, 2)) * (2 * (r > .5) - 1) + .5), f = e + p + r), d }), a = a.split(/\s*\-\s*/), "linear" == c) { var g = a.shift(); if (g = -i(g), isNaN(g)) return null } var v = t._parseDots(a); if (!v) return null; if (e = e.shape || e.node, v.length) { e.removeChild(s), s.on = !0, s.method = "none", s.color = v[0].color, s.color2 = v[v.length - 1].color; for (var x = [], y = 0, m = v.length; y < m; y++) v[y].offset && x.push(v[y].offset + p + v[y].color); s.colors = x.length ? x.join() : "0% " + s.color, "radial" == c ? (s.type = "gradientTitle", s.focus = "100%", s.focussize = "0 0", s.focusposition = f, s.angle = 0) : (s.type = "gradient", s.angle = (270 - g) % 360), e.appendChild(s) } return 1 }, E = function (e, r) { this[0] = this.node = e, e.raphael = !0, this.id = t._oid++, e.raphaelid = this.id, this.X = 0, this.Y = 0, this.attrs = {}, this.paper = r, this.matrix = t.matrix(), this._ = { transform: [], sx: 1, sy: 1, dx: 0, dy: 0, deg: 0, dirty: 1, dirtyT: 1 }, !r.bottom && (r.bottom = this), this.prev = r.top, r.top && (r.top.next = this), r.top = this, this.next = null }, M = t.el; E.prototype = M, M.constructor = E, M.transform = function (e) { if (null == e) return this._.transform; var i = this.paper._viewBoxShift, n = i ? "s" + [i.scale, i.scale] + "-1-1t" + [i.dx, i.dy] : d, a; i && (a = e = r(e).replace(/\.{3}|\u2026/g, this._.transform || d)), t._extractTransform(this, n + e); var s = this.matrix.clone(), o = this.skew, l = this.node, h, u = ~r(this.attrs.fill).indexOf("-"), c = !r(this.attrs.fill).indexOf("url("); if (s.translate(1, 1), c || u || "image" == this.type) if (o.matrix = "1 0 0 1", o.offset = "0 0", h = s.split(), u && h.noRotation || !h.isSimple) { l.style.filter = s.toFilter(); var f = this.getBBox(), g = this.getBBox(1), v = f.x - g.x, x = f.y - g.y; l.coordorigin = v * -b + p + x * -b, C(this, 1, 1, v, x, 0) } else l.style.filter = d, C(this, h.scalex, h.scaley, h.dx, h.dy, h.rotate); else l.style.filter = d, o.matrix = r(s), o.offset = s.offset(); return null !== a && (this._.transform = a, t._extractTransform(this, a)), this }, M.rotate = function (t, e, n) { if (this.removed) return this; if (null != t) { if (t = r(t).split(u), t.length - 1 && (e = i(t[1]), n = i(t[2])), t = i(t[0]), null == n && (e = n), null == e || null == n) { var a = this.getBBox(1); e = a.x + a.width / 2, n = a.y + a.height / 2 } return this._.dirtyT = 1, this.transform(this._.transform.concat([["r", t, e, n]])), this } }, M.translate = function (t, e) { return this.removed ? this : (t = r(t).split(u), t.length - 1 && (e = i(t[1])), t = i(t[0]) || 0, e = +e || 0, this._.bbox && (this._.bbox.x += t, this._.bbox.y += e), this.transform(this._.transform.concat([["t", t, e]])), this) }, M.scale = function (t, e, n, a) { if (this.removed) return this; if (t = r(t).split(u), t.length - 1 && (e = i(t[1]), n = i(t[2]), a = i(t[3]), isNaN(n) && (n = null), isNaN(a) && (a = null)), t = i(t[0]), null == e && (e = t), null == a && (n = a), null == n || null == a) var s = this.getBBox(1); return n = null == n ? s.x + s.width / 2 : n, a = null == a ? s.y + s.height / 2 : a, this.transform(this._.transform.concat([["s", t, e, n, a]])), this._.dirtyT = 1, this }, M.hide = function () { return !this.removed && (this.node.style.display = "none"), this }, M.show = function () { return !this.removed && (this.node.style.display = d), this }, M.auxGetBBox = t.el.getBBox, M.getBBox = function () { var t = this.auxGetBBox(); if (this.paper && this.paper._viewBoxShift) { var e = {}, r = 1 / this.paper._viewBoxShift.scale; return e.x = t.x - this.paper._viewBoxShift.dx, e.x *= r, e.y = t.y - this.paper._viewBoxShift.dy, e.y *= r, e.width = t.width * r, e.height = t.height * r, e.x2 = e.x + e.width, e.y2 = e.y + e.height, e } return t }, M._getBBox = function () { return this.removed ? {} : { x: this.X + (this.bbx || 0) - this.W / 2, y: this.Y - this.H, width: this.W, height: this.H } }, M.remove = function () { if (!this.removed && this.node.parentNode) { this.paper.__set__ && this.paper.__set__.exclude(this), t.eve.unbind("raphael.*.*." + this.id), t._tear(this, this.paper), this.node.parentNode.removeChild(this.node), this.shape && this.shape.parentNode.removeChild(this.shape); for (var e in this) this[e] = "function" == typeof this[e] ? t._removedFactory(e) : null; this.removed = !0 } }, M.attr = function (r, i) { if (this.removed) return this; if (null == r) { var n = {}; for (var a in this.attrs) this.attrs[e](a) && (n[a] = this.attrs[a]); return n.gradient && "none" == n.fill && (n.fill = n.gradient) && delete n.gradient, n.transform = this._.transform, n } if (null == i && t.is(r, "string")) { if (r == h && "none" == this.attrs.fill && this.attrs.gradient) return this.attrs.gradient; for (var s = r.split(u), o = {}, l = 0, f = s.length; l < f; l++) r = s[l], r in this.attrs ? o[r] = this.attrs[r] : t.is(this.paper.customAttributes[r], "function") ? o[r] = this.paper.customAttributes[r].def : o[r] = t._availableAttrs[r]; return f - 1 ? o : o[s[0]] } if (this.attrs && null == i && t.is(r, "array")) { for (o = {}, l = 0, f = r.length; l < f; l++) o[r[l]] = this.attr(r[l]); return o } var p; null != i && (p = {}, p[r] = i), null == i && t.is(r, "object") && (p = r); for (var d in p) c("raphael.attr." + d + "." + this.id, this, p[d]); if (p) { for (d in this.paper.customAttributes) if (this.paper.customAttributes[e](d) && p[e](d) && t.is(this.paper.customAttributes[d], "function")) { var g = this.paper.customAttributes[d].apply(this, [].concat(p[d])); this.attrs[d] = p[d]; for (var v in g) g[e](v) && (p[v] = g[v]) } p.text && "text" == this.type && (this.textpath.string = p.text), A(this, p) } return this }, M.toFront = function () { return !this.removed && this.node.parentNode.appendChild(this.node), this.paper && this.paper.top != this && t._tofront(this, this.paper), this }, M.toBack = function () { return this.removed ? this : (this.node.parentNode.firstChild != this.node && (this.node.parentNode.insertBefore(this.node, this.node.parentNode.firstChild), t._toback(this, this.paper)), this) }, M.insertAfter = function (e) { return this.removed ? this : (e.constructor == t.st.constructor && (e = e[e.length - 1]), e.node.nextSibling ? e.node.parentNode.insertBefore(this.node, e.node.nextSibling) : e.node.parentNode.appendChild(this.node), t._insertafter(this, e, this.paper), this) }, M.insertBefore = function (e) { return this.removed ? this : (e.constructor == t.st.constructor && (e = e[0]), e.node.parentNode.insertBefore(this.node, e.node), t._insertbefore(this, e, this.paper), this) }, M.blur = function (e) { var r = this.node.runtimeStyle, i = r.filter; return i = i.replace(x, d), 0 !== +e ? (this.attrs.blur = e, r.filter = i + p + f + ".Blur(pixelradius=" + (+e || 1.5) + ")", r.margin = t.format("-{0}px 0 0 -{0}px", a(+e || 1.5))) : (r.filter = i, r.margin = 0, delete this.attrs.blur), this }, t._engine.path = function (t, e) { var r = N("shape"); r.style.cssText = m, r.coordsize = b + p + b, r.coordorigin = e.coordorigin; var i = new E(r, e), n = { fill: "none", stroke: "#000" }; t && (n.path = t), i.type = "path", i.path = [], i.Path = d, A(i, n), e.canvas && e.canvas.appendChild(r); var a = N("skew"); return a.on = !0, r.appendChild(a), i.skew = a, i.transform(d), i }, t._engine.rect = function (e, r, i, n, a, s) { var o = t._rectPath(r, i, n, a, s), l = e.path(o), h = l.attrs; return l.X = h.x = r, l.Y = h.y = i, l.W = h.width = n, l.H = h.height = a, h.r = s, h.path = o, l.type = "rect", l }, t._engine.ellipse = function (t, e, r, i, n) { var a = t.path(), s = a.attrs; return a.X = e - i, a.Y = r - n, a.W = 2 * i, a.H = 2 * n, a.type = "ellipse", A(a, { cx: e, cy: r, rx: i, ry: n }), a }, t._engine.circle = function (t, e, r, i) { var n = t.path(), a = n.attrs; return n.X = e - i, n.Y = r - i, n.W = n.H = 2 * i, n.type = "circle", A(n, { cx: e, cy: r, r: i }), n }, t._engine.image = function (e, r, i, n, a, s) { var o = t._rectPath(i, n, a, s), l = e.path(o).attr({ stroke: "none" }), u = l.attrs, c = l.node, f = c.getElementsByTagName(h)[0]; return u.src = r, l.X = u.x = i, l.Y = u.y = n, l.W = u.width = a, l.H = u.height = s, u.path = o, l.type = "image", f.parentNode == c && c.removeChild(f), f.rotate = !0, f.src = r, f.type = "tile", l._.fillpos = [i, n], l._.fillsize = [a, s], c.appendChild(f), C(l, 1, 1, 0, 0, 0), l }, t._engine.text = function (e, i, n, s) { var o = N("shape"), l = N("path"), h = N("textpath"); i = i || 0, n = n || 0, s = s || "", l.v = t.format("m{0},{1}l{2},{1}", a(i * b), a(n * b), a(i * b) + 1), l.textpathok = !0, h.string = r(s), h.on = !0, o.style.cssText = m, o.coordsize = b + p + b, o.coordorigin = "0 0"; var u = new E(o, e), c = { fill: "#000", stroke: "none", font: t._availableAttrs.font, text: s }; u.shape = o, u.path = l, u.textpath = h, u.type = "text", u.attrs.text = r(s), u.attrs.x = i, u.attrs.y = n, u.attrs.w = 1, u.attrs.h = 1, A(u, c), o.appendChild(h), o.appendChild(l), e.canvas.appendChild(o); var f = N("skew"); return f.on = !0, o.appendChild(f), u.skew = f, u.transform(d), u }, t._engine.setSize = function (e, r) { var i = this.canvas.style; return this.width = e, this.height = r, e == +e && (e += "px"), r == +r && (r += "px"), i.width = e, i.height = r, i.clip = "rect(0 " + e + " " + r + " 0)", this._viewBox && t._engine.setViewBox.apply(this, this._viewBox), this }, t._engine.setViewBox = function (e, r, i, n, a) { t.eve("raphael.setViewBox", this, this._viewBox, [e, r, i, n, a]); var s = this.getSize(), o = s.width, l = s.height, h, u; return a && (h = l / n, u = o / i, i * h < o && (e -= (o - i * h) / 2 / h), n * u < l && (r -= (l - n * u) / 2 / u)), this._viewBox = [e, r, i, n, !!a], this._viewBoxShift = { dx: -e, dy: -r, scale: s }, this.forEach(function (t) { t.transform("...") }), this }; var N; t._engine.initWin = function (t) { var e = t.document; e.styleSheets.length < 31 ? e.createStyleSheet().addRule(".rvml", "behavior:url(#default#VML)") : e.styleSheets[0].addRule(".rvml", "behavior:url(#default#VML)"); try { !e.namespaces.rvml && e.namespaces.add("rvml", "urn:schemas-microsoft-com:vml"), N = function (t) { return e.createElement("<rvml:" + t + ' class="rvml">') } } catch (r) { N = function (t) { return e.createElement("<" + t + ' xmlns="urn:schemas-microsoft.com:vml" class="rvml">') } } }, t._engine.initWin(t._g.win), t._engine.create = function () { var e = t._getContainer.apply(0, arguments), r = e.container, i = e.height, n, a = e.width, s = e.x, o = e.y; if (!r) throw new Error("VML container not found."); var l = new t._Paper, h = l.canvas = t._g.doc.createElement("div"), u = h.style; return s = s || 0, o = o || 0, a = a || 512, i = i || 342, l.width = a, l.height = i, a == +a && (a += "px"), i == +i && (i += "px"), l.coordsize = 1e3 * b + p + 1e3 * b, l.coordorigin = "0 0", l.span = t._g.doc.createElement("span"), l.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;", h.appendChild(l.span), u.cssText = t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden", a, i), 1 == r ? (t._g.doc.body.appendChild(h), u.left = s + "px", u.top = o + "px", u.position = "absolute") : r.firstChild ? r.insertBefore(h, r.firstChild) : r.appendChild(h), l.renderfix = function () { }, l }, t.prototype.clear = function () { t.eve("raphael.clear", this), this.canvas.innerHTML = d, this.span = t._g.doc.createElement("span"), this.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;", this.canvas.appendChild(this.span), this.bottom = this.top = null }, t.prototype.remove = function () { t.eve("raphael.remove", this), this.canvas.parentNode.removeChild(this.canvas); for (var e in this) this[e] = "function" == typeof this[e] ? t._removedFactory(e) : null; return !0 }; var L = t.st; for (var z in M) M[e](z) && !L[e](z) && (L[z] = function (t) { return function () { var e = arguments; return this.forEach(function (r) { r[t].apply(r, e) }) } }(z)) } }.apply(e, i), !(void 0 !== n && (t.exports = n)) }])
});


// TinyColor v1.4.1
// https://github.com/bgrins/TinyColor
// 2016-07-07, Brian Grinstead, MIT License
!function (a) { function b(a, d) { if (a = a ? a : "", d = d || {}, a instanceof b) return a; if (!(this instanceof b)) return new b(a, d); var e = c(a); this._originalInput = a, this._r = e.r, this._g = e.g, this._b = e.b, this._a = e.a, this._roundA = P(100 * this._a) / 100, this._format = d.format || e.format, this._gradientType = d.gradientType, this._r < 1 && (this._r = P(this._r)), this._g < 1 && (this._g = P(this._g)), this._b < 1 && (this._b = P(this._b)), this._ok = e.ok, this._tc_id = O++ } function c(a) { var b = { r: 0, g: 0, b: 0 }, c = 1, e = null, g = null, i = null, j = !1, k = !1; return "string" == typeof a && (a = K(a)), "object" == typeof a && (J(a.r) && J(a.g) && J(a.b) ? (b = d(a.r, a.g, a.b), j = !0, k = "%" === String(a.r).substr(-1) ? "prgb" : "rgb") : J(a.h) && J(a.s) && J(a.v) ? (e = G(a.s), g = G(a.v), b = h(a.h, e, g), j = !0, k = "hsv") : J(a.h) && J(a.s) && J(a.l) && (e = G(a.s), i = G(a.l), b = f(a.h, e, i), j = !0, k = "hsl"), a.hasOwnProperty("a") && (c = a.a)), c = z(c), { ok: j, format: a.format || k, r: Q(255, R(b.r, 0)), g: Q(255, R(b.g, 0)), b: Q(255, R(b.b, 0)), a: c } } function d(a, b, c) { return { r: 255 * A(a, 255), g: 255 * A(b, 255), b: 255 * A(c, 255) } } function e(a, b, c) { a = A(a, 255), b = A(b, 255), c = A(c, 255); var d, e, f = R(a, b, c), g = Q(a, b, c), h = (f + g) / 2; if (f == g) d = e = 0; else { var i = f - g; switch (e = h > .5 ? i / (2 - f - g) : i / (f + g), f) { case a: d = (b - c) / i + (c > b ? 6 : 0); break; case b: d = (c - a) / i + 2; break; case c: d = (a - b) / i + 4 }d /= 6 } return { h: d, s: e, l: h } } function f(a, b, c) { function d(a, b, c) { return 0 > c && (c += 1), c > 1 && (c -= 1), 1 / 6 > c ? a + 6 * (b - a) * c : .5 > c ? b : 2 / 3 > c ? a + 6 * (b - a) * (2 / 3 - c) : a } var e, f, g; if (a = A(a, 360), b = A(b, 100), c = A(c, 100), 0 === b) e = f = g = c; else { var h = .5 > c ? c * (1 + b) : c + b - c * b, i = 2 * c - h; e = d(i, h, a + 1 / 3), f = d(i, h, a), g = d(i, h, a - 1 / 3) } return { r: 255 * e, g: 255 * f, b: 255 * g } } function g(a, b, c) { a = A(a, 255), b = A(b, 255), c = A(c, 255); var d, e, f = R(a, b, c), g = Q(a, b, c), h = f, i = f - g; if (e = 0 === f ? 0 : i / f, f == g) d = 0; else { switch (f) { case a: d = (b - c) / i + (c > b ? 6 : 0); break; case b: d = (c - a) / i + 2; break; case c: d = (a - b) / i + 4 }d /= 6 } return { h: d, s: e, v: h } } function h(b, c, d) { b = 6 * A(b, 360), c = A(c, 100), d = A(d, 100); var e = a.floor(b), f = b - e, g = d * (1 - c), h = d * (1 - f * c), i = d * (1 - (1 - f) * c), j = e % 6, k = [d, h, g, g, i, d][j], l = [i, d, d, h, g, g][j], m = [g, g, i, d, d, h][j]; return { r: 255 * k, g: 255 * l, b: 255 * m } } function i(a, b, c, d) { var e = [F(P(a).toString(16)), F(P(b).toString(16)), F(P(c).toString(16))]; return d && e[0].charAt(0) == e[0].charAt(1) && e[1].charAt(0) == e[1].charAt(1) && e[2].charAt(0) == e[2].charAt(1) ? e[0].charAt(0) + e[1].charAt(0) + e[2].charAt(0) : e.join("") } function j(a, b, c, d, e) { var f = [F(P(a).toString(16)), F(P(b).toString(16)), F(P(c).toString(16)), F(H(d))]; return e && f[0].charAt(0) == f[0].charAt(1) && f[1].charAt(0) == f[1].charAt(1) && f[2].charAt(0) == f[2].charAt(1) && f[3].charAt(0) == f[3].charAt(1) ? f[0].charAt(0) + f[1].charAt(0) + f[2].charAt(0) + f[3].charAt(0) : f.join("") } function k(a, b, c, d) { var e = [F(H(d)), F(P(a).toString(16)), F(P(b).toString(16)), F(P(c).toString(16))]; return e.join("") } function l(a, c) { c = 0 === c ? 0 : c || 10; var d = b(a).toHsl(); return d.s -= c / 100, d.s = B(d.s), b(d) } function m(a, c) { c = 0 === c ? 0 : c || 10; var d = b(a).toHsl(); return d.s += c / 100, d.s = B(d.s), b(d) } function n(a) { return b(a).desaturate(100) } function o(a, c) { c = 0 === c ? 0 : c || 10; var d = b(a).toHsl(); return d.l += c / 100, d.l = B(d.l), b(d) } function p(a, c) { c = 0 === c ? 0 : c || 10; var d = b(a).toRgb(); return d.r = R(0, Q(255, d.r - P(255 * -(c / 100)))), d.g = R(0, Q(255, d.g - P(255 * -(c / 100)))), d.b = R(0, Q(255, d.b - P(255 * -(c / 100)))), b(d) } function q(a, c) { c = 0 === c ? 0 : c || 10; var d = b(a).toHsl(); return d.l -= c / 100, d.l = B(d.l), b(d) } function r(a, c) { var d = b(a).toHsl(), e = (d.h + c) % 360; return d.h = 0 > e ? 360 + e : e, b(d) } function s(a) { var c = b(a).toHsl(); return c.h = (c.h + 180) % 360, b(c) } function t(a) { var c = b(a).toHsl(), d = c.h; return [b(a), b({ h: (d + 120) % 360, s: c.s, l: c.l }), b({ h: (d + 240) % 360, s: c.s, l: c.l })] } function u(a) { var c = b(a).toHsl(), d = c.h; return [b(a), b({ h: (d + 90) % 360, s: c.s, l: c.l }), b({ h: (d + 180) % 360, s: c.s, l: c.l }), b({ h: (d + 270) % 360, s: c.s, l: c.l })] } function v(a) { var c = b(a).toHsl(), d = c.h; return [b(a), b({ h: (d + 72) % 360, s: c.s, l: c.l }), b({ h: (d + 216) % 360, s: c.s, l: c.l })] } function w(a, c, d) { c = c || 6, d = d || 30; var e = b(a).toHsl(), f = 360 / d, g = [b(a)]; for (e.h = (e.h - (f * c >> 1) + 720) % 360; --c;)e.h = (e.h + f) % 360, g.push(b(e)); return g } function x(a, c) { c = c || 6; for (var d = b(a).toHsv(), e = d.h, f = d.s, g = d.v, h = [], i = 1 / c; c--;)h.push(b({ h: e, s: f, v: g })), g = (g + i) % 1; return h } function y(a) { var b = {}; for (var c in a) a.hasOwnProperty(c) && (b[a[c]] = c); return b } function z(a) { return a = parseFloat(a), (isNaN(a) || 0 > a || a > 1) && (a = 1), a } function A(b, c) { D(b) && (b = "100%"); var d = E(b); return b = Q(c, R(0, parseFloat(b))), d && (b = parseInt(b * c, 10) / 100), a.abs(b - c) < 1e-6 ? 1 : b % c / parseFloat(c) } function B(a) { return Q(1, R(0, a)) } function C(a) { return parseInt(a, 16) } function D(a) { return "string" == typeof a && -1 != a.indexOf(".") && 1 === parseFloat(a) } function E(a) { return "string" == typeof a && -1 != a.indexOf("%") } function F(a) { return 1 == a.length ? "0" + a : "" + a } function G(a) { return 1 >= a && (a = 100 * a + "%"), a } function H(b) { return a.round(255 * parseFloat(b)).toString(16) } function I(a) { return C(a) / 255 } function J(a) { return !!V.CSS_UNIT.exec(a) } function K(a) { a = a.replace(M, "").replace(N, "").toLowerCase(); var b = !1; if (T[a]) a = T[a], b = !0; else if ("transparent" == a) return { r: 0, g: 0, b: 0, a: 0, format: "name" }; var c; return (c = V.rgb.exec(a)) ? { r: c[1], g: c[2], b: c[3] } : (c = V.rgba.exec(a)) ? { r: c[1], g: c[2], b: c[3], a: c[4] } : (c = V.hsl.exec(a)) ? { h: c[1], s: c[2], l: c[3] } : (c = V.hsla.exec(a)) ? { h: c[1], s: c[2], l: c[3], a: c[4] } : (c = V.hsv.exec(a)) ? { h: c[1], s: c[2], v: c[3] } : (c = V.hsva.exec(a)) ? { h: c[1], s: c[2], v: c[3], a: c[4] } : (c = V.hex8.exec(a)) ? { r: C(c[1]), g: C(c[2]), b: C(c[3]), a: I(c[4]), format: b ? "name" : "hex8" } : (c = V.hex6.exec(a)) ? { r: C(c[1]), g: C(c[2]), b: C(c[3]), format: b ? "name" : "hex" } : (c = V.hex4.exec(a)) ? { r: C(c[1] + "" + c[1]), g: C(c[2] + "" + c[2]), b: C(c[3] + "" + c[3]), a: I(c[4] + "" + c[4]), format: b ? "name" : "hex8" } : (c = V.hex3.exec(a)) ? { r: C(c[1] + "" + c[1]), g: C(c[2] + "" + c[2]), b: C(c[3] + "" + c[3]), format: b ? "name" : "hex" } : !1 } function L(a) { var b, c; return a = a || { level: "AA", size: "small" }, b = (a.level || "AA").toUpperCase(), c = (a.size || "small").toLowerCase(), "AA" !== b && "AAA" !== b && (b = "AA"), "small" !== c && "large" !== c && (c = "small"), { level: b, size: c } } var M = /^\s+/, N = /\s+$/, O = 0, P = a.round, Q = a.min, R = a.max, S = a.random; b.prototype = { isDark: function () { return this.getBrightness() < 128 }, isLight: function () { return !this.isDark() }, isValid: function () { return this._ok }, getOriginalInput: function () { return this._originalInput }, getFormat: function () { return this._format }, getAlpha: function () { return this._a }, getBrightness: function () { var a = this.toRgb(); return (299 * a.r + 587 * a.g + 114 * a.b) / 1e3 }, getLuminance: function () { var b, c, d, e, f, g, h = this.toRgb(); return b = h.r / 255, c = h.g / 255, d = h.b / 255, e = .03928 >= b ? b / 12.92 : a.pow((b + .055) / 1.055, 2.4), f = .03928 >= c ? c / 12.92 : a.pow((c + .055) / 1.055, 2.4), g = .03928 >= d ? d / 12.92 : a.pow((d + .055) / 1.055, 2.4), .2126 * e + .7152 * f + .0722 * g }, setAlpha: function (a) { return this._a = z(a), this._roundA = P(100 * this._a) / 100, this }, toHsv: function () { var a = g(this._r, this._g, this._b); return { h: 360 * a.h, s: a.s, v: a.v, a: this._a } }, toHsvString: function () { var a = g(this._r, this._g, this._b), b = P(360 * a.h), c = P(100 * a.s), d = P(100 * a.v); return 1 == this._a ? "hsv(" + b + ", " + c + "%, " + d + "%)" : "hsva(" + b + ", " + c + "%, " + d + "%, " + this._roundA + ")" }, toHsl: function () { var a = e(this._r, this._g, this._b); return { h: 360 * a.h, s: a.s, l: a.l, a: this._a } }, toHslString: function () { var a = e(this._r, this._g, this._b), b = P(360 * a.h), c = P(100 * a.s), d = P(100 * a.l); return 1 == this._a ? "hsl(" + b + ", " + c + "%, " + d + "%)" : "hsla(" + b + ", " + c + "%, " + d + "%, " + this._roundA + ")" }, toHex: function (a) { return i(this._r, this._g, this._b, a) }, toHexString: function (a) { return "#" + this.toHex(a) }, toHex8: function (a) { return j(this._r, this._g, this._b, this._a, a) }, toHex8String: function (a) { return "#" + this.toHex8(a) }, toRgb: function () { return { r: P(this._r), g: P(this._g), b: P(this._b), a: this._a } }, toRgbString: function () { return 1 == this._a ? "rgb(" + P(this._r) + ", " + P(this._g) + ", " + P(this._b) + ")" : "rgba(" + P(this._r) + ", " + P(this._g) + ", " + P(this._b) + ", " + this._roundA + ")" }, toPercentageRgb: function () { return { r: P(100 * A(this._r, 255)) + "%", g: P(100 * A(this._g, 255)) + "%", b: P(100 * A(this._b, 255)) + "%", a: this._a } }, toPercentageRgbString: function () { return 1 == this._a ? "rgb(" + P(100 * A(this._r, 255)) + "%, " + P(100 * A(this._g, 255)) + "%, " + P(100 * A(this._b, 255)) + "%)" : "rgba(" + P(100 * A(this._r, 255)) + "%, " + P(100 * A(this._g, 255)) + "%, " + P(100 * A(this._b, 255)) + "%, " + this._roundA + ")" }, toName: function () { return 0 === this._a ? "transparent" : this._a < 1 ? !1 : U[i(this._r, this._g, this._b, !0)] || !1 }, toFilter: function (a) { var c = "#" + k(this._r, this._g, this._b, this._a), d = c, e = this._gradientType ? "GradientType = 1, " : ""; if (a) { var f = b(a); d = "#" + k(f._r, f._g, f._b, f._a) } return "progid:DXImageTransform.Microsoft.gradient(" + e + "startColorstr=" + c + ",endColorstr=" + d + ")" }, toString: function (a) { var b = !!a; a = a || this._format; var c = !1, d = this._a < 1 && this._a >= 0, e = !b && d && ("hex" === a || "hex6" === a || "hex3" === a || "hex4" === a || "hex8" === a || "name" === a); return e ? "name" === a && 0 === this._a ? this.toName() : this.toRgbString() : ("rgb" === a && (c = this.toRgbString()), "prgb" === a && (c = this.toPercentageRgbString()), ("hex" === a || "hex6" === a) && (c = this.toHexString()), "hex3" === a && (c = this.toHexString(!0)), "hex4" === a && (c = this.toHex8String(!0)), "hex8" === a && (c = this.toHex8String()), "name" === a && (c = this.toName()), "hsl" === a && (c = this.toHslString()), "hsv" === a && (c = this.toHsvString()), c || this.toHexString()) }, clone: function () { return b(this.toString()) }, _applyModification: function (a, b) { var c = a.apply(null, [this].concat([].slice.call(b))); return this._r = c._r, this._g = c._g, this._b = c._b, this.setAlpha(c._a), this }, lighten: function () { return this._applyModification(o, arguments) }, brighten: function () { return this._applyModification(p, arguments) }, darken: function () { return this._applyModification(q, arguments) }, desaturate: function () { return this._applyModification(l, arguments) }, saturate: function () { return this._applyModification(m, arguments) }, greyscale: function () { return this._applyModification(n, arguments) }, spin: function () { return this._applyModification(r, arguments) }, _applyCombination: function (a, b) { return a.apply(null, [this].concat([].slice.call(b))) }, analogous: function () { return this._applyCombination(w, arguments) }, complement: function () { return this._applyCombination(s, arguments) }, monochromatic: function () { return this._applyCombination(x, arguments) }, splitcomplement: function () { return this._applyCombination(v, arguments) }, triad: function () { return this._applyCombination(t, arguments) }, tetrad: function () { return this._applyCombination(u, arguments) } }, b.fromRatio = function (a, c) { if ("object" == typeof a) { var d = {}; for (var e in a) a.hasOwnProperty(e) && (d[e] = "a" === e ? a[e] : G(a[e])); a = d } return b(a, c) }, b.equals = function (a, c) { return a && c ? b(a).toRgbString() == b(c).toRgbString() : !1 }, b.random = function () { return b.fromRatio({ r: S(), g: S(), b: S() }) }, b.mix = function (a, c, d) { d = 0 === d ? 0 : d || 50; var e = b(a).toRgb(), f = b(c).toRgb(), g = d / 100, h = { r: (f.r - e.r) * g + e.r, g: (f.g - e.g) * g + e.g, b: (f.b - e.b) * g + e.b, a: (f.a - e.a) * g + e.a }; return b(h) }, b.readability = function (c, d) { var e = b(c), f = b(d); return (a.max(e.getLuminance(), f.getLuminance()) + .05) / (a.min(e.getLuminance(), f.getLuminance()) + .05) }, b.isReadable = function (a, c, d) { var e, f, g = b.readability(a, c); switch (f = !1, e = L(d), e.level + e.size) { case "AAsmall": case "AAAlarge": f = g >= 4.5; break; case "AAlarge": f = g >= 3; break; case "AAAsmall": f = g >= 7 }return f }, b.mostReadable = function (a, c, d) { var e, f, g, h, i = null, j = 0; d = d || {}, f = d.includeFallbackColors, g = d.level, h = d.size; for (var k = 0; k < c.length; k++)e = b.readability(a, c[k]), e > j && (j = e, i = b(c[k])); return b.isReadable(a, i, { level: g, size: h }) || !f ? i : (d.includeFallbackColors = !1, b.mostReadable(a, ["#fff", "#000"], d)) }; var T = b.names = { aliceblue: "f0f8ff", antiquewhite: "faebd7", aqua: "0ff", aquamarine: "7fffd4", azure: "f0ffff", beige: "f5f5dc", bisque: "ffe4c4", black: "000", blanchedalmond: "ffebcd", blue: "00f", blueviolet: "8a2be2", brown: "a52a2a", burlywood: "deb887", burntsienna: "ea7e5d", cadetblue: "5f9ea0", chartreuse: "7fff00", chocolate: "d2691e", coral: "ff7f50", cornflowerblue: "6495ed", cornsilk: "fff8dc", crimson: "dc143c", cyan: "0ff", darkblue: "00008b", darkcyan: "008b8b", darkgoldenrod: "b8860b", darkgray: "a9a9a9", darkgreen: "006400", darkgrey: "a9a9a9", darkkhaki: "bdb76b", darkmagenta: "8b008b", darkolivegreen: "556b2f", darkorange: "ff8c00", darkorchid: "9932cc", darkred: "8b0000", darksalmon: "e9967a", darkseagreen: "8fbc8f", darkslateblue: "483d8b", darkslategray: "2f4f4f", darkslategrey: "2f4f4f", darkturquoise: "00ced1", darkviolet: "9400d3", deeppink: "ff1493", deepskyblue: "00bfff", dimgray: "696969", dimgrey: "696969", dodgerblue: "1e90ff", firebrick: "b22222", floralwhite: "fffaf0", forestgreen: "228b22", fuchsia: "f0f", gainsboro: "dcdcdc", ghostwhite: "f8f8ff", gold: "ffd700", goldenrod: "daa520", gray: "808080", green: "008000", greenyellow: "adff2f", grey: "808080", honeydew: "f0fff0", hotpink: "ff69b4", indianred: "cd5c5c", indigo: "4b0082", ivory: "fffff0", khaki: "f0e68c", lavender: "e6e6fa", lavenderblush: "fff0f5", lawngreen: "7cfc00", lemonchiffon: "fffacd", lightblue: "add8e6", lightcoral: "f08080", lightcyan: "e0ffff", lightgoldenrodyellow: "fafad2", lightgray: "d3d3d3", lightgreen: "90ee90", lightgrey: "d3d3d3", lightpink: "ffb6c1", lightsalmon: "ffa07a", lightseagreen: "20b2aa", lightskyblue: "87cefa", lightslategray: "789", lightslategrey: "789", lightsteelblue: "b0c4de", lightyellow: "ffffe0", lime: "0f0", limegreen: "32cd32", linen: "faf0e6", magenta: "f0f", maroon: "800000", mediumaquamarine: "66cdaa", mediumblue: "0000cd", mediumorchid: "ba55d3", mediumpurple: "9370db", mediumseagreen: "3cb371", mediumslateblue: "7b68ee", mediumspringgreen: "00fa9a", mediumturquoise: "48d1cc", mediumvioletred: "c71585", midnightblue: "191970", mintcream: "f5fffa", mistyrose: "ffe4e1", moccasin: "ffe4b5", navajowhite: "ffdead", navy: "000080", oldlace: "fdf5e6", olive: "808000", olivedrab: "6b8e23", orange: "ffa500", orangered: "ff4500", orchid: "da70d6", palegoldenrod: "eee8aa", palegreen: "98fb98", paleturquoise: "afeeee", palevioletred: "db7093", papayawhip: "ffefd5", peachpuff: "ffdab9", peru: "cd853f", pink: "ffc0cb", plum: "dda0dd", powderblue: "b0e0e6", purple: "800080", rebeccapurple: "663399", red: "f00", rosybrown: "bc8f8f", royalblue: "4169e1", saddlebrown: "8b4513", salmon: "fa8072", sandybrown: "f4a460", seagreen: "2e8b57", seashell: "fff5ee", sienna: "a0522d", silver: "c0c0c0", skyblue: "87ceeb", slateblue: "6a5acd", slategray: "708090", slategrey: "708090", snow: "fffafa", springgreen: "00ff7f", steelblue: "4682b4", tan: "d2b48c", teal: "008080", thistle: "d8bfd8", tomato: "ff6347", turquoise: "40e0d0", violet: "ee82ee", wheat: "f5deb3", white: "fff", whitesmoke: "f5f5f5", yellow: "ff0", yellowgreen: "9acd32" }, U = b.hexNames = y(T), V = function () { var a = "[-\\+]?\\d+%?", b = "[-\\+]?\\d*\\.\\d+%?", c = "(?:" + b + ")|(?:" + a + ")", d = "[\\s|\\(]+(" + c + ")[,|\\s]+(" + c + ")[,|\\s]+(" + c + ")\\s*\\)?", e = "[\\s|\\(]+(" + c + ")[,|\\s]+(" + c + ")[,|\\s]+(" + c + ")[,|\\s]+(" + c + ")\\s*\\)?"; return { CSS_UNIT: new RegExp(c), rgb: new RegExp("rgb" + d), rgba: new RegExp("rgba" + e), hsl: new RegExp("hsl" + d), hsla: new RegExp("hsla" + e), hsv: new RegExp("hsv" + d), hsva: new RegExp("hsva" + e), hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/, hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/, hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/, hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/ } }(); "undefined" != typeof module && module.exports ? module.exports = b : "function" == typeof define && define.amd ? define(function () { return b }) : window.tinycolor = b }(Math);


/*
CryptoJS v3.1.2
code.google.com/p/crypto-js
(c) 2009-2013 by Jeff Mott. All rights reserved.
code.google.com/p/crypto-js/wiki/License
*/
var CryptoJS = CryptoJS || function (u, p) {
    var d = {}, l = d.lib = {}, s = function () { }, t = l.Base = { extend: function (a) { s.prototype = this; var c = new s; a && c.mixIn(a); c.hasOwnProperty("init") || (c.init = function () { c.$super.init.apply(this, arguments) }); c.init.prototype = c; c.$super = this; return c }, create: function () { var a = this.extend(); a.init.apply(a, arguments); return a }, init: function () { }, mixIn: function (a) { for (var c in a) a.hasOwnProperty(c) && (this[c] = a[c]); a.hasOwnProperty("toString") && (this.toString = a.toString) }, clone: function () { return this.init.prototype.extend(this) } },
    r = l.WordArray = t.extend({
        init: function (a, c) { a = this.words = a || []; this.sigBytes = c != p ? c : 4 * a.length }, toString: function (a) { return (a || v).stringify(this) }, concat: function (a) { var c = this.words, e = a.words, j = this.sigBytes; a = a.sigBytes; this.clamp(); if (j % 4) for (var k = 0; k < a; k++)c[j + k >>> 2] |= (e[k >>> 2] >>> 24 - 8 * (k % 4) & 255) << 24 - 8 * ((j + k) % 4); else if (65535 < e.length) for (k = 0; k < a; k += 4)c[j + k >>> 2] = e[k >>> 2]; else c.push.apply(c, e); this.sigBytes += a; return this }, clamp: function () {
            var a = this.words, c = this.sigBytes; a[c >>> 2] &= 4294967295 <<
                32 - 8 * (c % 4); a.length = u.ceil(c / 4)
        }, clone: function () { var a = t.clone.call(this); a.words = this.words.slice(0); return a }, random: function (a) { for (var c = [], e = 0; e < a; e += 4)c.push(4294967296 * u.random() | 0); return new r.init(c, a) }
    }), w = d.enc = {}, v = w.Hex = {
        stringify: function (a) { var c = a.words; a = a.sigBytes; for (var e = [], j = 0; j < a; j++) { var k = c[j >>> 2] >>> 24 - 8 * (j % 4) & 255; e.push((k >>> 4).toString(16)); e.push((k & 15).toString(16)) } return e.join("") }, parse: function (a) {
            for (var c = a.length, e = [], j = 0; j < c; j += 2)e[j >>> 3] |= parseInt(a.substr(j,
                2), 16) << 24 - 4 * (j % 8); return new r.init(e, c / 2)
        }
    }, b = w.Latin1 = { stringify: function (a) { var c = a.words; a = a.sigBytes; for (var e = [], j = 0; j < a; j++)e.push(String.fromCharCode(c[j >>> 2] >>> 24 - 8 * (j % 4) & 255)); return e.join("") }, parse: function (a) { for (var c = a.length, e = [], j = 0; j < c; j++)e[j >>> 2] |= (a.charCodeAt(j) & 255) << 24 - 8 * (j % 4); return new r.init(e, c) } }, x = w.Utf8 = { stringify: function (a) { try { return decodeURIComponent(escape(b.stringify(a))) } catch (c) { throw Error("Malformed UTF-8 data"); } }, parse: function (a) { return b.parse(unescape(encodeURIComponent(a))) } },
    q = l.BufferedBlockAlgorithm = t.extend({
        reset: function () { this._data = new r.init; this._nDataBytes = 0 }, _append: function (a) { "string" == typeof a && (a = x.parse(a)); this._data.concat(a); this._nDataBytes += a.sigBytes }, _process: function (a) { var c = this._data, e = c.words, j = c.sigBytes, k = this.blockSize, b = j / (4 * k), b = a ? u.ceil(b) : u.max((b | 0) - this._minBufferSize, 0); a = b * k; j = u.min(4 * a, j); if (a) { for (var q = 0; q < a; q += k)this._doProcessBlock(e, q); q = e.splice(0, a); c.sigBytes -= j } return new r.init(q, j) }, clone: function () {
            var a = t.clone.call(this);
            a._data = this._data.clone(); return a
        }, _minBufferSize: 0
    }); l.Hasher = q.extend({
        cfg: t.extend(), init: function (a) { this.cfg = this.cfg.extend(a); this.reset() }, reset: function () { q.reset.call(this); this._doReset() }, update: function (a) { this._append(a); this._process(); return this }, finalize: function (a) { a && this._append(a); return this._doFinalize() }, blockSize: 16, _createHelper: function (a) { return function (b, e) { return (new a.init(e)).finalize(b) } }, _createHmacHelper: function (a) {
            return function (b, e) {
                return (new n.HMAC.init(a,
                    e)).finalize(b)
            }
        }
    }); var n = d.algo = {}; return d
}(Math);
(function () {
    var u = CryptoJS, p = u.lib.WordArray; u.enc.Base64 = {
        stringify: function (d) { var l = d.words, p = d.sigBytes, t = this._map; d.clamp(); d = []; for (var r = 0; r < p; r += 3)for (var w = (l[r >>> 2] >>> 24 - 8 * (r % 4) & 255) << 16 | (l[r + 1 >>> 2] >>> 24 - 8 * ((r + 1) % 4) & 255) << 8 | l[r + 2 >>> 2] >>> 24 - 8 * ((r + 2) % 4) & 255, v = 0; 4 > v && r + 0.75 * v < p; v++)d.push(t.charAt(w >>> 6 * (3 - v) & 63)); if (l = t.charAt(64)) for (; d.length % 4;)d.push(l); return d.join("") }, parse: function (d) {
            var l = d.length, s = this._map, t = s.charAt(64); t && (t = d.indexOf(t), -1 != t && (l = t)); for (var t = [], r = 0, w = 0; w <
                l; w++)if (w % 4) { var v = s.indexOf(d.charAt(w - 1)) << 2 * (w % 4), b = s.indexOf(d.charAt(w)) >>> 6 - 2 * (w % 4); t[r >>> 2] |= (v | b) << 24 - 8 * (r % 4); r++ } return p.create(t, r)
        }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
    }
})();
(function (u) {
    function p(b, n, a, c, e, j, k) { b = b + (n & a | ~n & c) + e + k; return (b << j | b >>> 32 - j) + n } function d(b, n, a, c, e, j, k) { b = b + (n & c | a & ~c) + e + k; return (b << j | b >>> 32 - j) + n } function l(b, n, a, c, e, j, k) { b = b + (n ^ a ^ c) + e + k; return (b << j | b >>> 32 - j) + n } function s(b, n, a, c, e, j, k) { b = b + (a ^ (n | ~c)) + e + k; return (b << j | b >>> 32 - j) + n } for (var t = CryptoJS, r = t.lib, w = r.WordArray, v = r.Hasher, r = t.algo, b = [], x = 0; 64 > x; x++)b[x] = 4294967296 * u.abs(u.sin(x + 1)) | 0; r = r.MD5 = v.extend({
        _doReset: function () { this._hash = new w.init([1732584193, 4023233417, 2562383102, 271733878]) },
        _doProcessBlock: function (q, n) {
            for (var a = 0; 16 > a; a++) { var c = n + a, e = q[c]; q[c] = (e << 8 | e >>> 24) & 16711935 | (e << 24 | e >>> 8) & 4278255360 } var a = this._hash.words, c = q[n + 0], e = q[n + 1], j = q[n + 2], k = q[n + 3], z = q[n + 4], r = q[n + 5], t = q[n + 6], w = q[n + 7], v = q[n + 8], A = q[n + 9], B = q[n + 10], C = q[n + 11], u = q[n + 12], D = q[n + 13], E = q[n + 14], x = q[n + 15], f = a[0], m = a[1], g = a[2], h = a[3], f = p(f, m, g, h, c, 7, b[0]), h = p(h, f, m, g, e, 12, b[1]), g = p(g, h, f, m, j, 17, b[2]), m = p(m, g, h, f, k, 22, b[3]), f = p(f, m, g, h, z, 7, b[4]), h = p(h, f, m, g, r, 12, b[5]), g = p(g, h, f, m, t, 17, b[6]), m = p(m, g, h, f, w, 22, b[7]),
                f = p(f, m, g, h, v, 7, b[8]), h = p(h, f, m, g, A, 12, b[9]), g = p(g, h, f, m, B, 17, b[10]), m = p(m, g, h, f, C, 22, b[11]), f = p(f, m, g, h, u, 7, b[12]), h = p(h, f, m, g, D, 12, b[13]), g = p(g, h, f, m, E, 17, b[14]), m = p(m, g, h, f, x, 22, b[15]), f = d(f, m, g, h, e, 5, b[16]), h = d(h, f, m, g, t, 9, b[17]), g = d(g, h, f, m, C, 14, b[18]), m = d(m, g, h, f, c, 20, b[19]), f = d(f, m, g, h, r, 5, b[20]), h = d(h, f, m, g, B, 9, b[21]), g = d(g, h, f, m, x, 14, b[22]), m = d(m, g, h, f, z, 20, b[23]), f = d(f, m, g, h, A, 5, b[24]), h = d(h, f, m, g, E, 9, b[25]), g = d(g, h, f, m, k, 14, b[26]), m = d(m, g, h, f, v, 20, b[27]), f = d(f, m, g, h, D, 5, b[28]), h = d(h, f,
                    m, g, j, 9, b[29]), g = d(g, h, f, m, w, 14, b[30]), m = d(m, g, h, f, u, 20, b[31]), f = l(f, m, g, h, r, 4, b[32]), h = l(h, f, m, g, v, 11, b[33]), g = l(g, h, f, m, C, 16, b[34]), m = l(m, g, h, f, E, 23, b[35]), f = l(f, m, g, h, e, 4, b[36]), h = l(h, f, m, g, z, 11, b[37]), g = l(g, h, f, m, w, 16, b[38]), m = l(m, g, h, f, B, 23, b[39]), f = l(f, m, g, h, D, 4, b[40]), h = l(h, f, m, g, c, 11, b[41]), g = l(g, h, f, m, k, 16, b[42]), m = l(m, g, h, f, t, 23, b[43]), f = l(f, m, g, h, A, 4, b[44]), h = l(h, f, m, g, u, 11, b[45]), g = l(g, h, f, m, x, 16, b[46]), m = l(m, g, h, f, j, 23, b[47]), f = s(f, m, g, h, c, 6, b[48]), h = s(h, f, m, g, w, 10, b[49]), g = s(g, h, f, m,
                        E, 15, b[50]), m = s(m, g, h, f, r, 21, b[51]), f = s(f, m, g, h, u, 6, b[52]), h = s(h, f, m, g, k, 10, b[53]), g = s(g, h, f, m, B, 15, b[54]), m = s(m, g, h, f, e, 21, b[55]), f = s(f, m, g, h, v, 6, b[56]), h = s(h, f, m, g, x, 10, b[57]), g = s(g, h, f, m, t, 15, b[58]), m = s(m, g, h, f, D, 21, b[59]), f = s(f, m, g, h, z, 6, b[60]), h = s(h, f, m, g, C, 10, b[61]), g = s(g, h, f, m, j, 15, b[62]), m = s(m, g, h, f, A, 21, b[63]); a[0] = a[0] + f | 0; a[1] = a[1] + m | 0; a[2] = a[2] + g | 0; a[3] = a[3] + h | 0
        }, _doFinalize: function () {
            var b = this._data, n = b.words, a = 8 * this._nDataBytes, c = 8 * b.sigBytes; n[c >>> 5] |= 128 << 24 - c % 32; var e = u.floor(a /
                4294967296); n[(c + 64 >>> 9 << 4) + 15] = (e << 8 | e >>> 24) & 16711935 | (e << 24 | e >>> 8) & 4278255360; n[(c + 64 >>> 9 << 4) + 14] = (a << 8 | a >>> 24) & 16711935 | (a << 24 | a >>> 8) & 4278255360; b.sigBytes = 4 * (n.length + 1); this._process(); b = this._hash; n = b.words; for (a = 0; 4 > a; a++)c = n[a], n[a] = (c << 8 | c >>> 24) & 16711935 | (c << 24 | c >>> 8) & 4278255360; return b
        }, clone: function () { var b = v.clone.call(this); b._hash = this._hash.clone(); return b }
    }); t.MD5 = v._createHelper(r); t.HmacMD5 = v._createHmacHelper(r)
})(Math);
(function () {
    var u = CryptoJS, p = u.lib, d = p.Base, l = p.WordArray, p = u.algo, s = p.EvpKDF = d.extend({ cfg: d.extend({ keySize: 4, hasher: p.MD5, iterations: 1 }), init: function (d) { this.cfg = this.cfg.extend(d) }, compute: function (d, r) { for (var p = this.cfg, s = p.hasher.create(), b = l.create(), u = b.words, q = p.keySize, p = p.iterations; u.length < q;) { n && s.update(n); var n = s.update(d).finalize(r); s.reset(); for (var a = 1; a < p; a++)n = s.finalize(n), s.reset(); b.concat(n) } b.sigBytes = 4 * q; return b } }); u.EvpKDF = function (d, l, p) {
        return s.create(p).compute(d,
            l)
    }
})();
CryptoJS.lib.Cipher || function (u) {
    var p = CryptoJS, d = p.lib, l = d.Base, s = d.WordArray, t = d.BufferedBlockAlgorithm, r = p.enc.Base64, w = p.algo.EvpKDF, v = d.Cipher = t.extend({
        cfg: l.extend(), createEncryptor: function (e, a) { return this.create(this._ENC_XFORM_MODE, e, a) }, createDecryptor: function (e, a) { return this.create(this._DEC_XFORM_MODE, e, a) }, init: function (e, a, b) { this.cfg = this.cfg.extend(b); this._xformMode = e; this._key = a; this.reset() }, reset: function () { t.reset.call(this); this._doReset() }, process: function (e) { this._append(e); return this._process() },
        finalize: function (e) { e && this._append(e); return this._doFinalize() }, keySize: 4, ivSize: 4, _ENC_XFORM_MODE: 1, _DEC_XFORM_MODE: 2, _createHelper: function (e) { return { encrypt: function (b, k, d) { return ("string" == typeof k ? c : a).encrypt(e, b, k, d) }, decrypt: function (b, k, d) { return ("string" == typeof k ? c : a).decrypt(e, b, k, d) } } }
    }); d.StreamCipher = v.extend({ _doFinalize: function () { return this._process(!0) }, blockSize: 1 }); var b = p.mode = {}, x = function (e, a, b) {
        var c = this._iv; c ? this._iv = u : c = this._prevBlock; for (var d = 0; d < b; d++)e[a + d] ^=
            c[d]
    }, q = (d.BlockCipherMode = l.extend({ createEncryptor: function (e, a) { return this.Encryptor.create(e, a) }, createDecryptor: function (e, a) { return this.Decryptor.create(e, a) }, init: function (e, a) { this._cipher = e; this._iv = a } })).extend(); q.Encryptor = q.extend({ processBlock: function (e, a) { var b = this._cipher, c = b.blockSize; x.call(this, e, a, c); b.encryptBlock(e, a); this._prevBlock = e.slice(a, a + c) } }); q.Decryptor = q.extend({
        processBlock: function (e, a) {
            var b = this._cipher, c = b.blockSize, d = e.slice(a, a + c); b.decryptBlock(e, a); x.call(this,
                e, a, c); this._prevBlock = d
        }
    }); b = b.CBC = q; q = (p.pad = {}).Pkcs7 = { pad: function (a, b) { for (var c = 4 * b, c = c - a.sigBytes % c, d = c << 24 | c << 16 | c << 8 | c, l = [], n = 0; n < c; n += 4)l.push(d); c = s.create(l, c); a.concat(c) }, unpad: function (a) { a.sigBytes -= a.words[a.sigBytes - 1 >>> 2] & 255 } }; d.BlockCipher = v.extend({
        cfg: v.cfg.extend({ mode: b, padding: q }), reset: function () {
            v.reset.call(this); var a = this.cfg, b = a.iv, a = a.mode; if (this._xformMode == this._ENC_XFORM_MODE) var c = a.createEncryptor; else c = a.createDecryptor, this._minBufferSize = 1; this._mode = c.call(a,
                this, b && b.words)
        }, _doProcessBlock: function (a, b) { this._mode.processBlock(a, b) }, _doFinalize: function () { var a = this.cfg.padding; if (this._xformMode == this._ENC_XFORM_MODE) { a.pad(this._data, this.blockSize); var b = this._process(!0) } else b = this._process(!0), a.unpad(b); return b }, blockSize: 4
    }); var n = d.CipherParams = l.extend({ init: function (a) { this.mixIn(a) }, toString: function (a) { return (a || this.formatter).stringify(this) } }), b = (p.format = {}).OpenSSL = {
        stringify: function (a) {
            var b = a.ciphertext; a = a.salt; return (a ? s.create([1398893684,
                1701076831]).concat(a).concat(b) : b).toString(r)
        }, parse: function (a) { a = r.parse(a); var b = a.words; if (1398893684 == b[0] && 1701076831 == b[1]) { var c = s.create(b.slice(2, 4)); b.splice(0, 4); a.sigBytes -= 16 } return n.create({ ciphertext: a, salt: c }) }
    }, a = d.SerializableCipher = l.extend({
        cfg: l.extend({ format: b }), encrypt: function (a, b, c, d) { d = this.cfg.extend(d); var l = a.createEncryptor(c, d); b = l.finalize(b); l = l.cfg; return n.create({ ciphertext: b, key: c, iv: l.iv, algorithm: a, mode: l.mode, padding: l.padding, blockSize: a.blockSize, formatter: d.format }) },
        decrypt: function (a, b, c, d) { d = this.cfg.extend(d); b = this._parse(b, d.format); return a.createDecryptor(c, d).finalize(b.ciphertext) }, _parse: function (a, b) { return "string" == typeof a ? b.parse(a, this) : a }
    }), p = (p.kdf = {}).OpenSSL = { execute: function (a, b, c, d) { d || (d = s.random(8)); a = w.create({ keySize: b + c }).compute(a, d); c = s.create(a.words.slice(b), 4 * c); a.sigBytes = 4 * b; return n.create({ key: a, iv: c, salt: d }) } }, c = d.PasswordBasedCipher = a.extend({
        cfg: a.cfg.extend({ kdf: p }), encrypt: function (b, c, d, l) {
            l = this.cfg.extend(l); d = l.kdf.execute(d,
                b.keySize, b.ivSize); l.iv = d.iv; b = a.encrypt.call(this, b, c, d.key, l); b.mixIn(d); return b
        }, decrypt: function (b, c, d, l) { l = this.cfg.extend(l); c = this._parse(c, l.format); d = l.kdf.execute(d, b.keySize, b.ivSize, c.salt); l.iv = d.iv; return a.decrypt.call(this, b, c, d.key, l) }
    })
}();
(function () {
    for (var u = CryptoJS, p = u.lib.BlockCipher, d = u.algo, l = [], s = [], t = [], r = [], w = [], v = [], b = [], x = [], q = [], n = [], a = [], c = 0; 256 > c; c++)a[c] = 128 > c ? c << 1 : c << 1 ^ 283; for (var e = 0, j = 0, c = 0; 256 > c; c++) { var k = j ^ j << 1 ^ j << 2 ^ j << 3 ^ j << 4, k = k >>> 8 ^ k & 255 ^ 99; l[e] = k; s[k] = e; var z = a[e], F = a[z], G = a[F], y = 257 * a[k] ^ 16843008 * k; t[e] = y << 24 | y >>> 8; r[e] = y << 16 | y >>> 16; w[e] = y << 8 | y >>> 24; v[e] = y; y = 16843009 * G ^ 65537 * F ^ 257 * z ^ 16843008 * e; b[k] = y << 24 | y >>> 8; x[k] = y << 16 | y >>> 16; q[k] = y << 8 | y >>> 24; n[k] = y; e ? (e = z ^ a[a[a[G ^ z]]], j ^= a[a[j]]) : e = j = 1 } var H = [0, 1, 2, 4, 8,
        16, 32, 64, 128, 27, 54], d = d.AES = p.extend({
            _doReset: function () {
                for (var a = this._key, c = a.words, d = a.sigBytes / 4, a = 4 * ((this._nRounds = d + 6) + 1), e = this._keySchedule = [], j = 0; j < a; j++)if (j < d) e[j] = c[j]; else { var k = e[j - 1]; j % d ? 6 < d && 4 == j % d && (k = l[k >>> 24] << 24 | l[k >>> 16 & 255] << 16 | l[k >>> 8 & 255] << 8 | l[k & 255]) : (k = k << 8 | k >>> 24, k = l[k >>> 24] << 24 | l[k >>> 16 & 255] << 16 | l[k >>> 8 & 255] << 8 | l[k & 255], k ^= H[j / d | 0] << 24); e[j] = e[j - d] ^ k } c = this._invKeySchedule = []; for (d = 0; d < a; d++)j = a - d, k = d % 4 ? e[j] : e[j - 4], c[d] = 4 > d || 4 >= j ? k : b[l[k >>> 24]] ^ x[l[k >>> 16 & 255]] ^ q[l[k >>>
                    8 & 255]] ^ n[l[k & 255]]
            }, encryptBlock: function (a, b) { this._doCryptBlock(a, b, this._keySchedule, t, r, w, v, l) }, decryptBlock: function (a, c) { var d = a[c + 1]; a[c + 1] = a[c + 3]; a[c + 3] = d; this._doCryptBlock(a, c, this._invKeySchedule, b, x, q, n, s); d = a[c + 1]; a[c + 1] = a[c + 3]; a[c + 3] = d }, _doCryptBlock: function (a, b, c, d, e, j, l, f) {
                for (var m = this._nRounds, g = a[b] ^ c[0], h = a[b + 1] ^ c[1], k = a[b + 2] ^ c[2], n = a[b + 3] ^ c[3], p = 4, r = 1; r < m; r++)var q = d[g >>> 24] ^ e[h >>> 16 & 255] ^ j[k >>> 8 & 255] ^ l[n & 255] ^ c[p++], s = d[h >>> 24] ^ e[k >>> 16 & 255] ^ j[n >>> 8 & 255] ^ l[g & 255] ^ c[p++], t =
                    d[k >>> 24] ^ e[n >>> 16 & 255] ^ j[g >>> 8 & 255] ^ l[h & 255] ^ c[p++], n = d[n >>> 24] ^ e[g >>> 16 & 255] ^ j[h >>> 8 & 255] ^ l[k & 255] ^ c[p++], g = q, h = s, k = t; q = (f[g >>> 24] << 24 | f[h >>> 16 & 255] << 16 | f[k >>> 8 & 255] << 8 | f[n & 255]) ^ c[p++]; s = (f[h >>> 24] << 24 | f[k >>> 16 & 255] << 16 | f[n >>> 8 & 255] << 8 | f[g & 255]) ^ c[p++]; t = (f[k >>> 24] << 24 | f[n >>> 16 & 255] << 16 | f[g >>> 8 & 255] << 8 | f[h & 255]) ^ c[p++]; n = (f[n >>> 24] << 24 | f[g >>> 16 & 255] << 16 | f[h >>> 8 & 255] << 8 | f[k & 255]) ^ c[p++]; a[b] = q; a[b + 1] = s; a[b + 2] = t; a[b + 3] = n
            }, keySize: 8
        }); u.AES = p._createHelper(d)
})();

/*End of Document helper.min.js*/

/*Document Viewer Control*/

var __extends=(this&&this.__extends)||(function(){var a=Object.setPrototypeOf||({__proto__:[]} instanceof Array&&function(e,c){e.__proto__=c})||function(f,c){for(var e in c){if(c.hasOwnProperty(e)){f[e]=c[e]}}};return function(f,c){a(f,c);function e(){this.constructor=f}f.prototype=c===null?Object.create(c):(e.prototype=c.prototype,new e())}})();var gnostice;(function(b){var a=(function(){function c(){}c.click=function(d,f,e){if(d!=null){$(d).on("click",e,f);$(d).keypress(function(g){if(g.which==13||g.which==32){g.data=e;f(g);g.preventDefault()}})}};c.change=function(d,f,e){if(d!=null){$(d).on("change",e,f)}};c.scroll=function(d,f,e){if(d!=null){$(d).on("scroll",e,f)}};c.blur=function(d,f,e){if(d!=null){$(d).on("blur",e,f)}};c.keydown=function(d,f,e){if(d!=null){$(d).on("keydown",e,f)}};return c}());b.UIEvents=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(){function c(){this._eventHandlers={}}c.prototype.addEventListener=function(d,e){this._eventHandlers[d]=this._eventHandlers[d]||[];this._eventHandlers[d].push({eventHandler:e})};c.prototype.addFormsEventListener=function(d,e,f){this._eventHandlers[d]=this._eventHandlers[d]||[];this._eventHandlers[d].push({eventHandler:f,formFieldSpec:e})};c.prototype.removeEventListener=function(e,g){if(this._eventHandlers[e]==null){return}var d=this._eventHandlers[e];var f=0;while(f<d.length){if(g==d[f].eventHandler){d.splice(f,1);break}else{++f}}};c.prototype.removeAllListeners=function(d){if(this._eventHandlers[d]==null){return}this._eventHandlers[d]=[]};c.prototype.dispatchAll=function(e,g){var d=this._eventHandlers[e];if(d){for(var f=0;f<d.length;f++){this.dispatch(d[f].eventHandler,g)}}};c.prototype.dispatchAllFormEvents=function(e,j,k){var d=this._eventHandlers[e];var g=null;if(d){for(var h=0;h<d.length;++h){var f=d[h].formFieldSpec;if(f==null||f==""||f=="*"||f==j){g=this.dispatch(d[h].eventHandler,k)}}}return g};c.prototype.dispatch=function(d,e){if(e===void 0){e=null}if(d!=null){return d(e)}return null};c.prototype.dispatchAllAsync=function(f,j){if(j===void 0){j=null}var e=jQuery.Deferred();var d=this._eventHandlers[f];var g=new Array();if(d){for(var h=0;h<d.length;h++){g.push(this.dispatchAsync(d[h].eventHandler,j))}}$.when.apply($,g).done(function(){e.resolve()}).fail(function(){e.reject()});return e.promise()};c.prototype.dispatchAsync=function(f,h){if(h===void 0){h=null}var d=jQuery.Deferred();var e=false;var g=f(h);if(g!=null){var i=g;if(i!=null){e=true;i.done(function(j){d.resolve(j)}).fail(function(j){d.reject(j)})}}if(!e){d.resolve(g)}return d.promise()};return c}());b.EventDispatcher=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(){function c(D,x,K,A,f,J,r,v,w,I,O,l,L,F,z,q,g,M,o,y,G,u,e,C,N,j,E,h,B,i,t,s,H,p,n,m,d,k){this.viewer=D;this.viewableArea=x;this.sidePaneToggleBtn=K;this.openDocBtn=A;this.printBtn=f;this.saveBtn=J;this.downloadBtn=r;this.downloadAsCmbBox=v;this.firstPage=w;this.prevPage=I;this.nextPage=O;this.lastPage=l;this.uploader=L;this.pageIndicator=F;this.zoomIn=z;this.zoomOut=q;this.zoomDropdown=g;this.rotatePagesClockwise=M;this.rotatePagesCounterClockwise=o;this.invertBtn=y;this.docPropertiesBtn=G;this.fullScreenBtn=u;this.addSignatureBtn=e;this.redactBtn=C;this.bookmarkBtn=N;this.bookmarkContent=j;this.thumbanailBtn=E;this.thumbnailContent=h;this.progressAnimation=B;this.messageBox=i;this.yesNoCancelDialog=t;this.warningBox=s;this.notificationControl=H;this.passwordDialog=p;this.passwordWarningMessage=n;this.propertiesWindow=m;this.printProgressAnimation=d;this.signatureDialog=k}return c}());b.ViewerDOM=a})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(){function c(){}c.prototype.getViewerPreferences=function(d){return null};c.prototype.getUserSignatures=function(d){return null};c.prototype.ApplyDigitizationSettings=function(e,g,h,f,d){return null};c.prototype.uploadDocument=function(e,f,d){return null};c.prototype.uploadDocumentFromBuffer=function(d,e){return null};c.prototype.uploadDocumentFromUri=function(d,f,e){return null};c.prototype.loadDocumentFromServer=function(d,e){return null};c.prototype.getDocInfo=function(e,d){return null};c.prototype.getDocumentPageCount=function(e,d){return null};c.prototype.getDocBookmarks=function(e,d){return null};c.prototype.getDocumentDownloadURL=function(f,d,e){return null};c.prototype.getDownloadDocumentAsURL=function(g,d,f,e){return null};c.prototype.getPageInfo=function(f,e,d){return null};c.prototype.getPrintPage=function(d){return null};c.prototype.getPage=function(f,e,d){return null};c.prototype.getPageThumbnail=function(f,e,d){return null};c.prototype.checkViewerRights=function(d){return null};c.prototype.getPrintPageURLs=function(f,d,e){return null};c.prototype.getPageText=function(f,e,d){return null};c.prototype.getPageFormFields=function(f,e,d){return null};c.prototype.getPageAnnots=function(f,e,d){return null};c.prototype.saveDocumentChanges=function(f,d,e){return null};c.prototype.disposeDocument=function(d){return null};c.prototype.getDocumentAbsolutePath=function(d){return null};return c}());a.ServerCom=b})(gnostice||(gnostice={}));var gnostice;(function(c){var b=(function(){function d(g,e,f,h){this.enableDigitization=g;this.textRecognitionLanguage=e;this.enableFormFilling=f;this.enableAnnotation=h}return d}());var a=(function(e){__extends(d,e);function d(){var f=e.call(this)||this;f.pollInterval=1500;f.pollRetryMaxCount=10;return f}d.prototype.getViewerPreferences=function(g){var f=g+"/preferences";c.logger.logInfo("Request - Action : getViewerPreferences, type: GET, Url: "+f);return $.ajax({type:"GET",url:f,contentType:"json",cache:false})};d.prototype.checkViewerRights=function(g){var f=g+"/rights";c.logger.logInfo("Request - Action : checkViewerRights, type: GET, Url: "+f);return $.ajax({type:"GET",url:f,contentType:"json",cache:false})};d.prototype.getUserSignatures=function(g){var f=g+"/usersignatures";c.logger.logInfo("Request - Action : getUserSignatures, type: GET, Url: "+f);return $.ajax({type:"GET",url:f,contentType:"json",cache:false})};d.prototype.ApplyDigitizationSettings=function(h,k,g,j,f){var l=new b(h,k,g,j);var i=f+"/viewersettings";c.logger.logInfo("Request - Action : ApplyDigitizationSettings, type: Post, Url: "+i);$.ajax({url:i,type:"POST",data:JSON.stringify(l),cache:false,dataType:"json",processData:false,contentType:false}).then(function(n,o,m){return $.Deferred().resolve()})};d.prototype.uploadDocument=function(h,i,f){var j=new FormData();j.append("document",h);var g=f+"/docs";c.logger.logInfo("Request - Action: uploadDocument, type: Post, Url: "+g);return $.ajax({url:g,type:"POST",data:j,cache:false,dataType:"json",processData:false,contentType:false}).then(function(l,m,k){return $.Deferred().resolve(l).promise()},function(k,m,l){return $.Deferred().reject(k.status,l,k.responseJSON).promise()})};d.prototype.loadDocumentFromServer=function(g,i){var h={};if(g.length>0){h.ServerFileName=g}var f=i+"/docs";c.logger.logInfo("Request - Action : uploadDocumentFromUri, type: Post, Url: "+f);return $.ajax({url:f,type:"POST",data:h,cache:false}).then(function(k,l,j){return $.Deferred().resolve(k).promise()},function(j,l,k){return $.Deferred().reject(j.status,k,j.responseJSON).promise()})};d.prototype.uploadDocumentFromBuffer=function(f,i){var h={};if(f.length>0){h.documentBase64=f}var g=i+"/docs";c.logger.logInfo("Request - Action : uploadDocumentFromBuffer, type: Post, Url: "+g);return $.ajax({url:g,type:"POST",data:h,cache:false}).then(function(k,l,j){return $.Deferred().resolve(k).promise()},function(j,l,k){return $.Deferred().reject(j.status,k,j.responseJSON).promise()})};d.prototype.uploadDocumentFromUri=function(g,j,i){var h={};if(g.length>0){h.documentUrl=g}var f=j+"/docs";c.logger.logInfo("Request - Action : uploadDocumentFromUri, type: Post, Url: "+f);return $.ajax({beforeSend:i||function(k){},url:f,type:"POST",data:h,cache:false}).then(function(l,m,k){return $.Deferred().resolve(l).promise()},function(k,m,l){return $.Deferred().reject(k.status,l,k.responseJSON).promise()})};d.prototype.getDocInfo=function(h,g){var f=h+"/info?";if(g!=""){f+="&password="+g}c.logger.logInfo("Request - Action : getDocInfo, type: GET, Url: "+f);return this.doAjaxAndPoll("GET",f.toString())};d.prototype.getDocBookmarks=function(h,g){var f=h+"/bookmarks";if(g!=""){f+="?password="+g}c.logger.logInfo("Request - Action : getDocBookmarks, type: GET, Url: "+f);return $.ajax({type:"GET",url:f,contentType:"json"})};d.prototype.getDocumentDownloadURL=function(j,g,h){var i="&filename=downloadfile";if(h!=""){i="&filename="+h}j+="/download?";if(g!=""){j+="&password="+g}var f=jQuery.Deferred();f.resolve({url:j+i});return f.promise()};d.prototype.getDownloadDocumentAsURL=function(k,g,j,h){var i="&filename=downloadfile";if(h!=""){i="&filename="+h}k+="/download?";if(g!=""){k+="password="+g}var f=jQuery.Deferred();f.resolve({url:k+"&format="+j+i});return f.promise()};d.prototype.getPageInfo=function(i,g,f){var h=i+"/pages/"+f+"/printpageinfo";if(g!=""){h+="?password="+g}c.logger.logInfo("Request - Action : getPageInfo, type: GET, Url: "+h);return this.doAjaxAndPoll("GET",h.toString())};d.prototype.getPrintPage=function(f){c.logger.logInfo("Request - Action : getPrintPage, type: GET, Url: "+f);return this.doAjaxAndPoll("GET",f.toString(),"text")};d.prototype.getPage=function(i,g,f){var h=i+"/pages/"+f+"?";if(g!=""){h+="&password="+g}c.logger.logInfo("Request - Action : getPage, type: GET, Url: "+h);return this.doAjaxAndPoll("GET",h.toString())};d.prototype.getPrintPageURLs=function(n,j,l){var h=new Array();var f=n+"/status";var g=jQuery.Deferred();for(var k=0;k<l.length;k++){var m=n+"/pages/"+l[k]+"/image?render-form-fields=true&annotations-interactive-mode=false";if(j!=""){m+="&password="+j}h.push(m)}g.resolve({urls:h});return g.promise()};d.prototype.checkPagesReadyForPrinting=function(h,g,f){if(g!=""){h+="?password="+g}return this.doAjaxAndPollForPrintPageCount("GET",h.toString(),f)};d.prototype.getPageText=function(h,g,f){h+="/pages/"+f+"/text/";c.logger.logInfo("Request - Action : getPageText, type: GET, Url: "+h);return this.doAjaxAndPoll("GET",h.toString())};d.prototype.getPageFormFields=function(h,g,f){h+="/pages/"+f+"/formFields/";if(g!=""){h+="?password="+g}c.logger.logInfo("Request - Action : getPageFormFields, type: GET, Url: "+h);return $.ajax({type:"GET",url:h,contentType:"json"}).then(function(j,k,i){return $.Deferred().resolve(j).promise()},function(i,k,j){return $.Deferred().reject(i.status,j,i.responseJSON).promise()})};d.prototype.getPageThumbnail=function(i,g,f){var h=i+"/pages/"+f+"/thumbnail";if(g!=""){h+="?password="+g}c.logger.logInfo("Request - Action : getThumbnailPage, type: GET, Url: "+h);return this.doAjaxAndPoll("GET",h.toString())};d.prototype.getPageAnnots=function(h,g,f){h+="/pages/"+f+"/annots/";if(g!=""){h+="?password="+g}c.logger.logInfo("Request - Action : getPageAnnots, type: GET, Url: "+h);return $.ajax({type:"GET",url:h,contentType:"json"}).then(function(j,k,i){return $.Deferred().resolve(j).promise()},function(i,k,j){return $.Deferred().reject(i.status,j,i.responseJSON).promise()})};d.prototype.saveDocumentChanges=function(h,f,g){h+="/save";if(f!=""){h+="?password="+f}c.logger.logInfo("Request - Action : saveDocumentChanges, type: Post, Url: "+h);return $.ajax({url:h,type:"PUT",data:JSON.stringify(g),cache:false,dataType:"json",processData:false,contentType:false})};d.prototype.getDocumentAbsolutePath=function(f){return $.ajax({type:"GET",url:f,contentType:"json"})};d.prototype.disposeDocument=function(f){c.logger.logInfo("Request - Action : disposeDocument, type: GET, Url: "+f+"/dispose");return $.ajax({type:"GET",url:f+"/dispose",contentType:"json"}).then(function(h,i,g){return $.Deferred().resolve(h).promise()},function(g,i,h){return $.Deferred().reject(g.status,h,g.responseJSON).promise()})};d.prototype.doAjax=function(i,h,f){var g=this;return $.ajax({url:h,type:i,dataType:f||"json",contentType:false,cache:false,processData:false})};d.prototype.doAjaxWithBody=function(k,i,g,j,f){var h=this;return $.ajax({url:i,type:k,dataType:f||"json",data:g,contentType:j||false,cache:false,processData:false})};d.prototype.doAjaxAndPoll=function(j,h,f){c.logger.logInfo("Action: doAjaxAndPoll, Requesting URL : "+h);var g=this.doAjax(j,h,f);var i=this;return g.then(function(k,n,l){if(l.status===200){c.logger.logInfo("Action: doAjaxAndPoll, successfull response, Requesting URL : "+h);return $.Deferred().resolve(k).promise()}else{if(l.status===202){c.logger.logInfo("Action: doAjaxAndPoll, Result is not ready so we need to poll, Requesting URL : "+h);var m=$.Deferred();setTimeout(i.doPoll,i.pollInterval,h.toString(),m,i,1,f);return m.promise()}else{c.logger.logInfo("Action: doAjaxAndPoll, Unexpected response, "+l.responseJSON+" Requesting URL : "+h);return $.Deferred().reject(l.status,n,l.responseJSON).promise()}}},function(k,m,l){return $.Deferred().reject(k.status,l,k.responseJSON).promise()})};d.prototype.doAjaxWithBodyAndPoll=function(l,i,g,k,f){var h=this.doAjaxWithBody(l,i,g,k,f);var j=this;return h.then(function(m,p,n){if(n.status===201){c.logger.logInfo("Action: doAjaxWithBodyAndPoll, successfull response, Requesting URL : "+i);return $.Deferred().resolve(m).promise()}else{if(n.status===202){var o=$.Deferred();c.logger.logInfo("Action: doAjaxWithBodyAndPoll, status-202, retry after : "+j.pollInterval+", Requesting URL : "+i);setTimeout(j.doPoll,j.pollInterval,i,o,j,1);return o.promise()}else{c.logger.logInfo("Action: doAjaxWithBodyAndPoll, Unexpected response, "+n.responseJSON+" Requesting URL : "+i);return $.Deferred().reject(n.status,p,n.responseJSON).promise()}}},function(m,o,n){return $.Deferred().reject(m.status,n,m.responseJSON).promise()})};d.prototype.doPoll=function(h,g,i,j,f){var k=i.doAjax("GET",h,f);return k.then(function(l,n,m){if(m.status===200||m.status===201){j=1;c.logger.logInfo("Action: doPoll, successfull response, Requesting URL : "+h);g.resolve(l)}else{if(m.status===202){++j;c.logger.logInfo("Action: doPoll, Result is not ready so we need to poll, re-try : "+j+" of "+i.pollRetryMaxCount+" Requesting URL : "+h);if(j>=i.pollRetryMaxCount){c.logger.logInfo("Action: doPoll, Result is not ready and Server taking too long, Requesting URL : "+h);g.reject(l,"Timeout",0,"Exceeded poll retry count.");return}setTimeout(i.doPoll,i.pollInterval,h,g,i,j,f)}else{c.logger.logInfo("Action: doPoll, Unexpected response, "+m.responseJSON+" Requesting URL : "+h);g.reject(m.status,n,m.responseJSON)}}},function(l,n,m){return g.reject(l.status,m,l.responseJSON)})};d.prototype.doAjaxAndPollForPrintPageCount=function(k,i,h,f){c.logger.logInfo("Action: doAjaxAndPollForPrintPageCount, Requesting URL : "+i);var g=this.doAjax(k,i,f);var j=this;return g.then(function(l,o,m){if(l.renderingCompleted){c.logger.logInfo("Action: doAjaxAndPollForPrintPageCount, successfull response, Requesting URL : "+i);return $.Deferred().resolve(l).promise()}else{c.logger.logInfo("Action: doAjaxAndPollForPrintPageCount, Result is not ready so we need to poll, Requesting URL : "+i);var n=$.Deferred();setTimeout(j.doPollForPrintPageCount,j.pollInterval*2,i.toString(),n,j,h);return n.promise()}},function(l,n,m){return $.Deferred().reject(l.status,m,l.responseJSON).promise()})};d.prototype.doPollForPrintPageCount=function(h,g,i,f){var j=i.doAjax("GET",h);return j.then(function(k,m,l){if((f<=k.loadedPageCount)||(k.renderingCompleted)){c.logger.logInfo("Action: doPollForPrintPageCount, successfull response, Requesting URL : "+h);g.resolve(k)}else{c.logger.logInfo("Action: doAjaxAndPollForPrintPageCount, Result is not ready so we need to poll, Requesting URL : "+h);setTimeout(i.doPollForPrintPageCount,i.pollInterval,h,g,i,f)}},function(k,m,l){return g.reject(k.status,l,k.responseJSON)})};d.prototype.doAjaxAndPollForPageCount=function(j,h,f,i){c.logger.logInfo("Action: doAjaxAndPollForPageCount, Requesting URL : "+h);var g=i.doAjax(j,h,f);return g.then(function(k,o,l){var n=false;if(k.docInfo.formatType==c.FormatType.Flow){if(!k.renderingCompleted){n=true}}else{n=false}if(n){c.logger.logInfo("Action: doAjaxAndPollForPageCount, Result is not ready so we need to poll, Requesting URL : "+h);var m=$.Deferred();setTimeout(i.doAjaxAndPollForPageCount,i.pollInterval,j,h.toString(),f,i);return m.promise()}else{c.logger.logInfo("Action: doAjaxAndPollForPageCount, successfull response, Requesting URL : "+h);return $.Deferred().resolve(k).promise()}},function(k,m,l){return $.Deferred().reject(k.status,l,k.responseJSON).promise()})};d.prototype.getDocumentPageCount=function(g,f){g+="/status";if(f!=""){g+="?password="+f}return this.doAjaxAndPollForPageCount("GET",g.toString(),"json",this)};return d}(c.ServerCom));c.DOTNETServerCom=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(e){var f=d.call(this)||this;f.renderFormFields=!e.interactiveElements.form.enableFormFilling;f.renderingDpi=e.renderingDpi;return f}c.prototype.getViewerPreferences=function(e){return null};c.prototype.uploadDocument=function(g,h,e){var f=window;return f.stardocs.storage.upload(g,null,true)};c.prototype.uploadDocumentFromBuffer=function(e,f){return $.Deferred().reject(null,"Method not implemented",null).promise()};c.prototype.loadDocumentFromServer=function(e,f){return $.Deferred().reject(null,"Method not implemented",null).promise()};c.prototype.uploadDocumentFromUri=function(g,e){var f=window;return f.stardocs.storage.uploadFromURL(g,null,true)};c.prototype.getDocInfo=function(g,f){var e=window;return e.stardocs.docOperations.getDocInfo(g)};c.prototype.getDocumentPageCount=function(g,f){var e=window;return e.stardocs.docOperations.getDocInfo(g)};c.prototype.getDocBookmarks=function(g,f){var e=window;return e.stardocs.docOperations.getDocBookmarks(g)};c.prototype.getDocumentDownloadURL=function(i,g,h){var f=window;var e=$.Deferred();f.stardocs.storage.getDownloadUrl(i).done(function(j){e.resolve({url:j})}).fail(function(j,l,k){e.reject(j,l,k)});return e.promise()};c.prototype.getDownloadDocumentAsURL=function(k,g,j,h){var f=window;j=j.toLowerCase();var e=$.Deferred();var i=null;if(j==="bmp"){i=f.stardocs.docOperations.convertToBMP([k])}else{if(j==="gif"){i=f.stardocs.docOperations.convertToGIF([k])}else{if(j==="jpg"){i=f.stardocs.docOperations.convertToJPEG([k])}else{if(j==="png"){i=f.stardocs.docOperations.convertToPNG([k])}else{if(j==="tif"){i=f.stardocs.docOperations.convertToTIFF([k])}else{if(j==="mtif"){i=f.stardocs.docOperations.convertToMTIFF("convertToSeparateFiles",[k])}else{if(j==="pdf"){i=f.stardocs.docOperations.convertToPDF("convertToSeparateFiles",[k])}else{return f.stardocs.docOperations.getDocInfo(k)}}}}}}}i.done(function(l){var m=l.documents[0].url;f.stardocs.storage.getDownloadUrl(m).done(function(n){e.resolve({url:n})}).fail(function(n,p,o){e.reject(n,p,o)});return $.Deferred().reject(null,"Method not implemented",null).promise()}).fail(function(l,n,m){e.reject(l,n,m)});return e.promise()};c.prototype.getPage=function(i,g,e){var f=window;var h={dpi:this.renderingDpi,renderFormFields:this.renderFormFields};return f.stardocs.docOperations.getPageImage(i+"/pages/"+e,h)};c.prototype.getPrintPageURLs=function(i,g,h){var f=window;var e=$.Deferred();f.stardocs.docOperations.getDocumentPrintImageURLs(i).done(function(j){e.resolve({urls:j})}).fail(function(j,l,k){e.reject(j,l,k)});return e.promise()};c.prototype.getPrintPage=function(e){var f=window;return f.stardocs.doAjaxAndPoll("GET",e.toString(),"text")};c.prototype.getPageText=function(h,g,e){var f=window;return f.stardocs.docOperations.getPageText(h+"/pages/"+e)};c.prototype.getPageFormFields=function(h,g,e){var f=window;return f.stardocs.docOperations.getPageFormFields(h+"/pages/"+e)};c.prototype.getPageThumbnail=function(i,g,e){var f=window;var h={renderFormFields:this.renderFormFields};return f.stardocs.docOperations.getPageThumbnail(i+"/pages/"+e,h)};c.prototype.disposeDocument=function(e){return $.Deferred().resolve({}).promise()};c.prototype.saveDocumentChanges=function(i,g,h){var e=window;var f=h.formFields;return e.stardocs.docOperations.fillForm(i,null,f,false)};return c}(b.ServerCom));b.StarDocsServerCom=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){var e=d.call(this)||this;e.viewerManager=null;e.serverCom=null;e.onBindRedactEvents=function(f){};e.onUnBindRedactEvents=function(f){};e.onAfterFormSubmit=function(f){};e.onBeforeFormSubmit=function(f){};e.onDocumentInfoRetrived=function(f){};e.onReflow=function(f){};e.onPageCreated=function(f){};e.onPageRendered=function(f){};e.onPageReRendered=function(f){};e.onZoomChanged=function(f){};e.onRotationChanged=function(f){};e.onAfterDocumentLoad=function(f){};e.onBeforeSave=function(f,g){return null};e.onAfterSave=function(f,g){return null};return e}c.prototype.initialize=function(e,f){this.viewerManager=e;this.serverCom=f;this.viewerManager.events.addEventListener(b.EventNames.docInfoRetrieved,this.onDocumentInfoRetrived);this.viewerManager.events.addEventListener(b.EventNames.blankPageCreated,this.onPageCreated);this.viewerManager.events.addEventListener(b.EventNames.pageRendered,this.onPageRendered);this.viewerManager.events.addEventListener(b.EventNames.pageReRendered,this.onPageReRendered);this.viewerManager.events.addEventListener(b.EventNames.afterZoomChange,this.onZoomChanged);this.viewerManager.events.addEventListener(b.EventNames.afterPageRotate,this.onRotationChanged);this.viewerManager.events.addEventListener(b.EventNames.afterDocumentLoad,this.onAfterDocumentLoad);this.viewerManager.events.addEventListener(b.EventNames.reflow,this.onReflow);this.viewerManager.events.addFormsEventListener(b.EventNames.beforeFormSubmit,null,this.onBeforeFormSubmit);this.viewerManager.events.addFormsEventListener(b.EventNames.afterFormSubmit,null,this.onAfterFormSubmit)};c.prototype.resetModule=function(){};c.prototype.hasPaneToolbar=function(){return false};c.prototype.createPaneToolbarView=function(){return null};c.prototype.registerPaneEvents=function(e){};return c}(b.EventDispatcher));b.PluggableModule=a})(gnostice||(gnostice={}));var gnostice;(function(d){var b=(function(){function e(i,h,g,f){this.left=i;this.top=h;this.width=g;this.height=f}return e}());var a=(function(){function e(){}e.searchProgressChanged="searchProgressChanged";e.searchCompleted="searchCompleted";e.searchStarted="searchStarted";return e}());var c=(function(f){__extends(e,f);function e(g){var h=f.call(this)||this;h.description="SearchModule";h.searchDeferred=null;h.supportsQuickFind=false;h.searchHolder=null;h.findInputTextControl=null;h.findInstanceProgressMessage=null;h.findPageProgressMessage=null;h.findUpButton=null;h.findDownButton=null;h.findCloseButton=null;h.searchBubble=null;h.searchHighlightColor="Yellow";h.searchData=new Array();h.currentSearchResCount=0;h.overallSearchResCount=0;h.searchFirstPage=0;h.searchFirstIndex=0;h.searchPageNumber=-1;h.searchCurrentIndex=0;h.pageTextData=new Array();h.searchCancelled=false;h.searchKeyword="";h.pageTexDataRetrivedCount=0;h.pageDataStates=new Array();h.searchCurrentPage=1;h.searchYPos=0;h.onAfterDocumentLoad=function(m){var l=m.viewerManager;var j;for(var k=0;k<l.pluggableModules.length;k++){if(l.pluggableModules[k].description=="SearchModule"){j=l.pluggableModules[k];break}}if(j!=null){j.findClose();$(h.searchBtn).removeClass("git-docviewer-quickFind_clicked");$(h.findInputTextControl).val("")}if(j.findInstanceProgressMessage!=null){$(j.findInstanceProgressMessage).html("")}};h.onDocumentInfoRetrived=function(m){h.supportsQuickFind=false;var l=m.viewerManager;var j;for(var k=0;k<l.pluggableModules.length;k++){if(l.pluggableModules[k].description=="SearchModule"){j=l.pluggableModules[k];break}}j.supportsQuickFind=false;j.resetModule(j);j.supportsQuickFind=true;j.updateSearchState()};h.onPageCreated=function(m){var l=m.viewerManager;var j;for(var k=0;k<l.pluggableModules.length;k++){if(l.pluggableModules[k].description=="SearchModule"){j=l.pluggableModules[k];break}}j.pageDataStates[m.pageNumber]=d.RENDERINGSTATE.BLANK;j.searchData[m.pageNumber]=null};h.onPageRendered=function(m){var l=m.viewerManager;var j;for(var k=0;k<l.pluggableModules.length;k++){if(l.pluggableModules[k].description=="SearchModule"){j=l.pluggableModules[k];break}}d.logger.logInfo("Initiated search result draw on PageRendered for pagenumber: "+m.pageNumber);if(j.highLightPending&&(j.pendingSearchPageNumber==m.pageNumber)){j.highLightPending=false;j.clientHighLightQuickSearch(j.searchKeyword,j.pendingSearchPageNumber,j.pendingSearchIndex,false,false,false);d.logger.logInfo("Search draw highlight for pagenumber: "+m.pageNumber)}};h.onReflow=function(m){var l=m.viewerManager;var j;for(var k=0;k<l.pluggableModules.length;k++){if(l.pluggableModules[k].description=="SearchModule"){j=l.pluggableModules[k];break}}if(j.searchPageNumber!=-1){j.clientHighLightQuickSearch(j.searchKeyword,j.searchPageNumber,j.searchCurrentIndex,false,false,false)}};h.onPageReRendered=function(m){var l=m.viewerManager;var j;for(var k=0;k<l.pluggableModules.length;k++){if(l.pluggableModules[k].description=="SearchModule"){j=l.pluggableModules[k];break}}};h.onZoomChanged=function(m){var l=m.viewerManager;var j;for(var k=0;k<l.pluggableModules.length;k++){if(l.pluggableModules[k].description=="SearchModule"){j=l.pluggableModules[k];break}}};h.onRotationChanged=function(m){var l=m.viewerManager;var j;for(var k=0;k<l.pluggableModules.length;k++){if(l.pluggableModules[k].description=="SearchModule"){j=l.pluggableModules[k];break}}};h.addEventListener(a.searchCompleted,h.onSearchCompleted);h.addEventListener(a.searchStarted,h.onSearchStarted);h.addEventListener(a.searchProgressChanged,h.onSearchProgressChanged);h.searchHighlightColor=g;h.searchBtn=document.createElement("div");$(h.searchBtn).addClass("git-docviewer-controlcontainer");$(h.searchBtn).addClass("fas fa-search fa-lg");$(h.searchBtn).addClass("git-docviewer-quickFind");$(h.searchBtn).addClass("git-docviewer-mob-quickFind");$(h.searchBtn).addClass("git-docviewer-quickFind_clicked");$(h.searchBtn).attr("title",d.LocalizedStrings.tooltip_quick_find);return h}e.prototype.initialize=function(i,k){var j=this;f.prototype.initialize.call(this,i,k);if(this.viewerManager.preferences.search.visibleQuickSearchControls){d.UIEvents.click(this.searchBtn,this.onSearchBtnClick,this);this.searchHolder=document.createElement("span");$(this.searchHolder).attr({"class":"git-docviewer-quick-find-panel",id:"git_xdoc_docviewer_quick_find_id"});$(this.searchHolder).css({position:"absolute",right:"20px",top:"36px","z-index":"4000",display:"none"});this.findInputTextControl=document.createElement("input");$(this.findInputTextControl).attr({title:d.LocalizedStrings.tooltip_quick_find,type:"text","class":"git-docviewer-find git-docviewer-mob-find git-quick-find git-quick-find",id:"git_xdoc_docviewer_toolbar_id_find",value:""});$(this.findInputTextControl).css({"text-align":"left","min-height":"24px",width:"226px","float":"left"});var g=this;$(this.findInputTextControl).on("keydown",function(l){if(l.keyCode==13||l.keyCode==9){g.clientSearch($(this).val(),true);l.preventDefault()}else{if(l.keyCode!=27){g.disableNoSearchResultsState()}g.clearLastPageHighlight()}});this.findPageProgressMessage=document.createElement("div");$(this.findPageProgressMessage).attr({"class":"git-docviewer-findStatus git-quick-findStatus",id:"git_xdoc_docviewer_toolbar_id_findProgress",title:d.LocalizedStrings.tooltip_find_prev});$(this.findPageProgressMessage).css({opacity:"0.4",position:"absolute",right:"4px",height:"14px","float":"left",color:"#F2F2F2","font-size":"12px",top:"32px"});this.findUpButton=document.createElement("div");$(this.findUpButton).attr({"class":"fas fa-angle-up fa-2x git-quick-find git-docviewer-findControls",title:d.LocalizedStrings.tooltip_find_prev});$(this.findUpButton).css({height:"32px",width:"24px","float":"left","padding-top":"2px",color:"rgba(255, 255, 255, 0.8)","text-align":"center",display:"inline - block"});$(this.findUpButton).click(function(){g.clientSearch($(j.findInputTextControl).val(),false)});this.findDownButton=document.createElement("div");$(this.findDownButton).attr({"class":"fas fa-angle-down fa-2x git-quick-find git-docviewer-findControls",title:d.LocalizedStrings.tooltip_find_next});$(this.findDownButton).css({height:"32px",width:"24px","float":"left","padding-top":"2px",color:"rgba(255, 255, 255, 0.8)","text-align":"center",display:"inline - block"});$(this.findDownButton).click(function(){g.clientSearch($(j.findInputTextControl).val(),true)});this.findCloseButton=document.createElement("div");$(this.findCloseButton).attr({"class":"fas fa-times fa-2x git-docviewer-findControls",title:d.LocalizedStrings.close});$(this.findCloseButton).css({height:"32px",width:"24px","float":"left","padding-top":"2px",color:"rgba(255, 255, 255, 0.8)","text-align":"center",display:"inline - block"});$(this.findCloseButton).click(function(){g.findClose();$(j.searchBtn).removeClass("git-docviewer-quickFind_clicked")});$(this.searchHolder).append(this.findInputTextControl);$(this.searchHolder).append(this.findUpButton);$(this.searchHolder).append(this.findDownButton);$(this.searchHolder).append(this.findCloseButton);$(this.searchHolder).append(this.findInstanceProgressMessage);$(this.searchHolder).append(this.findPageProgressMessage);this.searchBubble=document.createElement("span");$(this.searchBubble).attr({"class":"git-docviewer-quick-find-bubble-panel",id:"git_xdoc_quick_find_bubble_panel_id"});$(this.searchBubble).css({position:"absolute",right:"311px",height:"16px",top:"27px","z-index":"4016",display:"none"});var h=document.createElement("div");$(h).attr("class","git-docviewer-quick-find-bubble git-docviewer-quick-find-bubble-id");$(h).css({height:"16px",width:"16px","float":"left"});$(this.searchBubble).append(h);$(this.viewerManager.viewerDOM.viewer).append(this.searchHolder);$(document).keyup(function(l){if(l.keyCode==27){g.disableSearchControls();g.findClose();$(j.searchBtn).removeClass("git-docviewer-quickFind_clicked")}})}};e.prototype.applyLocalization=function(){$(this.findUpButton).attr("title",d.LocalizedStrings.tooltip_find_prev);$(this.findDownButton).attr("title",d.LocalizedStrings.tooltip_find_next);$(this.findCloseButton).attr("title",d.LocalizedStrings.close);$(this.findInputTextControl).attr("title",d.LocalizedStrings.tooltip_quick_find);$(this.searchBtn).attr("title",d.LocalizedStrings.tooltip_quick_find)};e.prototype.onSearchStarted=function(h){var g=h.searchModule;$(g.findInputTextControl).addClass("searchBusy");$(g.findPageProgressMessage).html("");d.logger.logInfo("Search started: Keyword "+g.searchKeyword)};e.prototype.onSearchProgressChanged=function(h){var g=h.searchModule;if(g.searchStarted){$(g.searchHolder).height("50px");$(g.findPageProgressMessage).html("Searching in page "+g.searchCurrentPage+" of "+g.viewerManager.pageCount);d.logger.logInfo("Searching in page "+g.searchCurrentPage+" of "+g.viewerManager.pageCount);if(g.searchProgressCallback!=null){g.searchProgressCallback({keyword:g.searchKeyword,currentPage:g.searchCurrentPage,pageCount:g.viewerManager.pageCount})}}};e.prototype.onSearchCompleted=function(h){var g=h.searchModule;g.searchStarted=false;$(g.findInputTextControl).removeClass("searchBusy");$(g.findPageProgressMessage).html("");$(g.searchHolder).height("34px");if(g.searchDeferred!=null){g.searchDeferred.resolve({keyword:g.searchKeyword,isSearchSuccessful:h.searchSuccessful,pageNumber:h.pageNumber,isSearchCancelled:h.searchCancelled})}g.searchProgressCallback=null;if(h.searchSuccessful){d.logger.logInfo("Search completed successfully.")}else{d.logger.logInfo("Search completed unsuccessfully.")}};e.prototype.resetModule=function(){this.pageDataStates.length=0;this.searchData.length=0;this.pageDataStates.length=0;this.supportsQuickFind=false;this.searchStarted=false;this.searchKeyword="";this.disableNoSearchResultsState();$(this.findInputTextControl).removeClass("searchBusy");$(this.findPageProgressMessage).html("");$(this.searchHolder).height("34px")};e.prototype.getQuickFindUIBtn=function(){return this.searchBtn};e.prototype.updateSearchState=function(){if(this.supportsQuickFind){}else{this.disableSearchControls()}};e.prototype.onSearchBtnClick=function(h){if(h.data!=null){var g=h.data;if(($(g.searchHolder).css("display"))==="block"){g.disableSearchControls();$(g.searchBtn).removeClass("git-docviewer-quickFind_clicked")}else{if((g.viewerManager.documentLoaded)&&(g.supportsQuickFind)){g.viewerManager.hideFloatingToolbar.call();g.enableSeachControls();$(g.searchBtn).addClass("git-docviewer-quickFind_clicked");setTimeout(function(){$(g.findInputTextControl).focus()},10);$(g.findInputTextControl).focus();$(g.findInputTextControl).select()}}}};e.prototype.scrollTo=function(t,n,h,j,v){var p=this.viewerManager.viewerDOM.viewableArea;var i=$("#"+this.viewerManager.documentId+t);if(i!=null){var o=i[0].offsetTop+n+v;var w=i[0].offsetLeft+h+j;var q=Number(p.scrollTop);var s=$(p).outerHeight(true)-20;var g=q+s;var r=Number(p.scrollLeft);var m=r+$(p).outerWidth(true)-20;var u=r+m;if((o>=q&&o<=g)){}else{var k=o-s/2;if(i[0].offsetTop>k){k=i[0].offsetTop}$(p).scrollTop(k-v)}if((w>=r&&w<=u)){$(p).scrollLeft(0)}else{var l=w-m/2;$(p).scrollLeft(l-j)}}};e.prototype.getPageNumber=function(m){var k=this.viewerManager.viewerDOM.viewableArea;var h=$(k).outerHeight(true);var l=0;for(var j=1;j<=Number(this.viewerManager.pageCount);j++){var g=$("#"+this.viewerManager.documentId+j);l=Number(g[0].offsetTop);if((Number(l)<=Number(m)&&(Number(l+g[0].clientHeight)>=Number(m)))&&((l+g[0].clientHeight-m)>20)){break}else{if(Number(l)>Number(m)){break}}}return j};e.prototype.getStartCursorPage=function(k,n){var m=this.viewerManager.viewerDOM.viewableArea;var i=m.scrollTop;var o=$(m).outerHeight(true);if(k&&this.searchPageNumber>-1){var j=this.getPageNumber(i);var h=$("#"+this.viewerManager.documentId+this.searchPageNumber);if(h!=null){var g=h[0].offsetTop+this.searchYPos;var l=false;if(g>=i&&g<=i+o){l=true}if(l&&g>i&&n){return this.searchPageNumber}else{if(l&&g<i&&!n){return this.searchPageNumber}else{return j}}}else{return j}}else{return this.getPageNumber(i)}};e.prototype.getNextPage=function(h,g,i){if(i){if(h<g){return h+1}else{return 1}}else{if(h>1){return h-1}else{return g}}};e.prototype.isPageTextNotRetrieved=function(g){var h=false;if(this.pageDataStates[g]==d.RENDERINGSTATE.BLANK){h=true}return h};e.prototype.getPageData=function(q,o,v,s,j,u,h,n){var m=this;n++;if(this.searchCancelled){j=false}if(q==null){return}if((!j)&&(this.pageTexDataRetrivedCount>=this.viewerManager.pageCount)){return}if(n>this.viewerManager.pageCount){if(j){var g=true;for(var k=1;k<=this.viewerManager.pageCount;k++){if(this.searchData[q]!=null){if(this.searchData[q].length>0){g=false;break}}}if(g){this.clientSearchNoRes=true;this.enableNoSearchResultsState()}}this.searchStarted=false;this.dispatchAll(a.searchCompleted,{searchModule:this,searchSuccessful:false,pageNumber:-1});return}var r=this.getNextPage(q,this.viewerManager.pageCount,u);if(!this.isPageTextNotRetrieved(q)){if((j)&&(this.searchStarted)){if(this.searchData[q]==null){this.searchLocal(q,o,v,s,false,u)}if(this.searchData[q]!=null){if(this.searchData[q].length>0){j=false;var p=0;if(!u){p=this.searchData[q].length-1}this.clientHighLightQuickSearch(o,q,p,v,s)}}}if((r!=null)&&(h)){this.getPageData(r,o,v,s,j,u,true,n)}return}var l=this.viewerManager.documentUri;var t=this.viewerManager.password;this.pageDataStates[q]=d.RENDERINGSTATE.RUNNING;d.logger.logInfo("Requesting server to get search page text "+q);this.serverCom.getPageText(l,t,q).done(function(w){d.logger.logInfo("Successfully retrieved search page text "+w.pageNumber);m.pageTexDataRetrivedCount++;if(w!=null){m.pageDataStates[w.pageNumber]=d.RENDERINGSTATE.FINISHED}else{m.pageDataStates[q]=d.RENDERINGSTATE.FINISHED}if(m.searchCancelled){j=false}if((w!=null)){m.pageTextData[w.pageNumber]=w;if(w.text==null){m.pageTextData[w.pageNumber].Text=""}else{m.pageTextData[w.pageNumber].Text=w.text.toLowerCase()}if(w.charBoundingRects!=null){w.charBoundingRects="|"+w.charBoundingRects+"|"}}if((w!=null)&&(w.text!=null&&w.text.length>0)&&(j)&&(m.searchStarted)){m.searchLocal(q,o,v,s,false,u);if(m.searchData[q]!=null){if(m.searchData[q].length>0){j=false;var i=0;if(!u){i=m.searchData[q].length-1}d.logger.logInfo("get page data, highlight requested "+q);m.clientHighLightQuickSearch(o,q,i,v,s)}}}if((r!=null)&&(h)){m.getPageData(r,o,v,s,j,u,h,n)}}).fail(function(i){d.logger.logError("Failed to retrieve search page text "+q);m.pageTextData[i.pageNumber]=null;m.pageDataStates[q]=d.RENDERINGSTATE.FINISHED;if((r!=null)&&(h)){m.getPageData(r,o,v,s,j,u,h,n)}})};e.prototype.findFirst=function(h,g){if(!this.checkIfSupportsQuickFind(h)){return jQuery.Deferred().reject({})}if(this.searchStarted){return jQuery.Deferred().reject({searchAlreadyRunning:true})}this.searchDeferred=jQuery.Deferred();this.searchProgressCallback=g;this.searchKeyword="";this.clearLastPageHighlight();this.clientSearch(h,true,1);return this.searchDeferred};e.prototype.findNext=function(h,g){if(!this.checkIfSupportsQuickFind(h)){return jQuery.Deferred().reject({})}if(this.searchStarted){return jQuery.Deferred().reject({searchAlreadyRunning:true})}this.searchDeferred=jQuery.Deferred();this.searchProgressCallback=g;this.clientSearch(h,true);return this.searchDeferred};e.prototype.findLast=function(h,g){if(!this.checkIfSupportsQuickFind(h)){return jQuery.Deferred().reject({})}if(this.searchStarted){return jQuery.Deferred().reject({searchAlreadyRunning:true})}this.searchDeferred=jQuery.Deferred();this.searchProgressCallback=g;this.searchKeyword="";this.clearLastPageHighlight();this.clientSearch(h,false,1);return this.searchDeferred};e.prototype.findPrevious=function(h,g){if(!this.checkIfSupportsQuickFind(h)){return jQuery.Deferred().reject({})}if(this.searchStarted){return jQuery.Deferred().reject({searchAlreadyRunning:true})}this.searchDeferred=jQuery.Deferred();this.searchProgressCallback=g;this.clientSearch(h,false);return this.searchDeferred};e.prototype.checkIfSupportsQuickFind=function(g){if(!this.viewerManager.documentLoaded){return false}if(!this.supportsQuickFind){return false}if(g.length<1){return false}return true};e.prototype.clientSearch=function(l,q,m){if(m===void 0){m=-1}if(!this.checkIfSupportsQuickFind(l)){return false}if(this.searchStarted){return}this.searchStarted=true;l=l.toLowerCase();var s=false;var p=false;var r=this.viewerManager.zoomFactor;var n=m;if(n==-1){n=this.getStartCursorPage(l==this.searchKeyword,q)}var j=this.searchPageNumber;var g=this.viewerManager.pageCount;this.searchCancelled=false;this.highLightPending=false;this.disableNoSearchResultsState();if(l!=this.searchKeyword){this.dispatchAll(a.searchStarted,{searchModule:this});for(var h=1;h<=g;h++){this.searchData[h]=null}this.clientSearchNoRes=false;this.searchKeyword=l;this.searchPageNumber=n;this.searchCurrentIndex=0;this.searchFirstPage=0;this.searchFirstIndex=-1;this.overallSearchResCount=0;this.currentSearchResCount=0;var o=this.getNextPage(n,g,q);if(!q){n=o}this.getPageData(n,l,s,p,true,q,true,0)}else{if(!this.clientSearchNoRes){this.dispatchAll(a.searchStarted,{searchModule:this});var k=this.searchCurrentIndex+1;if(!q){k=this.searchCurrentIndex-1}if(n==j){if(this.searchData[n]!=null){if((this.searchData[n].length<=k)||(k<0)){n=this.getNextPage(n,g,q);k=0}else{this.clientHighLightQuickSearch(l,n,k,s,p);return}}}k=0;this.getPageData(n,l,s,p,true,q,true,0)}else{this.enableNoSearchResultsState();this.searchStarted=false}}};e.prototype.searchLocal=function(q,o,t,r,g,s){if(o.length>=1){this.searchCurrentPage=q;this.dispatchAll(a.searchProgressChanged,{searchModule:this});if(this.searchData[q]==null){var l=[];var k=0;if((this.pageDataStates[q]==d.RENDERINGSTATE.FINISHED)){var n=0;n=this.pageTextData[q].Text.indexOf(o,n);while(n!=-1){l[k]=n;k++;n=this.pageTextData[q].Text.indexOf(o,n+1)}var j=true;var h=true;var m=0;for(var k=1;k<=this.viewerManager.pageCount;k++){if(this.searchData[k]==null){j=false;break}if((this.searchData[k]!=null)&&(this.searchData[k].length>0)){j=false;break}}this.overallSearchResCount+=l.length;this.clientSearchNoRes=j;this.searchData[q]=l;if(g){if(l.length>0){var p=0;if(!s){p=l.length-1}this.clientHighLightQuickSearch(o,q,p,t,r)}}}else{if((this.pageDataStates[q]==d.RENDERINGSTATE.BLANK)){this.getPageData(q,o,t,r,true,s,false,0)}}}}};e.prototype.disableNoSearchResultsState=function(){$(this.findInputTextControl).addClass("git-docviewer-find");$(this.findInputTextControl).removeClass("git-docviewer-find-notFound")};e.prototype.clearLastPageHighlight=function(){var g=this.searchPageNumber;if(this.searchPageNumber!=-1){this.viewerManager.reRenderPage(g)}this.searchPageNumber=-1};e.prototype.findClose=function(){$(this.searchHolder).css("display","none");$(this.searchBubble).css("display","none");$(this.findInputTextControl).removeClass("git-docviewer-quickFind_clicked");this.searchCancelled=true;this.searchStarted=false;this.clearLastPageHighlight();this.dispatchAll(a.searchCompleted,{searchModule:this,searchSuccessful:false,pageNumber:-1,searchCancelled:true})};e.prototype.disableSearchControls=function(){if($(this.findInputTextControl).hasClass("git-docviewer-quickFind_clicked")){$(this.findInputTextControl).removeClass("git-docviewer-quickFind_clicked");$(this.searchHolder).slideToggle("fast");$(this.searchBubble).slideToggle("fast")}};e.prototype.enableSeachControls=function(){if((this.viewerManager.documentLoaded)&&(this.supportsQuickFind)){$(this.findInputTextControl).addClass("git-docviewer-quickFind_clicked");$(this.searchHolder).slideToggle("fast");$(this.searchBubble).slideToggle("fast");$(this.findInputTextControl).focus()}};e.prototype.enableNoSearchResultsState=function(){$(this.findInputTextControl).addClass("git-docviewer-find-notFound");$(this.findInputTextControl).removeClass("git-docviewer-find");this.searchStarted=false;this.dispatchAll(a.searchCompleted,{searchModule:this,searchSuccessful:false,pageNumber:-1})};e.prototype.getRadianAngle=function(g){return g*Math.PI/180};e.prototype.nthIndex=function(k,g,l){var j=k.length,h=-1;while(l--&&h++<j){h=k.indexOf(g,h);if(h<0){break}}return h};e.prototype.getRectAtCharIndex=function(j,h){j+=1;var k=this.pageTextData[h];var g=this.nthIndex(k.charBoundingRects,"|",j);var m=this.nthIndex(k.charBoundingRects,"|",j+1);var i=k.charBoundingRects.substring(g+1,m);var l=i.split(",");return new b(parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]))};e.prototype.clientHighLightQuickSearch=function(I,H,F,q,J,B){if(B===void 0){B=true}d.logger.logInfo("Highlighting search keyword. page number "+H+" keyword "+I);try{if(this.clientSearchNoRes){this.dispatchAll(a.searchCompleted,{searchModule:this,searchSuccessful:false,pageNumber:-1});return}if(H>this.viewerManager.pageCount){this.dispatchAll(a.searchCompleted,{searchModule:this,searchSuccessful:false,pageNumber:-1});return}var p=this.viewerManager.zoomFactor;var t=this.viewerManager.documentId;if(B){this.clearLastPageHighlight()}var v=$("#"+t+H);var G=$(v).find("canvas")[0];if(G!=null){var E=G.height;var s=G.width;var A=G.getContext("2d");if(this.searchData[H]!=null){this.searchStarted=false;this.currentSearchResCount++;if(this.currentSearchResCount>this.overallSearchResCount){this.currentSearchResCount=1}if((this.searchFirstPage==H)&&(this.searchFirstIndex==F)){this.dispatchAll(a.searchCompleted,{searchModule:this,searchSuccessful:true,pageNumber:H});this.searchFirstPage=0;this.searchFirstIndex=-1;this.currentSearchResCount=0;this.scrollTo(H,0,0,0,0)}if((this.searchFirstPage==0)&&(this.searchFirstIndex==-1)){this.searchFirstPage=H;this.searchFirstIndex=F}this.searchPageNumber=H;this.searchCurrentIndex=F;var n=this.searchData[H];var h=this.pageTextData[H];if((n!=null)&&(n.length>0)&&(n.length>F)){var u=n[F];var j=this.getRectAtCharIndex(u,H);var o=j.left;var w=j.top;var y=j.width;var x=j.height;var z=o;var C=w;A.save();A.translate(s/2,E/2);A.rotate(this.getRadianAngle(-h.skewAngle));A.translate(-(s/2),-(E/2));A.translate(o*p,w*p);var z=o;var C=w;var m=A.globalAlpha;var k=A.fillStyle;A.globalAlpha=0.4;A.fillStyle=this.searchHighlightColor;var g=j;var l=null;for(var D=u+1;D<u+I.length;D++){l=this.getRectAtCharIndex(D,H);if(g.left<l.left){y=l.left+l.width-o;if(w<l.top){w=l.top}if(x<l.height){x=l.height}}else{A.fillRect((o-z)*p,(w-C)*p,y*p,x*p);o=l.left;w=l.top;y=l.left+l.width-o;x=l.height}g=l}if(this.viewerManager.pages[H]==null){this.highLightPending=true;this.pendingSearchPageNumber=H;this.pendingSearchIndex=F}if(w<0){w=0}if(this.viewerManager.rotationAngle==0){this.scrollTo(H,w*p,o*p,y*p,x*p)}else{if(this.viewerManager.rotationAngle==180){this.scrollTo(H,E-w*p-x*p,o*p,y*p,x*p)}else{if(this.viewerManager.rotationAngle==90){this.scrollTo(H,o*p,w*p,y*p,x*p)}else{this.scrollTo(H,E-(o*p)-(y*p),w*p,y*p,x*p)}}}A.fillRect((o-z)*p,(w-C)*p,y*p,x*p);A.globalAlpha=m;A.fillStyle=k;A.restore();this.dispatchAll(a.searchCompleted,{searchModule:this,searchSuccessful:true,pageNumber:H});this.searchYPos=w}}}else{this.highLightPending=true;this.pendingSearchPageNumber=H;this.pendingSearchIndex=F;this.viewerManager.setCurrentPage(H);this.viewerManager.scrollToPage(H)}}catch(r){this.dispatchAll(a.searchCompleted,{searchModule:this,searchSuccessful:false,pageNumber:-1})}};return e}(d.PluggableModule));d.SearchModule=c})(gnostice||(gnostice={}));var gnostice;(function(d){var b=(function(){function e(g){var h=this;this.parentContainer=g;this.overlayLayout=document.createElement("div");$(this.overlayLayout).attr({"class":"git_xdoc_viewer_class_overlay"});$(this.overlayLayout).addClass("messageBox");this._messageTextDiv=document.createElement("div");$(this._messageTextDiv).attr({"class":"white_content_messagebox"});$(this._messageTextDiv).css({display:"none"});this.child=document.createElement("div");$(this.child).css({position:"relative",padding:"15px"});this.txt=document.createElement("span");$(this.txt).attr({"class":"message"});$(this.child).append(this.txt);$(this._messageTextDiv).append(this.child);var f=document.createElement("div");$(f).css({height:"33px","text-align":"center"});this._okBtn=document.createElement("button");$(this._okBtn).attr({"class":"okBtn"});$(this._okBtn).css({width:82,"float":"right","margin-top":"0px","font-size":"14px","font-weight":"bold","border-width":"0px",padding:"3px 6px","margin-right":"11px"});$(this._okBtn).text(d.LocalizedStrings.msgdlg_btnCaption_OK);$(this._okBtn).click(function(){$(h.overlayLayout).hide();$(h._messageTextDiv).hide("fast",function(){if(h._callbackFunction!=null){h._callbackFunction()}});return false});$(f).append(this._okBtn);$(this._messageTextDiv).append(f);$(g).append(this._messageTextDiv);$(g).append(this.overlayLayout);$(g).keyup(function(i){if(i.keyCode==27){h.hide()}})}e.prototype.setWidth=function(f){$(this._messageTextDiv).width(f)};e.prototype.show=function(g,f){$(this._okBtn).text(d.LocalizedStrings.msgdlg_btnCaption_OK);this._callbackFunction=f;$(this.txt).html(g);$(this.overlayLayout).show();$(this._messageTextDiv).show();this._okBtn.focus()};e.prototype.hide=function(){var f=this;$(this.overlayLayout).hide();$(this._messageTextDiv).hide(function(){if(f._callbackFunction!=null){f._callbackFunction()}})};return e}());d.MessageBox=b;var c=(function(){function e(g){var h=this;this.parentContainer=g;this.overlayLayout=document.createElement("div");$(this.overlayLayout).attr({"class":"git_xdoc_viewer_class_overlay"});$(this.overlayLayout).addClass("messageBox");this._messageTextDiv=document.createElement("div");$(this._messageTextDiv).attr({"class":"white-content-messagebox"});$(this._messageTextDiv).css({display:"none"});this.child=document.createElement("div");$(this.child).css({position:"relative",padding:"15px"});this.txt=document.createElement("div");$(this.txt).attr({"class":"message"});$(this.child).append(this.txt);$(this._messageTextDiv).append(this.child);var f=document.createElement("div");$(f).css({height:"40px",position:"relative"});this._cancelBtn=document.createElement("button");$(this._cancelBtn).attr({"class":"okBtn"});$(this._cancelBtn).css({position:"absolute",right:26,width:65});$(this._cancelBtn).text(d.LocalizedStrings.msgdlg_btnCaption_Cancel);$(this._cancelBtn).click(function(){h.hide();return false});$(f).append(this._cancelBtn);this._okBtn=document.createElement("button");$(this._okBtn).attr({"class":"okBtn"});$(this._okBtn).css({position:"absolute",right:100,width:65});$(this._okBtn).text(d.LocalizedStrings.msgdlg_btnCaption_Allow);$(this._okBtn).click(function(){$(h.overlayLayout).hide();$(h._messageTextDiv).hide("fast",function(){if(h._callbackFunction!=null){h._callbackFunction()}});return false});$(f).append(this._okBtn);$(this._messageTextDiv).append(f);$(g).append(this._messageTextDiv);$(g).append(this.overlayLayout);$(g).keyup(function(i){if(i.keyCode==27){h.hide();return false}})}e.prototype.setWidth=function(f){$(this._messageTextDiv).width(f)};e.prototype.show=function(g,f){this._callbackFunction=f;$(this.txt).html(g);$(this.overlayLayout).show();$(this._messageTextDiv).show();this._okBtn.focus()};e.prototype.hide=function(){$(this.overlayLayout).hide();$(this._messageTextDiv).hide();return false};return e}());d.WarningBox=c;var a=(function(){function e(f){var g=this;this.parentContainer=f;this.overlayLayout=document.createElement("div");$(this.overlayLayout).attr({"class":"git_xdoc_viewer_class_overlay"});$(this.overlayLayout).addClass("messageBox");this._messageTextDiv=document.createElement("div");$(this._messageTextDiv).attr({"class":"messageboxyesnocancel"});$(this._messageTextDiv).css({display:"none"});this.child=document.createElement("div");$(this.child).css({position:"relative",padding:"15px"});this.txt=document.createElement("span");$(this.txt).attr({"class":"message"});$(this.child).append(this.txt);$(this._messageTextDiv).append(this.child);$(f).append(this._messageTextDiv);$(f).append(this.overlayLayout);this._cancelBtn=document.createElement("button");$(this._cancelBtn).addClass("git-messagebox-botton");$(this._cancelBtn).css({width:"77px","float":"right"});$(this._cancelBtn).text(d.LocalizedStrings.msgdlg_btnCaption_Cancel);$(this._cancelBtn).click(function(){$(g.overlayLayout).hide();$(g._messageTextDiv).hide("fast",function(){if(g._cancelCallbackFunction!=null){g._cancelCallbackFunction()}});return false});$(this._messageTextDiv).append(this._cancelBtn);this._noBtn=document.createElement("button");$(this._noBtn).attr({"class":"git-messagebox-botton"});$(this._noBtn).text(d.LocalizedStrings.msgdlg_btnCaption_No);$(this._noBtn).click(function(){$(g.overlayLayout).hide();$(g._messageTextDiv).hide("fast",function(){if(this._noCallbackFunction!=null){this._noCallbackFunction()}});return false});$(this._messageTextDiv).append(this._noBtn);this._yesBtn=document.createElement("button");$(this._yesBtn).attr({"class":"git-messagebox-botton"});$(this._yesBtn).text(d.LocalizedStrings.msgdlg_btnCaption_Yes);$(this._yesBtn).click(function(){$(g.overlayLayout).hide();$(g._messageTextDiv).hide("fast",function(){if(this._yesCallbackFunction!=null){this._yesCallbackFunction()}});return false});$(this._messageTextDiv).append(this._yesBtn);$(f).keyup(function(h){if(h.keyCode==27){g.hide()}})}e.prototype.show=function(k,l,j,h){var i=($(this.parentContainer).innerHeight()/2)-$(this._messageTextDiv).innerHeight()/2;var f=($(this.parentContainer).innerWidth()/2)-$(this._messageTextDiv).innerWidth()/2;$(this._messageTextDiv).css({top:i+"px",left:f+"px"});$(this.overlayLayout).show();$(this._messageTextDiv).show();var g=29+$(this._cancelBtn).innerWidth();$(this._noBtn).css({width:"77px","float":"right"});g=26+$(this._cancelBtn).innerWidth()+$(this._noBtn).innerWidth()+10;$(this._yesBtn).attr({"class":"git-messagebox-botton"});$(this._yesBtn).css({width:"77px","float":"right"});this._yesCallbackFunction=l;this._noCallbackFunction=j;this._cancelCallbackFunction=h;$(this.txt).text(k);this._yesBtn.focus()};e.prototype.hide=function(){var f=this;$(this.overlayLayout).hide();$(this._messageTextDiv).hide(function(){if(f._cancelCallbackFunction!=null){f._cancelCallbackFunction()}})};return e}());d.YesNoCancelDialog=a})(gnostice||(gnostice={}));var gnostice;(function(b){var c=(function(){function d(){}d.prototype.RightClickMenuManager=function(){};d.getRightClickMenuManager=function(){if(d.rightClickMenuManager==null){d.rightClickMenuManager=new d()}return d.rightClickMenuManager};d.prototype.getRightClickMenu=function(e){if(e===void 0){e=null}if(e!=null){d.closeActionHandlersList.push(e)}return new a(this)};d.prototype.closeAllRightClickMenus=function(){for(var e=0;e<d.closeActionHandlersList.length;e++){d.closeActionHandlersList[e]()}$(".git-right-click-menu").hide()};d.closeActionHandlersList=new Array();return d}());b.RightClickMenuManager=c;var a=(function(){function d(e){this.rightClickMenuManager=e;this.menu=null;this.container=null;this.menuItemsActionMap={};this.menuItemsUIMap={};this.actions=new Array();this.constructView()}d.prototype.AddContextMenuItem=function(f,e){var g=this._addMenuItem(f);this.menuItemsActionMap[f]=e;this.menuItemsUIMap[f]=g;this.actions.push(f);this.addClickHandlerForActionItem(f);$(this.menu).append(g)};d.prototype.RefreshMenuItem=function(){$(this.menu).empty();for(var f=0;f<this.actions.length;f++){var e=this.actions[f];var g=this.menuItemsUIMap[e];$(g).text(e);this.addClickHandlerForActionItem(e);$(this.menu).append(g)}};d.prototype.show=function(e,h,g,f){this.rightClickMenuManager.closeAllRightClickMenus();this.RefreshMenuItem();this.container=e;this.x=h;this.y=g;this.parentModule=f;$(e).append(this.menu);$(this.menu).css({left:h,top:g,display:"block"})};d.prototype.hide=function(){$(this.menu).hide()};d.prototype.clearAllMenuItems=function(){};d.prototype.removeMenuItem=function(e){};d.prototype.addClickHandlerForActionItem=function(e){var f=this;$(this.menuItemsUIMap[e]).off("click");$(this.menuItemsUIMap[e]).on("click",function(g){f.menuItemsActionMap[e](f.container,f.x,f.y,f.parentModule);$(f.menu).css({display:"none"});f.rightClickMenuManager.closeAllRightClickMenus();g.preventDefault()})};d.prototype.constructView=function(){this.menu=document.createElement("ul");$(this.menu).addClass("git-right-click-menu")};d.prototype._addMenuItem=function(e){var f=document.createElement("li");$(f).addClass("git-rightclick-menu-item");$(f).text(e);return f};return d}());b.RightClickMenu=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a;(function(d){d[d.WYSIWYG=0]="WYSIWYG";d[d.Flow=1]="Flow";d[d.WYSIWYGSinglePage=2]="WYSIWYGSinglePage"})(a=b.FormatType||(b.FormatType={}));var c=(function(){function d(){}d.CODE_SUCCESS=0;d.CODE_FAILURE_GENERAL=1000;d.CODE_FAILURE_BAD_REQUEST=1010;d.CODE_FAILURE_BAD_INPUT_DOCUMENT=1011;d.CODE_FAILURE_UNKNOWN_INPUT_DOCUMENT=1012;d.CODE_FAILURE_PASSWORD_INCORRECT=1020;d.CODE_FAILURE_FORMAT_NOT_SUPPORTED=1030;d.CODE_FAILURE_INSUFFICIENT_RIGHTS=1040;d.CODE_FAILURE_JOB_NOT_FOUND=1050;d.CODE_FAILURE_INVALID_API_KEY=1060;d.CODE_FAILURE_OPERATION_NOT_SUPPORTED_FOR_FORMAT=1070;d.CODE_FAILURE_STORAGE_QUOTA_OVER_LIMIT_FOR_LICENSE=1081;d.CODE_FAILURE_STORAGE_QUOTA_OVER_LIMIT_FOR_APP=1082;d.CODE_FAILURE_UPLOAD_SIZE_OVER_LIMIT_FOR_LICENSE=1083;d.CODE_FAILURE_UPLOAD_SIZE_OVER_LIMIT_FOR_APP=1084;d.CODE_FAILURE_UPLOAD_SIZE_OVER_LIMIT_FOR_USER=1085;d.CODE_FAILURE_STORAGE_QUOTA_OVER_LIMIT_FOR_USER=1086;d.CODE_FAILURE_USAGE_OVERLIMIT_FOR_APP=1090;d.CODE_FAILURE_USAGE_OVERLIMIT_FOR_LICENSE=1091;d.CODE_FAILURE_INTERNAL_ERROR=2000;return d}());b.OperationStatusCode=c})(gnostice||(gnostice={}));var gnostice;(function(a){var c=(function(){function d(f,e){this.parentContainer=f;this.fontAwesomePrefix=e;this.transparentLayer=document.createElement("div");$(this.transparentLayer).attr({"class":"transparentoverlay"});this.messageContentDiv=document.createElement("div");$(this.messageContentDiv).attr({"class":"progressmessage"});$(f).append(this.messageContentDiv);$(f).append(this.transparentLayer)}d.prototype.showAnimation=function(g){$(this.messageContentDiv).empty();$(this.messageContentDiv).append("<div id='loader' style='text-align: center;line-height:35px'><span>"+g+"</span></br><div class='"+this.fontAwesomePrefix+" fa-spinner fa-spin fa-2x' ></div>");var f=($(this.parentContainer).innerHeight()/2)-58;var e=($(this.parentContainer).innerWidth()/2)-127;$(this.messageContentDiv).css({top:f+"px",left:e+"px"});$(this.transparentLayer).show();$(this.messageContentDiv).show()};d.prototype.hideAnimation=function(){$(this.messageContentDiv).empty();$(this.transparentLayer).hide();$(this.messageContentDiv).hide()};return d}());a.ProgressAnimation=c;var b=(function(){function d(e){this.parentContainer=e;this.printPages=new Array();this.cancelPrinting=false;this.transparentLayer=document.createElement("div");$(this.transparentLayer).attr({"class":"transparentoverlay"});this.messageContentDiv=document.createElement("div");$(this.messageContentDiv).attr({"class":"progressmessage"});$(this.messageContentDiv).width("300");$(this.messageContentDiv).height("100");$(e).append(this.messageContentDiv);$(e).append(this.transparentLayer)}d.prototype.showAnimation=function(h,i){var j=this;this.cancelPrinting=false;this.printPages=i;$(this.messageContentDiv).empty();var g=($(this.parentContainer).innerHeight()/2)-50;var e=($(this.parentContainer).innerWidth()/2)-150;this.progressTitle=document.createElement("div");$(this.progressTitle).text(h);$(this.progressTitle).css("padding","4px");$(this.messageContentDiv).append(this.progressTitle);$(this.messageContentDiv).css({top:g+"px",left:e+"px"});this.progressPercentMessage=document.createElement("div");$(this.progressPercentMessage).html("10%");$(this.progressPercentMessage).css({"text-align":"center"});this.progressLabel=document.createElement("div");$(this.progressLabel).css({position:"absolute",left:"60%",top:"8px","font- weight":"bold","text-shadow":"1px 1px 0 #fff","margin-left":"-40px"});this.progressBar=document.createElement("div");$(this.progressBar).css("margin","4px");$(this.progressBar).progressbar({value:false,change:function(){var k=$(j.progressBar).progressbar("value")+"%";$(j.progressLabel).html(k)},complete:function(){$(j.progressLabel).html("100%")}});$(this.progressBar).append(this.progressLabel);$(this.messageContentDiv).append(this.progressBar);var f=document.createElement("div");$(f).css({"text-align":"center",padding:"4px"});this.cancelButton=document.createElement("button");$(this.cancelButton).text("Cancel");$(this.cancelButton).on("click",function(){j.cancelPrinting=true;j.hideAnimation()});$(f).append(this.cancelButton);$(this.messageContentDiv).append(f);$(this.transparentLayer).show();$(this.messageContentDiv).show()};d.prototype.hideAnimation=function(){$(this.messageContentDiv).empty();$(this.transparentLayer).hide();$(this.messageContentDiv).hide()};d.prototype.setProgress=function(e){var f=Math.floor((e+1)/(this.printPages.length)*100);$(this.progressBar).progressbar("value",f)};d.prototype.IsPrintingCancelled=function(){return this.cancelPrinting};return d}());a.PrintProgressAnimation=b})(gnostice||(gnostice={}));var gnostice;(function(a){var c=(function(){function d(f){var g=this;this.parentContainer=f;this.overlayLayout=document.createElement("div");$(this.overlayLayout).attr({"class":"transparentoverlay"});$(this.overlayLayout).addClass("messageBox");this._messageTextDiv=document.createElement("div");$(this._messageTextDiv).attr({"class":"passworWarningMessage"});$(this._messageTextDiv).css({display:"none"});this.child=document.createElement("div");$(this.child).css({position:"relative",padding:"15px"});this.txt=document.createElement("span");$(this.txt).attr({"class":"message"});$(this.child).append(this.txt);$(this._messageTextDiv).append(this.child);var e=document.createElement("div");$(e).css({height:"33px","text-align":"center"});this._okBtn=document.createElement("input");$(this._okBtn).attr({"class":"okBtn",type:"button"});$(this._okBtn).css({width:"70px","font-size":"14px","font-weight":"bold","border-width":"0px",padding:"3px 6px","margin-right":"8px","float":"right",outline:"none"});$(this._okBtn).val(a.LocalizedStrings.msgdlg_btnCaption_OK);$(this._okBtn).click(function(){$(g.overlayLayout).hide();$(g._messageTextDiv).hide();return false});$(e).append(this._okBtn);$(this._messageTextDiv).append(e);$(f).append(this._messageTextDiv);$(f).append(this.overlayLayout);$(f).keyup(function(h){if(h.keyCode==27){g.hide()}})}d.prototype.show=function(h,f){var g=($(this.parentContainer).innerHeight()/2)-$(this._messageTextDiv).outerHeight()/2;var e=($(this.parentContainer).innerWidth()/2)-$(this._messageTextDiv).outerWidth()/2;$(this._messageTextDiv).css({top:g+"px",left:e+"px",display:"block"});$(this._okBtn).text(a.LocalizedStrings.msgdlg_btnCaption_OK);this._callbackFunction=f;$(this.txt).html(h);$(this.overlayLayout).show();$(this._messageTextDiv).show();this._okBtn.focus()};d.prototype.hide=function(){$(this.overlayLayout).hide();$(this._messageTextDiv).hide()};return d}());a.PasswordWarningMessage=c;var b=(function(){function d(f,e){this.parentContainer=f;this.fontAwesomePrefix=e;this.errorMessage="";this.warningMessage="";this.transparentLayer=document.createElement("div");$(this.transparentLayer).attr({"class":"transparentoverlay"});this.dialogContentDiv=document.createElement("div");$(this.dialogContentDiv).attr({"class":"passworddialog"});$(f).append(this.dialogContentDiv);$(f).append(this.transparentLayer)}d.prototype.reset=function(){this.errorMessage="";this.warningMessage="";$(this.errorMessageLabel).html(this.errorMessage);$(this.warningMessageLabel).html(this.warningMessage)};d.prototype.setErrorMessage=function(e){if(e!=""){this.errorMessage=e;$(this.errorMessageLabel).html(this.errorMessage)}};d.prototype.setWarningMessage=function(e){if(e!=""){this.warningMessage=e;$(this.warningMessageLabel).html(this.warningMessage)}};d.prototype.show=function(g){var i=this;$(this.dialogContentDiv).empty();var f=document.createElement("div");this.passwordIcon=document.createElement("div");$(this.passwordIcon).attr({"class":"git-password-icon"});$(this.passwordIcon).addClass(this.fontAwesomePrefix+" fa-lock fa-lg");$(this.passwordIcon).css({"float":"left"});this.dialogTitle=document.createElement("span");$(this.dialogTitle).html(a.LocalizedStrings.msgdlg_password_title);$(this.dialogTitle).css({"float":"left",width:"355px","padding-left":"4px","vertical-align":"middle","line-height":"24px"});$(f).append(this.passwordIcon);$(f).append(this.dialogTitle);this.passwordInputField=document.createElement("input");$(this.passwordInputField).attr("type","password");$(this.passwordInputField).css({width:"100%","max-width":"100%",clear:"both","float":"left"});this.submitBtn=document.createElement("input");$(this.submitBtn).attr("type","button");$(this.submitBtn).attr("disabled","true");$(this.submitBtn).css({"float":"right","margin-top":"6px","font-size":"14px","font-weight":"bold","border-width":"0px",padding:"3px 5px 3px 5px",width:"65px","margin-right":"8px"});$(this.submitBtn).attr("title",a.LocalizedStrings.msgdlg_btnCaption_OK);$(this.submitBtn).val(a.LocalizedStrings.msgdlg_btnCaption_OK);this.cancelBtn=document.createElement("input");$(this.cancelBtn).attr("type","button");$(this.cancelBtn).css({"float":"right","margin-top":"6px","font-size":"14px","font-weight":"bold","border-width":"0px",padding:"3px 6px 3px 6px",width:"65px"});$(this.cancelBtn).attr("title",a.LocalizedStrings.msgdlg_btnCaption_Cancel);$(this.cancelBtn).val(a.LocalizedStrings.msgdlg_btnCaption_Cancel);$(this.passwordInputField).on("keyup",function(){if($(i.passwordInputField).val().length!=0){$(i.submitBtn).removeAttr("disabled")}else{$(i.submitBtn).attr("disabled","true")}});$(this.cancelBtn).on("click",function(){i.hide()});$(this.submitBtn).on("click",function(){var j=$(i.passwordInputField).val();if(j!=""){if(g!=null){g(j);i.hide()}}});$(this.passwordInputField).on("keypress",function(j){if(j.which==13){var k=$(i.passwordInputField).val();if(k!=""){if(g!=null){g(k);i.hide()}}}});this.errorMessageLabel=document.createElement("div");$(this.errorMessageLabel).html(this.errorMessage);$(this.errorMessageLabel).css({color:"#ff0000","padding-left":"2px","float":"left",display:"none","font-size":"12px",padding:"3px 5px 3px 0px"});if(this.errorMessage!=""){$(this.errorMessageLabel).show()}$(this.dialogContentDiv).append(f);$(this.dialogContentDiv).append(this.passwordInputField);$(this.dialogContentDiv).append(this.warningMessageLabel);$(this.dialogContentDiv).append(this.errorMessageLabel);$(this.dialogContentDiv).append(this.cancelBtn);$(this.dialogContentDiv).append(this.submitBtn);var h=($(this.parentContainer).innerHeight()/2)-$(this.dialogContentDiv).outerHeight()/2;var e=($(this.parentContainer).innerWidth()/2)-$(this.dialogContentDiv).outerWidth()/2;$(this.dialogContentDiv).keyup(function(j){if(j.keyCode==27){i.hide()}});$(this.transparentLayer).keyup(function(j){if(j.keyCode==27){i.hide()}});$(this.dialogContentDiv).css({top:h+"px",left:e+"px"});$(this.transparentLayer).show();$(this.dialogContentDiv).show();$(this.passwordInputField).focus()};d.prototype.hide=function(){$(this.dialogContentDiv).empty();$(this.transparentLayer).hide();$(this.dialogContentDiv).hide()};return d}());a.PasswordDialog=b})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(){function c(d){this.parentContainer=d;this.transparentLayer=document.createElement("div");$(this.transparentLayer).attr({"class":"transparentoverlay"});this.dialogContentDiv=document.createElement("div");$(this.dialogContentDiv).attr({"class":"propertiesDlg"});$(d).append(this.dialogContentDiv);$(d).append(this.transparentLayer)}c.prototype.show=function(h){var j=this;$(this.dialogContentDiv).empty();this.dialogTitle=document.createElement("div");$(this.dialogTitle).addClass("tab");var s=document.createElement("button");$(s).addClass("tablinks active");$(s).html(a.LocalizedStrings.msgdlg_docinfo_tab_description);var n=document.createElement("button");$(n).addClass("tablinks");$(n).html(a.LocalizedStrings.msgdlg_docinfo_tab_security);$(this.dialogTitle).append(s);var k=false;if(h.mimeType=="application/pdf"){$(this.dialogTitle).append(n);k=true}$(this.dialogContentDiv).append(this.dialogTitle);var g=document.createElement("div");$(g).show();$(g).addClass("tabcontent");var d=document.createElement("div");$(d).hide();$(d).addClass("tabcontent");$(this.dialogContentDiv).append(g);$(this.dialogContentDiv).append(d);$(s).on("click",function(t){$(n).removeClass("active");$(s).addClass("active");$(d).hide();$(g).show();t.preventDefault()});$(n).on("click",function(t){$(s).removeClass("active");$(n).addClass("active");$(g).hide();$(d).show();t.preventDefault()});var p=document.createElement("div");$(p).addClass("tableContainer");var l=document.createElement("table");$(l).addClass("documentpropertytbl");this.addRow(l,a.LocalizedStrings.msgdlg_docinfo_filename,a.DocumentInfo.fileName);this.addRow(l,a.LocalizedStrings.msgdlg_docinfo_title,a.DocumentInfo.title);this.addRow(l,a.LocalizedStrings.msgdlg_docinfo_author,a.DocumentInfo.author);this.addRow(l,a.LocalizedStrings.msgdlg_docinfo_subject,a.DocumentInfo.subject);this.addRow(l,a.LocalizedStrings.msgdlg_docinfo_keywords,a.DocumentInfo.keywords);this.addRow(l,a.LocalizedStrings.msgdlg_docinfo_mimetype,a.DocumentInfo.mimeType);this.addRow(l,a.LocalizedStrings.msgdlg_docinfo_fileext,a.DocumentInfo.fileExtension);this.addRow(l,a.LocalizedStrings.msgdlg_docinfo_filesize,a.DocumentInfo.fileSize);this.addRow(l,a.LocalizedStrings.msgdlg_docinfo_created,a.DocumentInfo.creationTime);this.addRow(l,a.LocalizedStrings.msgdlg_docinfo_modified,a.DocumentInfo.modifiedTime);if(k){this.addRow(l,a.LocalizedStrings.msgdlg_docinfo_creator,a.DocumentInfo.creator);this.addRow(l,a.LocalizedStrings.msgdlg_docinfo_producer,a.DocumentInfo.producer)}$(p).append(l);$(g).append(p);if(k){var m=document.createElement("div");$(m).addClass("tableContainer");var r=document.createElement("table");var o=a.DocumentInfo.securityMethod=="No Security"?a.LocalizedStrings.msgdlg_docinfo_none:a.LocalizedStrings.msgdlg_docinfo_passwordencryption;this.addRow(r,a.LocalizedStrings.msgdlg_docinfo_securitymethod,o);var i=a.DocumentInfo.encryptionLevel==null?a.LocalizedStrings.msgdlg_docinfo_none:a.DocumentInfo.encryptionLevel.replace("_"," ").replace("bit"," bit");this.addRow(r,a.LocalizedStrings.msgdlg_docinfo_encryptionlevel,i);this.addRow(r,a.LocalizedStrings.msgdlg_docinfo_openpassword,this.getLocalizedStringForBool(a.DocumentInfo.hasOpenPassword));this.addRow(r,a.LocalizedStrings.msgdlg_docinfo_permissionspassword,this.getLocalizedStringForBool(a.DocumentInfo.hasPermissionPassword));this.addRow(r,a.LocalizedStrings.msgdlg_docinfo_commenting,this.getLocalizedStringForBool(a.DocumentInfo.allowsCommenting));this.addRow(r,a.LocalizedStrings.msgdlg_docinfo_formfilling,this.getLocalizedStringForBool(a.DocumentInfo.allowsFormFilling))}$(m).append(r);$(d).append(m);var q=document.createElement("div");$(q).css({width:"100%","text-align":"center",bottom:"0px",padding:"2px 1px 8px 1px"});this.closeBtn=document.createElement("input");$(this.closeBtn).attr({type:"Button",value:a.LocalizedStrings.close});$(this.closeBtn).css({border:"1px solid gray","font-weight":"bold",padding:"4px 16px 4px 16px"});$(this.closeBtn).on("click",function(){j.hide()});$(q).append(this.closeBtn);$(this.dialogContentDiv).append(q);var e=($(this.parentContainer).innerHeight()/2)-$(this.dialogContentDiv).outerHeight()/2;var f=($(this.parentContainer).innerWidth()/2)-$(this.dialogContentDiv).outerWidth()/2;$(this.dialogContentDiv).css({top:e+"px",left:f+"px"});$(this.transparentLayer).show();$(this.dialogContentDiv).show();$(this.closeBtn).focus()};c.prototype.getLocalizedStringForBool=function(d){if(d){return a.LocalizedStrings.msgdlg_docinfo_yes}else{return a.LocalizedStrings.msgdlg_docinfo_no}};c.prototype.addRow=function(k,f,i){var j=document.createElement("td");$(j).attr("align","right");var g=document.createTextNode(f+" : ");$(j).append(g);var h=document.createElement("tr");h.appendChild(j);if(i!=null){var e=document.createTextNode(i);var d=document.createElement("td");$(d).append(e);h.appendChild(d)}k.appendChild(h)};c.prototype.hide=function(){$(this.dialogContentDiv).empty();$(this.transparentLayer).hide();$(this.dialogContentDiv).hide()};return c}());a.PropertiesWindow=b})(gnostice||(gnostice={}));var gnostice;(function(b){var c=(function(){function d(f,e){this.start=f;this.end=e}return d}());b.PageRange=c;var a=(function(){function d(i,h){var k=this;this.parentContainer=i;this.printPages=new Array();this.updateCallBack=h;this.overlayLayout=document.createElement("div");$(this.overlayLayout).attr({"class":"transparentoverlay"});$(this.overlayLayout).addClass("messageBox");this.dialogContentDiv=document.createElement("div");$(this.dialogContentDiv).attr({"class":"printDialog"});var j=document.createElement("div");$(j).addClass("printDialogHeader");var g=document.createElement("span");$(g).on("click",function(){k.hide()});$(g).addClass("closePrintDialog");$(g).html("&times;");var f=document.createElement("div");$(f).html("Print");$(j).append(g);$(j).append(f);this.body=document.createElement("div");$(this.body).addClass("printDialogBody");this.footer=document.createElement("div");$(this.footer).addClass("printDialogFooter");$(this.footer).css("padding-top","0px");$(this.dialogContentDiv).append(j);$(this.dialogContentDiv).append(this.body);$(this.dialogContentDiv).append(this.footer);$(i).append(this.overlayLayout);$(i).append(this.dialogContentDiv);var e=this;$(document).on("change","input[type=radio][name=printoption]",function(){switch($(this).val()){case"CurrentPage":$(e.selectOptions).attr("disabled","disabled");$("#customPagesTextField").attr("disabled","disabled");break;case"Pages":$(e.selectOptions).removeAttr("disabled");$("#customPagesTextField").attr("disabled","disabled");break;case"CustomPagesRange":$(e.selectOptions).attr("disabled","disabled");$("#customPagesTextField").removeAttr("disabled");break}})}d.prototype.SetPageRange=function(h,g,k,f){this.viewerManager=f;this.documentPageCount=h;this.printItems=new Array();var e=1;this.printCallBack=k;for(var j=1;j<=h/g;j++){this.printItems.push(new c(e,j*g));e=(j*g)+1}if((h%g)!=0){this.printItems.push(new c(e,h))}};d.prototype.show=function(){var t=this;$(this.body).empty();$(this.footer).empty();var p=document.createElement("div");var s=document.createElement("div");$(s).html("Page Range");$(p).append(s);var f=document.createElement("div");$(f).css({padding:"2px",margin:"2px"});var x=document.createElement("input");$(x).attr({type:"radio",name:"printoption",value:"CurrentPage",id:"currentPrintPageId"});$(f).append(x);var j=document.createElement("label");$(j).attr("for","currentPrintPageId");$(j).append("Current Page");$(f).append(j);$(p).append(f);var q=document.createElement("div");$(q).css({padding:"2px",margin:"2px"});var r=document.createElement("input");$(r).attr({type:"radio",name:"printoption",value:"Pages",id:"customPrintPageId"});$(q).append(r);var w=document.createElement("label");$(w).attr("for","customPrintPageId");$(w).append("Pages: ");$(q).append(w);this.selectOptions=document.createElement("select");$(this.selectOptions).attr("disabled","disabled");for(var v=0;v<this.printItems.length;v++){var h=document.createElement("option");$(h).attr("value",v);$(h).append(this.printItems[v].start+"-"+this.printItems[v].end);$(this.selectOptions).append(h)}$(q).append(this.selectOptions);$(p).append(q);var u=document.createElement("div");$(u).css({padding:"2px",margin:"2px"});var g=document.createElement("input");$(g).attr({type:"radio",name:"printoption",value:"CustomPagesRange",checked:"true",id:"customPagesPageId"});$(u).append(g);var m=document.createElement("label");$(m).attr("for","customPagesPageId");$(m).append("Custom Pages:");$(u).append(m);this.customRangeTextField=document.createElement("input");$(this.customRangeTextField).attr({type:"text",id:"customPagesTextField"});$(this.customRangeTextField).css({"margin-left":"4px",width:"65px"});$(this.customRangeTextField).on("keyup",function(){var C=$(t.customRangeTextField).val();if(C==""){$(t.errorMessage).html("");return}else{if(C=="-"){$(t.errorMessage).html("");return}}var B=new RegExp("^[0-9-,]+$");var y=false;if(B.test(C)){var A=C.split(",");var D=new RegExp("(^-([0-9]+)$)|(^([0-9]+)-$)|(^([0-9]+)$)|([0-9]+-[0-9]+)");for(var z=0;z<c.length;z++){if(!D.test(C)){y=true;break}}}else{y=true}if(y){$(t.errorMessage).html("The syntax for the page range is invalid.")}else{$(t.errorMessage).html(" ")}});$(u).append(this.customRangeTextField);var l=document.createElement("span");$(l).css({padding:"2px 2px 2px 2px","font-size":"10px"});$(l).html("e.g: 1, 5-12");$(u).append(l);this.errorMessage=document.createElement("div");$(this.errorMessage).css({padding:"2px 2px 0px 20px",margin:"2px 2px 0px 2px","font-size":"12px",color:"red",height:"18px"});$(u).append(this.errorMessage);$(p).append(u);$(this.body).append(p);var k=document.createElement("input");$(k).css({padding:"3px 12px",border:"1px solid gray","border- image":"none","font-weight":"bold",margin:"4px"});$(k).attr("type","button");$(k).on("click",function(){t.printPages=new Array();var C=$("input[type=radio][name=printoption]:checked").val();switch(C){case"CurrentPage":t.printPages.push(t.viewerManager.currentPage);break;case"Pages":var z=$(t.selectOptions).val();var E=t.printItems[z].start;var y=t.printItems[z].end;for(var B=E;B<=y;B++){t.printPages.push(B)}break;case"CustomPagesRange":var A=$(t.customRangeTextField).val();try{t.printPages=t.getPagesFromPageRanges(A)}catch(D){$(t.errorMessage).html("The syntax for the page range is invalid.")}break}if(t.printPages.length>50){$(t.errorMessage).html("Number of pages should be limited to 50.")}else{t.printCallBack.call(null,t.printPages)}});$(k).val("Print");$(this.footer).append(k);var e=document.createElement("input");$(e).css({padding:"3px 12px",border:"1px solid gray","border- image":"none","font-weight":"bold",margin:"4px"});$(e).attr("type","button");$(e).on("click",function(){t.hide()});$(e).val("Cancel");$(this.footer).append(e);var o=($(this.parentContainer).innerHeight()/2)-$(this.dialogContentDiv).outerHeight()/2;var n=($(this.parentContainer).innerWidth()/2)-$(this.dialogContentDiv).outerWidth()/2;$(this.dialogContentDiv).css({top:o+"px",left:n+"px"});$(this.overlayLayout).show();$(this.dialogContentDiv).show()};d.prototype.hide=function(){this.updateCallBack.call(null);$(this.overlayLayout).hide();$(this.dialogContentDiv).hide()};d.prototype.getPagesFromPageRanges=function(p){var g=new Array();var m=1,t=this.documentPageCount;if(p.length==1&&p[0]=="-"){for(var l=m;l<=t;l++){g.push(l)}}else{var r=p.split(",");for(var n=0;n<r.length;n++){var f=r[n];if(f[0]=="-"){var e=f.split("-");var h=parseInt(e[e.length-1]);for(var o=m;o<=h;o++){g.push(o)}}else{var s=f.split("-");var q=parseInt(s[0]);var u=parseInt(s[s.length-1]);for(var o=q;o<=u;o++){g.push(o)}}}}return g};return d}());b.PrinterDialog=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a;(function(d){d[d.Warning=0]="Warning";d[d.Info=1]="Info";d[d.Failed=2]="Failed"})(a=b.NotificationType||(b.NotificationType={}));var c=(function(){function d(f,e){this.parentContainer=f;this.preferences=e;this.notificationControl=document.createElement("div");$(this.notificationControl).css({"float":"right",position:"absolute",right:"25px",top:"25px","z-index":"5"});$(this.parentContainer).append(this.notificationControl)}d.prototype.pushNotification=function(e,g,j){if(!this.preferences.showStatusNotifications){return false}var i=document.createElement("h3");$(i).append(e);var f=document.createElement("p");$(f).append(g);var h=document.createElement("div");$(h).append(i);$(h).append(f);switch(j){case a.Info:$(h).attr("class","git-panel git-green");break;case a.Warning:$(h).attr("class","git-panel git-yellow");break;case a.Failed:$(h).attr("class","git-panel git-red");break}$(this.notificationControl).append(h);$(h).delay(3500).fadeOut("slow",function(){$(h).remove()})};return d}());b.NotificationTooltipControl=c})(gnostice||(gnostice={}));var gnostice;(function(gnostice){var FormField=(function(){function FormField(_formsModule,_widget,type,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed){this._formsModule=_formsModule;this._widget=_widget;this.type=type;this.name=name;this.fullyQualifiedName=fullyQualifiedName;this.mappingName=mappingName;this.alternateName=alternateName;this.isReadonly=isReadonly;this.isRequired=isRequired;this.isHidden=isHidden;this.isNoExport=isNoExport;this.isNoSpellCheck=isNoSpellCheck;this.isValidationFailed=isValidationFailed}FormField.prototype.focus=function(){this._widget.setFocus(false,true)};FormField.prototype.isTabStop=function(){return this._widget.isTabStop()};FormField.prototype.setTabStop=function(value){this._widget.setTabStop(value)};FormField.createFormField=function(_formsModule,formField,_widget){switch(formField.fieldType){case 1:return new TextFormField(_formsModule,_widget,formField.fieldName,formField.fullyQualifiedFieldName,formField.fieldMappingName,formField.alternateName,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck,formField.isValidationFailed,formField.isComb,formField.isMultiline,formField.isPassword,formField.isNoScroll,formField.maxLength,formField.defaultValue,formField.value);case 2:var radioButtons=new Array();for(var _i=0,_a=formField.radioItems;_i<_a.length;_i++){var radioItem=_a[_i];radioButtons.push(new RadioButtonFormField(_formsModule,_widget,radioItem.fieldName,radioItem.fullyQualifiedFieldName,radioItem.fieldMappingName,formField.alternateName,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck,formField.isValidationFailed,radioItem.exportValue,radioItem.actionType))}return new RadioGroupFormField(_formsModule,_widget,formField.fieldName,formField.fullyQualifiedFieldName,formField.fieldMappingName,formField.alternateName,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck,formField.isValidationFailed,formField.isRadioNoToggleToOff,formField.isRadioInUnison,formField.defaultSelectedItemIndex,formField.selectedItemIndex,radioButtons);case 4:return new ComboBoxFormField(_formsModule,_widget,formField.fieldName,formField.fullyQualifiedFieldName,formField.fieldMappingName,formField.alternateName,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck,formField.isValidationFailed,formField.defaultSelectedItemIndices,formField.selectedItemIndices,formField.displayValues,formField.exportValues,formField.isEditable,formField.value);case 8:return new CheckBoxFormField(_formsModule,_widget,formField.fieldName,formField.fullyQualifiedFieldName,formField.fieldMappingName,formField.alternateName,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck,formField.isValidationFailed,formField.exportValue,formField.isChecked);case 16:return new ListBoxFormField(_formsModule,_widget,formField.fieldName,formField.fullyQualifiedFieldName,formField.fieldMappingName,formField.alternateName,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck,formField.isValidationFailed,formField.defaultSelectedItemIndices,formField.selectedItemIndices,formField.displayValues,formField.exportValues,formField.isMultiselect);case 32:if(formField.actionType==1&&formField.hasOwnProperty("submitActionType")){var submitActionType=(formField.submitActionType==1)?"httpGet":"httpPost";return new SubmitPushButtonFormField(_formsModule,_widget,formField.fieldName,formField.fullyQualifiedFieldName,formField.fieldMappingName,formField.alternateName,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck,formField.isValidationFailed,submitActionType,formField.submitUrl,formField.submitActionFields,formField.submitActionFieldsInclude)}else{if(formField.actionType==0){return new ResetPushButtonFormField(_formsModule,_widget,formField.fieldName,formField.fullyQualifiedFieldName,formField.fieldMappingName,formField.alternateName,formField.isValidationFailed,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck,formField.resetActionFields,formField.resetActionFieldsInclude)}else{return new SimplePushButtonFormField(_formsModule,_widget,formField.fieldName,formField.fullyQualifiedFieldName,formField.fieldMappingName,formField.alternateName,formField.isValidationFailed,formField.isReadonly,formField.isRequired,formField.isHidden,formField.isNoExport,formField.isNoSpellCheck)}}}return null};return FormField}());gnostice.FormField=FormField;var TextFormField=(function(_super){__extends(TextFormField,_super);function TextFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,isComb,isMultiline,isPassword,isNoScroll,maxLength,defaultValue,value){var _this=_super.call(this,_formsModule,_widget,"text",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed)||this;_this._formsModule=_formsModule;_this._widget=_widget;_this.name=name;_this.fullyQualifiedName=fullyQualifiedName;_this.mappingName=mappingName;_this.alternateName=alternateName;_this.isReadonly=isReadonly;_this.isRequired=isRequired;_this.isHidden=isHidden;_this.isNoExport=isNoExport;_this.isNoSpellCheck=isNoSpellCheck;_this.isValidationFailed=isValidationFailed;_this.isComb=isComb;_this.isMultiline=isMultiline;_this.isPassword=isPassword;_this.isNoScroll=isNoScroll;_this.maxLength=maxLength;_this.defaultValue=defaultValue;_this.value=value;return _this}TextFormField.prototype.getValueAsString=function(){return this._widget.getValueAsString()};TextFormField.prototype.setValueAsString=function(newValue){this._widget.setValue(newValue)};return TextFormField}(FormField));gnostice.TextFormField=TextFormField;var RadioButtonFormField=(function(_super){__extends(RadioButtonFormField,_super);function RadioButtonFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,exportValue,actionType){var _this=_super.call(this,_formsModule,_widget,"radioButton",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed)||this;_this._formsModule=_formsModule;_this._widget=_widget;_this.name=name;_this.fullyQualifiedName=fullyQualifiedName;_this.mappingName=mappingName;_this.alternateName=alternateName;_this.isReadonly=isReadonly;_this.isRequired=isRequired;_this.isHidden=isHidden;_this.isNoExport=isNoExport;_this.isNoSpellCheck=isNoSpellCheck;_this.isValidationFailed=isValidationFailed;_this.exportValue=exportValue;_this.actionType=actionType;return _this}RadioButtonFormField.prototype.getValueAsString=function(){return""};RadioButtonFormField.prototype.setValueAsString=function(newValue){};return RadioButtonFormField}(FormField));gnostice.RadioButtonFormField=RadioButtonFormField;var RadioGroupFormField=(function(_super){__extends(RadioGroupFormField,_super);function RadioGroupFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,isRadioNoToggleToOff,isRadioInUnison,defaultSelectedRadioButtonIndex,selectedRadioButtonIndex,radioButtons){var _this=_super.call(this,_formsModule,_widget,"radioGroup",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed)||this;_this._formsModule=_formsModule;_this._widget=_widget;_this.name=name;_this.fullyQualifiedName=fullyQualifiedName;_this.mappingName=mappingName;_this.alternateName=alternateName;_this.isReadonly=isReadonly;_this.isRequired=isRequired;_this.isHidden=isHidden;_this.isNoExport=isNoExport;_this.isNoSpellCheck=isNoSpellCheck;_this.isValidationFailed=isValidationFailed;_this.isRadioNoToggleToOff=isRadioNoToggleToOff;_this.isRadioInUnison=isRadioInUnison;_this.defaultSelectedRadioButtonIndex=defaultSelectedRadioButtonIndex;_this.selectedRadioButtonIndex=selectedRadioButtonIndex;_this.radioButtons=radioButtons;return _this}RadioGroupFormField.prototype.getValueAsString=function(){if(this.selectedRadioButtonIndex<0){return null}var exportValue=this.radioButtons[this.selectedRadioButtonIndex].exportValue;return(exportValue!=null)?exportValue:this.name};RadioGroupFormField.prototype.setValueAsString=function(newValue){this._widget.setValueAsString(newValue)};RadioGroupFormField.prototype.setSelectedRadioButtonIndex=function(newIndex){this._widget.setSelectedRadioButton(newIndex)};return RadioGroupFormField}(FormField));gnostice.RadioGroupFormField=RadioGroupFormField;var ComboBoxListBoxFormField=(function(_super){__extends(ComboBoxListBoxFormField,_super);function ComboBoxListBoxFormField(_formsModule,_widget,type,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,defaultSelectedItemIndices,selectedItemIndices,displayValues,exportValues){var _this=_super.call(this,_formsModule,_widget,type,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed)||this;_this._formsModule=_formsModule;_this._widget=_widget;_this.type=type;_this.name=name;_this.fullyQualifiedName=fullyQualifiedName;_this.mappingName=mappingName;_this.alternateName=alternateName;_this.isReadonly=isReadonly;_this.isRequired=isRequired;_this.isHidden=isHidden;_this.isNoExport=isNoExport;_this.isNoSpellCheck=isNoSpellCheck;_this.isValidationFailed=isValidationFailed;_this.defaultSelectedItemIndices=defaultSelectedItemIndices;_this.selectedItemIndices=selectedItemIndices;_this.displayValues=displayValues;_this.exportValues=exportValues;return _this}return ComboBoxListBoxFormField}(FormField));gnostice.ComboBoxListBoxFormField=ComboBoxListBoxFormField;var ComboBoxFormField=(function(_super){__extends(ComboBoxFormField,_super);function ComboBoxFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,defaultSelectedItemIndices,selectedItemIndices,displayValues,exportValues,isEditable,value){var _this=_super.call(this,_formsModule,_widget,"comboBox",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,defaultSelectedItemIndices,selectedItemIndices,displayValues,exportValues)||this;_this._formsModule=_formsModule;_this._widget=_widget;_this.name=name;_this.fullyQualifiedName=fullyQualifiedName;_this.mappingName=mappingName;_this.alternateName=alternateName;_this.isReadonly=isReadonly;_this.isRequired=isRequired;_this.isHidden=isHidden;_this.isNoExport=isNoExport;_this.isNoSpellCheck=isNoSpellCheck;_this.isValidationFailed=isValidationFailed;_this.defaultSelectedItemIndices=defaultSelectedItemIndices;_this.selectedItemIndices=selectedItemIndices;_this.displayValues=displayValues;_this.exportValues=exportValues;_this.isEditable=isEditable;_this.value=value;return _this}ComboBoxFormField.prototype.getValueAsString=function(){return this._widget.getValueAsString()};ComboBoxFormField.prototype.setValueAsString=function(newValue){this._widget.setValueAsString(newValue)};ComboBoxFormField.prototype.setSelectedItemIndices=function(newIndices){this._widget.setSelectedItemIndices(newIndices)};return ComboBoxFormField}(ComboBoxListBoxFormField));gnostice.ComboBoxFormField=ComboBoxFormField;var ListBoxFormField=(function(_super){__extends(ListBoxFormField,_super);function ListBoxFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,defaultSelectedItemIndices,selectedItemIndices,displayValues,exportValues,isMultiSelect){var _this=_super.call(this,_formsModule,_widget,"listBox",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,defaultSelectedItemIndices,selectedItemIndices,displayValues,exportValues)||this;_this._formsModule=_formsModule;_this._widget=_widget;_this.name=name;_this.fullyQualifiedName=fullyQualifiedName;_this.mappingName=mappingName;_this.alternateName=alternateName;_this.isReadonly=isReadonly;_this.isRequired=isRequired;_this.isHidden=isHidden;_this.isNoExport=isNoExport;_this.isNoSpellCheck=isNoSpellCheck;_this.isValidationFailed=isValidationFailed;_this.defaultSelectedItemIndices=defaultSelectedItemIndices;_this.selectedItemIndices=selectedItemIndices;_this.displayValues=displayValues;_this.exportValues=exportValues;_this.isMultiSelect=isMultiSelect;return _this}ListBoxFormField.prototype.getValueAsString=function(){return this._widget.getValueAsString()};ListBoxFormField.prototype.setValueAsString=function(newValue){this._widget.setValueAsString(newValue)};ListBoxFormField.prototype.setSelectedItemIndices=function(newIndices){this._widget.setSelectedItemIndices(newIndices)};return ListBoxFormField}(ComboBoxListBoxFormField));gnostice.ListBoxFormField=ListBoxFormField;var CheckBoxFormField=(function(_super){__extends(CheckBoxFormField,_super);function CheckBoxFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,exportValue,isChecked){var _this=_super.call(this,_formsModule,_widget,"checkBox",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed)||this;_this._formsModule=_formsModule;_this._widget=_widget;_this.name=name;_this.fullyQualifiedName=fullyQualifiedName;_this.mappingName=mappingName;_this.alternateName=alternateName;_this.isReadonly=isReadonly;_this.isRequired=isRequired;_this.isHidden=isHidden;_this.isNoExport=isNoExport;_this.isNoSpellCheck=isNoSpellCheck;_this.isValidationFailed=isValidationFailed;_this.exportValue=exportValue;_this.isChecked=isChecked;return _this}CheckBoxFormField.prototype.setChecked=function(checked){this._widget.setChecked(checked)};CheckBoxFormField.prototype.getValueAsString=function(){return this._widget.getValueAsString()};CheckBoxFormField.prototype.setValueAsString=function(newValue){this._widget.setValueAsString(newValue)};return CheckBoxFormField}(FormField));gnostice.CheckBoxFormField=CheckBoxFormField;var PushButtonFormField=(function(_super){__extends(PushButtonFormField,_super);function PushButtonFormField(_formsModule,_widget,type,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed){var _this=_super.call(this,_formsModule,_widget,type,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed)||this;_this._formsModule=_formsModule;_this._widget=_widget;_this.type=type;_this.name=name;_this.fullyQualifiedName=fullyQualifiedName;_this.mappingName=mappingName;_this.alternateName=alternateName;_this.isReadonly=isReadonly;_this.isRequired=isRequired;_this.isHidden=isHidden;_this.isNoExport=isNoExport;_this.isNoSpellCheck=isNoSpellCheck;_this.isValidationFailed=isValidationFailed;return _this}PushButtonFormField.prototype.getValueAsString=function(){return this._widget.getValueAsString()};PushButtonFormField.prototype.setValueAsString=function(newValue){this._widget.setValueAsString(newValue)};return PushButtonFormField}(FormField));gnostice.PushButtonFormField=PushButtonFormField;var SubmitPushButtonFormField=(function(_super){__extends(SubmitPushButtonFormField,_super);function SubmitPushButtonFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,submitActionType,submitUrl,submitActionFieldsInclude,isSubmitActionFieldsInclude){var _this=_super.call(this,_formsModule,_widget,"submitPushButton",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed)||this;_this._formsModule=_formsModule;_this._widget=_widget;_this.name=name;_this.fullyQualifiedName=fullyQualifiedName;_this.mappingName=mappingName;_this.alternateName=alternateName;_this.isReadonly=isReadonly;_this.isRequired=isRequired;_this.isHidden=isHidden;_this.isNoExport=isNoExport;_this.isNoSpellCheck=isNoSpellCheck;_this.isValidationFailed=isValidationFailed;_this.submitActionType=submitActionType;_this.submitUrl=submitUrl;_this.submitActionFieldsInclude=submitActionFieldsInclude;_this.isSubmitActionFieldsInclude=isSubmitActionFieldsInclude;return _this}return SubmitPushButtonFormField}(PushButtonFormField));gnostice.SubmitPushButtonFormField=SubmitPushButtonFormField;var ResetPushButtonFormField=(function(_super){__extends(ResetPushButtonFormField,_super);function ResetPushButtonFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed,resetActionFieldsInclude,isResetActionFieldsInclude){var _this=_super.call(this,_formsModule,_widget,"resetPushButton",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed)||this;_this._formsModule=_formsModule;_this._widget=_widget;_this.name=name;_this.fullyQualifiedName=fullyQualifiedName;_this.mappingName=mappingName;_this.alternateName=alternateName;_this.isReadonly=isReadonly;_this.isRequired=isRequired;_this.isHidden=isHidden;_this.isNoExport=isNoExport;_this.isNoSpellCheck=isNoSpellCheck;_this.isValidationFailed=isValidationFailed;_this.resetActionFieldsInclude=resetActionFieldsInclude;_this.isResetActionFieldsInclude=isResetActionFieldsInclude;return _this}return ResetPushButtonFormField}(PushButtonFormField));gnostice.ResetPushButtonFormField=ResetPushButtonFormField;var SimplePushButtonFormField=(function(_super){__extends(SimplePushButtonFormField,_super);function SimplePushButtonFormField(_formsModule,_widget,name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed){var _this=_super.call(this,_formsModule,_widget,"simplePushButton",name,fullyQualifiedName,mappingName,alternateName,isReadonly,isRequired,isHidden,isNoExport,isNoSpellCheck,isValidationFailed)||this;_this._formsModule=_formsModule;_this._widget=_widget;_this.name=name;_this.fullyQualifiedName=fullyQualifiedName;_this.mappingName=mappingName;_this.alternateName=alternateName;_this.isReadonly=isReadonly;_this.isRequired=isRequired;_this.isHidden=isHidden;_this.isNoExport=isNoExport;_this.isNoSpellCheck=isNoSpellCheck;_this.isValidationFailed=isValidationFailed;return _this}return SimplePushButtonFormField}(PushButtonFormField));gnostice.SimplePushButtonFormField=SimplePushButtonFormField;var FdViewState=(function(){function FdViewState(){this.zoomFactor=1;this.rotationAngle=0;this.pageRotationAngle=0}return FdViewState}());var SubmitMethod;(function(SubmitMethod){SubmitMethod[SubmitMethod.GET=0]="GET";SubmitMethod[SubmitMethod.POST=1]="POST"})(SubmitMethod=gnostice.SubmitMethod||(gnostice.SubmitMethod={}));var FieldKeyValuePair=(function(){function FieldKeyValuePair(fieldName,fieldValue){this.fieldName=fieldName;this.fieldValue=fieldValue}return FieldKeyValuePair}());gnostice.FieldKeyValuePair=FieldKeyValuePair;var FormsModule=(function(_super){__extends(FormsModule,_super);function FormsModule(fieldHighlightColor,fieldReadonlyColor,fieldFocusColor,listContainerBackgroundColor,listItemHoverBackgroundColor){var _this=_super.call(this)||this;_this.cancelPostingFormData={Value:false};_this.description="FormsModule";_this.isDirty=false;_this.fieldHighlightColor="rgba(204, 215, 255, 0.5)";_this.fieldReadonlyColor="rgba(246, 246, 246, 0.5)";_this.fieldFocusColor="";_this.listContainerBackgroundColor="rgba(255, 255, 255, 1)";_this.listItemHoverBackgroundColor="";_this.supportsFormsLayer=false;_this.allowFormFilling=false;_this.formsData=new Array();_this.fdViewState=new Array();_this.fdRenderingState=new Array();_this.formWidgets=new Array();_this.formFieldsChangesBeforePageAvailable=new Array();_this.containsFormData=false;_this.focusRectLeft=null;_this.focusRectTop=null;_this.focusRectRight=null;_this.focusRectBottom=null;_this.lastFocusedFieldWidget=null;_this.lastFocusedFieldRadioIndex=0;_this.curTabIndex=0;_this.curTabFocused=0;_this.curTabFocusedPage=1;_this.prevFocusedFieldWidget=null;_this.formFieldsByPage=new Array();_this.formFieldsRenderedByPage=null;_this.onBeforeSave=function(vm,saveCancel){if(!_this.supportsFormsLayer){return}if(!_this.isDirty){return}var keyValArray=new Array();for(var pageNumber=1;pageNumber<=_this.viewerManager.pageCount;++pageNumber){var data=_this.formsData[pageNumber];var widgets=_this.formWidgets[pageNumber];if(widgets!=null){for(var i=0;i<widgets.length;++i){var widget=widgets[i];var keyValPair=widget.getKeyValuePair(true,true);if(keyValPair!=null){keyValArray.push(keyValPair)}}}}_this.isDirty=false;if(keyValArray!=null){return{module:"formFields",value:keyValArray}}return null};_this.onAfterSave=function(vm,updatedInteractiveElements){};_this.onAfterDocumentLoad=function(data){_this.resetModule()};_this.onDocumentInfoRetrived=function(data){_this.supportsFormsLayer=false;if(data.mimeType==gnostice.MimeTypes.PDF&&data.containsForm==true){_this.supportsFormsLayer=true;_this.allowFormFilling=data.allowFormFilling}_this.focusRectLeft=document.createElement("div");$(_this.focusRectLeft).attr({"class":"git_formField, git_focusRectLeft"});$(_this.focusRectLeft).css({display:"none"});_this.focusRectTop=document.createElement("div");$(_this.focusRectTop).attr({"class":"git_formField, git_focusRectTop"});$(_this.focusRectTop).css({display:"none"});_this.focusRectRight=document.createElement("div");$(_this.focusRectRight).attr({"class":"git_formField, git_focusRectRight"});$(_this.focusRectRight).css({display:"none"});_this.focusRectBottom=document.createElement("div");$(_this.focusRectBottom).attr({"class":"git_formField, git_focusRectBottom"});$(_this.focusRectBottom).css({display:"none"});_this.resetModule()};_this.onPageCreated=function(data){_this.focusGained(_this.lastFocusedFieldWidget,_this.lastFocusedFieldRadioIndex)};_this.onPageRendered=function(data){var vm=_this.viewerManager;if(!_this.supportsFormsLayer){return}var docUri=vm.documentUri;var password=vm.password;if(_this.formsData[data.pageNumber]==null){_this.serverCom.getPageFormFields(docUri,password,data.pageNumber).done(function(response){_this.formsData[data.pageNumber]=response;_this.fdViewState[data.pageNumber]=new FdViewState();_this.fdViewState[data.pageNumber].rotationAngle=vm.rotationAngle;_this.fdViewState[data.pageNumber].zoomFactor=vm.zoomFactor;_this.fdRenderingState[data.pageNumber]=false;_this.processFields(response,data.pageNumber);if(_this.formFieldsRenderedByPage==null){_this.formFieldsRenderedByPage=new Array();for(var pageNum=1;pageNum<=vm.pageCount;++pageNum){_this.formFieldsRenderedByPage[pageNum]=false}}_this.formFieldsRenderedByPage[data.pageNumber]=true;var formsLoaded=true;for(var pageNum=1;pageNum<=vm.pageCount;++pageNum){if(_this.formFieldsRenderedByPage[pageNum]==false){formsLoaded=false;break}}if(formsLoaded){vm.events.dispatchAllFormEvents(gnostice.EventNames.onFormLoaded,null,{viewerManager:vm})}})}else{_this.processFields(_this.formsData[data.pageNumber],data.pageNumber)}};_this.onPageReRendered=function(data){if(!_this.supportsFormsLayer){return}_this.onPageRendered(data);_this.focusGained(_this.lastFocusedFieldWidget,_this.lastFocusedFieldRadioIndex)};_this.onZoomChanged=function(data){_this.focusGained(_this.lastFocusedFieldWidget,_this.lastFocusedFieldRadioIndex)};_this.onRotationChanged=function(data){if(_this.viewerManager.rotationAngle==360){_this.viewerManager.rotationAngle=0}if(_this.viewerManager.rotationAngle!=0){_this.lastFocusedFieldWidget=null}_this.focusGained(_this.lastFocusedFieldWidget,_this.lastFocusedFieldRadioIndex)};_this.fieldHighlightColor=fieldHighlightColor;_this.fieldReadonlyColor=fieldReadonlyColor;_this.fieldFocusColor=fieldFocusColor;_this.listContainerBackgroundColor=listContainerBackgroundColor;_this.listItemHoverBackgroundColor=listItemHoverBackgroundColor;return _this}FormsModule.prototype.setDirtyFlag=function(isDirty){this.isDirty=isDirty};FormsModule.prototype.getNextWidgetInPage=function(pageNumber,startIndex){var widgets=this.formWidgets[pageNumber];if(widgets!=null){if(startIndex==-1){startIndex=0}for(var i=startIndex;i<widgets.length;i++){var widget=this.formWidgets[pageNumber][i];if(!widget.isReadonly()&&!widget.isHidden()&&widget.isTabStop()){return this.formWidgets[pageNumber][i]}}}return null};FormsModule.prototype.getPrevWidgetInPage=function(pageNumber,startIndex){var widgets=this.formWidgets[pageNumber];if(widgets!=null){if(startIndex==-2){startIndex=widgets.length-1}for(var i=startIndex;i>=0;i--){var widget=this.formWidgets[pageNumber][i];if(!widget.isReadonly()&&!widget.isHidden()&&widget.isTabStop()){return this.formWidgets[pageNumber][i]}}}return null};FormsModule.prototype.initialize=function(viewerManager,serverCom){var _this=this;_super.prototype.initialize.call(this,viewerManager,serverCom);$(viewerManager.viewerDOM.viewer).keydown(function(e){if(!_this.supportsFormsLayer){return}if(!e.shiftKey&&e.keyCode==9){e.preventDefault();var curPage=1;var curTabIndex=-1;if(_this.prevFocusedFieldWidget!=null){curPage=_this.prevFocusedFieldWidget.getPageNumber();curTabIndex=_this.formWidgets[curPage].indexOf(_this.prevFocusedFieldWidget)}var found=false;curTabIndex+=1;for(var i=curPage;i<=_this.viewerManager.pageCount;++i){var widget=_this.getNextWidgetInPage(i,curTabIndex);if(widget!=null){widget.setFocus();_this.prevFocusedFieldWidget=widget;found=true;break}curTabIndex=0}if(!found){curTabIndex=0;for(var i=1;i<=curPage;++i){var widget=_this.getNextWidgetInPage(i,curTabIndex);if(widget!=null){widget.setFocus();_this.prevFocusedFieldWidget=widget;found=true;break}curTabIndex=0}}}if(e.shiftKey&&e.keyCode==9){e.preventDefault();var curPage=1;var curTabIndex=-2;if(_this.prevFocusedFieldWidget!=null){curPage=_this.prevFocusedFieldWidget.getPageNumber();curTabIndex=_this.formWidgets[curPage].indexOf(_this.prevFocusedFieldWidget)}var found=false;curTabIndex-=1;for(var i=curPage;i>=1;--i){var widget_1=_this.getPrevWidgetInPage(i,curTabIndex);if(widget_1!=null){widget_1.setFocus();_this.prevFocusedFieldWidget=widget_1;found=true;break}curTabIndex=-2}if(!found){curTabIndex=-2;for(var i=_this.viewerManager.pageCount;i>=curPage;--i){var widget=_this.getPrevWidgetInPage(i,curTabIndex);if(widget!=null){widget.setFocus();_this.prevFocusedFieldWidget=widget;found=true;break}curTabIndex=-2}}}});$(document).on("click",function(e){for(var i=1;i<=_this.viewerManager.pageCount;++i){_this.OnWidgetSelectionChanged(null,i);var container=$("#"+_this.viewerManager.documentId+i);_this.focusOut(container)}})};FormsModule.prototype.submitForm=function(submitUrl,submitMethod,includeFields,isIncludeList,includeNoValueFields,IncludeDefaultValue){if(submitMethod===void 0){submitMethod=SubmitMethod.POST}if(includeFields===void 0){includeFields=null}if(isIncludeList===void 0){isIncludeList=true}if(includeNoValueFields===void 0){includeNoValueFields=false}if(IncludeDefaultValue===void 0){IncludeDefaultValue=false}var keyValArray=this.prepareFormDataforSubmit(includeFields,includeNoValueFields,isIncludeList,IncludeDefaultValue);var data={};if(keyValArray==null){return null}this.viewerManager.events.dispatchAllFormEvents(gnostice.EventNames.beforeFormSubmit,null,{data:keyValArray,viewerManager:this.viewerManager,cancelPosting:this.cancelPostingFormData});if(submitMethod==SubmitMethod.POST){for(var i=0;i<keyValArray.length;++i){data[keyValArray[i].fieldName]=keyValArray[i].fieldValue}if(!this.cancelPostingFormData.Value){return $.ajax({url:submitUrl,type:"POST",data:data,cache:false})}}else{var str="";for(var i=0;i<keyValArray.length;++i){if(str!=""){str+="&"}str+=keyValArray[i].fieldName+"="+keyValArray[i].fieldValue}if(str!=""){return $.ajax({type:"GET",url:submitUrl+"?"+str})}}return null};FormsModule.prototype.resetModule=function(){this.fdViewState.length=0;this.formsData.length=0;this.fdRenderingState.length=0;this.formWidgets.length=0;this.containsFormData=false;this.isDirty=false;this.formFieldsRenderedByPage=null};FormsModule.prototype.rotate=function(element,degrees){$(element).css({"-webkit-transform":"rotate("+degrees+"deg)","-moz-transform":"rotate("+degrees+"deg)","-ms-transform":"rotate("+degrees+"deg)",transform:"rotate("+degrees+"deg)"})};FormsModule.prototype.clearFields=function(pageNumber){var _this=this;var docuId=this.viewerManager.documentId;var container=$("#"+docuId+pageNumber);$(container).find(".git_formField").remove();$(container).find(".git_formField_pushButton").remove();$(container).on("click",function(e){if($(event.target).attr("class")=="canvas_image"){_this.OnWidgetSelectionChanged(null,pageNumber);_this.focusOut(container)}})};FormsModule.prototype.processFields=function(data,pageNumber,force){var _this=this;if(force===void 0){force=false}if(this.viewerManager.pages[pageNumber]==null){return}var viewerOrientation=this.viewerManager.rotationAngle;var pageOrientation=this.viewerManager.pages[pageNumber].rotation|0;if((viewerOrientation+pageOrientation)%360!=0){this.clearFields(pageNumber);this.fdRenderingState[pageNumber]=false;return}if(!force){if(this.fdViewState[pageNumber]!=null){if((this.fdRenderingState[pageNumber]==true)&&(this.fdViewState[pageNumber].rotationAngle==this.viewerManager.rotationAngle)&&(this.fdViewState[pageNumber].zoomFactor==this.viewerManager.zoomFactor)){return}}}this.fdViewState[pageNumber].rotationAngle=this.viewerManager.rotationAngle;this.fdViewState[pageNumber].zoomFactor=this.viewerManager.zoomFactor;this.fdRenderingState[pageNumber]=true;var docuId=this.viewerManager.documentId;var container=$("#"+docuId+pageNumber);$(container).find(".git_formField").remove();$(container).find(".git_formField_pushButton").remove();$(container).on("click",function(e){if($(e.target).attr("class")=="canvas_image"){_this.OnWidgetSelectionChanged(null,pageNumber)}});var unitConverter=1.3334;if(this.formWidgets[pageNumber]==null){this.formWidgets[pageNumber]=new Array()}this.formWidgets[pageNumber].length=0;if(data.length>0){this.containsFormData=true}if(this.formFieldsByPage[pageNumber]==null){this.formFieldsByPage[pageNumber]=new Array()}this.formFieldsByPage[pageNumber].length=0;var unProcessedFormWidgets=this.formFieldsChangesBeforePageAvailable[pageNumber];for(var i=0;i<data.length;++i){var field=data[i];var fdWidget=this.createWidget(container,pageNumber,field);this.formWidgets[pageNumber].push(fdWidget);var formField=FormField.createFormField(this,field,fdWidget);this.formFieldsByPage[pageNumber].push(formField);fdWidget.setFormField(formField);this.updateFormFieldValueIfFieldNameSame(fdWidget,unProcessedFormWidgets);fdWidget.render()}this.formFieldsChangesBeforePageAvailable[pageNumber]=null};FormsModule.prototype.updateFormFieldValueIfFieldNameSame=function(fdWidget,unProcessedFormWidgets){if(unProcessedFormWidgets!=null){for(var j=0;j<unProcessedFormWidgets.length;j++){var fmwidget=unProcessedFormWidgets[j];if((fmwidget.getFieldType()==fdWidget.getFieldType())&&(fdWidget.getField()!=fmwidget.getField())){if(fmwidget.getFullyQualifiedFieldName()==fdWidget.getFullyQualifiedFieldName()){fdWidget.getField().value=fmwidget.getField().value}}}}};FormsModule.prototype.resetFields=function(fieldsToReset,isIncludeList){if(fieldsToReset===void 0){fieldsToReset=null}if(isIncludeList===void 0){isIncludeList=true}if(!this.containsFormData){return}var resetAll=(fieldsToReset==null||fieldsToReset.length==0);for(var pageNumber=1;pageNumber<=this.viewerManager.pageCount;++pageNumber){var widgets=this.formWidgets[pageNumber];if(widgets==null){return}for(var i=0;i<widgets.length;++i){var widget=widgets[i];if(widget.readonlyfield){continue}if(!resetAll){var index=fieldsToReset.indexOf(widget.getFullyQualifiedFieldName());if(index==-1&&isIncludeList){continue}else{if(index>=0&&!isIncludeList){continue}}}widget.reset()}}this.calculateOtherFields(null)};FormsModule.prototype.focusForm=function(){var smallestTab=Number.MAX_VALUE;var firstWidget=null;for(var pageNum=1;pageNum<=this.viewerManager.pageCount;++pageNum){var widgets=this.formWidgets[pageNum];for(var index=0;index<widgets.length;++index){if(widgets[index].getTabIndex()<smallestTab){smallestTab=widgets[index].getTabIndex();firstWidget=widgets[index]}}}if(firstWidget!=null){firstWidget.setFocus()}};FormsModule.prototype.reDrawFields=function(pageNumber,tabIndex){var data=this.formsData[pageNumber];var widgets=this.formWidgets[pageNumber];if(widgets==null){return}var docuId=this.viewerManager.documentId;var container=$("#"+docuId+pageNumber);$(container).find(".git_formField").remove();$(container).find(".git_formField_pushButton").remove();for(var i=0;i<widgets.length;++i){var widget=widgets[i];widget.render()}};FormsModule.prototype.prepareFormDataforSubmit=function(includeFields,includeNoValueFields,isIncludeList,IncludeDefaultValue){if(IncludeDefaultValue===void 0){IncludeDefaultValue=false}var keyValArray=new Array();var includeAll=(includeFields==null||includeFields.length==0);for(var pageNumber=1;pageNumber<=this.viewerManager.pageCount;++pageNumber){var widgets=this.formWidgets[pageNumber];if(widgets==null){continue}var data=this.formsData[pageNumber];for(var i=0;i<widgets.length;++i){var widget=widgets[i];if(!includeAll){var index=includeFields.indexOf(widget.getFullyQualifiedFieldName());if(index==-1){index=includeFields.indexOf(widget.getFieldMappingName())}if(index==-1){index=includeFields.indexOf(widget.getFieldName())}if(index==-1&&isIncludeList){continue}else{if(index>=0&&!isIncludeList){continue}}}var keyValPair=widget.getKeyValuePair(includeNoValueFields);if(keyValPair!=null){keyValArray.push(keyValPair)}if(keyValPair==null&&widget.isRequired()&&!widget.isReadonly()&&widget.getFieldType()!=8){this.viewerManager.showMessageBox(gnostice.LocalizedStrings.msgdlg_alert_formFieldsRequired,function(){widget.setFocus()});return null}}}return keyValArray};FormsModule.prototype.getStringOfPattern=function(fdName){if(fdName[fdName.length-1]=="]"){var ind=fdName.indexOf("[");if(ind>0){fdName=fdName.substring(0,ind)}}return fdName};FormsModule.prototype.updateOtherFields=function(fieldWidget){var tabIndex=0;for(var i=1;i<=this.viewerManager.pageCount;++i){var widgets=this.formWidgets[i];if(widgets==null){this.storeFormFieldChangesForUnavailablePagesData(fieldWidget,i);continue}var modified=false;for(var k=0;k<widgets.length;++k){var widget=widgets[k];if((widget.getFieldType()==fieldWidget.getFieldType())&&(fieldWidget.getField()!=widget.getField())){if(widget.getFullyQualifiedFieldName()==fieldWidget.getFullyQualifiedFieldName()){widget.getField().value=fieldWidget.getField().value;modified=true}}}if(modified){this.reDrawFields(i,tabIndex)}else{for(var k=0;k<widgets.length;++k){var widget=widgets[k];if(widget.getFormField() instanceof TextFormField){var textFormField=widget.getFormField();if(widget.getField().value!=textFormField.value){widget.setValueAsString(widget.getField().value)}}}}}};FormsModule.prototype.storeFormFieldChangesForUnavailablePagesData=function(fieldWidget,pageNumber){if(this.formFieldsChangesBeforePageAvailable[pageNumber]==null){this.formFieldsChangesBeforePageAvailable[pageNumber]=new Array()}var checkIfFieldIsAvailableInList=false;var formWidgets=this.formFieldsChangesBeforePageAvailable[pageNumber];for(var j=0;j<formWidgets.length;j++){var fmwidget=formWidgets[j];if((fmwidget.getFieldType()==fieldWidget.getFieldType())&&(fieldWidget.getField()!=fmwidget.getField())){if(fmwidget.getFullyQualifiedFieldName()==fieldWidget.getFullyQualifiedFieldName()){fmwidget.getField().value=fieldWidget.getField().value;checkIfFieldIsAvailableInList=true}}}if(!checkIfFieldIsAvailableInList){formWidgets.push(fieldWidget)}};FormsModule.prototype.calculateOtherFields=function(fieldWidget){for(var i=1;i<=this.viewerManager.pageCount;++i){var widgets=this.formWidgets[i];if(widgets==null){return}for(var k=0;k<widgets.length;++k){var widget=widgets[k];widget.recalculate()}}};FormsModule.prototype.getWidgetByName=function(fieldName){for(var i=1;i<=this.viewerManager.pageCount;++i){var widgets=this.formWidgets[i];if(widgets==null){return}for(var k=0;k<widgets.length;++k){var widget=widgets[k];if(widget.getFullyQualifiedFieldName()==fieldName){return widget}}}return null};FormsModule.prototype.focusGained=function(fieldWidget,radioIndex){if(radioIndex===void 0){radioIndex=0}if(fieldWidget==null){return}var container=fieldWidget.getContainer();var zoomFactor=this.viewerManager.zoomFactor;this.lastFocusedFieldWidget=fieldWidget;this.prevFocusedFieldWidget=fieldWidget;var top=0;var left=0;var width=0;var height=0;var field=fieldWidget.getField();if(fieldWidget instanceof gnostice.FormRadioGroupWidget){top=(field.radioItems[radioIndex].rectangle.top-1)*zoomFactor;left=(field.radioItems[radioIndex].rectangle.left-1)*zoomFactor;width=(field.radioItems[radioIndex].rectangle.width+1)*zoomFactor;height=(field.radioItems[radioIndex].rectangle.height+1)*zoomFactor}else{top=(field.rectangle.top-1)*zoomFactor;left=(field.rectangle.left-1)*zoomFactor;width=(field.rectangle.width+1)*zoomFactor;height=(field.rectangle.height+1)*zoomFactor}if(fieldWidget instanceof gnostice.FormRadioGroupWidget||fieldWidget instanceof gnostice.FormCheckBoxWidget||fieldWidget instanceof gnostice.FormPushButtonWidget){$(this.focusRectLeft).css({position:"absolute",left:left,top:top,width:1,height:height,"z-index":"2001",display:"block",color:"black","background-color":"transparent",margin:"0px",padding:"0px","border-width":"0px 0px 0px 1px","border-style":"none none none dotted","border-color":"white white white black"});$(this.focusRectTop).css({position:"absolute",left:left,top:top,width:width,height:1,"z-index":"2001",display:"block",color:"black","background-color":"transparent",margin:"0px",padding:"0px","border-width":"1px 0px 0px","border-style":"dotted none none","border-color":"black white white"});$(this.focusRectRight).css({position:"absolute",left:left+width,top:top,width:1,height:height,"z-index":"2001",display:"block",color:"black","background-color":"transparent",margin:"0px",padding:"0px","border-width":"0px 1px 0px 0px","border-style":"none dotted none none","border-color":"white black white white"});$(this.focusRectBottom).css({position:"absolute",left:left,top:top+height,width:width,height:1,"z-index":"2001",display:"block",color:"black","background-color":"transparent",margin:"0px",padding:"0px","border-width":"0px 0px 1px","border-style":"none none dotted","border-color":"white white black"});$(container).append(this.focusRectLeft);$(container).append(this.focusRectTop);$(container).append(this.focusRectRight);$(container).append(this.focusRectBottom)}};FormsModule.prototype.focusOut=function(container){$(".git_focusRectLeft").remove();$(".git_focusRectTop").remove();$(".git_focusRectRight").remove();$(".git_focusRectBottom").remove();this.lastFocusedFieldWidget=null;this.prevFocusedFieldWidget=null};FormsModule.prototype.OnWidgetSelectionChanged=function(widget,pageNumber){var widgets=this.formWidgets[pageNumber];if(widgets!=null){for(var i=0;i<widgets.length;++i){widgets[i].OnWidgetSelectionChanged(widget,pageNumber)}}};FormsModule.prototype.getAllFormFields=function(){var formFields=new Array();for(var pageNum=1;pageNum<this.formFieldsByPage.length;++pageNum){for(var index=0;index<this.formFieldsByPage[pageNum].length;++index){formFields.push(this.formFieldsByPage[pageNum][index])}}return formFields};FormsModule.prototype.getFormField=function(formFieldName){for(var pageNum=1;pageNum<this.formFieldsByPage.length;++pageNum){for(var _i=0,_a=this.formFieldsByPage[pageNum];_i<_a.length;_i++){var formField=_a[_i];if(formField.fullyQualifiedName==formFieldName){return formField}}}for(var pageNum=1;pageNum<this.formFieldsByPage.length;++pageNum){for(var _b=0,_c=this.formFieldsByPage[pageNum];_b<_c.length;_b++){var formField=_c[_b];if(formField.name==formFieldName){return formField}}}return null};FormsModule.prototype.createWidget=function(container,pageNumber,field){var fdWidget=null;this.curTabIndex++;switch(field.fieldType){case 1:fdWidget=new gnostice.FormTextWidget(container,pageNumber,this.curTabIndex,field,this,this.viewerManager);break;case 4:fdWidget=new gnostice.FormComboBoxWidget(container,pageNumber,this.curTabIndex,field,this,this.viewerManager);break;case 16:fdWidget=new gnostice.FormListBoxWidget(container,pageNumber,this.curTabIndex,field,this,this.viewerManager);break;case 2:fdWidget=new gnostice.FormRadioGroupWidget(container,pageNumber,this.curTabIndex,field,this,this.viewerManager);break;case 8:fdWidget=new gnostice.FormCheckBoxWidget(container,pageNumber,this.curTabIndex,field,this,this.viewerManager);break;case 32:fdWidget=new gnostice.FormPushButtonWidget(container,pageNumber,this.curTabIndex,field,this,this.viewerManager);break}return fdWidget};FormsModule.prototype.executeJavaScript=function(javaScript){var utilMethods={printd:function(cFormat,oDate,bXFAPicture){if(cFormat==null||oDate==null){return""}var monthsLong=["January","February","March","April","May","June","July","August","September","October","November","December"];var monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var daysLong=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];var daysShort=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];var month=oDate.getMonth();var str=cFormat.replaceAll("mmmm",monthsLong[month]);str=str.replaceAll("mmm",monthsShort[month]);if(month<10){str=str.replaceAll("mm","0"+(month+1))}else{str=str.replaceAll("mm",month+1)}str=str.replaceAll("m",month+1);var day=oDate.getDay();str=str.replaceAll("dddd",daysLong[day]);str=str.replaceAll("ddd",daysShort[day]);var date=oDate.getDate();if(date<10){str=str.replaceAll("dd","0"+date)}else{str=str.replaceAll("dd",date)}str=str.replaceAll("d",date);str=str.replaceAll("yyyy",oDate.getFullYear());str=str.replaceAll("yy",oDate.getFullYear()%100);var hours=oDate.getHours();if(hours<10){str=str.replaceAll("HH","0"+hours);str=str.replaceAll("hh","0"+hours)}else{str=str.replaceAll("HH",hours);if(hours>12){str=str.replaceAll("hh",hours-12)}else{str=str.replaceAll("hh",hours)}}str=str.replaceAll("H",hours);if(hours>12){str=str.replaceAll("h",hours-12)}else{str=str.replaceAll("h",hours)}var minutes=oDate.getMinutes();if(minutes<10){str=str.replaceAll("MM","0"+minutes)}else{str=str.replaceAll("MM",minutes)}str=str.replaceAll("M",minutes);var seconds=oDate.getSeconds();if(seconds<10){str=str.replaceAll("ss","0"+seconds)}else{str=str.replaceAll("ss",seconds)}str=str.replaceAll("s",seconds);if(hours<=11){str=str.replaceAll("tt","am");str=str.replaceAll("t","a")}else{str=str.replaceAll("tt","pm");str=str.replaceAll("t","p")}return str}};var contextObj={formsModule:this,util:utilMethods,getField:function(fieldName){var srcWidget=formsModule.getWidgetByName(fieldName);if(srcWidget!=null){var field=srcWidget.getField();return field}return{}},submitForm:function(){if(arguments.length<1){return}var url=null;var submitEmptyFields=false;var fieldList=null;var httpGet=false;if(arguments.length==1&&(typeof arguments[0]==="object")){var arg=arguments[0];url=arg.cURL;submitEmptyFields=arg.bEmpty;fieldList=arg.aFields;httpGet=arg.bGet}else{if(arguments.length>0){url=arguments[0]}if(arguments.length>2){submitEmptyFields=arguments[2]}if(arguments.length>3){fieldList=arguments[3]}if(arguments.length>4){httpGet=arguments[4]}}if(url==null){return}var includeFields=null;if(fieldList!=null){includeFields=new Array();if(typeof fieldList==="string"){includeFields.push(fieldList)}else{if(Array.isArray(fieldList)){for(var i=0;i<fieldList.length;++i){includeFields.push(fieldList[i])}}}}var submitMethod=SubmitMethod.POST;if(httpGet){submitMethod=SubmitMethod.GET}return formsModule.submitForm(url,submitMethod,includeFields,true,submitEmptyFields)},resetForm:function(){var includeFields=null;if(arguments.length>0&&Array.isArray(arguments[0])){var fieldList=arguments[0];includeFields=new Array();for(var i=0;i<fieldList.length;++i){includeFields.push(fieldList[i])}}formsModule.resetFields(includeFields)}};var event={value:NaN};var formsModule=contextObj.formsModule;var util=contextObj.util;var getField=contextObj.getField;var submitForm=contextObj.submitForm;var resetForm=contextObj.resetForm;var calcFn={};var calcFnStr="var calcFn = function(event) { "+javaScript+" };";eval(calcFnStr);var returnValue=calcFn.call(contextObj,event);return{returnValue:returnValue,argument:event}};return FormsModule}(gnostice.PluggableModule));gnostice.FormsModule=FormsModule})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(){function c(g,f,e,h,d,i){this.container=g;this.pageNumber=f;this.tabIndex=e;this.field=h;this.formsModule=d;this.viewerManager=i;this.readonlyfield=false;this.validationFailed=false;this.tabStop=true;this.suppressInFocusEvent=false;this.readonly=h.isReadonly;this.hidden=h.isHidden;this.required=h.isRequired;this.fieldType=h.fiedlType;this.fieldName=h.fieldName;this.fullyQualifiedFieldName=h.fullyQualifiedFieldName;this.fieldMappingName=h.fieldMappingName;if(h.isReadonly){e=0}}c.prototype.isReadonly=function(){return this.readonly};c.prototype.isHidden=function(){return this.hidden};c.prototype.isRequired=function(){return this.required};c.prototype.getFieldType=function(){return this.fieldType};c.prototype.getPageNumber=function(){return this.pageNumber};c.prototype.getFieldName=function(){return this.fieldName};c.prototype.getFullyQualifiedFieldName=function(){return this.fullyQualifiedFieldName};c.prototype.getFieldMappingName=function(){return this.fieldMappingName};c.prototype.getField=function(){return this.field};c.prototype.getFormField=function(){return this.formField};c.prototype.getContainer=function(){return this.container};c.prototype.getTabIndex=function(){return this.tabIndex};c.prototype.isTabStop=function(){return this.tabStop};c.prototype.setTabStop=function(d){this.tabStop=d};c.prototype.isValidationFailed=function(){return this.validationFailed};c.prototype.render=function(){var d=this.field;this.zoomFactor=this.viewerManager.zoomFactor;this.field.font=this.field.font||{fallbackFontName:"Arial",sizeInPoints:9.2,style:{bold:true,italic:false,underline:false}};this.field.font.style=this.field.font.style||{bold:false,italic:false,underline:false};var f=tinycolor(this.formsModule.fieldHighlightColor);this.fieldHighlightColor=f.toRgbString();var e=f.getAlpha();this.listItemHoverBackgroundColor=f.setAlpha(1).toRgbString();this.fieldFocusColor=d.backgroundColor;f=tinycolor(this.formsModule.fieldFocusColor);if(f.isValid()){this.fieldFocusColor=f.toRgbString()}if(this.fieldFocusColor==null){this.fieldFocusColor="rgb(255, 255, 255)"}this.fieldReadOnlyColor=d.backgroundColor;f=tinycolor(this.formsModule.fieldReadonlyColor);if(f.isValid()){this.fieldReadOnlyColor=f.toRgbString()}this.listContainerBackgroundColor="rgb(255, 255, 255);";f=tinycolor(this.formsModule.listContainerBackgroundColor);if(f.isValid()){this.listContainerBackgroundColor=f.toRgbString()}f=tinycolor(this.formsModule.listItemHoverBackgroundColor);if(f.isValid()){this.listItemHoverBackgroundColor=f.toRgbString()}this.borderColor=d.borderColor;if(d.borderColor==null){if(e<1){this.borderColor="rgba(255, 255, 255,"+e+")"}else{this.borderColor="#FFFFFF"}}this.borderWidth=d.borderWidth;if(d.isRequired&&!d.isReadonly){this.borderColor="#FF0000";if(this.borderWidth<1){this.borderWidth=1}}};c.prototype.setFormField=function(d){this.formField=d};c.prototype.updateField=function(){};c.prototype.recalculate=function(){};c.prototype.getAlignment=function(d){if(d.alignment==0){return"left"}else{if(d.alignment==1){return"center"}else{if(d.alignment==2){return"right"}}}return"left"};c.prototype.reset=function(){this.field.value=this.field.defaultValue};c.prototype.getTextWidth=function(g,d){if(this.canvas==null){this.canvas=document.createElement("canvas")}var e=this.canvas.getContext("2d");e.font=d;var f=e.measureText(g);return f.width};c.prototype.escapeComma=function(g){if(g!=null){var h=g.indexOf(",",-1);while(h>-1){var f=g.slice(0,h);var e=g.slice(h+1,g.length);var d="%2C";g=f+d+e;var h=g.indexOf(",",h+3)}}return g};c.prototype.OnWidgetSelectionChanged=function(e,d){};c.prototype.isPrintableKeyPressed=function(d){var e=(d>47&&d<58)||d==32||d==13||(d>64&&d<91)||(d>95&&d<112)||(d>185&&d<193)||(d>218&&d<223);return e};c.prototype.drawTick=function(g,d,f){var e=f.getContext("2d");e.scale(g/100,d/100);e.save();e.save();e.beginPath();e.moveTo(39.363,79);e.lineTo(16,55.49);e.lineTo(27.347,44.071);e.lineTo(39.694,56.49);e.lineTo(72.983,23);e.lineTo(84,34.085);e.lineTo(39.363,79);e.closePath();e.fill();e.stroke();e.restore();e.restore();e.scale(1,1)};c.prototype.drawCircle=function(h,e,i,g){var k=h/2;var j=e/2;var d=(Math.min(h,e)/2)-(2*i);var f=g.getContext("2d");f.beginPath();f.arc(k,j,d*0.8,0,2*Math.PI,false);f.fillStyle="black";f.fill()};c.prototype.validateField=function(e,h,g){if(g==null||g.length<=0){return null}var f="";switch(e){case"date":f=h.pattern;if(f!=null&&!this.validDateTime(g,f)){return a.LocalizedStrings.form_validation_error_date+" "+f}break;case"time":f=h.pattern;if(f!=null&&!this.validDateTime(g,f)){return a.LocalizedStrings.form_validation_error_time+" "+f}break;case"dateTime":f=h.pattern;if(f!=null&&!this.validDateTime(g,f)){return a.LocalizedStrings.form_validation_error_datetime+" "+f}break;case"customMask":var d=h.mask;if(d!=null&&!this.validInput(g,d)){return a.LocalizedStrings.form_validation_error_input+" "+d}break}return null};c.prototype.validInput=function(h,g){if(h.length!=g.length){return false}for(var d=0;d<g.length;++d){var f=g.charAt(d);var e=h.charAt(d);switch(f){case"A":if(/^[A-Z]$/i.test(e)==false){return false}break;case"X":if(e<" "||e==String.fromCharCode(127)){return false}break;case"O":if((/^[A-Z]$/i.test(e)==false)||(/^[0-9]$/.test(e)==false)){return false}break;case"9":if(/^[0-9]$/.test(e)==false){return false}break;default:if(f!=e){return false}break}}return true};c.prototype.validDateTime=function(v,g){v=v.toLowerCase();var A=null,K=null;var k="",N="";var L=/[-\/dy]/.test(g);var x=/[hH]/.test(g);if(L&&x){var C=g.indexOf(" ");if(C==-1){return false}A=g.substr(0,C);K=g.substr(C+1);C=v.indexOf(" ");if(C==-1){return false}k=v.substr(0,C);N=v.substr(C+1)}else{if(L){A=g;k=v}else{if(x){K=g;N=v}else{return false}}}var s=1,e=1,f=2016;var q=0,h=0,u=0;var M=false;var p=true;if(L){var n="/";if(A.indexOf("-")!=-1){n="-"}else{if(A.indexOf("/")!=-1){n="/"}else{if(A.indexOf(" ")!=-1){n=" ";k=k.replace(",","");A=A.replace(",","")}else{n=""}}}var r=[];if(n!=""){r=A.split(n)}else{if(A.length>0){var o=A.charAt(0);var l=o;for(var y=1;y<A.length;++y){var w=A.charAt(y);if(w!=o){r.push(l);l="";o=w}l+=w}r.push(l)}}var H=-1,I=-1,J=-1;var D="^";for(var y=0;y<r.length;++y){var l=r[y];switch(l){case"d":if(n==""){D+="(\\d{1})"}else{D+="(\\d{1,2})"}H=y+1;break;case"dd":if(n==""){D+="(\\d{2})"}else{D+="(\\d{1,2})"}H=y+1;break;case"m":if(n==""){D+="(\\d{1})"}else{D+="(\\d{1,2})"}I=y+1;break;case"mm":if(n==""){D+="(\\d{2})"}else{D+="(\\d{1,2})"}I=y+1;break;case"mmm":D+="([a-z]{3})";I=y+1;M=true;break;case"mmmm":if(n==""){D+="([a-z]{4})"}else{D+="([a-z]{3,4})"}I=y+1;M=true;break;case"yy":D+="(\\d{2})";J=y+1;p=false;break;case"yyyy":D+="(\\d{4})";J=y+1;break;default:return false}if(y<(r.length-1)&&n!=""){D+=("["+n+"]")}}D+="$";var d=new RegExp(D).exec(k);if(d==null){return false}s=(H!=-1)?Number(d[H]):s;if(I!=-1){if(M){var F=d[I];switch(F){case"jan":e=0;break;case"feb":e=1;break;case"mar":e=2;break;case"apr":e=3;break;case"may":e=4;break;case"jun":case"june":e=5;break;case"jul":case"july":e=6;break;case"aug":e=7;break;case"sep":e=8;break;case"oct":e=9;break;case"nov":e=10;break;case"dec":e=11;break;default:return false}}else{e=Number(d[I])-1}}f=(J!=-1)?Number(d[J]):f}if(x){var E=":";if(K.indexOf(" ")!=-1){K=K.replace(" ",":");N=N.replace(" ",":")}var r=K.split(E);var t=-1,i=-1,m=-1,B=-1;var D="^";for(var y=0;y<r.length;++y){var l=r[y];switch(l){case"h":D+="([1-9]|1[0-2])";t=y+1;break;case"H":D+="([0-9]|1[0-9]|2[0-3])";t=y+1;break;case"m":D+="([0-9]|[1-5][0-9])";i=y+1;break;case"s":D+="([0-9]|[1-5][0-9])";m=y+1;break;case"tt":D+="(am|pm)";B=y+1;break;default:return false}if(y<(r.length-1)){D+=("["+E+"]")}}D+="$";if(t==-1||i==-1){return false}var d=new RegExp(D).exec(N);if(d==null){return false}q=Number(d[t]);h=Number(d[i]);u=(m!=-1)?Number(d[m]):u;if(B!=-1){q+=11}}var z=new Date(f,e,s,q,h,u);var G;if(p){G=z.getFullYear()}else{var j=z.getFullYear()+"";G=Number(j.substr(2))}return((z.getSeconds()==u)&&(z.getMinutes()==h)&&(z.getHours()==q)&&(z.getDate()==s)&&(z.getMonth()==e)&&(G==f))};c.prototype.formatField=function(m,n,o,k){var g=o;var f=k;switch(m){case"number":case"percent":var p=n.decPlaces||0;var j=n.negStyle||"minusBlack";var d=n.currSymbol||"";var l=n.currPrepend||true;var i=n.separator||"";var h=parseFloat(o);if(isNaN(h)){break}var e=(h<0);h=Math.abs(h);g=h.format(p,3,i,".");if(d!=""){d=this.unicodeToChar(d);if(l){g=d+g}else{g+=d}}if(e){if(j=="red"){f="red"}else{if(j=="minusBlack"){g="-"+g}else{if(j=="parensRed"){f="red";g="("+g+")"}else{if(j=="parensBlack"){g="("+g+")"}}}}}break}return{value:g,color:f}};c.prototype.unicodeToChar=function(d){return d.replace(/\\u[\dA-F]{4}/gi,function(e){return String.fromCharCode(parseInt(e.replace(/\\u/g,""),16))})};c.prototype.performAction=function(h){if(h.actionType==1){var k=null;var e=true;if(h.resetActionFieldsInclude!=null){e=h.resetActionFieldsInclude}if(h.resetActionFields!=null){k=h.resetActionFields}this.formsModule.resetFields(k,e)}else{if(h.actionType==2){var f=h.submitActionFields;var e=h.submitActionFieldsInclude||true;var d=h.includeNoValueFields||true;var j=(h.submitActionType==2)?a.SubmitMethod.POST:a.SubmitMethod.GET;var i=this.formsModule.submitForm(h.submitUrl,j,f,e,d);if(i!=null){i.done(function(){this.viewerManager.events.dispatchAllFormEvents(a.EventNames.afterFormSubmit,null,{viewerManager:this.viewerManager,documentUri:h.submitUrl})})}}else{if(h.actionType==3){var g=h.customActionScript;if(g!=null&&g.length>0){this.formsModule.executeJavaScript(g)}}}}};c.prototype.valueToSelectedIndices=function(j,h,k){var g=new Array();var e=j.split(",");for(var f=0;f<e.length;++f){var i=e[f];var d=-1;if(h!=null){d=h.indexOf(i)}if(d==-1&&k!=null){d=k.indexOf(i)}if(d!=-1){g.push(d)}}return g};c.prototype.stripNonPrintableChars=function(d){if(d==null){return null}return d.replace(/[^\x20-\x7E]/g,"")};return c}());a.FormWidget=b})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(c){__extends(d,c);function d(){var e=c!==null&&c.apply(this,arguments)||this;e.fdContainer=null;e.autoCompleteItems=null;e.isValidateField=false;return e}d.prototype.showFocus=function(e){var f=this.fieldFocusColor;if(!e){f=(this.readonlyfield)?this.fieldReadOnlyColor:this.fieldHighlightColor;if(!this.formsModule.allowFormFilling){f="transparent"}}$(this.fdContainer).css({"background-color":f})};d.prototype.getCombValue=function(){var e="";for(var f=0;f<this.field.maxLength;++f){e+=$($(this.fdContainer).children("div").children("input").get(f)).val()}return e};d.prototype.setCombValue=function(e,f){if(f===void 0){f=null}var h=$(this.fdContainer).children();for(var g=0;g<this.field.maxLength;++g){var i=$(h.children("input").get(g));if(g<e.length){i.val(e.charAt(g))}else{i.val("")}if(f!=null){i.css({color:f})}}};d.prototype.render=function(){var j=this;if(this.field.isHidden){return}c.prototype.render.call(this);var n=this.field;this.isValidateField=true;var N=this.zoomFactor;var K=n.rectangle.top*N;var r=n.rectangle.left*N;var A=(n.rectangle.width-this.borderWidth-2)*N;var E=(n.rectangle.height-this.borderWidth)*N;var p=this.viewerManager.pages[this.pageNumber].rotation;var y=this.viewerManager.pages[this.pageNumber].width*N;var v=this.viewerManager.pages[this.pageNumber].height*N;switch(p){case 270:case -90:var m=A;A=E;E=m;m=r;r=v-K;K=m;break;case 90:case -270:var m=A;A=E;E=m;m=r;r=K;K=y-m;break}var M="";if(n.font.style.bold){M+="bold "}if(n.font.style.italic){M+="italic "}var u=n.font.sizeInPoints*N;M+=u+"pt "+n.font.fallbackFontName;if(n.isReadonly){this.readonlyfield=true}this.fdContainer=document.createElement("div");$(this.fdContainer).attr({"class":"git_formField"});var f=this.readonly?this.fieldReadOnlyColor:this.fieldHighlightColor;if(!this.formsModule.allowFormFilling){f="transparent"}$(this.fdContainer).css({position:"absolute","float":"top",left:r,top:K,width:A,height:E,"z-index":"20",display:"block",color:n.fontColor,"background-color":f,"text-align":"center",border:Math.floor(this.borderWidth*N)+"px solid "+this.borderColor});n.value=this.stripNonPrintableChars(n.value);this.formField.value=n.value;var C="rotate(-"+this.field.orientation+"deg)";var k=0;var l=0;var e=A;var g=E;switch(this.field.orientation){case 90:case -270:var m=e;e=g;g=m;l=e;break;case -90:case 270:var m=e;e=g;g=m;k=g;break;case 180:k=e;l=g;break}if(n.isComb){var i=document.createElement("div");$(i).attr({"class":"git_formField"});$(i).css({position:"absolute",left:0,top:0,width:A,height:E,overflow:"none"});$(this.fdContainer).append(i);if(n.alternateName!=null&&n.alternateName!=""){$(i).attr({title:n.alternateName})}if(this.isValidateField){var h=document.createElement("input");$(h).attr({tabindex:this.tabIndex,maxlength:n.maxLength,"class":"git_formField_edit"});if(n.isReadonly||!this.formsModule.allowFormFilling){$(h).attr({readonly:"true"})}$(h).css({position:"absolute",left:k,top:l,width:e,height:g,"z-index":"100",display:"none",color:n.fontColor,"background-color":"transparent",border:"0px none rgb(255, 255, 255)",margin:"0px",padding:"0px","font-family":n.font.fallbackFontName,"font-size":(n.font.sizeInPoints*N)+"pt","font-weight":n.font.style.bold?"bold":"normal","font-style":n.font.style.italic?"italic":"normal","text-decoration":n.font.style.underline?"underline":"none","text-align":"center",outline:"none",transform:C,"transform-origin":"top left"});$(h).focusout(function(Q){if(n.isReadonly||!j.formsModule.allowFormFilling){return}var P;var O=$(Q.target);P=j.validateField(j.field.dataType,j.field.dataFormat,O.val());if(P!=null){j.field.value=j.field.fieldOldValue;j.viewerManager.showMessageBox(P,function(){O.val(j.field.value);O.focus()});Q.preventDefault();return false}var R=j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldFocusOut,j.field.fieldName,{viewerManager:j.viewerManager,formField:j.formField});if(R==false){Q.preventDefault();return false}j.formsModule.updateOtherFields(j);j.formsModule.calculateOtherFields(j);j.formsModule.focusOut(j.container);j.setCombValue(O.val());O.hide();$(j.fdContainer).children("div").show()});$(h).on("click",function(O){if(n.isReadonly||!j.formsModule.allowFormFilling){return}O.stopPropagation()});$(h).on("input",function(P){if(n.isReadonly||!j.formsModule.allowFormFilling){return}var O=$(P.target);j.field.value=O.val();j.formsModule.setDirtyFlag(true);j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,j.formField.name,{formField:j.formField});j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})});$(h).keyup(function(Q){if(n.isReadonly||!j.formsModule.allowFormFilling){return}var O=j.field.value;var P=$(Q.target);j.field.value=P.val();j.formField.value=P.val();if(O!=j.field.value){j.formsModule.setDirtyFlag(true);j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,j.formField.name,{formField:j.formField});j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}});$(this.fdContainer).append(h)}var w=0;var L=A/n.maxLength;var I=function(O){t=document.createElement("div");z=H.borderWidth;G=H.borderWidth;F=H.borderWidth;if(O!=n.maxLength-1){F=0}$(t).css({position:"absolute",left:w,top:0,width:L,height:E,"text-align":"center","border-width":G+"px "+F+"px "+G+"px "+z+"px ","border-style":"solid","border-color":"gray"});$(i).append(t);J=document.createElement("input");if(O==0){H.focusControl=J}$(J).focusin(function(){if(n.isReadonly||!j.formsModule.allowFormFilling){return}j.formsModule.OnWidgetSelectionChanged(j,j.pageNumber);j.formsModule.focusGained(j);j.showFocus(true);if(!j.suppressInFocusEvent){j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldFocusIn,j.field.fieldName,{viewerManager:j.viewerManager,formField:j.formField})}j.suppressInFocusEvent=false;if(j.isValidateField){var P=j.getCombValue();j.field.fieldOldValue=P;var Q=$(j.fdContainer).children("input");Q.val(P);$(j.fdContainer).children("div").hide();Q.show().focus()}});$(J).focusout(function(P){if(n.isReadonly||!j.formsModule.allowFormFilling){return}});if(n.isPassword){$(J).attr("type","password")}if(n.isReadonly||!H.formsModule.allowFormFilling){$(J).attr({readonly:"true"})}$(J).attr({tabindex:H.tabIndex,value:n.value.charAt(O),maxlength:"1","class":"comb_inputs, .git_formField_edit"});$(J).css({position:"absolute",left:w,top:0,width:L,height:E,"z-index":"100",display:"block",color:n.fontColor,"background-color":"transparent",border:"0px none rgb(255, 255, 255)",margin:"0px",padding:"0px","font-family":n.font.fallbackFontName,"font-size":(n.font.sizeInPoints*N)+"pt","font-weight":n.font.style.bold?"bold":"normal","font-style":n.font.style.italic?"italic":"normal","text-decoration":n.font.style.underline?"underline":"none","text-align":"center",outline:"none"});$(J).on("click",function(P){if(n.isReadonly||!j.formsModule.allowFormFilling){return}j.formsModule.OnWidgetSelectionChanged(j,j.pageNumber);j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldClicked,j.field.fieldName,{viewerManager:j.viewerManager,formField:j.formField});P.stopPropagation();j.viewerManager.events.dispatchAllFormEvents(a.EventNames.afterFieldClicked,j.field.fieldName,{viewerManager:j.viewerManager,formField:j.formField})});$(J).on("keyup",function(U){if(n.isReadonly||!j.formsModule.allowFormFilling){return}var S=j.field.value;var T=$(U.target);var R=j.getCombValue();j.field.value=R;j.formField.value=R;if(S!=j.field.value){j.formsModule.setDirtyFlag(true);j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,j.formField.name,{formField:j.formField});j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}var Q=U.keyCode;if(j.isPrintableKeyPressed(Q)&&(T.val().length==1)&&(O<n.maxLength-1)){var P=$(T.parent().children("input").get(O+1));P.focus();P.select()}});$(J).on("keydown",function(Q){if(n.isReadonly||!j.formsModule.allowFormFilling){return}var P=$(Q.target);if(!Q.shiftKey&&Q.keyCode==37){if(O>0){$(P.parent().children("input").get(O-1)).focus()}Q.preventDefault()}else{if(!Q.shiftKey&&Q.keyCode==39){if(O<n.maxLength-1){$(P.parent().children("input").get(O+1)).focus()}Q.preventDefault()}}});$(i).append(J);w=w+L};var H=this,t,z,G,F,J;for(var D=0;D<n.maxLength;D++){I(D)}}else{if(!n.isMultiline){var J=document.createElement("input");this.focusControl=J;if(n.isPassword){$(J).attr("type","password")}$(J).attr("class",".git_formField_edit");if(!n.isNoSpellCheck){$(J).attr("spellcheck","true")}else{$(J).attr("spellcheck","false")}if(n.isReadonly||!this.formsModule.allowFormFilling){$(J).attr({readonly:"true"})}if(n.alternateName!=null&&n.alternateName!=""){$(J).attr({title:n.alternateName})}var q=this.formatField(n.dataType,n.dataFormat,n.value,n.fontColor);$(J).attr({value:q.value,tabindex:this.tabIndex});if(n.maxLength>0){$(J).attr({maxlength:n.maxLength})}if(n.font.fontSizeAuto){var x=E/1.42857;var B=n.value.length;var o=(A*1.313)/B;u=Math.min(x,o)}$(J).css({position:"absolute",left:k,top:l,width:e,height:g,"z-index":"100",display:"block",color:q.color,"background-color":"transparent",border:"0px none rgb(255, 255, 255)",margin:"0px","padding-left":"1px","font-family":n.font.fallbackFontName,"font-size":u+"pt","font-weight":n.font.style.bold?"bold":"normal","font-style":n.font.style.italic?"italic":"normal","text-decoration":n.font.style.underline?"underline":"none","text-align":this.getAlignment(n),outline:"none",transform:C,"transform-origin":"top left"});$(J).on("click",function(O){j.formsModule.OnWidgetSelectionChanged(j,j.pageNumber);j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldClicked,j.field.fieldName,{viewerManager:j.viewerManager,formField:j.formField});O.stopPropagation();j.viewerManager.events.dispatchAllFormEvents(a.EventNames.afterFieldClicked,j.field.fieldName,{viewerManager:j.viewerManager,formField:j.formField})});$(J).keypress(function(R){if(!n.isReadonly&&j.field.isNoScroll){var Q=$(R.target);var P=j.getTextWidth(n.value+String.fromCharCode(R.which),M);var O;if(j.field.orientation==90||j.field.orientation==-90||j.field.orientation==270||j.field.orientation==-270){O=E*N}else{O=A*N}if(P>(O*1.1)){Q.attr({maxlength:n.value.length})}else{Q.attr({maxlength:n.value.length+3})}}});$(J).on("input",function(P){if(!n.isReadonly){var O=$(P.target);j.field.value=O.val();j.formsModule.setDirtyFlag(true);j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,j.formField.name,{formField:j.formField});j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}});$(J).keyup(function(Q){if(!n.isReadonly){var O=j.field.value;var P=$(Q.target);j.field.value=P.val();j.formField.value=P.val();if(O!=j.field.value){j.formsModule.setDirtyFlag(true);j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,j.formField.name,{formField:j.formField});j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}}});$(J).focusin(function(P){if(n.isReadonly||!j.formsModule.allowFormFilling){return}j.formsModule.OnWidgetSelectionChanged(j,j.pageNumber);j.showFocus(true);j.formsModule.focusGained(j);var O=$(P.target);j.field.fieldOldValue=j.field.value;O.val(j.field.value);if(!j.suppressInFocusEvent){j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldFocusIn,j.field.fieldName,{viewerManager:j.viewerManager,formField:j.formField})}j.suppressInFocusEvent=false});$(J).focusout(function(R){if(n.isReadonly||!j.formsModule.allowFormFilling){return}var Q;var P=$(R.target);Q=j.validateField(j.field.dataType,j.field.dataFormat,P.val());if(Q!=null){j.field.value=j.field.fieldOldValue;j.viewerManager.showMessageBox(Q,function(){var T=j.formatField(j.field.dataType,j.field.dataFormat,j.field.value,j.field.fontColor);P.val(T.value);P.css({color:j.field.fontColor});P.focus()});R.preventDefault();return false}var S=j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldFocusOut,j.field.fieldName,{viewerManager:j.viewerManager,formField:j.formField});if(S==false){R.preventDefault();return false}var O=j.formatField(j.field.dataType,j.field.dataFormat,j.field.value,j.field.fontColor);P.val(O.value);P.css({color:j.field.fontColor});j.formsModule.updateOtherFields(j);j.formsModule.calculateOtherFields(j);j.formsModule.focusOut(j.container)});if(n.isReadonly||!this.formsModule.allowFormFilling){$(J).attr({readonly:"true"})}$(this.fdContainer).append(J)}else{var s=document.createElement("textarea");this.focusControl=s;$(s).css({position:"absolute",left:k,top:l,width:e,height:g,"z-index":"100",display:"block",color:n.fontColor,"background-color":"transparent",border:"0px none rgb(255, 255, 255)",margin:"0px",padding:"0px","font-family":n.font.fallbackFontName,"font-size":(n.font.sizeInPoints*N)+"pt","font-weight":n.font.style.bold?"bold":"normal","font-style":n.font.style.italic?"italic":"normal","text-decoration":n.font.style.underline?"underline":"none","text-align":this.getAlignment(n),outline:"none",resize:"none",transform:C,"transform-origin":"top left"});$(s).attr("tabindex",this.tabIndex);$(s).attr("class",".git_formField_edit");if(!n.isNoSpellCheck){$(s).attr("spellcheck","true")}else{$(s).attr("spellcheck","false")}if(n.maxLength>0){$(s).attr({maxlength:n.maxLength})}if(n.alternateName!=null&&n.alternateName!=""){$(s).attr({title:n.alternateName})}if(n.isReadonly||!this.formsModule.allowFormFilling){$(s).attr({readonly:"true"})}$(s).val(n.value);$(this.fdContainer).append(s);$(s).on("click",function(O){if(n.isReadonly||!j.formsModule.allowFormFilling){return}j.formsModule.OnWidgetSelectionChanged(j,j.pageNumber);j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldClicked,j.field.fieldName,{viewerManager:j.viewerManager,formField:j.formField});O.stopPropagation();j.viewerManager.events.dispatchAllFormEvents(a.EventNames.afterFieldClicked,j.field.fieldName,{viewerManager:j.viewerManager,formField:j.formField})});$(s).on("keyup",function(Q){if(!n.isReadonly){var O=j.field.value;var P=$(Q.target);j.field.value=P.val();j.formField.value=P.val();if(O!=j.field.value){j.formsModule.setDirtyFlag(true);j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,j.formField.name,{formField:j.formField});j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}}});$(s).focusin(function(){if(n.isReadonly||!j.formsModule.allowFormFilling){return}j.formsModule.OnWidgetSelectionChanged(j,j.pageNumber);j.showFocus(true);j.formsModule.focusGained(j);if(!j.suppressInFocusEvent){j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldFocusIn,j.field.fieldName,{viewerManager:j.viewerManager,formField:j.formField})}j.suppressInFocusEvent=false});$(s).focusout(function(P){if(n.isReadonly||!j.formsModule.allowFormFilling){return}var O=$(P.target);if(!n.isReadonly){j.formsModule.setDirtyFlag(true);j.field.value=O.val()}var Q=j.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldFocusOut,j.field.fieldName,{viewerManager:j.viewerManager,formField:j.formField});if(Q==false){P.preventDefault();return false}j.formsModule.updateOtherFields(j);j.formsModule.focusOut(j.container)});jQuery.data(s,"field",n)}}$(this.container).append(this.fdContainer)};d.prototype.getAutoCompleteItemDisplayValue=function(e){return this.autoCompleteItems[e]};d.prototype.getAutoCompleteItemSubmitValue=function(e){return this.autoCompleteItems[e]};d.prototype.recalculate=function(){var q=this.field;if(q.calculate==null||q.calculate.func==null){return}var s=0;var g=q.calculate.func;if(g=="avg"||g=="sum"||g=="prd"||g=="min"||g=="max"){var o=q.calculate.params;var m=[];for(var k=0;k<o.length;++k){var n=this.formsModule.getWidgetByName(o[k]);if(n!=null){var h=parseFloat(n.getField().value);if(!isNaN(h)){m.push(h)}}}switch(g){case"sum":case"avg":for(var k=0;k<m.length;++k){s+=m[k]}if(g=="avg"){s=s/m.length}break;case"prd":s=1;for(var k=0;k<m.length;++k){s*=m[k]}break;case"min":s=Math.min.apply(null,m);break;case"max":s=Math.max.apply(null,m);break}}else{if(g=="javaScript"&&this.viewerManager.preferences.interactiveElements.form.allowJavaScriptExecution){var e=q.calculate.customScript;var l=this.formsModule.executeJavaScript(e);if(isNaN(l.argument.value)){s=this.field.value}else{s=l.argument.value}}}var p=s+"";var f=$(this.focusControl);var r=this.validateField(this.field.dataType,this.field.dataFormat,p);if(r!=null){this.viewerManager.showMessageBox(r);return}this.field.value=p;this.formsModule.setDirtyFlag(true);this.formField.value=p;var j=this.formatField(this.field.dataType,this.field.dataFormat,this.field.value,this.field.fontColor);f.val(j.value);f.css({color:this.field.fontColor});this.formsModule.updateOtherFields(this)};d.prototype.setValue=function(e){this.field.value=e;this.formField.value=e;var i=this.formatField(this.field.dataType,this.field.dataFormat,this.field.value,this.field.fontColor);if(this.field.isComb){var m=i.value;this.setCombValue(m,i.color)}else{var f=$(this.focusControl);f.val(i.value);if(this.field.font.fontSizeAuto){var j=(this.field.rectangle.width-this.borderWidth-2)*this.zoomFactor;var g=(this.field.rectangle.height-this.borderWidth)*this.zoomFactor;var h=g/1.42857;var l=this.field.value.length;var k=(j*1.313)/l;var n=Math.min(h,k);f.css({"font-size":n*this.zoomFactor+"pt"})}f.css({color:this.field.fontColor})}this.formsModule.setDirtyFlag(true);this.formsModule.updateOtherFields(this)};d.prototype.setValueAsString=function(e){this.setValue(e)};d.prototype.getValueAsString=function(){var e=this.field.value;e=e.replace(/\n/g,"\r\n");return e};d.prototype.getDefaultValueAsString=function(){var e=this.field.defaultValue;e=e.replace(/\n/g,"\r\n");return e};d.prototype.getKeyValuePair=function(f,g,h){if(f===void 0){f=false}if(g===void 0){g=false}if(h===void 0){h=false}var e=true;if(this.field.isNoExport&&!g){return null}if(g){e=true}else{if(!f){e=false}}var i=this.field.fullyQualifiedFieldName;var j=this.getValueAsString();if(!g){i=this.field.fieldName;if(this.field.fieldMappingName!=null&&this.field.fieldMappingName!=""){i=this.field.fieldMappingName}}if(e||(!e&&(j!=""))){if(j==""){j=this.getDefaultValueAsString()}return new a.FieldKeyValuePair(i,j)}return null};d.prototype.setFocus=function(f,e){if(f===void 0){f=true}if(e===void 0){e=false}this.suppressInFocusEvent=e;$(this.focusControl).focus();if(f&&!this.field.isMultiline&&!this.field.isComb){$(this.focusControl).select()}};d.prototype.reset=function(){if(this.field.isHidden){return}this.setValue(this.field.defaultValue)};d.prototype.OnWidgetSelectionChanged=function(f,e){if(this.field.isHidden){return}if((f!=null&&f.getField()!=this.field)||(f==null)){this.showFocus(false)}};return d}(a.FormWidget));a.FormTextWidget=b})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){var e=d!==null&&d.apply(this,arguments)||this;e.editBoxContainer=null;e.editBox=null;e.listBoxContainer=null;return e}c.prototype.render=function(){var n=this;if(this.field.isHidden){return}d.prototype.render.call(this);var o=this.field;if(o.isReadonly){this.readonlyfield=true}var g=this.zoomFactor;var t=o.rectangle.top*g;var e=o.rectangle.left*g;var l=o.rectangle.width*g;var h=o.rectangle.height*g;var q=17*g;this.formField.selectedItemIndices=o.selectedItemIndices;o.value=this.stripNonPrintableChars(o.value);this.formField.value=o.value;this.editBoxContainer=document.createElement("div");$(this.editBoxContainer).attr({"class":"git_formField"});var p=(this.readonlyfield)?this.fieldReadOnlyColor:this.fieldHighlightColor;if(!this.formsModule.allowFormFilling){p="transparent"}$(this.editBoxContainer).css({position:"absolute","float":"top",top:t,left:e,width:l,height:h,"z-index":"20",display:"block","background-color":p,color:o.fontColor,outline:this.borderWidth*g+"px solid "+this.borderColor});$(this.container).append(this.editBoxContainer);this.listBoxContainer=document.createElement("div");$(this.listBoxContainer).attr({"class":"git_childContainer, git_formField"});$(this.listBoxContainer).css({position:"absolute","float":"top",top:t+h,left:e,width:l,height:145*g,"z-index":"2001",display:"none","background-color":this.listContainerBackgroundColor,color:o.fontColor,overflow:"scroll",outline:1*g+"px solid black",cursor:"default"});$(this.container).append(this.listBoxContainer);if(o.alternateName!=null&&o.alternateName!=""){$(this.listBoxContainer).attr({title:o.alternateName})}this.editBox=document.createElement("input");$(this.editBox).css({position:"absolute",top:0,left:0,width:l-q,height:h,display:"block",color:o.fontColor,"background-color":"transparent","z-index":"20",border:"0px none rgb(255, 255, 255)",margin:"0px",padding:"0px","font-family":o.font.fallbackFontName,"font-size":Math.floor(o.font.sizeInPoints*g)+"pt","text-align":this.getAlignment(o),outline:"none"});$(this.editBox).attr({value:o.value,tabindex:this.tabIndex});if(!o.isEditable||this.readonlyfield||!this.formsModule.allowFormFilling){$(this.editBox).attr("readonly","true")}if(o.isEditable&&!o.isNoSpellCheck){$(this.editBox).attr("spellcheck","true")}else{$(this.editBox).attr("spellcheck","false")}if(o.alternateName!=null&&o.alternateName!=""){$(this.editBox).attr("title",o.alternateName)}this.focusControl=this.editBox;$(this.editBoxContainer).append(this.editBox);$(this.editBox).focusin(function(){if(n.readonlyfield||!n.formsModule.allowFormFilling){return}$(n.editBoxContainer).css({"background-color":n.fieldFocusColor});n.formsModule.OnWidgetSelectionChanged(n,n.pageNumber);n.formsModule.focusGained(n);if(!n.suppressInFocusEvent){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldFocusIn,n.formField.fullyQualifiedName,{formField:n.formField})}n.suppressInFocusEvent=false});$(this.editBox).focusout(function(){if(n.readonlyfield||!n.formsModule.allowFormFilling){return}$(n.editBoxContainer).css({"background-color":(n.readonlyfield)?n.fieldReadOnlyColor:n.fieldHighlightColor});n.formsModule.focusOut(n.container);n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldFocusOut,n.formField.fullyQualifiedName,{formField:n.formField})});$(this.editBox).on("click",function(i){if(n.readonlyfield||!n.formsModule.allowFormFilling){return}n.formsModule.OnWidgetSelectionChanged(n,n.pageNumber);n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldClicked,n.formField.fullyQualifiedName,{formField:n.formField});i.stopPropagation();n.viewerManager.events.dispatchAllFormEvents(b.EventNames.afterFieldClicked,n.formField.fullyQualifiedName,{formField:n.formField})});$(this.editBox).on("keydown",function(v){if(n.readonlyfield||!n.formsModule.allowFormFilling){return}var u=n.field.selectedItemIndices.length;var i=(u>0)?n.field.selectedItemIndices[u-1]:-1;if(v.keyCode==40){if(i<o.displayValues.length-1){n.updateSelectedItem(i+1);if(i!=n.field.selectedItemIndices[0]){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,n.formField.fullyQualifiedName,{formField:n.formField});n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFormModified,null,{})}}else{if(o.displayValues.length>0){n.updateSelectedItem(0);if(i!=n.field.selectedItemIndices[0]){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,n.formField.fullyQualifiedName,{formField:n.formField});n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFormModified,null,{})}}}v.preventDefault()}else{if(v.keyCode==38){if(i>0){n.updateSelectedItem(i-1);if(i!=n.field.selectedItemIndices[0]){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,n.formField.fullyQualifiedName,{formField:n.formField});n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFormModified,null,{})}}v.preventDefault()}}});$(this.editBox).on("keyup",function(u){if(!n.readonlyfield){var i=n.field.value;n.setValue($(u.target).val());if(n.field.value!=i){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,n.formField.fullyQualifiedName,{formField:n.formField});n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFormModified,null,{})}}});if(this.formsModule.allowFormFilling){var j=h*0.8;var m=document.createElement("div");$(m).addClass(this.viewerManager.fontAwesomePrefix+" fa-caret-down");$(m).css({position:"absolute",top:(h-j)/2-1,left:l-q-2,width:q,height:j,"z-index":"21",display:"block","background-color":"rgb(212,208, 200)",cursor:"default",border:"1px solid #AAA","background-position":"center","border-radius":"2px","box-shadow":"0px 1px 3px rgba(0, 0, 0, 0.1)"});$(this.editBoxContainer).append(m);$(m).on("click",function(i){n.formsModule.OnWidgetSelectionChanged(n,n.pageNumber);if(!n.readonlyfield){$(n.listBoxContainer).toggle();n.highlightItem(n.field.selectedItemIndices[0],n.listItemHoverBackgroundColor,"transparent")}i.stopPropagation()})}this.field.defaultValue=this.stripNonPrintableChars(this.field.defaultValue);if(o.displayValues!=null){var f=function(v){var u=document.createElement("div");$(u).css({width:"100%","white-space":"pre","z-index":"10",overflow:"hidden",display:"block","text-align":"left","font-size":Math.floor(o.font.sizeInPoints*g)+"pt"});$(u).on("click",function(w){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldClicked,n.formField.fullyQualifiedName,{formField:n.formField});var i=n.field.selectedItemIndices.length;var x=(i>0)?n.field.selectedItemIndices[i-1]:-1;n.updateSelectedItem(v);$(n.listBoxContainer).toggle();if(x!=n.field.selectedItemIndices[0]){n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,n.formField.fullyQualifiedName,{formField:n.formField});n.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFormModified,null,{})}w.stopPropagation();n.viewerManager.events.dispatchAllFormEvents(b.EventNames.afterFieldClicked,n.formField.fullyQualifiedName,{formField:n.formField})});o.displayValues[v]=s.stripNonPrintableChars(o.displayValues[v]);r=o.displayValues[v];$(u).text(r);if(o.selectedItemIndices[0]==v){$(s.editBox).val(r)}$(s.listBoxContainer).append(u);$(u).hover(function(){n.highlightItem(v,n.listItemHoverBackgroundColor,"transparent")})};var s=this,r;for(var k=0;k<o.displayValues.length;++k){f(k)}}if(this.field.isEditable&&this.field.value!=""){$(this.editBox).val(this.field.value)}};c.prototype.setFocus=function(f,e){if(f===void 0){f=true}if(e===void 0){e=false}this.suppressInFocusEvent=e;$(this.focusControl).focus();if(f&&this.field.isEditable){$(this.focusControl).select()}};c.prototype.OnWidgetSelectionChanged=function(f,e){if(this.field.isHidden){return}if((f!=null&&f.getField()!=this.field)||(f==null)){$(this.listBoxContainer).css({display:"none"})}};c.prototype.reset=function(){if(this.field.isHidden){return}if(this.field.isEditable){this.setValue(this.field.defaultValue)}else{if(this.field.defaultSelectedItemIndices!=null){this.setSelectedItemIndices(this.field.defaultSelectedItemIndices)}}};c.prototype.getKeyValuePair=function(f,g,h){if(f===void 0){f=false}if(g===void 0){g=false}if(h===void 0){h=false}var e=true;if(this.field.isNoExport&&!g){return null}if(g){e=true}else{if(!f){e=false}}var j=this.field.fullyQualifiedFieldName;if(!g){j=this.field.fieldName;if(this.field.fieldMappingName!=null&&this.field.fieldMappingName!=""){j=this.field.fieldMappingName}}var i=this.getValueAsString();if(e||(!e&&(i!=""))){return new b.FieldKeyValuePair(j,i)}return null};c.prototype.getValueAsString=function(){var h="";if(this.field.selectedItemIndices.length>0){for(var f=0;f<this.field.selectedItemIndices.length;f++){var e=this.field.selectedItemIndices[f];if(e>=0){if(h!=""){h+=","}if(this.field.exportValues!=null&&this.field.exportValues[e]!=null){var g=this.escapeComma(this.field.exportValues[e]);h+=g}else{if(this.field.displayValues!=null&&this.field.displayValues[e]!=null){var g=this.escapeComma(this.field.displayValues[e])}h+=g}}}}else{h=this.field.value}return h};c.prototype.getDefaultValueAsString=function(){var h="";if(this.field.selectedItemIndices.length>0){for(var f=0;f<this.field.selectedItemIndices.length;f++){var e=this.field.selectedItemIndices[f];if(e>=0){if(h!=""){h+=","}if(this.field.exportValues!=null&&this.field.exportValues[e]!=null){var g=this.escapeComma(this.field.exportValues[e]);h+=g}else{if(this.field.displayValues!=null&&this.field.displayValues[e]!=null){var g=this.escapeComma(this.field.displayValues[e])}h+=g}}}}else{h=this.field.value}return h};c.prototype.setValueAsString=function(f){var e=this.valueToSelectedIndices(f,this.field.exportValues,this.field.displayValues);if(e.length>0){this.setSelectedItemIndices(e)}else{this.setValue(f)}};c.prototype.highlightItem=function(g,j,h){for(var f=0;f<this.field.displayValues.length;++f){var e=$(this.listBoxContainer).children(":nth-child("+(f+1)+")");if(e==null){continue}if(g==f){$(e).css({"background-color":j})}else{if(h!=null){$(e).css({"background-color":h})}}}};c.prototype.setSelectedItemIndices=function(e){this.updateSelectedItem(e[0])};c.prototype.setValue=function(f){this.field.value=f;this.formField.value=f;this.field.selectedItemIndices.length=0;var e=this.field.displayValues.indexOf(f);if(e>-1){this.field.selectedItemIndices.push(e)}this.formField.selectedItemIndices=this.field.selectedItemIndices;$(this.editBox).val(f);this.formsModule.setDirtyFlag(true)};c.prototype.updateSelectedItem=function(e){var f=this.field.displayValues[e];this.formsModule.setDirtyFlag(true);this.formsModule.OnWidgetSelectionChanged(this,this.pageNumber);$(this.editBox).val(f);this.field.selectedItemIndices.length=0;this.field.selectedItemIndices.push(e);this.formField.selectedItemIndices=this.field.selectedItemIndices;this.formField.value=this.field.value};return c}(b.FormWidget));b.FormComboBoxWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){var e=d!==null&&d.apply(this,arguments)||this;e.fdContainer=null;return e}c.prototype.render=function(){var h=this;if(this.field.isHidden){return}d.prototype.render.call(this);var j=this.field;if(j.isReadonly){this.readonlyfield=true}var f=this.zoomFactor;var e=(j.rectangle.width)*f;var l=(j.rectangle.height)*f;var g=j.rectangle.left*f;var i=j.rectangle.top*f;this.fdContainer=document.createElement("div");this.focusControl=this.fdContainer;this.resCV=document.createElement("canvas");$(this.fdContainer).attr({"class":"git_formField",tabindex:this.tabIndex});var k=(j.isReadonly)?this.fieldReadOnlyColor:this.fieldHighlightColor;if(!this.formsModule.allowFormFilling){k="transparent"}$(this.fdContainer).css({position:"absolute","float":"top",left:g,top:i,width:e,height:l,"z-index":"20",display:"block","background-color":k,padding:0,margin:0,color:"black",cursor:"default",outline:this.borderWidth*f+"px solid "+this.borderColor});$(this.focusControl).focusin(function(){if(j.isReadonly||!h.formsModule.allowFormFilling){return}h.formsModule.OnWidgetSelectionChanged(h,h.pageNumber);$(h.fdContainer).css({"background-color":h.fieldFocusColor});h.formsModule.focusGained(h);if(!h.suppressInFocusEvent){h.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldFocusIn,h.formField.fullyQualifiedName,{formField:h.formField})}h.suppressInFocusEvent=false});$(this.focusControl).focusout(function(){if(j.isReadonly||!h.formsModule.allowFormFilling){return}h.formsModule.focusOut(h.container);h.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldFocusOut,h.formField.fullyQualifiedName,{formField:h.formField})});$(this.fdContainer).keypress(function(o){if(j.isReadonly||!h.formsModule.allowFormFilling){return}var n=o.keyCode?o.keyCode:o.which;if(n==13||n==32){h.toggleState();o.preventDefault()}});$(this.fdContainer).on("mousedown",function(n){if(j.isReadonly||!h.formsModule.allowFormFilling){return}if(h.field.aaMouseDownJavaScript.length>0){h.formsModule.executeJavaScript(h.field.aaMouseDownJavaScript)}n.preventDefault();n.stopPropagation()});$(this.fdContainer).on("mouseup",function(n){if(j.isReadonly||!h.formsModule.allowFormFilling){return}if(h.field.aaMouseUpJavaScript.length>0){h.formsModule.executeJavaScript(h.field.aaMouseUpJavaScript)}n.preventDefault();n.stopPropagation()});$(this.fdContainer).on("click",function(n){if(j.isReadonly||!h.formsModule.allowFormFilling){return}h.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldClicked,h.formField.fullyQualifiedName,{formField:h.formField});h.toggleState();h.formsModule.focusGained(h);n.preventDefault();n.stopPropagation();h.viewerManager.events.dispatchAllFormEvents(b.EventNames.afterFieldClicked,h.formField.fullyQualifiedName,{formField:h.formField})});var m=document.createElement("div");$(m).css({position:"absolute",left:0,top:0,width:e,height:l,display:"block",overflow:"hidden"});$(this.fdContainer).append(m);$(this.container).append(this.fdContainer);$(this.resCV).addClass("git_check_canvas");this.resCV.width=e;this.resCV.height=l;$(this.resCV).css({position:"absolute","float":"top",left:0,top:0,padding:"0","z-index":"2021",display:"none"});if(j.isChecked){j.value=j.exportValue;$(this.resCV).css({display:"block"})}this.drawTick(e,l,this.resCV);$(m).append(this.resCV);if(j.alternateName!=null&&j.alternateName!=""){$(m).attr({title:j.alternateName})}};c.prototype.getValueAsString=function(){if(!this.field.isChecked){return"Off"}if(this.field.exportValue!=null){return this.field.exportValue}return this.field.fieldName};c.prototype.getDefaultValueAsString=function(){if(!this.field.isChecked){return"Off"}if(this.field.exportValue!=null){return this.field.exportValue}return this.field.fieldName};c.prototype.setValueAsString=function(f){var e=(this.field.exportValue!=null&&this.field.exportValue==f);if(!e){e=(this.field.fieldName==f)}this.setChecked(e)};c.prototype.getKeyValuePair=function(e,f,g){if(e===void 0){e=false}if(f===void 0){f=false}if(g===void 0){g=false}if(this.field.isNoExport&&!f){return null}if(!f&&!this.field.isChecked){return null}var h=this.field.fullyQualifiedFieldName;var i=this.getValueAsString();if(!f){h=this.field.fieldName;if(this.field.fieldMappingName!=null&&this.field.fieldMappingName!=""){h=this.field.fieldMappingName}}return new b.FieldKeyValuePair(h,i)};c.prototype.reset=function(){if(this.field.isHidden){return}this.field.value=this.field.defaultValue;if(this.field.defaultValue==null||this.field.defaultValue.trim()==""||this.field.defaultValue.toUpperCase()=="FALSE"||this.field.defaultValue.toUpperCase()=="OFF"){this.setChecked(false)}else{this.setChecked(true)}};c.prototype.setFocus=function(f,e){if(f===void 0){f=true}if(e===void 0){e=false}if(this.readonlyfield){return}this.suppressInFocusEvent=e;$(this.focusControl).focus()};c.prototype.OnWidgetSelectionChanged=function(g,e){if(this.readonlyfield){return}if(this.field.isHidden){return}if((g!=null&&g.getField()!=this.field)||(g==null)){var f=(this.readonlyfield)?this.fieldReadOnlyColor:this.fieldHighlightColor;if(!this.formsModule.allowFormFilling){f="tranparent"}$(this.fdContainer).css({"background-color":f})}};c.prototype.setChecked=function(e){if(this.field.isChecked==e){return}var f=$(this.resCV);if(e){f.css({display:"block"});this.field.isChecked=true;this.formField.isChecked=true;this.field.value=this.field.exportValue}else{f.css({display:"none"});this.field.isChecked=false;this.formField.isChecked=false;this.field.value=this.field.defaultValue}this.formsModule.setDirtyFlag(true);this.formsModule.updateOtherFields(this)};c.prototype.toggleState=function(){this.setChecked(!this.field.isChecked);this.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,this.formField.fullyQualifiedName,{formField:this.formField});this.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFormModified,null,{})};return c}(b.FormWidget));b.FormCheckBoxWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){var e=d!==null&&d.apply(this,arguments)||this;e.focusControl=null;e.radioGroupContainer=null;return e}c.prototype.render=function(){var q=this;if(this.field.isHidden){return}d.prototype.render.call(this);var g=this.field;if(g.isReadonly||!this.formsModule.allowFormFilling){this.readonlyfield=true}var m=1;var k=this.viewerManager.zoomFactor*m;this.formField.selectedRadioButtonIndex=this.field.selectedItemIndex;this.radioGroupContainer=document.createElement("div");$(this.radioGroupContainer).css({position:"absolute",top:"0px",left:"0px","z-index":"20"});$(this.container).append(this.radioGroupContainer);if(g.alternateName!=null&&g.alternateName!=""){$(this.radioGroupContainer).attr({title:g.alternateName})}var t=function(x){u=g.radioItems[x];n=g.radioItems[x].rectangle.top*k;h=g.radioItems[x].rectangle.left*k;p=g.radioItems[x].rectangle.width*k;o=g.radioItems[x].rectangle.height*k;e=g.radioItems[x].borderColor;w=g.radioItems[x].borderWidth;if(e==null){e="#FFFFFF"}if(g.isRequired&&!v.readonlyfield){e="#FF0000";if(w<1){w=1}}w=w*k;if(u.pageNumber==v.pageNumber){var y=document.createElement("div");$(y).attr({"class":"git_formField",tabindex:v.tabIndex,"data-index":x});j=(v.readonlyfield)?v.fieldReadOnlyColor:v.fieldHighlightColor;if(!v.formsModule.allowFormFilling){j="transparent"}$(y).css({position:"absolute","float":"top",top:n,left:h,width:p,height:o,"z-index":"20",display:"block","background-color":j,color:"black",cursor:"default",outline:w+"px solid "+e});$(y).focusin(function(){if(q.readonlyfield){return}$(y).css({"background-color":q.fieldFocusColor});q.formsModule.OnWidgetSelectionChanged(q,q.pageNumber);q.formsModule.focusGained(q,x);if(!q.suppressInFocusEvent){q.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldFocusIn,q.formField.fullyQualifiedName,{formField:q.formField})}q.suppressInFocusEvent=false});$(y).focusout(function(){if(q.readonlyfield){return}$(y).css({"background-color":(q.readonlyfield)?q.fieldReadOnlyColor:q.fieldHighlightColor});q.formsModule.focusOut(q.container);q.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldFocusOut,q.formField.fullyQualifiedName,{formField:q.formField})});$(y).keydown(function(A){if(q.readonlyfield){return}if((A.keyCode==13||A.keyCode==32)&&!q.readonlyfield){var z=q.setSelectedRadioButton(x);if(z||!q.field.isRadioNoToggleToOff){q.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,q.formField.fullyQualifiedName,{formField:q.formField});q.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFormModified,null,{})}q.performAction(u);A.preventDefault()}else{if(A.keyCode==37){if(x>0){var B=$(q.radioGroupContainer).children("div:nth-child("+x+")");$(B).focus()}}else{if(A.keyCode==39){if(x<g.radioItems.length-1){var i=$(q.radioGroupContainer).children("div:nth-child("+(x+2)+")");$(i).focus()}}}}});$(y).on("click",function(z){if(q.readonlyfield){return}q.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldClicked,q.formField.fullyQualifiedName,{formField:q.formField});q.formsModule.OnWidgetSelectionChanged(q,q.pageNumber);var i=q.setSelectedRadioButton(x);if(i||!q.field.isRadioNoToggleToOff){q.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,q.formField.fullyQualifiedName,{formField:q.formField});q.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFormModified,null,{})}q.performAction(u);z.stopPropagation();q.viewerManager.events.dispatchAllFormEvents(b.EventNames.afterFieldClicked,q.formField.fullyQualifiedName,{formField:q.formField})});l=false;if(g.selectedItemIndex!=-1){f=g.radioItems[v.field.selectedItemIndex];if(g.selectedItemIndex==x||(g.isRadioInUnison&&(u.exportValue==f.exportValue))){v.focusControl=y;l=true}}s=document.createElement("canvas");$(s).addClass("git_radio_canvas_tick");s.width=p;s.height=o;$(s).css({position:"absolute","float":"top",left:0,top:0,padding:"0","z-index":"2022",display:l?"block":"none"});if(g.isSimulated){v.drawTick(p,o,s)}else{$(y).css({"border-radius":"50%"});v.drawCircle(p,o,k,s)}if(x==0||l){v.focusControl=y}$(y).append(s);$(v.radioGroupContainer).append(y)}};var v=this,u,n,h,p,o,e,w,j,l,f,s;for(var r=0;r<g.radioItems.length;r++){t(r)}};c.prototype.setSelectedRadioButton=function(h,q){if(q===void 0){q=false}if(h<0&&!this.field.isRadioNoToggleToOff){$(this.radioGroupContainer).find("canvas.git_radio_canvas_tick").css({display:"none"});this.field.selectedItemIndex=this.formField.selectedRadioButtonIndex=-1;this.formsModule.setDirtyFlag(true);return true}var v=$(this.radioGroupContainer).find("[data-index="+h+"]");if(v.length<1){return false}if(!q&&this.field.isRadioNoToggleToOff&&h==this.field.selectedItemIndex){return false}this.formsModule.setDirtyFlag(true);for(var m=0;m<this.field.radioItems.length;m++){if(this.pageNumber!=this.field.radioItems[m].pageNumber){var s=this.formsModule.formWidgets[this.field.radioItems[m].pageNumber];if(s!=null){for(var l=0;l<s.length;l++){var p=s[l];var e=p.getFieldName();if(this.fieldName==e){$(p.radioGroupContainer).find("canvas.git_radio_canvas_tick").css({display:"none"});var u=p.getField();u.selectedItemIndex=h}}}}}$(this.radioGroupContainer).find("canvas.git_radio_canvas_tick").css({display:"none"});var f=this.field.radioItems[h];if(!this.field.isRadioNoToggleToOff&&h==this.field.selectedItemIndex){this.field.selectedItemIndex=this.formField.selectedRadioButtonIndex=-1;return true}v.find("canvas.git_radio_canvas_tick").css({display:"block"});if(this.field.isRadioInUnison){for(var o=0;o<this.field.radioItems.length;++o){var t=this.field.radioItems[o];if(o!=h&&t.exportValue==f.exportValue){var g=o+1;var r=$(this.radioGroupContainer).children("div:nth-child("+g+")");r.find("canvas.git_radio_canvas_tick").css({display:"block"});this.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldChanged,t.fullyQualifiedFieldName,{formField:this.formField})}}}this.field.selectedItemIndex=this.formField.selectedRadioButtonIndex=h;return true};c.prototype.reset=function(){if(this.field.isHidden){return}if(this.field.defaultSelectedItemIndex!=null){this.setSelectedRadioButton(this.field.defaultSelectedItemIndex)}this.field.value=this.field.defaultValue};c.prototype.getKeyValuePair=function(e,f,j){if(e===void 0){e=false}if(f===void 0){f=false}if(j===void 0){j=false}var h=this.field.selectedItemIndex;if(this.field.isNoExport&&!f){return null}if(!f&&h==-1){return null}var g=this;if(h>=0){var k=this.field.radioItems[h].fullyQualifiedFieldName;if(!f){k=this.field.fieldName;if(this.field.fieldMappingName!=null&&this.field.fieldMappingName!=""){k=this.field.fieldMappingName}}var l=this.field.fieldName;if(this.field.radioItems[h].exportValue!=null&&this.field.radioItems[h].exportValue!=""){l=this.field.radioItems[h].exportValue}return new b.FieldKeyValuePair(k,l)}return null};c.prototype.setFocus=function(f,e){if(f===void 0){f=true}if(e===void 0){e=false}if(this.focusControl!=null){this.suppressInFocusEvent=e;$(this.focusControl).focus()}};c.prototype.setValueAsString=function(h){var f=-1;var g=this.formField;for(var e=0;e<g.radioButtons.length;++e){if(g.radioButtons[e].exportValue==h){f=e;break}}if(f==-1){for(var e=0;e<g.radioButtons.length;++e){if(g.radioButtons[e].fullyQualifiedName==h){f=e;break}}}if(f!=-1){this.setSelectedRadioButton(f)}};c.prototype.getValueAsString=function(){var f="";var e=this.field.selectedItemIndex;if(e>=0){f=this.field.radioItems[e].fieldName}return f};c.prototype.getDefaultValueAsString=function(){var f="";var e=this.field.selectedItemIndex;if(e>=0){f=this.field.radioItems[e].fieldName}return f};return c}(b.FormWidget));b.FormRadioGroupWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){var e=d!==null&&d.apply(this,arguments)||this;e.fdBtn=null;return e}c.prototype.render=function(){var g=this;if(this.field.isHidden){return}d.prototype.render.call(this);var f=this.field;if(f.isReadonly||!this.formsModule.allowFormFilling){this.readonlyfield=true}var e=this.zoomFactor;this.fdBtn=document.createElement("button");$(this.fdBtn).attr({"class":"git_formField_pushButton"});$(this.fdBtn).css({position:"absolute",left:f.rectangle.left*e,top:f.rectangle.top*e,width:f.rectangle.width*e,height:f.rectangle.height*e,display:"block",color:f.fontColor,"background-color":f.backgroundColor,"z-index":"20",margin:"0px",padding:"0px","font-family":f.font.fallbackFontName,"font-size":Math.floor(f.font.sizeInPoints*e)+"pt",cursor:"pointer","border-width ":f.borderWidth*e+"px","border-style":"outset","border-color":f.borderColor,overflow:"hidden"});if(this.readonlyfield){$(this.fdBtn).attr({disabled:"disabled"});$(this.fdBtn).css({cursor:"normal"})}if(f.alternateName!=null&&f.alternateName!=""){$(this.fdBtn).attr({title:f.alternateName})}$(this.fdBtn).text(f.normalCaption);$(this.fdBtn).hover(function(){if(g.readonlyfield){return}if(g.field.rolloverCaption!=null&&g.field.rolloverCaption!=""){$(g.fdBtn).text(g.field.rolloverCaption)}return false},function(){if(g.field.normalCaption!=null&&g.field.normalCaption!=""){$(g.fdBtn).text(g.field.normalCaption)}return false});$(this.fdBtn).mousedown(function(){if(g.readonlyfield){return}$(g.fdBtn).focus();if(g.field.downCaption!=null&&g.field.downCaption!=""){$(g.fdBtn).text(g.field.downCaption)}return false});$(this.fdBtn).mouseup(function(){if(g.readonlyfield){return}$(g.fdBtn).text(g.field.normalCaption);return false});$(this.fdBtn).focusin(function(){if(g.readonlyfield){return}g.formsModule.OnWidgetSelectionChanged(g,g.pageNumber);if(!g.field.isReadonly){g.formsModule.focusGained(g)}if(!g.suppressInFocusEvent){g.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldFocusIn,g.formField.fullyQualifiedName,{formField:g.formField})}g.suppressInFocusEvent=false;return false});$(this.fdBtn).focusout(function(){if(g.readonlyfield){return}g.formsModule.focusOut(g.container);g.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldFocusOut,g.formField.fullyQualifiedName,{formField:g.formField});return false});$(this.fdBtn).click(function(){if(g.readonlyfield){return}g.viewerManager.events.dispatchAllFormEvents(b.EventNames.onFieldClicked,g.formField.fullyQualifiedName,{formField:g.formField});g.performAction(g.formField);g.viewerManager.events.dispatchAllFormEvents(b.EventNames.afterFieldClicked,g.formField.fullyQualifiedName,{formField:g.formField});return false});$(this.container).append(this.fdBtn)};c.prototype.setFocus=function(f,e){if(f===void 0){f=true}if(e===void 0){e=false}this.suppressInFocusEvent=e;$(this.fdBtn).focus()};c.prototype.appendDataforPost=function(e){};c.prototype.getDataforSubmit=function(){return""};c.prototype.getValueAsString=function(){return""};c.prototype.getDefaultValueAsString=function(){return""};c.prototype.setValueAsString=function(e){};c.prototype.getKeyValuePair=function(e,f,g){if(e===void 0){e=false}if(f===void 0){f=false}if(g===void 0){g=false}return null};return c}(b.FormWidget));b.FormPushButtonWidget=a})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(c){__extends(d,c);function d(){var e=c!==null&&c.apply(this,arguments)||this;e.listBoxContainer=null;e.listBoxContainerScrollPane=null;e.cntrlIsPressed=false;e.currentSelectedIndex=-1;return e}d.prototype.render=function(){var m=this;if(this.field.isHidden){return}c.prototype.render.call(this);var l=this.field;if(l.isReadonly||!this.formsModule.allowFormFilling){this.readonlyfield=true}var j=this.zoomFactor;this.listBoxContainer=document.createElement("div");this.formField.selectedItemIndices=l.selectedItemIndices;this.focusControl=this.listBoxContainer;$(this.listBoxContainer).attr({"class":"git_formField",tabindex:this.tabIndex});var f=(this.readonlyfield)?this.fieldReadOnlyColor:this.fieldHighlightColor;if(!this.formsModule.allowFormFilling){f="transparent"}$(this.listBoxContainer).css({position:"absolute","float":"top",left:(l.rectangle.left)*j,top:(l.rectangle.top)*j,width:l.rectangle.width*j,height:l.rectangle.height*j,"z-index":"20",display:"block","background-color":f,color:l.fontColor,outline:this.borderWidth*j+"px solid "+this.borderColor});$(this.listBoxContainer).focusin(function(){if(m.readonlyfield){return}m.formsModule.OnWidgetSelectionChanged(m,m.pageNumber);$(m.listBoxContainer).css({"background-color":m.fieldFocusColor});m.formsModule.focusGained(m);if(!m.suppressInFocusEvent){m.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldFocusIn,m.formField.fullyQualifiedName,{formField:m.formField})}m.suppressInFocusEvent=false});$(this.listBoxContainer).focusout(function(){if(m.readonlyfield){return}$(m.listBoxContainer).css({"background-color":(m.readonlyfield)?m.fieldReadOnlyColor:m.fieldHighlightColor});m.formsModule.focusOut(m.container);m.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldFocusOut,m.formField.fullyQualifiedName,{formField:m.formField})});$(this.listBoxContainer).keydown(function(i){if(m.readonlyfield){return}if(i.keyCode==17){m.cntrlIsPressed=true}else{if(i.keyCode==40){if(m.currentSelectedIndex<l.displayValues.length-1){m.addToSelectedIndiciesAndHighlight(m.currentSelectedIndex+1);m.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,m.formField.fullyQualifiedName,{formField:m.formField});m.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}else{if(m.currentSelectedIndex==-1){m.addToSelectedIndiciesAndHighlight(0);m.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,m.formField.fullyQualifiedName,{formField:m.formField});m.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}}i.preventDefault()}else{if(i.keyCode==38){if(m.currentSelectedIndex>0){m.addToSelectedIndiciesAndHighlight(m.currentSelectedIndex-1);m.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,m.formField.fullyQualifiedName,{formField:m.formField});m.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}else{if(m.currentSelectedIndex==-1){m.addToSelectedIndiciesAndHighlight(0);m.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,m.formField.fullyQualifiedName,{formField:m.formField});m.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}}i.preventDefault()}}}});$(this.listBoxContainer).keyup(function(i){if(m.readonlyfield){return}if(i.keyCode==17){m.cntrlIsPressed=false}});if(l.alternateName!=null&&l.alternateName!=""){$(this.listBoxContainer).attr({title:l.alternateName})}$(this.container).append(this.listBoxContainer);this.listBoxContainerScrollPane=document.createElement("div");$(this.listBoxContainerScrollPane).css({position:"absolute","float":"top",left:0,top:0,width:"100%",height:"100%","z-index":"2",display:"block",overflow:"auto",cursor:"default","background-color":"transparent"});this.field.defaultValue=this.stripNonPrintableChars(this.field.defaultValue);if(l.displayValues!=null){var k=function(n){e=document.createElement("div");$(e).attr({"class":"git_listChild"});$(e).css({width:"100%","white-space":"pre","z-index":"10",overflow:"hidden",display:"block","text-align":"left","background-color":"transparent","font-size":Math.floor(l.font.sizeInPoints*j)+"pt"});l.displayValues[n]=h.stripNonPrintableChars(l.displayValues[n]);$(e).text(l.displayValues[n]);$(h.listBoxContainerScrollPane).append(e);$(e).on("click",function(i){m.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldClicked,m.formField.fullyQualifiedName,{formField:m.formField});if(!m.readonlyfield){m.addToSelectedIndiciesAndHighlight(n);m.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFieldChanged,m.formField.fullyQualifiedName,{formField:m.formField});m.viewerManager.events.dispatchAllFormEvents(a.EventNames.onFormModified,null,{})}i.stopPropagation();m.viewerManager.events.dispatchAllFormEvents(a.EventNames.afterFieldClicked,m.formField.fullyQualifiedName,{formField:m.formField})})};var h=this,e;for(var g=0;g<l.displayValues.length;g++){k(g)}}this.highlightSelectedItems();$(this.listBoxContainer).append(this.listBoxContainerScrollPane)};d.prototype.setFocus=function(f,e){if(f===void 0){f=true}if(e===void 0){e=false}this.suppressInFocusEvent=e;$(this.focusControl).focus()};d.prototype.reset=function(){if(this.field.isHidden){return}if(this.field.defaultSelectedItemIndices!=null){this.setSelectedItemIndices(this.field.defaultSelectedItemIndices)}this.field.value=this.field.defaultValue};d.prototype.getKeyValuePair=function(h,i,j){if(h===void 0){h=false}if(i===void 0){i=false}if(j===void 0){j=false}var g=true;if(this.field.isNoExport&&!i){return null}if(i){g=true}else{if(!h){g=false}}var f=this;var k=this.field.fullyQualifiedFieldName;if(!i){k=this.field.fieldName;if(this.field.fieldMappingName!=null&&this.field.fieldMappingName!=""){k=this.field.fieldMappingName}}var e=f.getValueAsString();if(g||(!g&&(e!=""))){return new a.FieldKeyValuePair(k,e)}return null};d.prototype.setSelectedItemIndices=function(e){this.field.selectedItemIndices=e;this.formField.selectedItemIndices=e;this.highlightSelectedItems();this.formsModule.setDirtyFlag(true)};d.prototype.getValueAsString=function(){var h="";for(var f=0;f<this.field.selectedItemIndices.length;f++){var e=this.field.selectedItemIndices[f];if(e>=0){if(h!=""){h+=","}if(this.field.exportValues!=null&&this.field.exportValues[e]!=null){var g=this.escapeComma(this.field.exportValues[e]);h+=g}else{var g=this.escapeComma(this.field.displayValues[e]);h+=g}}}return h};d.prototype.getDefaultValueAsString=function(){var h="";for(var f=0;f<this.field.selectedItemIndices.length;f++){var e=this.field.selectedItemIndices[f];if(e>=0){if(h!=""){h+=","}if(this.field.exportValues!=null&&this.field.exportValues[e]!=null){var g=this.escapeComma(this.field.exportValues[e]);h+=g}else{var g=this.escapeComma(this.field.displayValues[e]);h+=g}}}return h};d.prototype.setValueAsString=function(f){var e=this.valueToSelectedIndices(f,this.field.exportValues,this.field.displayValues);this.setSelectedItemIndices(e)};d.prototype.highlightSelectedItems=function(){var g=this.field.selectedItemIndices;$(this.listBoxContainer).find(".git_listChild").css({"background-color":"transparent"});for(var e=0;e<g.length;++e){var f=$(this.listBoxContainerScrollPane).children(":nth-child("+(g[e]+1)+")");f.css({"background-color":this.listItemHoverBackgroundColor})}};d.prototype.addToSelectedIndiciesAndHighlight=function(e){if(e<0||e>=this.field.displayValues.length){return}this.formsModule.setDirtyFlag(true);this.formsModule.OnWidgetSelectionChanged(this,this.pageNumber);if(!this.cntrlIsPressed||!this.field.isMultiselect){this.field.selectedItemIndices.length=0;this.field.selectedItemIndices.push(e);this.currentSelectedIndex=e}else{if(this.field.isMultiselect){this.currentSelectedIndex=e;var l=this.field.selectedItemIndices.indexOf(e);if(l!=-1){this.field.selectedItemIndices.splice(l,1);if(this.field.selectedItemIndices.length<1){this.currentSelectedIndex=-1}}else{this.field.selectedItemIndices.push(e)}}}this.formField.selectedItemIndices=this.field.selectedItemIndices;var g=e+1;var h=$(this.listBoxContainerScrollPane).children(":nth-child("+g+")");var i=h.position().top;var j=$(this.listBoxContainerScrollPane).scrollTop();if(i<0){$(this.listBoxContainerScrollPane).scrollTop(j-Math.abs(i))}var m=i+j;var f=m+h.height();var k=f-(j+$(this.listBoxContainer).height());if(k>0){$(this.listBoxContainerScrollPane).scrollTop(j+k)}this.highlightSelectedItems()};return d}(a.FormWidget));a.FormListBoxWidget=b})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(){function e(){this.zoomFactor=1;this.rotationAngle=0}return e}());var d;(function(e){e[e.File_Attachment=1]="File_Attachment";e[e.Free_Text=2]="Free_Text";e[e.Ink=4]="Ink";e[e.Line=8]="Line";e[e.Markup=16]="Markup";e[e.Polyline=32]="Polyline";e[e.Polygon=64]="Polygon";e[e.Popup=128]="Popup";e[e.Stamp=256]="Stamp";e[e.Text=512]="Text";e[e.Link=1024]="Link";e[e.Caret=2048]="Caret";e[e.Square=4096]="Square";e[e.Circle=8192]="Circle";e[e.Widget=16384]="Widget";e[e.Watermark=32768]="Watermark";e[e.All=1073741823]="All"})(d||(d={}));var c=(function(e){__extends(f,e);function f(){var g=e.call(this)||this;g.description="AnnotsModule";g.allowCommenting=true;g.userName="Anonymous";g.annotsData=new Array();g.annotsWidgets=new Array();g.fdViewState=new Array();g.fdRenderingState=new Array();g.documentContainsAnnots=true;g.documentSupportAnnots=false;g.containsNewAnnots=false;g.isDraggingStarted=false;g.focusRectLeft=null;g.focusRectTop=null;g.focusRectRight=null;g.focusRectBottom=null;g.lastFocusRectContainer=null;g.focusRectLeftOnHover=null;g.focusRectTopOnHover=null;g.focusRectRightOnHover=null;g.focusRectBottomOnHover=null;g.lastFocusRectContainerOnHover=null;g.lastFocusedAnnotWidget=null;g.contextMenu=null;g.isDirty=false;g.popupPaneOldWIdth=15;g.isCollapsedControl=false;g.deletedAnnoteWidgetsStack=new Array();g.onAfterSave=function(j,i){g.resetModule();if(i.IsDirty){for(var h=1;h<=j.pageCount;h++){g.clearAnnots(h);g.fdRenderingState[h]=false}g.annotsData=new Array();g.fdViewState=new Array();g.fdRenderingState=new Array();for(var h=1;h<=j.pageCount;h++){g.annotsData[h]=i.ServerDocumentChanges.updatedAnnots[h-1];g.fdViewState[h]=new a();g.fdViewState[h].rotationAngle=g.viewerManager.rotationAngle;g.fdViewState[h].zoomFactor=g.viewerManager.zoomFactor;g.fdRenderingState[h]=false;g.renderAnnots(i.ServerDocumentChanges.updatedAnnots[h-1],h)}}};g.onBeforeSave=function(h,q){if(!g.documentContainsAnnots&&!g.allowCommenting){return}g.deletedAnnoteWidgetsStack.length=0;var m=new Array();for(var p=1;p<=g.viewerManager.pageCount;p++){var j=g.annotsData[p];var o=g.annotsWidgets[p];if(o!=null){for(var k=0;k<o.length;k++){var l=o[k];var n=l.getKeyValPair();if(n!=null){m.push(n)}}}}g.isDirty=false;if(m.length>0){return{module:"annotations",value:m}}return null};g.onAfterDocumentLoad=function(h){g.resetModule()};g.onDocumentInfoRetrived=function(h){g.documentContainsAnnots=false;g.documentSupportAnnots=false;g.userName=h.viewerManager.userName;if(h.mimeType==b.MimeTypes.PDF&&h.containsAnnots==true){g.documentContainsAnnots=true}if(h.mimeType==b.MimeTypes.PDF){g.documentSupportAnnots=true}g.allowCommenting=h.allowCommenting;g.resetModule();if(g.documentContainsAnnots||g.allowCommenting){g.focusRectLeft=document.createElement("div");$(g.focusRectLeft).attr({"class":"git_annots git_annot_focus git-annot-focus-rect git-annot-focus-rect-left "});$(g.focusRectLeft).css({display:"none"});g.focusRectTop=document.createElement("div");$(g.focusRectTop).attr({"class":"git_annots git_annot_focus git-annot-focus-rect git-annot-focus-rect-top"});$(g.focusRectTop).css({display:"none"});g.focusRectRight=document.createElement("div");$(g.focusRectRight).attr({"class":"git_annots git_annot_focus git-annot-focus-rect git-annot-focus-rect-right"});$(g.focusRectRight).css({display:"none"});g.focusRectBottom=document.createElement("div");$(g.focusRectBottom).attr({"class":"git_annots git_annot_focus git-annot-focus-rect git-annot-focus-rect-bottom"});$(g.focusRectBottom).css({display:"none"});g.focusRectLeftOnHover=document.createElement("div");$(g.focusRectLeftOnHover).attr({"class":"git_annots git_annot_hover git-annot-focus-rect git-annot-focus-rect-left"});$(g.focusRectLeftOnHover).css({display:"none"});g.focusRectTopOnHover=document.createElement("div");$(g.focusRectTopOnHover).attr({"class":"git_annots git_annot_hover git-annot-focus-rect git-annot-focus-rect-top"});$(g.focusRectTopOnHover).css({display:"none"});g.focusRectRightOnHover=document.createElement("div");$(g.focusRectRightOnHover).attr({"class":"git_annots git_annot_hover git-annot-focus-rect git-annot-focus-rect-right"});$(g.focusRectRightOnHover).css({display:"none"});g.focusRectBottomOnHover=document.createElement("div");$(g.focusRectBottomOnHover).attr({"class":"git_annots git_annot_hover git-annot-focus-rect git-annot-focus-rect-bottom"});$(g.focusRectBottomOnHover).css({display:"none"})}};g.onPageCreated=function(h){if(!g.documentContainsAnnots&&!g.allowCommenting){return}g.focusGained(g.lastFocusedAnnotWidget);g.hoverOut()};g.onPageRendered=function(j){if(!g.documentContainsAnnots&&!g.allowCommenting){return}var h=$("#"+g.viewerManager.documentId+j.pageNumber);g.createAnnotParentContainerAndAddRightClickMenu($(h).get(0),j.pageNumber);var k=g.viewerManager.documentUri;var i=g.viewerManager.password;if(g.annotsData[j.pageNumber]==null){g.annotsData[j.pageNumber]={};g.serverCom.getPageAnnots(k,i,j.pageNumber).done(function(l){g.annotsData[j.pageNumber]=l;g.fdViewState[j.pageNumber]=new a();g.fdViewState[j.pageNumber].rotationAngle=g.viewerManager.rotationAngle;g.fdViewState[j.pageNumber].zoomFactor=g.viewerManager.zoomFactor;g.fdRenderingState[j.pageNumber]=false;g.renderAnnots(l,j.pageNumber)})}else{if(g.fdViewState[j.pageNumber]!=null){g.renderAnnots(g.annotsData[j.pageNumber],j.pageNumber)}}};g.onPageReRendered=function(i){if(!g.documentContainsAnnots&&!g.allowCommenting){return}var h=$("#"+g.viewerManager.documentId+i.pageNumber);g.createAnnotParentContainerAndAddRightClickMenu($(h).get(0),i.pageNumber);g.onPageRendered(i);g.hoverOut();g.focusOut();$(g.viewerManager.viewerDOM.viewableArea).find(".git_annots_popup").css({display:"none"});if(g.lastFocusedAnnotWidget!=null){if(g.lastFocusedAnnotWidget.pageNumber==i.pageNumber){g.focusGained(g.lastFocusedAnnotWidget);if(g.lastFocusedAnnotWidget!=null&&g.lastFocusedAnnotWidget.isPopupOpen){g.lastFocusedAnnotWidget.showPopup()}}}};g.insertNewNoteAnnot=function(k,h,n){if(!g.allowCommenting){return}var j=g.getPageNumberFromParentPanelID(k);var l=g.guid();var m={title:g.userName,subject:"",name:l,content:"",annotType:d.Text,rectangle:{left:Math.round(h/g.viewerManager.zoomFactor),top:Math.round(n/g.viewerManager.zoomFactor),width:24,height:24},isLocked:false,tag:l,time:new Date().toUTCString(),popupAnnot:{title:"",subject:"",content:"",annotType:d.Popup,rectangle:{left:Math.round(h/g.viewerManager.zoomFactor)+50,top:Math.round(n/g.viewerManager.zoomFactor),width:240,height:200},isLocked:false,comments:[]},isNew:true};var i=new b.NoteAnnotWidget(k,j,-1,m,null,g,g.viewerManager);i.render();if(g.annotsWidgets[j]==null){g.annotsWidgets[j]=new Array()}if(g.annotsData[j]==null){g.annotsData[j]=new Array()}g.annotsWidgets[j].push(i);g.annotsData[j].push(m);g.hideOtherPopups(i);g.focusGained(i);i.showPopup();g.containsNewAnnots=true};g.contextMenu=b.RightClickMenuManager.getRightClickMenuManager().getRightClickMenu();return g}f.prototype.initialize=function(g,i){var h=this;e.prototype.initialize.call(this,g,i);this.contextMenu.AddContextMenuItem("Add Sticky Note",this.insertNewNoteAnnot);$(g.viewerDOM.viewer).keydown(function(j){if(h.documentContainsAnnots||(h.allowCommenting&&h.documentSupportAnnots)){if(j.keyCode==46&&h.lastFocusedAnnotWidget!=null&&!h.lastFocusedAnnotWidget.isRightClickMenuOpen){h.lastFocusedAnnotWidget.deleteAnnotation()}}});$(g.viewerDOM.viewer).keydown(function(k){if(h.documentContainsAnnots||(h.allowCommenting&&h.documentSupportAnnots)){if(k.keyCode==90&&k.ctrlKey){if(h.deletedAnnoteWidgetsStack.length>0){var j=h.deletedAnnoteWidgetsStack.pop();j.annot.isDeleted=false;j.show()}}}})};f.prototype.hasPaneToolbar=function(){return(this.documentContainsAnnots||(this.allowCommenting&&this.documentSupportAnnots))};f.prototype.pushDeletedWidgetToUndoQueue=function(g){this.deletedAnnoteWidgetsStack.push(g)};f.prototype.createPaneToolbarView=function(){this.createAnnotationPopupPaneView();return this.popupPane};f.prototype.registerPaneEvents=function(h){var g=this;h.addEventListener("PaneToggle",function(i){if(i.isCollapsed){if(g.lastFocusedAnnotWidget!=null&&g.lastFocusedAnnotWidget.isPopupOpen){g.lastFocusedAnnotWidget.hidePopup()}g.isCollapsedControl=true}else{if(g.isCollapsedControl&&g.lastFocusedAnnotWidget!=null){g.lastFocusedAnnotWidget.showPopup();g.isCollapsedControl=false}}})};f.prototype.setDirtyFlag=function(g){this.isDirty=g};f.prototype.removeLastFocusRect=function(){if(this.lastFocusRectContainer!=null){$(this.lastFocusRectContainer).remove(".git_annot_hover");this.lastFocusRectContainer=null}};f.prototype.focusGained=function(g,r){if(r===void 0){r=true}if(g==null){return}this.removeLastFocusRect();var h=g.container;this.lastFocusRectContainer=h;var l=this.viewerManager.zoomFactor;var m=(g.annot.rectangle.left-2)*l;var o=(g.annot.rectangle.top-2)*l;var j=(g.annot.rectangle.width+2)*l;var s=(g.annot.rectangle.height+2)*l;if(g instanceof b.NoteAnnotWidget){j=(g.annot.rectangle.width+2);s=(g.annot.rectangle.height+2)}var k=this.focusRectLeft;var n=this.focusRectTop;var i=this.focusRectRight;var p=this.focusRectBottom;var q="blue";if(!r){if(this.isDraggingStarted){return}k=this.focusRectLeftOnHover;n=this.focusRectTopOnHover;i=this.focusRectRightOnHover;p=this.focusRectBottomOnHover;q="gray"}else{this.lastFocusedAnnotWidget=g}$(k).css({left:m,top:o,height:s,display:"block","border-color":"white white white "+q});$(n).css({left:m,top:o,width:j,display:"block","border-color":q+" white white"});$(i).css({left:m+j,top:o+1,height:s+1,display:"block","border-color":"white "+q+" white white"});$(p).css({left:m+1,top:o+s,width:j+1,display:"block","border-color":"white white "+q});$(h).append(k);$(h).append(n);$(h).append(i);$(h).append(p)};f.prototype.focusOut=function(){$(".git_annot_focus").remove();if(this.lastFocusedAnnotWidget!=null){this.focusGained(this.lastFocusedAnnotWidget,true)}};f.prototype.hoverOut=function(){$(".git_annot_hover").remove()};f.prototype.hideOtherPopups=function(g){for(var k=1;k<=this.viewerManager.pageCount;k++){var j=this.annotsWidgets[k];if(j!=null){for(var h=0;h<j.length;h++){if(j[h]!=g&&j[h].isPopupOpen){j[h].hidePopup()}}}}};f.prototype.applyLocalization=function(){$(this.headerText).text(b.LocalizedStrings.nav_pane_no_comments)};f.prototype.getPageNumberFromParentPanelID=function(h){var g=1;var i=$(h).attr("id");g=parseInt(i.replace(this.viewerManager.documentId+"annots_panel",""));return g};f.prototype.addRightClickContextMenu=function(h,g){var i=this;if(!this.allowCommenting){return}$(g).mouseup(function(j){if(j.button==2){j.preventDefault();i.contextMenu.show(h,j.pageX-$(h).offset().left,j.pageY-$(h).offset().top,i)}else{b.RightClickMenuManager.getRightClickMenuManager().closeAllRightClickMenus()}});$(g).click(function(j){if($(j.target).hasClass("git-rightclick-menu")||$(j.target).hasClass("git-rightclick-menu-item")){return}if(i.lastFocusedAnnotWidget!=null){i.lastFocusedAnnotWidget.hidePopup()}i.lastFocusedAnnotWidget=null;i.isCollapsedControl=false;i.focusOut()})};f.prototype.mapOldWidgetToNewlyAddedWidgets=function(h){for(var g=0;g<this.deletedAnnoteWidgetsStack.length;g++){if(this.deletedAnnoteWidgetsStack[g].annot.name==h.annot.name){this.deletedAnnoteWidgetsStack[g]=h}}};f.prototype.renderAnnots=function(k,o){if(this.viewerManager.rotationAngle!=0){this.clearAnnots(o);this.fdRenderingState[o]=false;return}var q=this.viewerManager.documentId;var h=$("#"+q+o);if(this.fdViewState[o]!=null){if((this.fdRenderingState[o]==true)&&(this.fdViewState[o].rotationAngle==this.viewerManager.rotationAngle)&&(this.fdViewState[o].zoomFactor==this.viewerManager.zoomFactor)){return}}this.clearAnnots(o);this.fdViewState[o].rotationAngle=this.viewerManager.rotationAngle;this.fdViewState[o].zoomFactor=this.viewerManager.zoomFactor;this.fdRenderingState[o]=true;if(this.annotsWidgets[o]!=null){this.annotsWidgets[o].length=0}var n=new Array();this.annotsWidgets[o]=n;var m=this.createAnnotParentContainerAndAddRightClickMenu($(h)[0],o);for(var l=0;l<k.length;l++){var j=k[l];if(j.isDirty==null){j.isDirty=false}var g=null;switch(j.annotType){case d.Text:g=new b.NoteAnnotWidget(m,o,-1,j,null,this,this.viewerManager);break;case d.Line:g=new b.LineAnnotWidget(m,o,-1,j,null,this,this.viewerManager);break;case d.Circle:g=new b.CircleAnnotWidget(m,o,-1,j,null,this,this.viewerManager);break;case d.Polyline:g=new b.PolyLineAnnotWidget(m,o,-1,j,null,this,this.viewerManager);break;case d.Polygon:g=new b.PolygonAnnotWidget(m,o,-1,j,null,this,this.viewerManager);break;case d.Square:g=new b.SquareAnnotWidget(m,o,-1,j,null,this,this.viewerManager);break;case d.Link:g=new b.LinkAnnotWidget(m,o,-1,j,null,this,this.viewerManager)}g.render();if(j.isDeleted){g.hide()}n.push(g);if(this.lastFocusedAnnotWidget!=null&&this.lastFocusedAnnotWidget.annot.name==j.name){var p=this.lastFocusedAnnotWidget;this.lastFocusedAnnotWidget=g;this.lastFocusedAnnotWidget.isPopupOpen=p.isPopupOpen}this.mapOldWidgetToNewlyAddedWidgets(g)}};f.prototype.createAnnotParentContainerAndAddRightClickMenu=function(h,g){var i=$(h).find("git-annots-panel")[0];if(i!=null){return i}i=document.createElement("div");$(i).addClass("git-annots-panel");$(i).attr("id",this.viewerManager.documentId+"annots_panel"+g);$(h).append(i);$(i).attr({oncontextmenu:"return false;"});this.addRightClickContextMenu(i,h);return i};f.prototype.clearAnnots=function(h){var i=this.viewerManager.documentId;var g=$("#"+i+h);$(g).find(".git-annots-panel").remove();$(g).find(".git_annots").remove();$(this.popupPaneContent).find(".git_annots"+h).remove();this.focusOut()};f.prototype.resetModule=function(){this.fdViewState.length=0;this.annotsData.length=0;this.fdRenderingState.length=0;this.annotsWidgets.length=0;this.containsNewAnnots=false;this.deletedAnnoteWidgetsStack.length=0};f.prototype.createAnnotationPopupPaneView=function(){this.popupPane=document.createElement("div");$(this.popupPane).attr("id","popupPaneContent");$(this.popupPane).addClass("git_side_pane_element");$(this.popupPane).css({width:"calc(100% - 13px)",bottom:"0",left:"16px",top:"2px",position:"absolute",overflow:"none",display:"block"});var g=document.createElement("div");$(g).css({width:"97%",height:"24px","z-index":"5",overflow:"hidden","text-align":"center",border:"1px solid gray"});this.headerText=document.createElement("span");$(this.headerText).addClass("git-viewer-rightpane-header-text");$(this.headerText).text(b.LocalizedStrings.nav_pane_no_comments);$(g).append(this.headerText);$(this.popupPane).append(g);this.popupPaneContent=document.createElement("div");$(this.popupPaneContent).attr("id","popupPaneContent");$(this.popupPaneContent).css({width:"100%",bottom:"0",height:"calc(100% - 24px)",left:"0",position:"relative","overflow-y":"auto","overflow-x":"hidden",display:"block"});$(this.popupPane).append(this.popupPaneContent)};f.prototype.guid=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};return f}(b.PluggableModule));b.AnnotsModule=c})(gnostice||(gnostice={}));var gnostice;(function(c){var b=(function(){function d(){}return d}());var a=(function(){function d(h,g,f,i,e,j,k){var l=this;this.container=h;this.pageNumber=g;this.tabIndex=f;this.annot=i;this.parentWidget=e;this.annotsModule=j;this.viewerManager=k;this.isPopupOpen=false;this.isFocused=false;this.startDragging=false;this.popupAnnotWidget=null;this.baseContainer=null;this.nwButtonDown=false;this.moveCursorDownBtn=false;this.isRightClickMenuOpen=false;this.oldX=0;this.oldY=0;this.onContentChanged=function(m,n){l.updateTooltip(m,n,l.baseContainer)};this.deleteAnnotation=function(){if(!l.annot.isLocked){l.annot.isDeleted=true;l.annot.isDirty=true;l.isRightClickMenuOpen=false;l.hidePopup();l.hide();l.annotsModule.focusOut();l.annotsModule.lastFocusedAnnotWidget=null;$(".git_annot_hover").remove();$(".git_annot_focus").remove();l.annotsModule.pushDeletedWidgetToUndoQueue(l)}};if(this.annot.content==null){this.annot.content=""}if(this.annot.title==null){this.annot.title=""}}d.prototype.render=function(){};d.prototype.constructPopup=function(){this.popupAnnotWidget=new c.PopupAnnotWidget(this.container,this.pageNumber,-1,this.annot,this,this.annotsModule,this.viewerManager);this.popupAnnotWidget.render()};d.prototype.getBaseContainer=function(i,h,f,e){var g=this.viewerManager.zoomFactor;this.baseContainer=document.createElement("div");$(this.baseContainer).attr({"class":"git_annots"});$(this.baseContainer).css({position:"absolute","float":"top",left:i,top:h,width:f,height:e,"z-index":"3000",display:"block",color:"black","background-color":"transparent","text-align":"center",border:"none",cursor:"move"});this.ApplyPropertiesToBaseContainer();return this.baseContainer};d.prototype.showPopup=function(){this.isPopupOpen=true;this.isFocused=true;this.popupAnnotWidget.show()};d.prototype.hidePopup=function(){this.isPopupOpen=false;this.isFocused=false;this.popupAnnotWidget.hide()};d.prototype.getKeyValPair=function(){if(this.annot.isNew&&this.annot.isDeleted){return null}if(this.annot.isDirty||this.annot.isNew){var e={rectangle:this.annot.rectangle,title:this.annot.title,isNew:this.annot.isNew,pageNumber:this.pageNumber,time:this.annot.time,isDeleted:this.annot.isDeleted,popupCommentThread:{rectangle:this.annot.popupAnnot.rectangle,comments:this.composeComments()},content:this.annot.content,annotationStates:this.annot.annotationStates};this.annot.isDirty=false;this.annot.isNew=false;return new c.AnnotsKeyValuePair(this.annot.name,e)}return null};d.prototype.composeComments=function(){return this.popupAnnotWidget.composeComments()};d.prototype.show=function(){$(this.baseContainer).show()};d.prototype.hide=function(){$(this.baseContainer).hide()};d.prototype.getWidth=function(){return this.annot.width};d.prototype.ApplyPropertiesToBaseContainer=function(){var e=this;$(this.baseContainer).hover(function(){if(!e.startDragging){e.annotsModule.focusGained(e,false)}else{e.annotsModule.hoverOut()}});$(this.baseContainer).mouseleave(function(){e.annotsModule.hoverOut()});$(this.baseContainer).on("click",function(f){if(!e.startDragging&&!e.annot.isDeleted){e.annotsModule.hideOtherPopups(e);e.annotsModule.focusGained(e);e.showPopup()}f.stopPropagation()});$(this.baseContainer).dblclick(function(f){e.popupAnnotWidget.setFocus()});$(this.baseContainer).mousedown(function(f){e.sizeButtonClicked("size")});$(this.baseContainer).mouseup(function(f){e.sizeButtonClicked("")});$(this.container).click(function(f){f.stopPropagation()});$(this.baseContainer).keydown(function(f){if(f.keyCode==46){e.deleteAnnotation()}});if(!this.annot.isLocked&&this.annotsModule.allowCommenting){this.applyDrag(this.baseContainer)}this.prepareTooltip()};d.prototype.updateTooltip=function(g,i,f){if(i==null){i=""}if(g==null||g==""){$(f).attr({title:""});return}try{if(parseFloat($.ui.version.replace("1.",""))>=9){$(f).attr({title:"<b>"+i+"</b>:<br>"+g})}else{$(f).attr({title:i+": "+g})}}catch(h){$(f).attr({title:""})}};d.prototype.applyShapeProperties=function(e,f){e.attr("fill",f.fillColor);e.attr("stroke",f.strokeColor);if(this.annot.strokeStyle>=1){e.attr("stroke-dasharray","--")}e.attr("stroke-width",f.strokeWidth)};d.prototype.prepareTooltip=function(){$(this.baseContainer).jqUiTooltip({content:function(){return $(this).attr("title")}});this.updateTooltip(this.annot.content,this.annot.title,this.baseContainer)};d.prototype.applyDrag=function(e){var g=this;var f=this.viewerManager.zoomFactor;$(e).draggable({start:function(h,i){g.startDragging=true;g.annotsModule.isDraggingStarted=true;g.annotsModule.hoverOut();g.oldX=g.annot.rectangle.left;g.oldY=g.annot.rectangle.top;$(g.baseContainer).jqUiTooltip("close")},drag:function(){g.annot.rectangle.left=Math.round($(g.baseContainer).position().left/f);g.annot.rectangle.top=Math.round($(g.baseContainer).position().top/f);g.annotsModule.focusGained(g);$(g.baseContainer).jqUiTooltip("close")},stop:function(h,i){g.annot.rectangle.left=Math.round($(g.baseContainer).position().left/f);g.annot.rectangle.top=Math.round($(g.baseContainer).position().top/f);g.dragEnd(g.annot.rectangle.left,g.annot.rectangle.top);g.annotsModule.focusGained(g);g.startDragging=false;g.annotsModule.isDraggingStarted=false;g.annot.isDirty=true;$(g.baseContainer).jqUiTooltip("close")},containment:"#"+this.viewerManager.documentId+this.pageNumber})};d.prototype.dragEnd=function(f,e){};d.prototype.sizeButtonClicked=function(e){this.nwButtonDown=false;this.moveCursorDownBtn=false;if(e=="nw"){this.nwButtonDown=true}else{if(e=="size"){this.moveCursorDownBtn=true}}};return d}());c.MarkupAnnotWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){var e=d!==null&&d.apply(this,arguments)||this;e.annotContainer=null;e.startDragging=false;return e}c.prototype.render=function(){var i=this.viewerManager.zoomFactor;this.annotContainer=this.getBaseContainer(this.annot.rectangle.left*i,this.annot.rectangle.top*i,this.annot.rectangle.width*i,this.annot.rectangle.height*i);var n=Math.round(this.annot.rectangle.width);var m=Math.round(this.annot.rectangle.height);var l=Math.round(n/2);var k=Math.round(m/2);var g=Math.round(n/2)-1;var f=Math.round(m/2)-1;var j=Raphael(this.annotContainer,n*i,m*i);var e=j.ellipse(l*i,k*i,g*i-this.annot.strokeWidth,f*i-this.annot.strokeWidth);this.applyShapeProperties(e,this.annot);this.constructPopup();$(this.container).append(this.annotContainer)};return c}(b.MarkupAnnotWidget));b.CircleAnnotWidget=a})(gnostice||(gnostice={}));var gnostice;(function(j){var a;(function(k){k[k.None=0]="None";k[k.Accepted=1]="Accepted";k[k.Rejected=2]="Rejected";k[k.Cancelled=3]="Cancelled";k[k.Completed=4]="Completed"})(a||(a={}));var b=(function(){function k(){}return k}());j.PopupCommentResponse=b;var f=(function(){function k(){}return k}());var g=(function(){function k(){this._countLbl=null;this._countIcon=null;this.count=0}k.prototype.getWidget=function(o,l,m,w,r,s){var t=false;var u=20;if(m){l=0;t=true;u=25}var q=document.createElement("div");$(q).css({position:"relative","float":"top",top:0,height:u,"z-index":"3000","background-color":w,"text-align":"center",border:"0px solid gray"});if(t){$(q).css({border:"1px solid gray"})}var v=l+5;var n=document.createElement("div");$(n).css({position:"absolute","float":"left",top:0,width:20,height:20,"z-index":"3000",display:"block",color:"black","background-color":"transparent",border:"none",margin:"5px 5px 5px "+v+"px"});$(n).attr({"class":s+" fa-user fa-lg"});$(q).append(n);v=20+v+5;var p=document.createElement("span");$(p).css({display:"inline-block","vertical-align":"middle","font-family":"Verdana","font-size":"12px","font-weight":"bold","float":"left",margin:"5px 5px 5px "+v+"px",color:r});$(p).html(o);$(q).append(p);if(m){this._countLbl=document.createElement("span");$(this._countLbl).css({display:"inline-block","vertical-align":"middle","font-family":"Verdana","font-size":"12px","font-weight":"bold","float":"right",margin:"5px",color:"gray"});this._countIcon=document.createElement("div");$(this._countIcon).addClass("git-annot-reply-count");$(this._countIcon).hide();if(this.count>0){$(this._countLbl).html(this.count.toString());$(this._countIcon).show()}$(q).append(this._countLbl);$(q).append(this._countIcon)}$(q).attr({"class":"annots"});return q};k.prototype.updateCount=function(l){if(this._countLbl!=null&&(l>0)){this.count=l;$(this._countIcon).show();$(this._countLbl).html(this.count.toString())}else{$(this._countIcon).hide()}};return k}());var d=(function(){function k(l){this.parentAnnotWidget=l;this.localContent=null;this._contentAreaWidget=null;this._countLbl=null;this._countIcon=null}k.prototype.getDateTime=function(n){var q=n.getMonth()+1;var p=q+"/"+n.getDate()+"/"+n.getFullYear();var m=n.getHours()>12?n.getHours()-12:n.getHours();var l=n.getHours()>=12?"PM":"AM";m=m;var o=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes();var r=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return p+" "+m+":"+o+":"+r+" "+l};k.prototype.getContentArea=function(n,o,q,l,m){var p=this;this._contentAreaWidget=document.createElement("textarea");$(this._contentAreaWidget).attr({spellcheck:"false","class":"contentArea"});$(this._contentAreaWidget).css({outline:"none",overflow:"true",resize:"none","white-space":"pre-wrap","-webkit-user-select":"text",left:"5px",top:"5px","font-family":"Verdana","font-size":"12px","line-height":"16px",position:"relative",width:m-14-o,"z-index":"3000",display:"block",color:"black","background-color":"transparent","text-align":"left",border:"1px solid transparent",padding:0,margin:"5px 5px 5px "+o+"px"});if(q||!l){$(this._contentAreaWidget).attr({readonly:"true"})}$(this._contentAreaWidget).val(n);$(this._contentAreaWidget).keyup(function(r){p.parentAnnotWidget.annot.isDirty=true;p.parentAnnotWidget.parentWidget.annot.isDirty=true;p.localContent=$(p._contentAreaWidget).val().trim()});return this._contentAreaWidget};k.prototype.setFocus=function(){$(this._contentAreaWidget).focus()};k.prototype.getTopUserHeader=function(l,p,o,m,n){var q=new g();return q.getWidget(l,p,o,m,n,this.parentAnnotWidget.viewerManager.fontAwesomePrefix)};return k}());var e=(function(){function k(){this.acceptedCount=0;this.rejectedCount=0;this.cancelledCount=0;this.completedCount=0;this.acceptedList=new Array();this.rejectedList=new Array();this.cancelledList=new Array();this.completedList=new Array()}return k}());var h=(function(k){__extends(l,k);function l(p,q,n,u,x,w,m,v,t,o,s){var r=k.call(this,q)||this;r.annot=p;r.parentAnnotWidget=q;r.container=n;r.userName=u;r.usernameDisplaycolor=x;r.backgroundColor=w;r.isLocked=m;r.allowCommenting=v;r.isTop=t;r.width=o;r.index=s;r.mainWindow=null;r.dateSpan=null;r.statusAccepted=null;r.statusRejected=null;r.statusCompleted=null;r.statusCancelled=null;r.contentArea=null;r.lblAcceptedCount=null;r.lblRejectedCount=null;r.lblCompletedCount=null;r.lblCancelledCount=null;r.annotationState=a.None;r.annotationStates=null;if(s==-1){r.annotationStates=r.getCommentsStates(r.annot.annotationStates)}else{r.annotationStates=r.getCommentsStates(r.annot.popupAnnot.comments[s].annotationStates)}return r}l.prototype.render=function(p,s,o){var r=this;this.title=p;this.content=s;var n=new Date();this.time=n.toUTCString();if(o!=null&&o!=""){n=new Date(o);this.time=o}var u=this.getDateTime(n);if(this.content==null){this.content=""}this.localContent=this.content;var t=document.createElement("div");$(t).css({border:"1px solid gray","padding-bottom":"10px","background-color":this.backgroundColor});var m=0;var q=5;if(!this.isTop){m=8;q=0}if(!this.isTop){$(t).append(this.getTopUserHeader(p,m,false,"transparent",this.usernameDisplaycolor))}$(t).append(this.getMiddleDateHeader(u,m,q));$(t).append(this.getMiddleStatusHeader(m));this.contentArea=this.getContentArea(s,m,this.isLocked,this.allowCommenting,this.width);$(t).append(this.contentArea);$(this.contentArea).focusin(function(){$(r.contentArea).attr({spellcheck:"true"});$(r.contentArea).css({"background-color":"white",border:"1px solid gray"})});$(this.contentArea).focusout(function(){$(r.contentArea).attr({spellcheck:"false"});$(r.contentArea).css({"background-color":"transparent",border:"1px solid transparent"});if(r.localContent.trim()!=r.content.trim()){if(r.isTop){r.parentAnnotWidget.onContentChanged(r.localContent,r.title)}r.content=r.localContent;if(r.isTop){r.annot.content=r.content;r.annot.time=new Date().toUTCString()}var v=new Date();r.time=v.toUTCString();$(r.dateSpan).html(r.getDateTime(v))}});$(this.container).append(t);this.mainWindow=t};l.prototype.getMiddleDateHeader=function(p,o,m){var n=document.createElement("div");var q=5+o;$(n).css({color:"gray","font-family":"Verdana",width:"96%","font-size":"10px","margin-left":q,"margin-top":m,"float":"left"});this.dateSpan=document.createElement("span");$(this.dateSpan).css({"float":"left"});$(this.dateSpan).html(p);$(n).append(this.dateSpan);return n};l.prototype.removeItemFromArray=function(o,m){for(var n=m.length-1;n>=0;n--){if(m[n]===o){m.splice(n,1);break}}};l.prototype.removeEnabledState=function(){$(this.statusAccepted).removeClass("git-annot-status-accepted_enabled");$(this.statusRejected).removeClass("git-annot-status-rejected-enabled");$(this.statusCancelled).removeClass("git-annot-status-cancelled-enabled");$(this.statusCompleted).removeClass("git-annot-status-completed-enabled");$(this.statusAccepted).addClass("git-annot-status-accepted");$(this.statusRejected).addClass("git-annot-status-rejected");$(this.statusCancelled).addClass("git-annot-status-cancelled");$(this.statusCompleted).addClass("git-annot-status-completed");switch(this.annotationState){case a.Accepted:this.annotationStates.acceptedCount-=1;this.removeItemFromArray(this.userName,this.annotationStates.acceptedList);$(this.lblAcceptedCount).text(this.annotationStates.acceptedCount);break;case a.Completed:this.annotationStates.completedCount-=1;this.removeItemFromArray(this.userName,this.annotationStates.completedList);$(this.lblCompletedCount).text(this.annotationStates.completedCount);break;case a.Rejected:this.annotationStates.rejectedCount-=1;this.removeItemFromArray(this.userName,this.annotationStates.rejectedList);$(this.lblRejectedCount).text(this.annotationStates.rejectedCount);break;case a.Cancelled:this.annotationStates.cancelledCount-=1;this.removeItemFromArray(this.userName,this.annotationStates.cancelledList);$(this.lblCancelledCount).text(this.annotationStates.cancelledCount);break}};l.prototype.isJQueryUIGreaterThan8=function(){try{if(parseFloat($.ui.version.replace("1.",""))>=9){return true}return false}catch(m){return false}};l.prototype.updateStateTooltip=function(r,q,p){var s="<b>";var o=null;var m=null;switch(r){case a.Accepted:s+=j.LocalizedStrings.annot_state_accepted;o=this.statusAccepted;m=this.lblAcceptedCount;break;case a.Cancelled:s+=j.LocalizedStrings.annot_state_cancelled;o=this.statusCancelled;m=this.lblCancelledCount;break;case a.Rejected:s+=j.LocalizedStrings.annot_state_rejected;o=this.statusRejected;m=this.lblRejectedCount;break;case a.Completed:s+=j.LocalizedStrings.annot_state_completed;o=this.statusCompleted;m=this.lblCompletedCount;break}if(q.length>0){s+=" "+j.LocalizedStrings.annot_by+": ";if(this.isJQueryUIGreaterThan8()){s+="</b><br>";for(var n=0;n<q.length;n++){s+=q[n];s+="<br>"}}else{for(var n=0;n<q.length;n++){if(n>0){s+=", "}s+=q[n]}}}$(m).attr({title:s});$(o).attr({title:s})};l.prototype.getCommentsStates=function(o){var m=new e();if(o==null){return m}for(var n in o){if(o.hasOwnProperty(n)){switch(o[n]){case a.Accepted:m.acceptedCount+=1;m.acceptedList.push(n);if(this.userName.toUpperCase()==n.toUpperCase()){this.annotationState=a.Accepted}break;case a.Rejected:m.rejectedCount+=1;m.rejectedList.push(n);if(this.userName.toUpperCase()==n.toUpperCase()){this.annotationState=a.Rejected}break;case a.Cancelled:m.cancelledCount+=1;m.cancelledList.push(n);if(this.userName.toUpperCase()==n.toUpperCase()){this.annotationState=a.Cancelled}break;case a.Completed:m.completedCount+=1;m.completedList.push(n);if(this.userName.toUpperCase()==n.toUpperCase()){this.annotationState=a.Completed}break}}}return m};l.prototype.updateAllStateTooltips=function(){this.updateStateTooltip(a.Accepted,this.annotationStates.acceptedList,this.lblAcceptedCount);this.updateStateTooltip(a.Rejected,this.annotationStates.rejectedList,this.lblRejectedCount);this.updateStateTooltip(a.Completed,this.annotationStates.completedList,this.lblCompletedCount);this.updateStateTooltip(a.Cancelled,this.annotationStates.cancelledList,this.lblCancelledCount);if(this.isTop){if(this.annot.annotationStates==null){this.annot.annotationStates={}}this.updateAnnotationStates(this.annot.annotationStates)}else{if(this.annot.popupAnnot.comments[this.index]!=null){if(this.annot.popupAnnot.comments[this.index].annotationStates==null){this.annot.popupAnnot.comments[this.index].annotationStates={}}this.updateAnnotationStates(this.annot.popupAnnot.comments[this.index].annotationStates)}}};l.prototype.updateAnnotationStates=function(n){var o=false;for(var m in n){if(m==this.userName){o=true;n[m]=this.annotationState;break}}if(!o){n[this.userName]=this.annotationState}};l.prototype.setTooltip=function(m){$(m).jqUiTooltip({content:function(){return $(this).attr("title")}})};l.prototype.getMiddleStatusHeader=function(q){var t=this;var o=document.createElement("div");var s=5+q;$(o).css({color:"gray","font-family":"Verdana","font-size":"10px","margin-left":q,"float":"left"});var p=document.createElement("table");$(p).css({"box-sizing":"initial","border-collapse":"separate","border-spacing":"2px"});var r=p.insertRow(0);$(o).append(p);var n=document.createElement("label");$(n).html("Status:");$(n).css({color:"black","font-family":"Verdana","font-size":"11px","font-weight":"bold","margin-left":"2px"});var m=r.insertCell(0);m.appendChild(n);this.statusAccepted=document.createElement("div");$(this.statusAccepted).addClass(this.parentAnnotWidget.viewerManager.fontAwesomePrefix+" fa-thumbs-up fa-lg git-annot-status-accepted git-annot-status");$(this.statusAccepted).attr({title:"Accepted"});m=r.insertCell(1);m.appendChild(this.statusAccepted);this.lblAcceptedCount=document.createElement("span");$(this.lblAcceptedCount).addClass("git-annot-label-status");$(this.lblAcceptedCount).text(this.annotationStates.acceptedCount);this.setTooltip(this.lblAcceptedCount);this.setTooltip(this.statusAccepted);m=r.insertCell(2);m.appendChild(this.lblAcceptedCount);this.statusRejected=document.createElement("div");$(this.statusRejected).addClass(this.parentAnnotWidget.viewerManager.fontAwesomePrefix+" fa-thumbs-down fa-lg git-annot-status-rejected git-annot-status");$(o).append(this.statusRejected);$(this.statusRejected).attr({title:"Rejected"});m=r.insertCell(3);m.appendChild(this.statusRejected);this.lblRejectedCount=document.createElement("span");$(this.lblRejectedCount).addClass("git-annot-label-status");$(this.lblRejectedCount).text(this.annotationStates.rejectedCount);this.setTooltip(this.lblRejectedCount);this.setTooltip(this.statusRejected);m=r.insertCell(4);m.appendChild(this.lblRejectedCount);this.statusCompleted=document.createElement("div");$(this.statusCompleted).addClass(this.parentAnnotWidget.viewerManager.fontAwesomePrefix+" fa-check-square fa-lg git-annot-status-completed git-annot-status");$(this.statusCompleted).attr({title:"Completed"});m=r.insertCell(5);m.appendChild(this.statusCompleted);this.lblCompletedCount=document.createElement("span");$(this.lblCompletedCount).addClass("git-annot-label-status");$(this.lblCompletedCount).text(this.annotationStates.completedCount);this.setTooltip(this.lblCompletedCount);this.setTooltip(this.statusCompleted);m=r.insertCell(6);m.appendChild(this.lblCompletedCount);this.statusCancelled=document.createElement("div");$(this.statusCancelled).addClass(this.parentAnnotWidget.viewerManager.fontAwesomePrefix+" fa-window-close fa-lg git-annot-status-cancelled git-annot-status");$(this.statusCancelled).attr({title:"Cancelled"});m=r.insertCell(7);m.appendChild(this.statusCancelled);this.lblCancelledCount=document.createElement("span");$(this.lblCancelledCount).addClass("git-annot-label-status");$(this.lblCancelledCount).text(this.annotationStates.cancelledCount);this.setTooltip(this.lblCancelledCount);this.setTooltip(this.statusCancelled);this.updateAllStateTooltips();m=r.insertCell(8);m.appendChild(this.lblCancelledCount);if(!this.annot.isLocked&&this.parentAnnotWidget.annotsModule.allowCommenting){switch(this.annotationState){case a.Accepted:$(this.statusAccepted).addClass("git-annot-status-accepted_enabled");$(this.statusAccepted).removeClass("git-annot-status-accepted");break;case a.Completed:$(this.statusCompleted).addClass("git-annot-status-completed-enabled");$(this.statusCompleted).removeClass("git-annot-status-completed");break;case a.Rejected:$(this.statusRejected).removeClass("git-annot-status-rejected");$(this.statusRejected).addClass("git-annot-status-rejected-enabled");break;case a.Cancelled:$(this.statusCancelled).removeClass("git-annot-status-cancelled");$(this.statusCancelled).addClass("git-annot-status-cancelled-enabled");break}$(this.statusAccepted).click(function(v){var u=false;t.parentAnnotWidget.annot.isDirty=true;t.parentAnnotWidget.parentWidget.annot.isDirty=true;if(t.annotationState==a.Accepted){u=true}t.removeEnabledState();if(!u){t.annotationState=a.Accepted;t.annotationStates.acceptedCount+=1;t.annotationStates.acceptedList.push(t.userName);$(t.statusAccepted).addClass("git-annot-status-accepted_enabled");$(t.statusAccepted).removeClass("git-annot-status-accepted")}else{t.annotationState=a.None}$(t.lblAcceptedCount).text(t.annotationStates.acceptedCount);t.updateAllStateTooltips()});$(this.statusCompleted).click(function(v){t.parentAnnotWidget.annot.isDirty=true;t.parentAnnotWidget.parentWidget.annot.isDirty=true;var u=false;if(t.annotationState==a.Completed){u=true}t.removeEnabledState();if(!u){$(t.statusCompleted).addClass("git-annot-status-completed-enabled");$(t.statusCompleted).removeClass("git-annot-status-completed");t.annotationStates.completedCount+=1;t.annotationState=a.Completed;t.annotationStates.completedList.push(t.userName)}else{t.annotationState=a.None}t.updateAllStateTooltips();$(t.lblCompletedCount).text(t.annotationStates.completedCount)});$(this.statusRejected).click(function(v){t.parentAnnotWidget.annot.isDirty=true;t.parentAnnotWidget.parentWidget.annot.isDirty=true;var u=false;if(t.annotationState==a.Rejected){u=true}t.removeEnabledState();if(!u){$(t.statusRejected).removeClass("git-annot-status-rejected");$(t.statusRejected).addClass("git-annot-status-rejected-enabled");t.annotationStates.rejectedCount+=1;t.annotationState=a.Rejected;t.annotationStates.rejectedList.push(t.userName)}else{t.annotationState=a.None}t.updateAllStateTooltips();$(t.lblRejectedCount).text(t.annotationStates.rejectedCount)});$(this.statusCancelled).click(function(v){t.parentAnnotWidget.annot.isDirty=true;t.parentAnnotWidget.parentWidget.annot.isDirty=true;var u=false;if(t.annotationState==a.Cancelled){u=true}t.removeEnabledState();if(!u){t.annotationStates.cancelledCount+=1;$(t.statusCancelled).removeClass("git-annot-status-cancelled");$(t.statusCancelled).addClass("git-annot-status-cancelled-enabled");t.annotationState=a.Cancelled;t.annotationStates.cancelledList.push(t.userName)}else{t.annotationState=a.None}t.updateAllStateTooltips();$(t.lblCancelledCount).text(t.annotationStates.cancelledCount)})}return o};l.prototype.updateThreadsCount=function(m){};return l}(d));var c=(function(l){__extends(k,l);function k(q,n,t,o,s,p,m){var r=l.call(this,q)||this;r.parentAnnotWidget=q;r.container=n;r.isLocked=t;r.allowCommenting=o;r.highlightColor=s;r.width=p;r.commentsWindow=m;r.mainWindow=null;r.contentArea=null;r.content="";r.replyClickedCallback=null;return r}k.prototype.render=function(n){var q=this;this.replyClickedCallback=n;var m=document.createElement("div");$(m).css({display:"block",border:"1px solid gray","background-color":this.highlightColor});$(m).attr({"class":"noteReply"});this.mainWindow=m;this.contentArea=this.getContentArea("",0,this.isLocked,this.allowCommenting,this.width);$(this.contentArea).attr({placeholder:j.LocalizedStrings.annot_enter_reply});$(this.contentArea).css({"background-color":"white",border:"1px solid gray"});$(m).append(this.contentArea);$(this.contentArea).keyup(function(r){if($(q.contentArea).val().length>0){$(o).removeAttr("disabled");q.content=$(q.contentArea).val()}else{$(o).attr({disabled:"true"})}});var p=document.createElement("div");$(p).css({position:"relative",display:"block",top:0,width:"100%","z-index":"3000",color:"black","text-align":"center",border:"0px solid gray"});var o=document.createElement("button");$(o).css({position:"relative",top:3,width:54,height:28,"z-index":"3000",display:"block",margin:"6px 5px 7px 5px","font-size":"12px"});$(o).attr({disabled:"true"});$(o).html(j.LocalizedStrings.annot_reply);$(o).click(function(){q.replyClickedCallback(new Date().toUTCString(),$(q.contentArea).val(),q.commentsWindow)});$(p).append(o);$(p).attr({"class":"annots"});$(m).append(p);$(this.container).append(m)};k.prototype.remove=function(){$(this.mainWindow).parent().find(".noteReply").remove();this.mainWindow=null};return k}(d));var i=(function(){function k(m,p,n,o,l){var q=this;this.annot=m;this.parentAnnotWidget=p;this.annotsModule=n;this.viewerManager=o;this.pageNumber=l;this.mainWindow=null;this.commentWidgets=new Array();this.width=242;this.replyCallback=function(t,r){var s={title:q.userName,content:r,time:t,annotationStates:{}};if(q.annot.popupAnnot.comments==null){q.annot.popupAnnot.comments=new Array()}q.annot.popupAnnot.comments.push(s);q.parentAnnotWidget.annot.isDirty=true;q.parentAnnotWidget.parentWidget.annot.isDirty=true;q.replyWindow.remove();var u=new h(q.annot,q.parentAnnotWidget,q.commentsContainer,q.userName,q.userDisplayColor,q.highlightColor,q.isLocked,q.allowCommenting,false,q.width,q.annot.popupAnnot.comments.length-1);u.render(q.userName,r,t);q.commentWidgets.push(u);q.replyWindow=new c(q.parentAnnotWidget,q.commentsContainer,q.isLocked,q.allowCommenting,q.highlightColor,q.width,q);q.replyWindow.render(q.replyCallback);q.headerWidget.updateCount(q.annot.popupAnnot.comments.length);q.replyWindow.setFocus();q.updatePopupSizeWindow()};this.userName=this.viewerManager.userName;this.highlightColor=this.viewerManager.preferences.interactiveElements.annotations.commentsPanelDisplayColor;this.userDisplayColor=this.viewerManager.preferences.interactiveElements.annotations.userFieldDisplayColor;this.isLocked=this.annot.isLocked;this.allowCommenting=this.annotsModule.allowCommenting}k.prototype.render=function(){var p=1;var o=0;this.mainWindow=document.createElement("div");$(this.mainWindow).attr({"class":"git_annots"+this.pageNumber});$(this.mainWindow).addClass("git_annots_popup");$(this.mainWindow).css({position:"absolute",left:p,top:o,width:this.width,height:"auto","z-index":"3002",color:"black",display:"none","padding-bottom":5,"margin-top":1});var n=this.userName;if((this.annot.title!=null)&&(this.annot.title!="")){n=this.annot.title}this.headerWidget=new g();var s=this.headerWidget.getWidget(this.annot.title,0,true,this.highlightColor,this.userDisplayColor,this.viewerManager.fontAwesomePrefix);this.headerWidget.updateCount(this.annot.popupAnnot.comments.length);$(this.mainWindow).append(s);var r=document.createElement("div");$(r).attr({"class":"git_annots"});$(r).css({position:"relative",top:0,width:"100%",height:"auto","z-index":"3002",display:"block",color:"black"});this.commentsContainer=document.createElement("div");$(this.commentsContainer).attr({"class":"git_annots"});$(this.commentsContainer).css({position:"relative",width:"100%",top:0,overflow:"visible","z-index":"3002",display:"block",color:"black","background-color":this.viewerManager.preferences.interactiveElements.annotations.commentsPanelDisplayColor,"text-align":"center"});this.topCommentWidget=new h(this.annot,this.parentAnnotWidget,this.commentsContainer,this.userName,this.userDisplayColor,this.highlightColor,this.isLocked,this.allowCommenting,true,this.width,-1);var l=false;this.topCommentWidget.render(this.annot.title,this.annot.content,this.annot.time);this.commentWidgets.push(this.topCommentWidget);if(this.annot.popupAnnot.comments.length>0){for(var m=0;m<this.annot.popupAnnot.comments.length;m++){var q=new h(this.annot,this.parentAnnotWidget,this.commentsContainer,this.userName,this.userDisplayColor,this.highlightColor,this.isLocked,this.allowCommenting,false,this.width,m);q.render(this.annot.popupAnnot.comments[m].title,this.annot.popupAnnot.comments[m].content,this.annot.popupAnnot.comments[m].time);this.commentWidgets.push(q)}}this.replyWindow=new c(this.parentAnnotWidget,this.commentsContainer,this.isLocked,this.allowCommenting,this.highlightColor,this.width,this);this.replyWindow.render(this.replyCallback);$(r).append(this.commentsContainer);$(this.mainWindow).append(r);$(this.annotsModule.popupPaneContent).append(this.mainWindow)};k.prototype.updateAnnotationStates=function(m,l){l.updateAnnotationStates(m)};k.prototype.composeComments=function(){var n=new Array();for(var l=0;l<this.commentWidgets.length;l++){var m=this.commentWidgets[l];if(m.isTop){this.annot.time=m.time;this.annot.title=m.title;this.annot.content=m.content}else{var o=new b();o.time=m.time;o.title=m.title;o.content=m.content;o.annotationStates=this.annot.popupAnnot.comments[l-1].annotationStates;n.push(o)}}return n};k.prototype.updatePopupSizeWindow=function(){var m=0;var l=3;if(this.annotsModule.popupPaneContent.scrollHeight>this.annotsModule.popupPaneContent.clientHeight){m=14}var n=$(this.commentsContainer).parent().width()+l*2+m+13;this.viewerManager.rightPane.setExpandableWidth(n);this.viewerManager.rightPane.expand()};k.prototype.show=function(){var l=0;$(this.annotsModule.headerText).text(j.LocalizedStrings.nav_pane_comments);if(l!=null){$(this.mainWindow).css({top:Math.max((l-$(this.mainWindow).height()/2),0)})}$(this.mainWindow).show();this.viewerManager.rightPane.expand()};k.prototype.setFocus=function(){if(this.annot.isNew&&this.annot.content==""&&this.annot.popupAnnot.comments.length==0){this.topCommentWidget.setFocus()}else{this.replyWindow.setFocus()}};k.prototype.hide=function(){$(this.mainWindow).hide()};return k}());j.CommentsWindow=i})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){var e=d!==null&&d.apply(this,arguments)||this;e.annotContainer=null;return e}c.prototype.dragEnd=function(h,f){var e=h-this.oldX;var g=f-this.oldY;this.annot.x1=this.annot.x1+e;this.annot.x2=this.annot.x2+e;this.annot.y1=this.annot.y1+g;this.annot.y2=this.annot.y2+g};c.prototype.render=function(){var h=this.viewerManager.zoomFactor;var f=this.annot.rectangle.width*h;var g=this.annot.rectangle.height*h;this.annotContainer=this.getBaseContainer(this.annot.rectangle.left*h,this.annot.rectangle.top*h,f,g);var i=Raphael(this.annotContainer,f,g);var e=i.path(new Array("M",this.annot.x1*h,this.annot.y1*h,"L",this.annot.x2*h,this.annot.y2*h));e.attr({transform:"t"+-this.annot.rectangle.left*h+","+-this.annot.rectangle.top*h});this.applyShapeProperties(e,this.annot);this.constructPopup();$(this.container).append(this.annotContainer)};return c}(b.MarkupAnnotWidget));b.LineAnnotWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){return d!==null&&d.apply(this,arguments)||this}c.prototype.render=function(){var e=this.viewerManager.zoomFactor;this.baseContainer=document.createElement("div");$(this.baseContainer).attr({"class":"git_annots"});$(this.baseContainer).css({position:"absolute","float":"top",left:this.annot.rectangle.left*e,top:this.annot.rectangle.top*e,width:this.annot.rectangle.width,height:this.annot.rectangle.height,"z-index":"3000",display:"block",color:"black","background-color":"transparent","text-align":"center",border:"none"});$(this.baseContainer).addClass(this.viewerManager.fontAwesomePrefix+" fa-comment fa-lg");this.ApplyPropertiesToBaseContainer();this.constructPopup();$(this.container).append(this.baseContainer)};return c}(b.MarkupAnnotWidget));b.NoteAnnotWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){var e=d!==null&&d.apply(this,arguments)||this;e.annotContainer=null;return e}c.prototype.dragEnd=function(i,g){var f=i-this.oldX;var h=g-this.oldY;for(var e=0;e<this.annot.xPoints.length;e++){this.annot.xPoints[e]=this.annot.xPoints[e]+f;this.annot.yPoints[e]=this.annot.yPoints[e]+h}};c.prototype.render=function(){var g=this.viewerManager.zoomFactor;this.annotContainer=this.getBaseContainer(this.annot.rectangle.left*g,this.annot.rectangle.top*g,this.annot.rectangle.width*g,this.annot.rectangle.height*g);var i=Raphael(this.annotContainer,this.annot.rectangle.width*g,this.annot.rectangle.height*g);var f=new Array();f.push("M",this.annot.xPoints[0]*g,this.annot.yPoints[0]*g);for(var e=1;e<this.annot.xPoints.length;e++){f.push("L",this.annot.xPoints[e]*g,this.annot.yPoints[e]*g)}f.push("Z");var h=i.path(f);h.attr({transform:"t"+-this.annot.rectangle.left*g+","+-this.annot.rectangle.top*g});this.applyShapeProperties(h,this.annot);this.constructPopup();$(this.container).append(this.annotContainer)};return c}(b.MarkupAnnotWidget));b.PolygonAnnotWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){var e=d!==null&&d.apply(this,arguments)||this;e.annotContainer=null;e.startDragging=false;return e}c.prototype.dragEnd=function(i,g){var f=i-this.oldX;var h=g-this.oldY;for(var e=0;e<this.annot.xPoints.length;e++){this.annot.xPoints[e]=this.annot.xPoints[e]+f;this.annot.yPoints[e]=this.annot.yPoints[e]+h}};c.prototype.render=function(){var g=this.viewerManager.zoomFactor;this.annotContainer=this.getBaseContainer(this.annot.rectangle.left*g,this.annot.rectangle.top*g,this.annot.rectangle.width*g,this.annot.rectangle.height*g);var i=Raphael(this.annotContainer,this.annot.rectangle.width*g,this.annot.rectangle.height*g);var f=new Array();f.push("M",this.annot.xPoints[0]*g,this.annot.yPoints[0]*g);for(var e=1;e<this.annot.xPoints.length;e++){f.push("L",this.annot.xPoints[e]*g,this.annot.yPoints[e]*g)}var h=i.path(f);h.attr({transform:"t"+-this.annot.rectangle.left*g+","+-this.annot.rectangle.top*g});this.applyShapeProperties(h,this.annot);this.constructPopup();$(this.container).append(this.annotContainer)};return c}(b.MarkupAnnotWidget));b.PolyLineAnnotWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){var e=d!==null&&d.apply(this,arguments)||this;e.onContentChanged=function(f,g){e.parentWidget.onContentChanged(f,g)};return e}c.prototype.render=function(){this.commentWindow=new b.CommentsWindow(this.annot,this,this.annotsModule,this.viewerManager,this.pageNumber);this.commentWindow.render();$(this.annotsModule.headerText).text(b.LocalizedStrings.nav_pane_comments)};c.prototype.show=function(){this.commentWindow.show()};c.prototype.setFocus=function(){this.commentWindow.setFocus()};c.prototype.composeComments=function(){return this.commentWindow.composeComments()};c.prototype.hide=function(){this.commentWindow.hide()};return c}(b.MarkupAnnotWidget));b.PopupAnnotWidget=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(){var e=d!==null&&d.apply(this,arguments)||this;e.annotContainer=null;e.startDragging=false;return e}c.prototype.render=function(){var i=this.viewerManager.zoomFactor;this.annotContainer=this.getBaseContainer(this.annot.rectangle.left*i,this.annot.rectangle.top*i,this.annot.rectangle.width*i,this.annot.rectangle.height*i);var e=this.annot.rectangle.width*i;var f=this.annot.rectangle.height*i;var j=Raphael(this.annotContainer,e,f);var g=j.rect(0,0,e,f);this.applyShapeProperties(g,this.annot);this.constructPopup();$(this.container).append(this.annotContainer)};return c}(b.MarkupAnnotWidget));b.SquareAnnotWidget=a})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(d){__extends(c,d);function c(){return d!==null&&d.apply(this,arguments)||this}c.prototype.render=function(){var f=this;var e=this.viewerManager.zoomFactor;this.baseContainer=document.createElement("div");$(this.baseContainer).css({position:"absolute","float":"top",left:this.annot.rectangle.left*e,top:this.annot.rectangle.top*e,width:this.annot.rectangle.width*e,height:this.annot.rectangle.height*e,"z-index":"3000",display:"block",color:"black","background-color":"transparent","text-align":"center",border:"none",cursor:"pointer"});$(this.baseContainer).on("mousedown",function(){$(f.baseContainer).css({"background-color":"black",opacity:"0.5"})});$(this.baseContainer).on("mouseup",function(){$(f.baseContainer).css({"background-color":"transparent"})});if(this.annot.actions.length!=0){$(this.baseContainer).on("click",function(g){f.viewerManager.performPDFActions(f.annot.actions)})}$(this.container).append(this.baseContainer)};return c}(a.MarkupAnnotWidget));a.LinkAnnotWidget=b})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(){function c(f,e,h,d){this.parentElement=f;this.onDragEndCallBack=e;this.dragable=h;this.position=d;this.parentMinWidth=750;this.leftPanelWidth=0;this.rightPanelWidth=0;if(h){this.vSplitter=$(f).split({orientation:"vertical",limit:0,invisible:true,position:"0px",onDragEnd:e})}else{var g=$(f).innerWidth();$(f).find(".git-docviewer-container").width(g);$(f).find(".git-docviewer-container").css("left","0px")}}c.prototype.getPosition=function(){if(this.dragable){var d=this.vSplitter.position();return{leftPanelWidth:d,rightPanelWidth:this.rightPanelWidth}}else{var f=$(this.parentElement).find(".navPaneContainer").width();var e=$(this.parentElement).find("#rightPane").width();return{leftPanelWidth:f,rightPanelWidth:e}}};c.prototype.setPosition=function(d,i,f){if(i===void 0){i=0}if(f===void 0){f=false}if(!f&&this.leftPanelWidth==d&&this.rightPanelWidth==i){return}this.leftPanelWidth=d;this.rightPanelWidth=i;if(this.dragable){this.vSplitter.position(d)}else{switch(this.position){case 1:var e=$(this.parentElement).innerWidth();$(this.parentElement).find(".navPaneContainer").css("top","0px");$(this.parentElement).find(".navPaneContainer").width(d);var h=e-d-i;var g=h+d;$(this.parentElement).find(".git-docviewer-container").width(h);$(this.parentElement).find(".git-docviewer-container").css("left",d+"px");$(this.parentElement).find("#rightPane").css("left",g+"px");$(this.parentElement).find("#rightPane").width(i);$(this.parentElement).find("#rightPane").css("top","0px");$(this.parentElement).find(".git-viewer-comment-toolbarContent").css("top","36px");$(this.parentElement).find(".git-docviewer-scrollablecanvas").css("padding-right","0px");break;case 2:var e=$(this.parentElement).innerWidth();$(this.parentElement).find("#leftPane").css("top","37px");$(this.parentElement).find("#leftPane").width(d);$(this.parentElement).find(".git-docviewer-container").width(e);$(this.parentElement).find(".git-docviewer-container").css("left","0px");g=e-i;$(this.parentElement).find("#rightPane").css("top","36px");$(this.parentElement).find("#rightPane").css("left",g+"px");$(this.parentElement).find("#rightPane").width(i);var h=e;$(this.parentElement).find(".git-docviewer-container").width(h);$(this.parentElement).find(".git-docviewer-scrollablecanvas").css("padding-right",d+"px");$(this.parentElement).find(".git-viewer-comment-toolbarContent").css("top","1px");break;default:var e=$(this.parentElement).innerWidth();if(e>this.parentMinWidth){$(this.parentElement).find("#leftPane").css("top","0px");$(this.parentElement).find("#leftPane").width(d);var h=e-d-i;var g=h+d;$(this.parentElement).find(".git-docviewer-container").width(h);$(this.parentElement).find(".git-docviewer-container").css("left",d+"px");$(this.parentElement).find("#rightPane").css("left",g+"px");$(this.parentElement).find("#rightPane").width(i);$(this.parentElement).find("#rightPane").css("top","0px");$(this.parentElement).find(".git-viewer-comment-toolbarContent").css("top","36px");$(this.parentElement).find(".git-docviewer-scrollablecanvas").css("padding-right","0px")}else{$(this.parentElement).find("#leftPane").css("top","37px");$(this.parentElement).find("#leftPane").width(d);$(this.parentElement).find(".git-docviewer-container").width(e);$(this.parentElement).find(".git-docviewer-container").css("left","0px");g=e-i;$(this.parentElement).find("#rightPane").css("top","36px");$(this.parentElement).find("#rightPane").css("left",g+"px");$(this.parentElement).find("#rightPane").width(i);var h=e;$(this.parentElement).find(".git-docviewer-container").width(h);$(this.parentElement).find(".git-docviewer-scrollablecanvas").css("padding-right",d+"px");$(this.parentElement).find(".git-viewer-comment-toolbarContent").css("top","1px")}break}this.onDragEndCallBack.call()}};c.prototype.refresh=function(){var d=this.getPosition();this.setPosition(d.leftPanelWidth,d.rightPanelWidth,true)};return c}());a.DivSplitter=b})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(){function c(d,e){this.parentElement=d;this.inputJsonData=e;$(d).tree({data:e,autoOpen:false,openFolderDelay:10,selectable:false})}c.prototype.addClickEvent=function(e,d){$(this.parentElement).bind("tree.click",d)};c.prototype.loadNewData=function(d){$(this.parentElement).tree("loadData",d)};return c}());b.jsonTreeView=a})(gnostice||(gnostice={}));var gnostice;(function(l){Number.prototype.format=function(u,o,r,t){var q="\\d(?=(\\d{"+(o||3)+"})+"+(u>0?"\\D":"$")+")",p=this.toFixed(Math.max(0,~~u));return(t?p.replace(".",t):p).replace(new RegExp(q,"g"),"$&"+(r||""))};var j=(function(){function o(){}o.getRectSizeToFit=function(r,s,x,p){var t=0,w=0;var v=r/s;var u=x/p;var y=x;var q=p;if(v>u){q=x/v;w=Math.abs(q-p)/2}else{if(v<u){y=p*v;t=Math.abs(y-x)/2}}return{left:t,top:w,width:y,height:q}};return o}());l.Util=j;var a=(function(){function o(){}return o}());l.RegionAction=a;var n=(function(){function o(r,q,p){this.image=r;this.width=q;this.height=p;this.rotation=0}return o}());l.Page=n;var g=(function(){function o(p,r,q){if(p===void 0){p=1}if(r===void 0){r=0}if(q===void 0){q=0}this.pageNumber=p;this.scrollXPos=r;this.scrollYPos=q}return o}());l.PageInfo=g;var f=(function(){function o(p,q){this.name=p;this.val=q}return o}());l.AnnotsKeyValuePair=f;var c=(function(){function o(p,r,q,u,s,t){this.pageNumber=p;this.signatureRect=r;this.signImage=q;this.userName=u;this.includeDateTime=s;this.dateTimeFormat=t}return o}());l.SignatureKeyValuePair=c;var b=(function(){function o(r,q,p){this.Id=r;this.SignatureImage=q;this.Name=p}return o}());l.MySignatureKeyValuePair=b;var i=(function(){function o(){}o.BMP="image/bmp";o.JPEG="image/jpeg";o.JPG="image/jpeg";o.PNG="image/png";o.DOCX="application/vnd.openxmlformats-officedocument.wordprocessingml.document";o.DOC="application/msword";o.PDF="application/pdf";o.TIFF="image/tiff";o.EMF=" image/x-emf";o.WMF="image/x-wmf";o.ICO="image/x-icon";o.GIF="image/gif";o.TXT="text/plain";o.HTML="text/html";o.XPS="application/vnd.ms-xpsdocument";return o}());l.MimeTypes=i;var e;(function(o){o[o.BLANK=0]="BLANK";o[o.RUNNING=1]="RUNNING";o[o.FINISHED=2]="FINISHED";o[o.ERROR=3]="ERROR"})(e=l.RENDERINGSTATE||(l.RENDERINGSTATE={}));var h=(function(){function o(){}o.ZOOM25=25;o.ZOOM50=50;o.ZOOM75=75;o.ZOOM100=100;o.ZOOM125=125;o.ZOOM150=150;o.ZOOM200=200;o.ZOOMACTUALSIZE=100;o.ZOOMPAGEHEIGHT=1002;o.ZOOMPAGEWIDTH=1003;o.ZOOMPAGESIZE=1004;o.ZOOMCUSTOM=100;return o}());var m;(function(o){o[o.AllowUpload=1]="AllowUpload";o[o.AllowPrinting=2]="AllowPrinting";o[o.AllowSave=3]="AllowSave";o[o.AllowDownload=4]="AllowDownload";o[o.AllowDownloadAs=5]="AllowDownloadAs"})(m||(m={}));var k=(function(){function o(){}return o}());l.DocumentInfo=k;var d=(function(){function o(s,y,w,x,r,v){var u=this;this.fontAwesomePrefix=v;this.pluggableModules=new Array();this.regionActionList=new Array();this.onToolbarResize=function(){};this.hideFloatingToolbar=function(){};this.selectedPage=1;this.pageChangeCancel={value:false};this.zoomChangeCancel={value:false};this.beforeSaveCancel={value:false};this.documentLoadCancel={value:false};this.documentUploadCancel={value:false};this.printCancel={value:false};this.documentCloseCancel={value:false};this.documentDownloadCancel={value:false};this.rotateCancel={value:false};this.saveCancel={value:false};this.downloadFormat={value:""};this.documentPassword={value:""};this.pageRegionSelectable=false;this.isPrintingInProgress=false;this.passwordAttemptCount=0;this.mimeType="";this.pageCount=0;this.password="";this.printingDpi=96;this.renderingDpi=96;this.starDocs=false;this.maxPrintPageCount=50;this.currentPage=0;this.pageRenderingState=new Array();this.thumbnailPageRenderingState=new Array();this.zoomSteps=new Array();this.zoomText="100%";this.zoomFactor=1;this.prevZoomFactor=1;this.formatType=l.FormatType.Flow;this.navigationPaneOpen=false;this.pages=new Array();this.thumbnailPages=new Array();this.pageQuality=new Array();this.visiblePages=new Array();this.thumbnailVisiblePages=new Array();this.signaturesPerPage=new Array();this.docContainsAnnots=false;this.docContainsForm=false;this.docContainsBookmarks=false;this.bookmarkDataAvailable=false;this.rotationAngle=0;this.viewingInverted=false;this.defaultPageHeight=842;this.defaultPageWidth=595;this.isFullScreen=false;this.isCurrentPageNumberSet=false;this.thumbnailActive=true;this.bookmarkActive=false;this.enableAnnotations=true;this.enableFormFilling=true;this.enableRedaction=false;this.thumbnailPageSize={height:140,width:100};this.maxPageWidth=0;this.maxPageHeight=0;this.documentLoaded=false;this.tapped=true;this.serverDocumentPath=null;this.passwordRetryCount=0;this.userName="Anonymous";this.serverViewerPreferences=null;this.userProfileSignature=null;this.debounceTimerId=-1;this.debouncePageRequest=this.debouncePrioritizePageRequest(this.prioritizeAndRenderPages,600);this.isUserFastScrolling=false;this.formsModule=null;this.annotsModule=null;this.signatureModule=null;this.events=new l.EventDispatcher();this.currentSignature=null;this.signatureMenu=null;this.applyRotationTransform=function(A,B,z){switch(this.rotationAngle){case 0:A.translate(0,0);break;case 90:case -270:A.translate(z,0);break;case 180:case -180:A.translate(z,B);break;case 270:case -90:A.translate(0,B);break;case 360:A.translate(0,0);break}return A};this.getZoomText=function(z){var A=null;switch(z){case h.ZOOM25:A="25%";break;case h.ZOOM50:A="50%";break;case h.ZOOM75:A="75%";break;case h.ZOOM100:A="100%";break;case h.ZOOM125:A="125%";break;case h.ZOOM150:A="150%";break;case h.ZOOM200:A="200%";break;case h.ZOOMPAGEWIDTH:A=l.LocalizedStrings.page_fit_width;break;case h.ZOOMACTUALSIZE:A=l.LocalizedStrings.page_fit_actual_size;break;case h.ZOOMPAGEHEIGHT:A=l.LocalizedStrings.page_fit_height;break;case h.ZOOMPAGESIZE:A=l.LocalizedStrings.fit_page;break;case h.ZOOMCUSTOM:A=l.LocalizedStrings.tooltip_custom_zoom;break;default:A=l.LocalizedStrings.tooltip_custom_zoom;break}return A};this.uploaderId=x;this.handlerUri=w;this.viewerDOM=y;this.zoomValue=h.ZOOM100;this.preferences=r;this.documentViewer=s;var q=window;if(typeof q.stardocs==="undefined"){this.serverCom=new l.DOTNETServerCom();this.starDocs=false;this.applyServerViewerPreferences(w)}else{this.serverCom=new l.StarDocsServerCom(r);this.starDocs=true;this.serverViewerPreferences={Rendering:{ViewingDPI:r.renderingDpi,PrintingDPI:r.renderingDpi},FileOperations:{AllowUpload:r.visibleFileOperationControls.open,AllowDownload:r.visibleFileOperationControls.download,AllowDownloadAs:r.visibleFileOperationControls.download,AllowSave:r.visibleFileOperationControls.save,AllowPrinting:r.visibleFileOperationControls.print},Interactivity:{AllowFormFilling:r.interactiveElements.form.enableFormFilling,AllowAnnotations:r.interactiveElements.annotations.enableAnnotations},Digitization:{Enabled:false,RecognizeLanguages:"eng"},Security:{ForceFullUserPermissions:true}};this.registeringSupportedLayer()}l.UIEvents.click(y.openDocBtn,function(){if((u.serverViewerPreferences!=null)&&(u.serverViewerPreferences.FileOperations.AllowUpload)){$(y.uploader).click()}});if(!this.starDocs){$(this.viewerDOM.viewableArea).attr({oncontextmenu:"return false;"});$(this.viewerDOM.thumbnailContent).attr({oncontextmenu:"return false;"});$(this.viewerDOM.bookmarkContent).attr({oncontextmenu:"return false;"})}l.UIEvents.click(y.printBtn,this.onPrintBtnClick,this);l.UIEvents.click(y.saveBtn,this.onSaveBtnClick,this);l.UIEvents.click(y.downloadBtn,this.onDownloadBtnClick,this);l.UIEvents.change(y.downloadAsCmbBox,this.onDownloadDropdownChange,this);l.UIEvents.click(y.firstPage,this.onFirstPageClick,this);l.UIEvents.click(y.lastPage,this.onLastPageClick,this);l.UIEvents.click(y.prevPage,this.onPrevPageClick,this);l.UIEvents.click(y.nextPage,this.onNextPageClick,this);l.UIEvents.blur(y.pageIndicator,this.onPageIndicatorBlur,this);l.UIEvents.keydown(y.pageIndicator,this.onPageIndicatorKeydown,this);l.UIEvents.click(y.pageIndicator,this.onPageIndicatorClick,this);l.UIEvents.click(y.zoomIn,this.onZoomInClick,this);l.UIEvents.click(y.zoomOut,this.onZoomOutClick,this);l.UIEvents.scroll(y.viewableArea,this.onScrollCallback,this);l.UIEvents.scroll(y.thumbnailContent,this.onThumbnailPaneScroll,this);l.UIEvents.click(y.thumbanailBtn,this.onClickThumbnail,this);l.UIEvents.click(y.bookmarkBtn,this.onClickBookmark,this);l.UIEvents.click(y.docPropertiesBtn,this.onClickDocumentPropertiesBtn,this);l.UIEvents.change(y.uploader,function(z){z.preventDefault();var A=y.uploader.files;var B=A[0];if(B!=undefined){u.uploadDocument(B,y);$(y.uploader).val("")}});l.UIEvents.change(y.zoomDropdown,this.onZoomDropdownChange,this);var t=$(this.viewerDOM.zoomDropdown).siblings("input");l.UIEvents.keydown(t,this.onZoomTextKeyDown,this);l.UIEvents.blur(t,this.onZoomTextBlur,this);l.UIEvents.click(y.rotatePagesClockwise,this.onRotateClockwiseClick,this);l.UIEvents.click(y.rotatePagesCounterClockwise,this.onRotateCounterClockwiseClick,this);l.UIEvents.click(y.invertBtn,this.onInvertPagesBtnClick,this);l.UIEvents.click(y.addSignatureBtn,this.onAddSignatureClick,this);y.signatureDialog.OnDrawingSubmit=function(B,E){var A=y.signatureDialog.getSignatureImage();var D=y.signatureDialog.getFullName();var z=y.signatureDialog.getId();u.renderSignatureOnPage(A,D,B);if(E){var C=new l.UserSignature(A,D,z);u.signatureModule.Save(C)}};l.UIEvents.click(y.redactBtn,this.onRedactionButtonClick,this);l.UIEvents.click(y.fullScreenBtn,this.onFullScreenBtnClick,this);this.events.addEventListener(l.EventNames.beforeDocumentSaveInternal,this.saveChangesFromPluggableModules);if(this.preferences.navigationPane.enableBookmarks){this.bookmarkTreeView=new l.jsonTreeView(this.viewerDOM.bookmarkContent,null);this.bookmarkTreeView.addClickEvent("tree.click",function(A){var z=A.node;u.performPDFActions(z.actions)})}this.rotationAngle=this.preferences.initialView.rotationAngle;this.viewingInverted=this.preferences.initialView.colorInversionApplied;this.resetViewerSettings();var p=function(){if(!u.documentLoaded||u.zoomText!=l.LocalizedStrings.page_fit_width){return}u.updateZoomSteps();var B=u.getZoomValue(u.zoomText);if(Number(B)===B&&B%1===0){$(u.viewerDOM.zoomDropdown).siblings("input").val(B+"%")}else{$(u.viewerDOM.zoomDropdown).siblings("input").val(B.toFixed(1)+"%")}var A=u.getZoomValue(l.LocalizedStrings.page_fit_width);var z=u.getZoomValue(l.LocalizedStrings.page_fit_height);if((u.zoomValue==A)||(u.zoomValue==z)){u.reFlowDocument(true)}u.onToolbarResize.call();u.setToolbarButtonUIState()};this.vSplitter=new l.DivSplitter(y.viewer,p,false,this.preferences.navigationPane.position);this.calculateThumbnailPageDimentions();$(window).resize(function(){u.vSplitter.refresh();if(u.documentLoaded){u.refreshToCurrentZoom()}u.onToolbarResize.call();u.setToolbarButtonUIState()});l.UIEvents.click(this.viewerDOM.sidePaneToggleBtn,function(){var z=u.vSplitter.getPosition().leftPanelWidth<1;u.refreshLeftRightPanel(z)},this);this.setCurrentPage(0);$(document).on("click",function(z){if(u.signatureMenu!=null){if(u.signatureMenu.isVisible()){u.signatureMenu.hide()}}});$(document).on("keydown",function(z){if(z.key=="Escape"){if(u.currentSignature!=null){u.currentSignature.detach();u.currentSignature=null}}});this.JQueryUIConflicts()}o.prototype.renderSignatureOnPage=function(u,v,t){if(t==null){this.currentSignature=new l.SignatureWidget(this.currentPage,u,v,this)}else{var s=new l.SignatureWidget(this.currentPage,u,v,this);s.setSignaturePlaceholder(t);var p=t.getPageNumber();var r=document.getElementById("#"+this.documentId+p);var q=this.signatureModule.createPageSignaturePane(r,p);s.setActive(true);s.render(q);this.signatureModule.AddSignature(s);this.events.dispatchAll(l.EventNames.onSignaturePlaced,{id:s.getId(),pageNumber:p,base64Image:u})}};o.prototype.JQueryUIConflicts=function(){$.widget.bridge("jqUiTooltip",$.ui.tooltip)};o.prototype.refreshLeftRightPanel=function(p){if(this.vSplitter==undefined){return}if(p===true){$(this).addClass("toggled");this.vSplitter.setPosition(this.preferences.navigationPane.width,this.vSplitter.rightPanelWidth);$(this.viewerDOM.thumbnailContent).css("overflow","auto");$(this.viewerDOM.bookmarkContent).css("overflow","auto");if(this.preferences.lazyLoading){this.prioritizeThumbnailPages()}}else{$(this).removeClass("toggled");this.vSplitter.setPosition(0,this.vSplitter.rightPanelWidth);$(this.viewerDOM.thumbnailContent).css("overflow","hidden");$(this.viewerDOM.bookmarkContent).css("overflow","hidden")}this.navigationPaneOpen=p;this.defaultThumbnailsBookmarkStates();this.onToolbarResize.call()};o.prototype.fullscreenchange=function(){var p=window;if(!p.screenfull.isFullscreen){try{$("#external-iframe").remove();document.body.style.overflow="auto"}catch(q){}$(this.viewerDOM.fullScreenBtn).removeClass("git-docviewer-fullScreen-exit");$(this.viewerDOM.fullScreenBtn).addClass("git-docviewer-fullScreen")}else{$(this.viewerDOM.fullScreenBtn).addClass("git-docviewer-fullScreen-exit");$(this.viewerDOM.fullScreenBtn).removeClass("git-docviewer-fullScreen")}};o.prototype.calculateThumbnailPageDimentions=function(){var p=this.preferences.navigationPane.width;var q=this.thumbnailPageSize.width;this.thumbnailPageSize.width=p-100;this.thumbnailPageSize.height=(this.thumbnailPageSize.width/q)*this.thumbnailPageSize.height};o.prototype.refreshToCurrentZoom=function(){this.updateZoomSteps();var r=this.zoomValue;if(Number(r)===r&&r%1===0){$(this.viewerDOM.zoomDropdown).siblings("input").val(r+"%")}else{$(this.viewerDOM.zoomDropdown).siblings("input").val(r.toFixed(1)+"%")}var q=this.getZoomValue(l.LocalizedStrings.page_fit_width);var p=this.getZoomValue(l.LocalizedStrings.page_fit_height);if((this.zoomValue==q)||(this.zoomValue==p)){this.reFlowDocument(false)}};o.prototype.initializePluggableModules=function(){if(this.rightPane!=null){this.rightPane.destroy()}var p=false;for(var r=0;r<this.pluggableModules.length;r++){if(this.pluggableModules[r].hasPaneToolbar()){p=true;break}}if(p){var q=true;var s=261;this.rightPane=new l.RightPane(this.vSplitter,this.viewerDOM.viewer,q,s);for(var r=0;r<this.pluggableModules.length;r++){if(this.pluggableModules[r].hasPaneToolbar()){this.rightPane.add(this.pluggableModules[r].createPaneToolbarView());this.pluggableModules[r].registerPaneEvents(this.rightPane)}}if(this.navigationPaneOpen){this.refreshLeftRightPanel(true)}}else{this.refreshLeftRightPanel(this.navigationPaneOpen)}};o.prototype.defaultThumbnailsBookmarkStates=function(){if((this.thumbnailActive==false)||(this.bookmarkActive==false)){if(this.preferences.navigationPane.enableThumbnails){$(this.viewerDOM.thumbanailBtn).parent().children().removeClass("toggled");$(this.viewerDOM.thumbanailBtn).addClass("toggled");$(this.viewerDOM.bookmarkContent).hide();$(this.viewerDOM.thumbnailContent).show();this.bookmarkActive=false;this.thumbnailActive=true}else{if(this.preferences.navigationPane.enableBookmarks){$(this.viewerDOM.bookmarkBtn).parent().children().removeClass("toggled");$(this.viewerDOM.bookmarkBtn).addClass("toggled");$(this.viewerDOM.bookmarkContent).show();$(this.viewerDOM.thumbnailContent).hide();this.bookmarkActive=true;this.thumbnailActive=false}}}};o.prototype.resizePagesOnViewerSizeChanges=function(){this.vSplitter.refresh();if(this.documentLoaded){this.refreshToCurrentZoom()}};o.prototype.registerPluggableModule=function(p){this.pluggableModules.push(p);p.initialize(this,this.serverCom)};o.prototype.resetPluggableModules=function(){for(var p=0;p<this.pluggableModules.length;p++){this.pluggableModules[p].resetModule()}};o.prototype.IsRenderingCompleted=function(){return this.documentRenderingCompleted};o.prototype.isPageFetchingCompleted=function(){var p=0;this.pages.forEach(function(q){return((q!=null)?++p:0)});return this.documentRenderingCompleted&&(p>=this.pageCount)};o.prototype.saveChangesFromPluggableModules=function(s){var q=jQuery.Deferred();var v=s.viewerManager;var u={};if(v.pluggableModules.length<2){return}v.beforeSaveCancel.value=false;for(var r=0;r<v.pluggableModules.length;r++){var t=v.pluggableModules[r].onBeforeSave(v,v.beforeSaveCancel);if(t!=null){u[t.module]=t.value;if(t.module=="signatures"){if(v.preferences.interactiveElements.signatures.allowSavingUserSignatures){var p=v.pluggableModules[r].GetMySignatures();if(p!=null){u[p.module]=p.value}}}}}if(v.beforeSaveCancel.value){q.reject();return}if(!$.isEmptyObject(u)){v.pluggableModules[0].serverCom.saveDocumentChanges(v.revisionUri,v.password,u).done(function(x){if(v.mimeType==i.PDF){v.viewerDOM.notificationControl.pushNotification(l.LocalizedStrings.notification_popup_success_header,l.LocalizedStrings.notification_popup_success_message,l.NotificationType.Info)}if(x.documents!=null&&x.documents[0]!=null){v.revisionUri=x.documents[0].url}for(var w=0;w<v.pluggableModules.length;w++){v.pluggableModules[w].onAfterSave(v,x)}q.resolve()}).fail(function(w){if(v.mimeType==i.PDF){v.viewerDOM.notificationControl.pushNotification(l.LocalizedStrings.notification_popup_failure_header,l.LocalizedStrings.notification_popup_failure_message,l.NotificationType.Failed)}q.reject()});return q.promise()}else{return q.resolve().promise()}};o.prototype.uploadDocument=function(q,p){var r=this;this.password="";this.passwordAttemptCount=0;this.events.dispatchAll(l.EventNames.beforeDocumentUpload,{documentUploadCancel:this.documentUploadCancel,viewerManager:this});if(this.documentUploadCancel==true){return}this.viewerDOM.progressAnimation.showAnimation(l.LocalizedStrings.progress_msg_uploading);this.serverCom.uploadDocument(q,this.uploaderId,this.handlerUri).done(function(s){l.logger.logInfo("Response: Action:uploadDocument, states: succeeded, documentURI:"+s.documents[0].url);r.viewerDOM.progressAnimation.hideAnimation();r.documentId=r.generateGuid();r.documentUri=s.documents[0].url;r.revisionUri=r.documentUri;r.events.dispatchAll(l.EventNames.afterDocumentUpload,{documentUri:r.documentUri,viewerManager:r});r._loadDocument()}).fail(function(s){r.viewerDOM.progressAnimation.hideAnimation();r.resetViewerSettings();l.logger.logError("Response: Action:uploadDocument, failed "+s)})};o.prototype.resetViewerSettings=function(){var t=this;this.formatType=l.FormatType.Flow;this.viewerDOM.passwordDialog.reset();this.viewerDOM.propertiesWindow.hide();this.passwordRetryCount=0;this.resetPluggableModules();$(this.viewerDOM.pageIndicator).removeClass("inputPageCountProgress");$(this.viewerDOM.viewableArea).html("");$(this.viewerDOM.thumbnailContent).html("");$(this.viewerDOM.bookmarkContent).html("");$(this.viewerDOM.thumbnailContent).css("overflow","auto");$(this.viewerDOM.bookmarkContent).css("overflow","auto");$(this.viewerDOM.thumbnailContent).show();$(this.viewerDOM.bookmarkContent).hide();$(this.viewerDOM.thumbanailBtn).parent().children().removeClass("toggled");$(this.viewerDOM.thumbanailBtn).addClass("toggled");$(this.viewerDOM.bookmarkBtn).attr("disabled","true");if(this.viewerDOM.downloadAsCmbBox!=undefined){this.viewerDOM.downloadAsCmbBox.value=".temp"}this.serverDocumentPath=null;this.bookmarkDataAvailable=false;this.docContainsBookmarks=false;this.pageRegionSelectable=false;this.pageCount=0;this.currentPage=0;this.pages.length=0;this.thumbnailPages.length=0;this.thumbnailPageRenderingState.length=0;this.pageRenderingState.length=0;this.nextPageNumber=0;this.prevPageNumber=0;this.flipBoudaryPageOrder=false;this.documentRenderingCompleted=false;this.maxPageWidth=0;this.maxPageHeight=0;this.documentLoaded=false;this.updateZoomSteps();if(this.rightPane!=null){this.rightPane.collapse()}switch(this.preferences.initialView.zoomValue){case l.ZoomMode.actualSize:this.zoomValue=h.ZOOMACTUALSIZE;break;case l.ZoomMode.fitHeight:this.zoomValue=h.ZOOMPAGEHEIGHT;break;case l.ZoomMode.fitWidth:this.zoomValue=h.ZOOMPAGEWIDTH;break;case h.ZOOM25:this.zoomValue=h.ZOOM25;break;case h.ZOOM50:this.zoomValue=h.ZOOM50;break;case h.ZOOM100:this.zoomValue=h.ZOOM100;break;case h.ZOOM150:this.zoomValue=h.ZOOM150;break;case h.ZOOM200:this.zoomValue=h.ZOOM200;break;default:this.zoomValue=this.preferences.initialView.zoomValue;h.ZOOMCUSTOM=this.preferences.initialView.zoomValue;break}if(this.documentLoaded){var r=this.zoomValue;if(Number(r)===r&&r%1===0){$(this.viewerDOM.zoomDropdown).siblings("input").val(r+"%")}else{$(this.viewerDOM.zoomDropdown).siblings("input").val(r.toFixed(1)+"%")}}else{$(this.viewerDOM.zoomDropdown).siblings("input").val("100%")}this.zoomText=this.getZoomText(this.zoomValue);this.zoomFactor=1;this.prevZoomFactor=1;this.setCurrentPage(this.currentPage);this.updatePageNavButtonState();this.hideMessageBox();var q=null;var s=this;$(this.viewerDOM.zoomDropdown).find("option").each(function(){if($(t).text().toLowerCase()==s.zoomText.toLowerCase()){q=$(t)}else{$(t).prop("selected",true).siblings().removeAttr("selected")}});$(q).prop("selected",true);var p=this.preferences.initialView.zoomValue;if(p==l.ZoomMode.fitWidth||p==l.ZoomMode.fitHeight||p==l.ZoomMode.actualSize){this.setZoomMode(p)}else{this.zoomTo(p)}this.rotateTo(this.rotationAngle);if(this.viewingInverted){this.invertColors(true)}this.setToolbarButtonUIState()};o.prototype.s4=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};o.prototype.generateGuid=function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()};o.prototype.getPageInfoAtScrollPos=function(u){var t=new g();var v=this.viewerDOM.viewableArea;var w=this.documentId;var r=Number(v.scrollTop);var s=1,p=0;for(s=1;s<=Number(this.pageCount);s++){var q=$("#"+this.documentId+s);p=p+$("#"+w+s).outerHeight(true);if(p>=r){t.pageNumber=s;t.scrollXPos=$(v).scrollLeft()/u;t.scrollYPos=(r-q[0].offsetTop)/u;break}}l.logger.logInfo("Getting page info at current scroll pos "+s);return t};o.prototype.setScrollPos=function(s,q){if(q===void 0){q=false}var t=this.viewerDOM.viewableArea;var r=$("#"+this.documentId+s.pageNumber);if(r!=null&&r[0]!=null){if(q&&(this.rotationAngle==90||this.rotationAngle==270||this.rotationAngle==-90||this.rotationAngle==-270)){var p=r[0].offsetTop;var u=r[0].offsetLeft}else{var p=r[0].offsetTop+s.scrollYPos*this.zoomFactor;var u=r[0].offsetLeft+s.scrollXPos*this.zoomFactor}$(t).scrollTop(p);$(t).scrollLeft(u)}};o.prototype._loadDocument=function(){this.events.dispatchAll(l.EventNames.beforeDocumentLoad,{documentUri:this.documentUri,documentLoadCancel:this.documentLoadCancel,viewerManager:this});if(this.documentLoadCancel.value==true){return}this.resetViewerSettings();l.logger.logInfo("Action: _loadDocument, Resetting viewer settings to default");return this.getDocumentInfo()};o.prototype.enCryptPassword=function(r){var p=window;var s=p.CryptoJS.enc.Utf8.parse("8080808080808080");var q=p.CryptoJS.enc.Utf8.parse("8080808080808080");var t=p.CryptoJS.AES.encrypt(p.CryptoJS.enc.Utf8.parse(r),s,{keySize:128/8,iv:q,mode:p.CryptoJS.mode.CBC,padding:p.CryptoJS.pad.Pkcs7});return t};o.prototype.updateThumbnailPageSelectionState=function(p){if(this.preferences.navigationPane.enableThumbnails){$(this.viewerDOM.thumbnailContent).find(".git-viewer-thumbnail-page-active").removeClass("git-viewer-thumbnail-page-active");$("#"+this.documentId+"thumb"+p).addClass("git-viewer-thumbnail-page-active")}};o.prototype._getEncodedPasswordFromUrl=function(r){var s=r.split("/");var p="";for(var q=0;q<s.length;q++){if(s[q]=="passcode"){p=s[q+1];break}}return p};o.prototype._removePasswordFromUrl=function(q){var s=q.split("/");var r="";for(var p=0;p<s.length;p++){if(s[p]=="passcode"){p=p+1}else{r+=s[p];r+="/"}}return r};o.prototype.applyServerViewerPreferences=function(p){var r=this;var q=jQuery.Deferred();if(this.serverViewerPreferences==null){this.serverCom.getViewerPreferences(p).done(function(s){if(r.serverViewerPreferences==null){r.serverViewerPreferences=s;if(r.serverViewerPreferences.Interactivity.AllowSigning){r.fetchUserSignaturesFromServer(p)}r.resetViewerSettings();r.registeringSupportedLayer()}q.resolve()})}else{q.resolve()}return q};o.prototype.fetchUserSignaturesFromServer=function(p){var q=this;if(this.userProfileSignature==null){this.serverCom.getUserSignatures(p).done(function(s){if(q.userProfileSignature==null){q.userProfileSignature=s;for(var r=0;r<q.userProfileSignature.length;r++){var t=new l.UserSignature(q.userProfileSignature[r].SignatureImage,q.userProfileSignature[r].Name,q.userProfileSignature[r].Id);q.signatureModule.Save(t)}}})}};o.prototype.getDocumentInfo=function(){var q=this;this.viewerDOM.progressAnimation.showAnimation(l.LocalizedStrings.progress_msg_loading);var p=jQuery.Deferred();this.applyServerViewerPreferences(this.handlerUri).done(function(){q.serverCom.getDocInfo(q.documentUri,q.password).done(function(u){if(u.oprStatusCode==l.OperationStatusCode.CODE_FAILURE_INSUFFICIENT_RIGHTS){q.viewerDOM.progressAnimation.hideAnimation();$(q.viewerDOM.thumbnailContent).hide();p.resolve(u);q.events.dispatchAll(l.EventNames.needDocumentPassword,{documentUri:q.documentUri,password:q.documentPassword});if(q.documentPassword.value!=""){q.password=encodeURIComponent(q.enCryptPassword(q.documentPassword.value));q.getDocumentInfo()}else{if(q.preferences.security.password.enablePasswordDialog){q.viewerDOM.passwordDialog.reset();if(q.passwordRetryCount>0){q.viewerDOM.passwordDialog.setErrorMessage(l.LocalizedStrings.msgdlg_password_incorrect)}if(q.passwordRetryCount<q.preferences.security.password.maxNumberOfPasswordRetries){q.passwordRetryCount++;q.viewerDOM.passwordDialog.show(function(v){q.password=encodeURIComponent(q.enCryptPassword(v));q.getDocumentInfo()})}else{q.viewerDOM.passwordDialog.hide();q.viewerDOM.progressAnimation.hideAnimation();q.viewerDOM.passwordWarningMessage.show(l.LocalizedStrings.msgdlg_password_retry_limit,function(){q.viewerDOM.passwordWarningMessage.hide()})}}}}else{l.logger.logInfo("getDocInfo response: MimeType:"+u.fileInfo.mimeType+", pageCount : "+u.pageCount);q.viewerDOM.passwordDialog.hide();q.resetViewerSettings();var s=false;var t=false;if(q.starDocs){q.userName="anonymous";q.mimeType=u.mimeType;if(q.mimeType=="application/pdf"||q.mimeType.indexOf("image")==0){q.formatType=l.FormatType.WYSIWYG}q.docContainsBookmarks=u.containsBookmarks;q.docContainsForm=u.containsForm;q.docContainsAnnots=false;t=q.serverViewerPreferences.Interactivity.AllowFormFilling;s=q.serverViewerPreferences.Interactivity.AllowAnnotations}else{q.userName=u.userIdentity.userName;s=u.security.allowCommenting;t=u.security.allowFormFilling;k.fileName=u.fileInfo.fileName;k.title=u.docInfo.title;k.author=u.docInfo.author;k.subject=u.docInfo.subject;k.keywords=u.docInfo.keywords;k.mimeType=u.fileInfo.mimeType;k.fileExtension=u.fileInfo.fileExtension;k.fileSize=q.formatFileSize(u.fileInfo.fileSize);k.creationTime=u.docInfo.creationTime;k.modifiedTime=u.docInfo.modifiedTime;k.creator=u.docInfo.creator;k.producer=u.docInfo.producer;k.securityMethod=u.security.securityMethod;k.encryptionLevel=u.security.encryptionLevel;k.hasOpenPassword=u.security.hasOpenPassword;k.hasPermissionPassword=u.security.hasPermissionPassword;k.allowsCommenting=u.security.allowCommenting;k.allowsFormFilling=u.security.allowFormFilling;q.formatType=u.docInfo.formatType;q.mimeType=u.fileInfo.mimeType;q.docContainsBookmarks=u.docInfo.containsBookmarks;q.docContainsForm=u.docInfo.containsForm;q.docContainsAnnots=u.docInfo.containsAnnots}if(!q.docContainsBookmarks){$(q.viewerDOM.bookmarkBtn).attr("disabled","true")}else{$(q.viewerDOM.bookmarkBtn).removeAttr("disabled")}q.revisionUri=q.documentUri;if(u.pageCount==0||u.pageCount==-1){q.isCurrentPageNumberSet=false;q.pageCount=0;q.setCurrentPage(0)}else{q.isCurrentPageNumberSet=true;q.pageCount=parseInt(u.pageCount);q.setCurrentPage(1);q.updatePageNavButtonState()}q.events.dispatchAll(l.EventNames.docInfoRetrieved,{mimeType:q.mimeType,containsForm:q.docContainsForm,containsAnnots:q.docContainsAnnots,allowCommenting:s,allowFormFilling:t,pageCount:q.pageCount,viewerManager:q});if(q.formatType==l.FormatType.Flow){$(q.viewerDOM.pageIndicator).addClass("inputPageCountProgress")}l.logger.logInfo("Creating blank pages, pageCount: "+q.pageCount);for(var r=1;r<=q.pageCount;r+=1){q.createBlankPage(r)}if(q.isCurrentPageNumberSet){q.viewerDOM.progressAnimation.hideAnimation()}q.updateThumbnailsVisiblePages();q.updateThumbnailPageSelectionState(q.currentPage);l.logger.logInfo("Requesting for first page from server...");if(!q.isPageRequested(1)){q.requestFromServerAndRenderPage(1)}q.documentLoaded=true;q.setToolbarButtonUIState();if(q.mimeType=="application/pdf"){$(q.viewerDOM.redactBtn).removeAttr("disabled");if(q.preferences.visibleFileOperationControls.save){$(q.viewerDOM.saveBtn).show()}}else{$(q.viewerDOM.redactBtn).attr("disabled","disabled");$(q.viewerDOM.saveBtn).hide()}p.resolve({mimetype:q.mimeType,documentUri:q.documentUri});q.initializePluggableModules();q.events.dispatchAll(l.EventNames.afterDocumentLoad,{viewerManager:q})}}).fail(function(r){q.resetViewerSettings();q.viewerDOM.progressAnimation.hideAnimation();p.reject(r);l.logger.logError("Failed from DocInfo server call")})});return p.promise()};o.prototype.formatFileSize=function(p){if(p<1024){return p+" Bytes"}else{if(p<1048576){return Math.round(p/1024)+" KB"}else{if(p<1073741824){return Math.round(p/1048576)+" MB"}else{return Math.round(p/1073741824)+" GB"}}}};o.prototype.loadDocument=function(s,r,p,q){this.password="";this.documentId=this.generateGuid();if(r==""){var u=s.split("?");if(u.length==2){var t=u[1].replace("password=","");this.password=t}this.documentUri=u[0]}else{this.password=encodeURIComponent(this.enCryptPassword(r));this.documentUri=s}this.passwordRetryCount=0;this.viewerDOM.passwordDialog.reset();this.revisionUri=this.documentUri;return this._loadDocument()};o.prototype.loadDocumentFromServer=function(r,p){var q=this;this.password=encodeURIComponent(this.enCryptPassword(p));this.resetViewerSettings();this.viewerDOM.progressAnimation.showAnimation(l.LocalizedStrings.progress_msg_loading_server);l.logger.logInfo("Action: uploadDocumentFromUri, Resetting viewer settings to default");this.serverCom.loadDocumentFromServer(r,this.handlerUri).done(function(s){if(s.documents!=null){l.logger.logInfo("Response: Action:loadDocumentFromServer, states: succeeded, documentURI:"+s.documents[0].url);q.viewerDOM.progressAnimation.hideAnimation();q.documentId=q.generateGuid();q.documentUri=s.documents[0].url;q.revisionUri=q.documentUri;q.events.dispatchAll(l.EventNames.afterDocumentUpload,{documentUri:q.documentUri,viewerManager:q});q._loadDocument()}}).fail(function(s){q.viewerDOM.progressAnimation.hideAnimation();l.logger.logError("Response: Action:uploadDocument, failed "+s)})};o.prototype.uploadDocumentFromUri=function(r,q){var s=this;this.password=encodeURIComponent(this.enCryptPassword(q));var p={documentUploadCancel:this.documentUploadCancel,beforeSend:function(t){},viewerManager:this};this.events.dispatchAll(l.EventNames.beforeDocumentUpload,p);if(this.documentUploadCancel==true){return}this.resetViewerSettings();this.viewerDOM.progressAnimation.showAnimation(l.LocalizedStrings.progress_msg_uploading);l.logger.logInfo("Action: uploadDocumentFromUri, Resetting viewer settings to default");this.serverCom.uploadDocumentFromUri(r,this.handlerUri,p.beforeSend).done(function(t){if(t.documents!=null){l.logger.logInfo("Response: Action:uploadDocumentFromUri, states: succeeded, documentURI:"+t.documents[0].url);s.viewerDOM.progressAnimation.hideAnimation();s.documentId=s.generateGuid();s.documentUri=t.documents[0].url;s.revisionUri=s.documentUri;s.events.dispatchAll(l.EventNames.afterDocumentUpload,{documentUri:s.documentUri,viewerManager:s});s._loadDocument()}}).fail(function(t){s.viewerDOM.progressAnimation.hideAnimation();l.logger.logError("Response: Action:uploadDocument, failed "+t)})};o.prototype.closeDocument=function(s){var r=this;var p=jQuery.Deferred();this.events.dispatchAll(l.EventNames.beforeDocumentClose,{documentUri:this.documentUri,documentCloseCancel:this.documentCloseCancel,viewerManager:this});if(this.documentCloseCancel.value==true){return}var q=this.documentUri;if(s==this.documentUri){this.documentLoaded=false;this.resetViewerSettings()}l.logger.logInfo("Action: closeDocument, Resetting viewer settings to default");if(q!=""){this.serverCom.disposeDocument(q).done(function(t){l.logger.logInfo("Action: closeDocument, Resetting viewer settings to default");r.events.dispatchAll(l.EventNames.afterDocumentClose,{viewerManager:r});p.resolve({documentUri:t[0]})}).fail(function(t){p.reject()})}return p.promise()};o.prototype.uploadDocumentFromBuffer=function(p,q){var r=this;this.password=encodeURIComponent(this.enCryptPassword(q));this.events.dispatchAll(l.EventNames.beforeDocumentUpload,{documentUploadCancel:this.documentUploadCancel,viewerManager:this});if(this.documentUploadCancel==true){return}this.viewerDOM.progressAnimation.showAnimation(l.LocalizedStrings.progress_msg_uploading);this.resetViewerSettings();l.logger.logInfo("Action: uploadDocumentFromBuffer, Resetting viewer settings to default");this.serverCom.uploadDocumentFromBuffer(p,this.handlerUri).done(function(s){l.logger.logInfo("Response: Action:uploadDocumentFromBuffer, states: succeeded, documentURI:"+s.documents[0].url);r.viewerDOM.progressAnimation.hideAnimation();r.documentId=r.generateGuid();r.documentUri=s.documents[0].url;r.events.dispatchAll(l.EventNames.afterDocumentUpload,{documentUri:r.documentUri,viewerManager:r});r._loadDocument()}).fail(function(s){this.viewerDOM.progressAnimation.hideAnimation();l.logger.logError("Response: Action:uploadDocument, failed "+s)})};o.prototype.getUserSignatures=function(){if(this.signatureModule==null){return null}return this.signatureModule.userSignatures};o.prototype.getServerDocumentURI=function(){var p=this.documentUri;l.logger.logInfo("Action: closeDocument, Resetting viewer settings to default");if(p!=""){return this.serverCom.getDocumentAbsolutePath(p)}};o.prototype.download=function(){return this.downloadDocument(null)};o.prototype.downloadAs=function(p){return this.downloadDocument(p)};o.prototype.print=function(){return this.printDocument()};o.prototype.firstPage=function(){this.scrollToPage(1)};o.prototype.prevPage=function(){this.scrollToPage(this.getPrevPageNumber())};o.prototype.nextPage=function(){this.scrollToPage(this.getNextPageNumber())};o.prototype.lastPage=function(){if(this.currentPage<this.pageCount){this.scrollToPage(this.pageCount)}};o.prototype.getCurrentPageNumber=function(){return this.currentPage};o.prototype.zoomIn=function(){this.zoom("in",null)};o.prototype.zoomOut=function(){this.zoom("out",null)};o.prototype.rotatePagesClockwise=function(){this.rotate(true)};o.prototype.rotatePagesCounterClockwise=function(){this.rotate(false)};o.prototype.invertColors=function(p){this.invertPages(p)};o.prototype.gotoPage=function(p){this.scrollToPage(p)};o.prototype.save=function(){return this.saveDocument()};o.prototype.updateThumbnailsVisiblePages=function(){if(!this.thumbnailActive){return}var q=10;var r;var v=$(this.viewerDOM.thumbnailContent);this.thumbnailVisiblePages.length=0;r=$(v).height();var u=Number($(v).scrollTop());var t=u+r+q;var s=0;var p=0;var w=this;$(this.viewerDOM.thumbnailContent).children("div").each(function(x){p=$(this).outerHeight();s=s+p;if((s>=u)&&(s<=t)){w.thumbnailVisiblePages.push(x+1)}if(s>t){return false}})};o.prototype.createBlankPage=function(p){var v=this;var u;if(this.documentId==null){u=this.documentId=this.generateGuid()}else{u=this.documentId}var s=document.createElement("div");s.id=u+p;s.className="git-docviewer-page";$(s).addClass("git-docviewer-page-drag");$(s).css({position:"relative",display:"block","margin-bottom":"10px",padding:"0px"});if(this.rotationAngle==0||this.rotationAngle==180||this.rotationAngle==-180){$(s).width(this.defaultPageWidth*this.zoomFactor);$(s).height(this.defaultPageHeight*this.zoomFactor)}else{$(s).width(this.defaultPageHeight*this.zoomFactor);$(s).height(this.defaultPageWidth*this.zoomFactor)}$(s).on("click",function(w){v.selectedPage=p;if(v.signatureModule!=null){v.signatureModule.RemoveSelection();if(v.currentSignature!=null){var x=v.checkIfSignatureAllowedOnPage(p,s);if(x){v.currentSignature.UnFollowCursor();v.currentSignature.setActive(true);v.signatureModule.AddSignature(v.currentSignature,false);v.events.dispatchAll(l.EventNames.onSignaturePlaced,{id:v.currentSignature.getId(),pageNumber:v.currentPage,base64Image:v.currentSignature.ImageSrc});$(".git-docviewer-page").css({cursor:"default"});v.currentSignature=null}}}});$(s).on("mouseenter",function(y){if(v.currentSignature!=null){if(p!=v.currentSignature.pageNumber){v.currentSignature.detach();v.currentSignature.attach(s,p)}var z=v.checkIfSignatureAllowedOnPage(p,s);if(!z){$(s).css({cursor:"not-allowed"})}else{$(s).css({cursor:"default"})}v.currentSignature.FollowCursor();var x=(y.pageX-$(s).offset().left)-v.currentSignature.width/2;var A=(y.pageY-$(s).offset().top)-v.currentSignature.height/2;v.currentSignature.left=x/v.zoomFactor;v.currentSignature.top=A/v.zoomFactor;if(!v.currentSignature.IsRendered){var w=v.signatureModule.createPageSignaturePane(s,p);v.currentSignature.render(w)}else{v.currentSignature.reRender()}}});$(s).on("mouseleave",function(x){if(v.currentSignature!=null){var y=v.checkIfSignatureAllowedOnPage(p,s);if(!y){$(s).css({cursor:"not-allowed"})}else{$(s).css({cursor:"default"})}v.currentSignature.UnFollowCursor();var w=(x.pageX-$(s).offset().left)-v.currentSignature.width/2;var z=(x.pageY-$(s).offset().top)-v.currentSignature.height/2;v.currentSignature.left=w/v.zoomFactor;v.currentSignature.top=z/v.zoomFactor;v.currentSignature.reRender()}});$(s).on("mousemove",function(x){if(v.currentSignature!=null){var y=v.checkIfSignatureAllowedOnPage(p,s);if(!y){$(s).css({cursor:"not-allowed"})}else{$(s).css({cursor:"default"})}v.currentSignature.FollowCursor();var w=(x.pageX-$(s).offset().left)-v.currentSignature.width/2;var z=(x.pageY-$(s).offset().top)-v.currentSignature.height/2;v.currentSignature.left=w/v.zoomFactor;v.currentSignature.top=z/v.zoomFactor;v.currentSignature.reRender()}if(v.currentSignature==null){if($(s).css("cursor").toLowerCase()=="not-allowed"){$(s).css({cursor:"default"})}}});$(this.viewerDOM.viewableArea).append(s);if(this.pageRenderingState[p]==null){this.pageRenderingState[p]=e.BLANK}if(this.preferences.navigationPane.enableThumbnails){var q=document.createElement("div");$(q).attr("id",u+"thumb"+p);$(q).css("position","relative");$(q).addClass("git-viewer-thumbnail-page");$(q).width(this.thumbnailPageSize.width);$(q).height(this.thumbnailPageSize.height);var r=document.createElement("div");$(r).attr("class","thumbPageIndicator");$(r).css({"text-align":"center",color:"#FFF"});$(r).html(p.toString());var t=document.createElement("div");$(t).addClass("git-viewer-thumbnail-page-container");$(t).on("click",function(){v.scrollToPage(p)});$(t).append(q);$(t).append(r);$(this.viewerDOM.thumbnailContent).append(t)}this.thumbnailPageRenderingState[p]=e.BLANK;this.events.dispatchAll(l.EventNames.blankPageCreated,{pageNumber:p,viewerManager:this})};o.prototype.checkIfSignatureAllowedOnPage=function(q,r){var t=true;if((this.preferences.interactiveElements.signatures.maxNumberOfSignaturesAllowedPerPage!=-1)&&(this.preferences.interactiveElements.signatures.maxNumberOfSignaturesAllowedPerDocument!=-1)){var p=this.signatureModule.getNumberOfSignaturesOnDocument();if(p>=this.preferences.interactiveElements.signatures.maxNumberOfSignaturesAllowedPerDocument){t=false}var s=this.signatureModule.getNumberOfSignaturesOnPageExist(q);if(s>=this.preferences.interactiveElements.signatures.maxNumberOfSignaturesAllowedPerPage){t=false}}else{if(this.preferences.interactiveElements.signatures.maxNumberOfSignaturesAllowedPerPage!=-1){var s=this.signatureModule.getNumberOfSignaturesOnPageExist(q);if(s>=this.preferences.interactiveElements.signatures.maxNumberOfSignaturesAllowedPerPage){t=false}}else{if(this.preferences.interactiveElements.signatures.maxNumberOfSignaturesAllowedPerDocument!=-1){var p=this.signatureModule.getNumberOfSignaturesOnDocument();if(p>=this.preferences.interactiveElements.signatures.maxNumberOfSignaturesAllowedPerDocument){t=false}}}}return t};o.prototype.appendAtPosition=function(p,q,s){l.logger.logInfo("Appending the element at position "+p);var r=$(q).children().length;if(p<0){p=Math.max(0,r+1+p)}$(q).append(s);if(p<r){$(q).children().eq(p).before($(q).children().last())}return $(q)};o.prototype.reRenderThumbnailPage=function(w){var q=new n(null,this.thumbnailPageSize.width,this.thumbnailPageSize.height);if(this.thumbnailPageRenderingState[w]==e.FINISHED){if(!((this.pages[w]==null)&&(this.thumbnailPages[w]==null))){q.image=this.thumbnailPages[w].image}}var y=this.documentId;var r=$("#"+y+"thumb"+w);var s=$(r).find("canvas")[0];if(s==null){s=document.createElement("canvas");$(s).attr("aria-label","page thumbnail canvas");$(s).addClass("canvas_image");s.id=y+"thumb_canvas_"+w;$(r).append(s)}s.height=q.height;s.width=q.width;if(this.rotationAngle==0||this.rotationAngle==180||this.rotationAngle==-180){$(r).width(q.width);$(r).height(q.height)}else{$(r).width(q.height);$(r).height(q.width);s.height=q.width;s.width=q.height}var u=q.image;if(u!=null){var t=s.width,v=s.height;if(this.rotationAngle==90||this.rotationAngle==270||this.rotationAngle==-90||this.rotationAngle==-270){var x=t;t=v;v=x}var A=s.getContext("2d");A=this.applyRotationTransform(A,s.height,s.width);A.rotate(this.getRadianAngle(this.rotationAngle));A.drawImage(u,0,0,t,v);if(this.viewingInverted){this.convertCanvasImageToInvertedImage(A,s.width,s.height)}var z,p;if(this.thumbnailPages[w]!=null){z=this.thumbnailPages[w].width;p=this.thumbnailPages[w].height}else{if(this.pages[w]!=null){z=this.pages[w].width;p=this.pages[w].height}}this.events.dispatchAll(l.EventNames.afterPageDraw,{pageNumber:w,context:A,source:"thumbnail",zoomPercentage:this.zoomValue,rotationAngle:this.rotationAngle,scaleX:this.thumbnailPageSize.width/z,scaleY:this.thumbnailPageSize.height/p,actualPageWidth:z,actualPageHeight:p,viewerManager:this})}};o.prototype.reRenderPage=function(A){var q=null;if((this.pageRenderingState[A]==e.FINISHED)||(this.thumbnailPageRenderingState[A]==e.FINISHED)){if(this.pages[A]!=null){q=this.pages[A]}else{if(this.thumbnailPages[A]!=null){q=this.thumbnailPages[A]}}}if(q==null){q=new n(null,this.defaultPageWidth,this.defaultPageHeight)}var r=$("#"+this.documentId+A);if(r==null){return}var s=$(r).find("canvas")[0];var C=this.zoomFactor;var w=q.width*C;var z=q.height*C;if(this.rotationAngle==0||this.rotationAngle==180||this.rotationAngle==-180){$(r).width(w);$(r).height(z)}else{$(r).width(z);$(r).height(w)}if(s==null){return}var u=$(r).height();if(this.rotationAngle==0||this.rotationAngle==180||this.rotationAngle==-180){s.width=w;s.height=z;var y=$(r).height();if(this.currentPage>A){if(s.offsetTop<$(this.viewerDOM.viewableArea).scrollTop()){if(((y-u)!=0)&&($(this.viewerDOM.viewableArea).scrollTop()>0)){$(this.viewerDOM.viewableArea).scrollTop($(this.viewerDOM.viewableArea).scrollTop()+y-u)}}}}else{s.width=z;s.height=w;var y=$(r).height();if(parseInt(r[0].offsetTop,10)<parseInt($(this.viewerDOM.viewableArea).scrollTop().toString(),10)){if(((y-u)!=0)&&($(this.viewerDOM.viewableArea).scrollTop()>0)){$(this.viewerDOM.viewableArea).scrollTop($(this.viewerDOM.viewableArea).scrollTop()+y-u)}}}var v=q.image;if(v!=null){var t=s.width,x=s.height;if(this.rotationAngle==90||this.rotationAngle==270||this.rotationAngle==-90||this.rotationAngle==-270){var B=t;t=x;x=B}var E=s.getContext("2d");E=this.applyRotationTransform(E,s.height,s.width);E.rotate(this.getRadianAngle(this.rotationAngle));E.drawImage(v,0,0,t,x);if(this.viewingInverted){this.convertCanvasImageToInvertedImage(E,s.width,s.height)}this.events.dispatchAll(l.EventNames.pageReRendered,{pageNumber:A,viewerManager:this,context:E});var p=q.height;var D=q.width;this.events.dispatchAll(l.EventNames.afterPageDraw,{pageNumber:A,context:E,source:"viewer",zoomPercentage:this.zoomValue,rotationAngle:this.rotationAngle,scaleX:C,scaleY:C,actualPageWidth:D,actualPageHeight:p,viewerManager:this})}};o.prototype.showMessageBox=function(q,p){if(this.viewerDOM.messageBox!=null){this.viewerDOM.messageBox.show(q,p)}};o.prototype.hideMessageBox=function(){if(this.viewerDOM.messageBox!=null){this.viewerDOM.messageBox.hide()}};o.prototype.drawThumbnailPage=function(x,t){var w=this;var z=this.documentId;var p=$("#"+z+"thumb"+x);var r=$(p).find("canvas")[0];if(r==null){r=document.createElement("canvas");$(r).attr("aria-label","page thumbnail canvas");$(r).addClass("canvas_image");r.id=z+"thumb_canvas_"+x;$(p).append(r)}var q=this.thumbnailPageSize.width;var A=this.thumbnailPageSize.height;if(this.rotationAngle==0||this.rotationAngle==180||this.rotationAngle==-180){$(p).width(q);$(p).height(A);r.width=q;r.height=A}else{$(p).width(A);$(p).height(q);r.width=A;r.height=q}$(p).find("i").first().remove();var B=r.getContext("2d");B=this.applyRotationTransform(B,r.height,r.width);B.rotate(this.getRadianAngle(this.rotationAngle));var s=r.width,v=r.height;if(this.rotationAngle==90||this.rotationAngle==270||this.rotationAngle==-90||this.rotationAngle==-270){var y=s;s=v;v=y}var u=new Image();u.onload=function(C){l.logger.logInfo("Drawing thumbnail image Completed for pagenumber: "+x);B.drawImage(u,0,0,s,v);if(w.viewingInverted){w.convertCanvasImageToInvertedImage(B,r.width,r.height)}if(w.thumbnailPages[x]!=null){if(w.thumbnailPages[x].width){w.events.dispatchAll(l.EventNames.afterPageDraw,{pageNumber:x,context:B,source:"thumbnail",zoomPercentage:w.zoomValue,rotationAngle:w.rotationAngle,scaleX:q/w.thumbnailPages[x].width,scaleY:A/w.thumbnailPages[x].height,actualPageWidth:w.thumbnailPages[x].width,actualPageHeight:w.thumbnailPages[x].height,viewerManager:w})}}};if(t!=null){u.src="data:image/png;base64,"+t}return u};o.prototype.drawPage=function(B,F,A,x,v){var y=this;var p=$("#"+this.documentId+B);var s=$(p).find("canvas")[0];if(s==null){s=document.createElement("canvas");$(s).attr("aria-label","page canvas");$(s).addClass("canvas_image");s.id=this.documentId+"_canvas_"+B;$(p).append(s)}var q=A*this.zoomFactor;var D=x*this.zoomFactor;var u=$(p).height();if(this.rotationAngle==0||this.rotationAngle==180||this.rotationAngle==-180){$(p).width(q);$(p).height(D);s.width=q;s.height=D;if(this.currentPage>B){if(s.offsetTop<$(this.viewerDOM.viewableArea).scrollTop()){if(((D-u)!=0)&&($(this.viewerDOM.viewableArea).scrollTop()>0)){var r=$(this.viewerDOM.viewableArea).scrollTop();$(this.viewerDOM.viewableArea).scrollTop(r+(D-u))}}}}else{$(p).width(D);$(p).height(q);s.width=D;s.height=q;if(this.currentPage>B){if(parseInt(p[0].offsetTop,10)<parseInt($(this.viewerDOM.viewableArea).scrollTop().toString(),10)){if(((D-u)!=0)&&($(this.viewerDOM.viewableArea).scrollTop()>0)){$(this.viewerDOM.viewableArea).scrollTop($(this.viewerDOM.viewableArea).scrollTop()+D-u)}}}}var E=s.getContext("2d");E=this.applyRotationTransform(E,s.height,s.width);if(this.rotationAngle!=0){E.rotate(this.getRadianAngle(this.rotationAngle))}var t=s.width,w=s.height;if(this.rotationAngle==90||this.rotationAngle==270||this.rotationAngle==-90||this.rotationAngle==-270){var C=t;t=w;w=C}var z=new Image();z.onload=function(G){l.logger.logInfo("Drawing page image completed for page: "+B);E.drawImage(z,0,0,t,w);if(y.viewingInverted){y.convertCanvasImageToInvertedImage(E,s.width,s.height)}y.events.dispatchAll(l.EventNames.afterPageDraw,{pageNumber:B,context:E,source:"viewer",zoomPercentage:y.zoomValue,rotationAngle:y.rotationAngle,scaleX:y.zoomFactor,scaleY:y.zoomFactor,actualPageWidth:A,actualPageHeight:x,viewerManager:y});if(!v){y.events.dispatchAll(l.EventNames.pageRendered,{pageNumber:B,viewerManager:y})}};if(F!=null){z.src="data:image/png;base64,"+F}return z};o.prototype.requestFromServerAndRenderThumbnailPage=function(p){var q=this;l.logger.logInfo("Requesting the server for thumbnail page "+p);this.thumbnailPageRenderingState[p]=e.RUNNING;this.serverCom.getPageThumbnail(this.documentUri,this.password,p).done(function(t){l.logger.logInfo("requestFromServerAndRenderThumbnailPage: Drawing thumbnail page to view page and thumb page, page:  "+p);var r=q.drawThumbnailPage(p,t.thumbnailImage);if(q.pageRenderingState[p]==e.BLANK){q.drawPage(p,t.thumbnailImage,t.width,t.height,true)}if(q.thumbnailPages[p]==null){var s=new n(r,t.width,t.height);q.thumbnailPages[p]=s;q.thumbnailPageRenderingState[p]=e.FINISHED;q.prioritizeAndRenderPages()}}).fail(function(s){l.logger.logError("Response: Action : getPage, states: failed, Pagenumber : "+p);q.updateThumbnailsVisiblePages[p]=e.ERROR;if(q.thumbnailPages[p]==null){var r=new n(null,s.width,s.height);q.thumbnailPages[p]=r;q.prioritizeAndRenderPages()}})};o.prototype.registeringSupportedLayer=function(){if(this.serverViewerPreferences!=null){if(this.serverViewerPreferences.Interactivity.AllowAnnotations){this.annotsModule=new l.AnnotsModule()}if(this.serverViewerPreferences.Interactivity.AllowFormFilling){this.formsModule=new l.FormsModule(this.preferences.interactiveElements.form.highlightColor,this.preferences.interactiveElements.form.readonlyColor,this.preferences.interactiveElements.form.focusColor,this.preferences.interactiveElements.form.listContainerBackgroundColor,this.preferences.interactiveElements.form.listItemHoverBackgroundColor)}if(this.serverViewerPreferences.Interactivity.AllowSigning){this.signatureModule=new l.SignatureModule()}}if(this.formsModule!=null){this.documentViewer.Forms.setModule(this.formsModule);this.registerPluggableModule(this.formsModule)}if(this.annotsModule!=null){this.registerPluggableModule(this.annotsModule);this.annotsModule.applyLocalization()}if(this.signatureModule!=null){this.registerPluggableModule(this.signatureModule);this.documentViewer.Signatures.setModule(this.signatureModule)}};o.prototype.requestFromServerAndRenderPage=function(p){var r=this;l.logger.logInfo("Requesting the server for the page "+p);var q=this.documentId;this.pageRenderingState[p]=e.RUNNING;this.serverCom.getPage(this.documentUri,this.password,p).done(function(y){l.logger.logInfo("getPage response: pageNumber : "+p+" ,loadedPageCount:"+y.loadedPageCount+" , renderingComplete: "+y.renderingComplete+", Width:"+y.width+", Height: "+y.height);r.pageRenderingState[p]=e.FINISHED;if(r.formatType==l.FormatType.Flow){if((y.renderingComplete)&&(y.loadedPageCount==r.pageCount)){$(r.viewerDOM.pageIndicator).removeClass("inputPageCountProgress")}}if(y.renderingComplete&&y.image==null&&y.loadedPageCount==r.pageCount){r.documentRenderingCompleted=y.renderingComplete;return}if(r.documentId!=q){return}var u=false;if(r.maxPageWidth<y.width){r.maxPageWidth=y.width.toFixed();u=true}if(r.maxPageHeight<y.height){r.maxPageHeight=y.height.toFixed();u=true}if(u){r.updateZoomSteps();var w=r.getZoomValue(r.zoomText);if(Number(w)===w&&w%1===0){$(r.viewerDOM.zoomDropdown).siblings("input").val(w+"%")}else{$(r.viewerDOM.zoomDropdown).siblings("input").val(w.toFixed(1)+"%")}}if(r.documentRenderingCompleted==false){if(r.pageCount!=y.loadedPageCount){for(var v=r.pageCount+1;v<=y.loadedPageCount;v+=1){r.createBlankPage(v)}r.updateThumbnailsVisiblePages()}if(y.loadedPageCount>r.pageCount){r.pageCount=y.loadedPageCount}r.updatePageNavButtonState()}r.documentRenderingCompleted=y.renderingComplete;if(r.documentRenderingCompleted){$(r.viewerDOM.pageIndicator).removeClass("inputPageCountProgress")}if(!r.isCurrentPageNumberSet&&y.loadedPageCount>0){r.pageCount=parseInt(y.loadedPageCount);r.setCurrentPage(1);r.isCurrentPageNumberSet=true;r.viewerDOM.progressAnimation.hideAnimation()}var t=r.drawPage(p,y.image,y.width,y.height,false);if(r.pages[p]==null){var x=new n(t,y.width,y.height);x.rotation=y.rotationAngle;r.pages[p]=x;if(y.thumbnailImage!=null){var s=r.drawThumbnailPage(p,y.thumbnailImage);if(r.thumbnailPages[p]==null){var x=new n(s,y.width,y.height);r.thumbnailPages[p]=x;r.thumbnailPageRenderingState[p]=e.FINISHED}}r.prioritizeAndRenderPages()}}).fail(function(u){r.viewerDOM.progressAnimation.hideAnimation();if(u.renderingComplete){$(r.viewerDOM.pageIndicator).removeClass("inputPageCountProgress")}var s=true;if((u.renderingComplete)&&(u.loadedPageCount==r.pageCount)){r.documentRenderingCompleted=u.renderingComplete;if(p>u.loadedPageCount){s=false}}if(s){l.logger.logError("Response: Action : getPage, states: failed, Pagenumber : "+p);r.pageRenderingState[p]=e.ERROR;if(r.pages[p]==null){var t=new n(null,u.width,u.height);r.pages[p]=t}r.prioritizeAndRenderPages()}})};o.prototype.isPageRequested=function(p){return this.pageRenderingState[p]==e.RUNNING||this.pageRenderingState[p]==e.FINISHED};o.prototype.isThumbnailPageRequested=function(p){return this.thumbnailPageRenderingState[p]==e.RUNNING||this.thumbnailPageRenderingState[p]==e.FINISHED};o.prototype.fetchAndRenderBoomark=function(){var p=this;this.serverCom.getDocBookmarks(this.documentUri,this.password).done(function(q){p.bookmarkDataAvailable=true;q=JSON.parse(JSON.stringify(q).split('"text":').join('"label":'));p.bookmarkTreeView.loadNewData(q);p.prioritizeAndRenderPages()})};o.prototype.isBookmarksEnabled=function(){return this.preferences.navigationPane.visible&&this.preferences.navigationPane.enableBookmarks};o.prototype.isThumbnailsEnabled=function(){return this.preferences.navigationPane.visible&&this.preferences.navigationPane.enableThumbnails};o.prototype.prioritizeThumbnailPages=function(){if(!this.isThumbnailsEnabled()||this.thumbnailVisiblePages.length<1){return false}var q=false;for(var p=0;p<this.thumbnailVisiblePages.length;p++){if(!this.isThumbnailPageRequested(this.thumbnailVisiblePages[p])){this.requestFromServerAndRenderThumbnailPage(this.thumbnailVisiblePages[p]);q=true;break}}return q};o.prototype.prioritizeAndRenderPages=function(){if(this.isPrintingInProgress||this.prioritizeThumbnailPages()){return}var p=null;if(!this.isPageRequested(this.currentPage)){p=this.currentPage}else{if(this.isBookmarksEnabled()&&this.docContainsBookmarks&&!this.bookmarkDataAvailable){this.fetchAndRenderBoomark();return false}else{if(this.nextPageNumber>0&&!this.isPageRequested(this.nextPageNumber)){p=this.nextPageNumber}else{if(this.prevPageNumber>0&&!this.isPageRequested(this.prevPageNumber)){p=this.prevPageNumber}else{if(!this.preferences.lazyLoading&&this.documentRenderingCompleted&&this.pageCount>0&&!this.isPageRequested(this.pageCount)){p=this.pageCount}else{if(!this.preferences.lazyLoading){if(this.isThumbnailsEnabled()&&this.thumbnailVisiblePages.length>0&&(p=this.flipflopThumbnailPage())!=null){l.logger.logInfo("Action: PrioritizeAndRenderPages, requesting server for thumbnail page number : "+p);this.requestFromServerAndRenderThumbnailPage(p);return false}else{p=this.flipflopViewPage()}}}}}}}if(p==null&&this.formatType==l.FormatType.Flow&&!this.documentRenderingCompleted&&!this.isPageRequested(this.pageCount+1)){p=this.pageCount+1}if(p!=null){l.logger.logInfo("Action: PrioritizeAndRenderPages, requesting server for page number : "+p);this.requestFromServerAndRenderPage(p)}};o.prototype.flipflopViewPage=function(){var p=null;for(var s=1;s<=2;s++){if(this.flipBoudaryPageOrder){for(var r=this.currentPage;r<=this.pageCount;r+=1){if(!this.isPageRequested(r)){p=r;break}}}else{for(var q=this.currentPage;q>=1;q-=1){if(!this.isPageRequested(q)){p=q;break}}}this.flipBoudaryPageOrder=this.flipBoudaryPageOrder==true?false:true}return p};o.prototype.flipflopThumbnailPage=function(){var q=null;for(var t=1;t<=2;t++){if(this.flipBoudaryPageOrder){var w=this.thumbnailVisiblePages.reduce(function(x,y){return Math.max(x,y)});var v=w+1;v=Math.min(v,this.pageCount);for(var s=this.currentPage;s<=v;s+=1){if(!this.isThumbnailPageRequested(s)){q=s;break}}}else{var u=this.thumbnailVisiblePages.reduce(function(x,y){return Math.min(x,y)});var p=u-1;p=Math.max(p,1);for(var r=this.currentPage;r>=p;r-=1){if(!this.isThumbnailPageRequested(r)){q=r;break}}}this.flipBoudaryPageOrder=this.flipBoudaryPageOrder==true?false:true}return q};o.prototype.zoomTo=function(p){if(p>=1&&p<=300){this.zoom(l.LocalizedStrings.tooltip_custom_zoom,p)}};o.prototype.setZoomMode=function(p){if(this.documentLoaded){var q=this.getZoomValueForZoomMode(p);this.zoom("predefined",q)}};o.prototype.rotateTo=function(q){if(!this.documentLoaded){return}this.events.dispatchAll(l.EventNames.beforePageRotate,{currentRotationAngle:this.rotationAngle,newRotationAngle:q,rotateCancel:this.rotateCancel,viewerManager:this});if(this.rotateCancel.value==true){return}this.rotationAngle=q;var p=this.getPageInfoAtScrollPos(this.zoomFactor);this.updateZoomSteps();this.reFlowDocument(true);this.setScrollPos(p);this.events.dispatchAll(l.EventNames.afterPageRotate,{currentRotationAngle:q,viewerManager:this})};o.prototype.rotate=function(q){if(!this.documentLoaded){return}var r=this.rotationAngle;this.resetPageQualityState();var p=0;if(!q){p=r-90;if(p<0){p=p+360}}else{p=r+90;if(p>=360){p=p-360}}this.rotateTo(p)};o.prototype.zoom=function(s,q){if(!this.documentLoaded){return}this.resetPageQualityState();var w=this.zoomValue;this.zoomText=this.getZoomText(w);var v=w;switch(s){case"out":if(this.zoomValue!=this.zoomSteps[0]){for(var u=this.zoomSteps.length-1;u>=0;u--){if(this.zoomValue>this.zoomSteps[u]){v=this.zoomSteps[u];break}}}break;case"in":if(this.zoomValue!=this.zoomSteps[this.zoomSteps.length-1]){for(var u=0;u<=this.zoomSteps.length-1;u++){if(this.zoomValue<this.zoomSteps[u]){v=this.zoomSteps[u];break}}}break;default:if(Number(q)==q&&q%1==0){h.ZOOMCUSTOM=parseInt(q.toString())}else{var r=parseFloat(q);h.ZOOMCUSTOM=parseFloat(r.toFixed(2))}v=h.ZOOMCUSTOM;this.prepareZoomSteps();break}this.events.dispatchAll(l.EventNames.beforeZoomChange,{currentZoomPercentage:w,targetZoomPercentage:v,zoomChangeCancel:this.zoomChangeCancel,viewerManager:this});if(this.zoomChangeCancel.value==true){return}this.zoomValue=v;this.zoomFactor=this.getZoomfactor();this.zoomPages();this.zoomText=this.getZoomText(this.zoomValue);var x;var t=this;$(this.viewerDOM.zoomDropdown).find("option").each(function(){if($(this).text().toLowerCase()==t.zoomText.toLowerCase()){x=$(this)}else{$(this).removeAttr("selected")}});if(x!=undefined){$(x).prop("selected",true)}var p=this.zoomValue;if(Number(p)===p&&p%1===0){$(this.viewerDOM.zoomDropdown).siblings("input").val(p+"%")}else{$(this.viewerDOM.zoomDropdown).siblings("input").val(p.toFixed(1)+"%")}this.events.dispatchAll(l.EventNames.afterZoomChange,{zoomPercentage:this.zoomValue,viewerManager:this})};o.prototype.updateZoomSteps=function(){var w=$(this.viewerDOM.viewableArea).width()-this.getDivScrollBarWidth();var r=$(this.viewerDOM.viewableArea).height();var q=(this.maxPageWidth==0)?this.defaultPageWidth:this.maxPageWidth;var v=(this.maxPageHeight==0)?this.defaultPageHeight:this.maxPageHeight;if(this.rotationAngle==0||this.rotationAngle==180||this.rotationAngle==-180){h.ZOOMPAGEHEIGHT=parseFloat(((r/v)*100).toFixed(2));h.ZOOMPAGEWIDTH=parseFloat(((w/q)*100).toFixed(2))}else{h.ZOOMPAGEHEIGHT=parseFloat(((r/q)*100).toFixed(2));h.ZOOMPAGEWIDTH=parseFloat(((w/v)*100).toFixed(2))}for(var u=100;u>=1;u--){var p=u/100;var t=this.getZoomFactorFromValue(h.ZOOMPAGEHEIGHT)*q*p;if(t>w){var s=this.getZoomFactorFromValue(h.ZOOMPAGEWIDTH)*v*p;if(s<=r){h.ZOOMPAGESIZE=h.ZOOMPAGEWIDTH*p;break}}else{h.ZOOMPAGESIZE=h.ZOOMPAGEHEIGHT*p;break}}this.prepareZoomSteps();this.zoomValue=this.getZoomValue(this.zoomText);this.zoomFactor=this.getZoomfactor()};o.prototype.getDivScrollBarWidth=function(){var q=document.createElement("div");$(q).css({width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-9999px"});document.body.appendChild(q);var p=q.offsetWidth-q.clientWidth+6;document.body.removeChild(q);return p};o.prototype.getZoomFactorFromValue=function(p){return p/100};o.prototype.getZoomfactor=function(){this.prevZoomFactor=this.zoomFactor;return this.zoomValue/100};o.prototype.prepareZoomSteps=function(){this.zoomSteps[0]=h.ZOOM25;this.zoomSteps[1]=h.ZOOM50;this.zoomSteps[2]=h.ZOOM75;this.zoomSteps[3]=h.ZOOM100;this.zoomSteps[4]=h.ZOOM125;this.zoomSteps[5]=h.ZOOM150;this.zoomSteps[6]=h.ZOOM200;this.zoomSteps[7]=h.ZOOMPAGEHEIGHT;this.zoomSteps[8]=h.ZOOMPAGEWIDTH;this.zoomSteps[9]=h.ZOOMACTUALSIZE;this.zoomSteps[10]=h.ZOOMPAGESIZE;this.zoomSteps[11]=h.ZOOMCUSTOM;var p=[];$.each(this.zoomSteps,function(q,r){if($.inArray(r,p)===-1){p.push(r)}});p.sort();this.zoomSteps=p.sort(function(r,q){return r-q})};o.prototype.isSafari=function(){var p=navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&!navigator.userAgent.match("CriOS");return p};o.prototype.isIE=function(){var q=window.navigator.userAgent;var p=q.indexOf("MSIE");if(p>0){return true}else{if(!!navigator.userAgent.match(/Trident\/7\./)){return true}}return false};o.prototype.printDocument=function(){var q=this;if(!this.documentLoaded){return null}if(!this.operationAllowed(m.AllowPrinting)){return null}this.events.dispatchAll(l.EventNames.beforeDocumentPrint,{documentUri:this.documentUri,printCancel:this.printCancel,viewerManager:this});if(this.printCancel.value==true){return}this.isPrintingInProgress=true;var p=jQuery.Deferred();this.serverCom.checkViewerRights(this.handlerUri).done(function(r,t,s){if(!r.print){p.reject(s.status,"Printing not allowed",s.responseJSON)}else{q.saveDocument().done(function(u){q.serverCom.getDocumentPageCount(q.documentUri,q.password).done(function(w){var z=false;var x=w.pageCount;if(q.isIE()){if(x>q.maxPrintPageCount){z=true}}if(z){q.printerDialog=new l.PrinterDialog(q.viewerDOM.viewer,function(){q.isPrintingInProgress=false;q.prioritizeAndRenderPages()});q.printerDialog.SetPageRange(x,q.maxPrintPageCount,function(A){q.printerDialog.hide();q.printDocumentBySpecifiedPageRange(A).done(function(B){})},q);q.printerDialog.show()}else{var v=new Array();for(var y=1;y<=x;y++){v.push(y)}q.printDocumentBySpecifiedPageRange(v).done(function(A){p.resolve(A)})}}).fail(function(v){q.viewerDOM.progressAnimation.hideAnimation();q.isPrintingInProgress=false;q.prioritizeAndRenderPages();p.reject(v)})})}}).fail(function(r){p.reject(r)});return p.promise()};o.prototype.printDocumentBySpecifiedPageRange=function(r){var v=this;this.isPrintingInProgress=true;this.viewerDOM.printProgressAnimation.showAnimation("Preparing to print pages...",r);var u="printIframe"+r[0];var t=document.createElement("iframe");t.name=u;t.id=u;t.style.position="absolute";t.style.top="-1000000px";document.body.appendChild(t);var q=t.contentWindow?t.contentWindow:t.contentDocument.document?t.contentDocument.document:t.contentDocument;q.document.open();q.document.write("<html moznomarginboxes mozdisallowselectionprint><head><title></title>");q.document.write("<style>html, body { height: auto; margin: 0px;padding: 0px;} ");if(this.isSafari()){q.document.write("img { width: 98%; height: auto;margin: 0px 0px;padding:0px; }")}else{q.document.write("img { width: 100%; height: auto;margin: 0px 0px;padding:0px; }")}q.document.write("@page{margin-top: 0.0in; margin-bottom: 0in; margin-left: 0.0in; margin-right: 0.0in;}");q.document.write("@media print { #Header, #Footer { display: none; }");q.document.write("html, body { margin: 0px 0px 0px 0px; padding: 0px 0px 0px 0px; }");if(this.isSafari()){q.document.write("div.printPagewithpagebreak { page -break-after:auto; width: 98 %; height: auto; border-width: 0px; }");q.document.write("div.printPage{ margin:0px;padding:2px; width: 98 %; height: auto;border-width: 0px; }")}else{q.document.write("div.printPagewithpagebreak { page -break-after:auto; width: 100 %; height: auto; border-width: 0px; }");q.document.write("div.printPage{ margin:0px;padding:2px; width: 100 %; height: auto;border-width: 0px; }")}q.document.write("}");q.document.write("</style>");q.document.write("<script type='text/javascript'>");q.document.write("var clear_body = function (){");q.document.write("var lista = document.body.childNodes;");q.document.write("for (var i = lista.length - 1; i >= 0;i--){");q.document.write("document.body.removeChild(lista[i]);");q.document.write("}");q.document.write("}");q.document.write("<\/script>");q.document.write("</head><body onload='setTimeout(function () { this.focus();this.print();setTimeout(function () { }, 5000);}, 2000);'>");var p=jQuery.Deferred();var s=this.serverCom.getPrintPageURLs(this.revisionUri,this.password,r);s.done(function(w){v.renderPrintPages(q,w.urls,0,function(){v.isPrintingInProgress=false;v.prioritizeAndRenderPages();v.events.dispatchAll(l.EventNames.afterDocumentPrint,{viewerManager:v});p.resolve({documentUri:v.documentUri})},t)});s.fail(function(w){v.viewerDOM.printProgressAnimation.hideAnimation();p.reject(w)});return p.promise()};o.prototype.saveDocument=function(){var q=this;if(!this.documentLoaded){return null}var p=jQuery.Deferred();if(!this.operationAllowed(m.AllowSave)){return p.resolve({documentUri:this.documentUri})}this.events.dispatchAll(l.EventNames.beforeDocumentSave,{documentUri:this.documentUri,saveCancel:this.saveCancel,viewerManager:this});if(this.saveCancel.value==true){return}this.events.dispatchAllAsync(l.EventNames.beforeDocumentSaveInternal,{documentUri:this.documentUri,viewerManager:this,syncNeeded:true}).done(function(){p.resolve({documentUri:q.documentUri})}).fail(function(){p.reject()});this.events.dispatchAll(l.EventNames.afterDocumentSave,{documentUri:this.documentUri,viewerManager:this});return p.promise()};o.prototype.renderPrintPages=function(r,s,p,q,t){var u=this;this.serverCom.getPrintPage(s[p]).done(function(y){if(u.viewerDOM.printProgressAnimation.IsPrintingCancelled()){u.isPrintingInProgress=false;r.document.body.innerHTML="";$(t).remove();u.prioritizeAndRenderPages();return}var x=document.createElement("div");x.style.margin=0;x.style.padding=1;if(p+1<s.length){x.className="printPagewithpagebreak"}else{x.className="printPage"}l.logger.logInfo("Action: printDocument, Requesting, Url: "+s[p]);u.viewerDOM.printProgressAnimation.setProgress(p);var v=new Image();v.style.margin=0;v.style.padding=0;var w=new Image();w.style.margin=0;w.style.padding=0;v.onload=function(){if(u.viewingInverted){w.src=u.convertImagetoInvertedImage(v,p+1)}else{w.src=u.createPrintImage(v,p+1)}p=p+1;if(p<s.length){u.renderPrintPages(r,s,p,q,t)}else{r.document.write("</body></html>");r.document.close();u.viewerDOM.printProgressAnimation.hideAnimation();u.isPrintingInProgress=false;u.prioritizeAndRenderPages();if(q!=null){q.call()}}};v.onerror=function(){p=p+1;if(p<s.length){u.renderPrintPages(r,s,p,q,t)}else{r.document.write("</body></html>");r.document.close();u.viewerDOM.printProgressAnimation.hideAnimation();u.isPrintingInProgress=false;u.prioritizeAndRenderPages();if(q!=null){q.call()}}};if(y!=null){v.src="data:image/png;base64,"+y}x.appendChild(w);r.document.body.appendChild(x)}).fail(function(v){p=p+1;if(p<s.length){u.renderPrintPages(r,s,p,q,t)}else{r.document.write("</body></html>");r.document.close();u.viewerDOM.printProgressAnimation.hideAnimation();u.isPrintingInProgress=false;u.prioritizeAndRenderPages();if(q!=null){q.call()}}})};o.prototype.createPrintImage=function(r,q){var v=document.createElement("canvas");$(v).attr("aria-label","page print image canvas");$(v).addClass("canvas_image");var u=0;var s=0;if(this.pages[q]!=null){u=this.pages[q].width;s=this.pages[q].height}else{u=Math.round(r.width*96/this.printingDpi);s=Math.round(r.height*96/this.printingDpi)}v.width=r.width;v.height=r.height;var t=v.getContext("2d");var p=0,w=0;t.drawImage(r,p,w);this.events.dispatchAll(l.EventNames.afterPageDraw,{pageNumber:q,context:t,source:"printer",zoomPercentage:this.zoomValue,rotationAngle:this.rotationAngle,scaleX:this.printingDpi/96,scaleY:this.printingDpi/96,actualPageWidth:u,actualPageHeight:s,viewerManager:this});return v.toDataURL()};o.prototype.convertImagetoInvertedImage=function(v,B){var t=document.createElement("canvas");$(t).attr("aria-label","page image canvas");$(t).addClass("canvas_image");t.width=v.width;t.height=v.height;var q=t.getContext("2d");var C=0,A=0,E;try{q.drawImage(v,C,A);var r=q.getImageData(C,A,v.width,v.height);var z=r.data;for(var u=0,s=z.length;u<s;u+=4){z[u]=255-z[u];z[u+1]=255-z[u+1];z[u+2]=255-z[u+2]}q.putImageData(r,C,A);var D=0;var p=0;if(this.pages[B]!=null){D=this.pages[B].width;p=this.pages[B].height}else{D=Math.round(v.width*96/this.printingDpi);p=Math.round(v.height*96/this.printingDpi)}this.events.dispatchAll(l.EventNames.afterPageDraw,{pageNumber:B,context:q,source:"printer",zoomPercentage:this.zoomValue,rotationAngle:this.rotationAngle,scaleX:this.printingDpi/96,scaleY:this.printingDpi/96,actualPageWidth:D,actualPageHeight:p,viewerManager:this});E=t.toDataURL()}catch(w){}return E};o.prototype.zoomPages=function(){var p=this.getPageInfoAtScrollPos(this.prevZoomFactor);this.reFlowDocument(false);this.setScrollPos(p)};o.prototype.invertPages=function(p){this.viewingInverted=p;this.reFlowDocument(true)};o.prototype.reFlowDocument=function(q){l.logger.logInfo("Reflowing the whole document, pageCount: "+this.pageCount);var s=performance.now();var t=this.zoomFactor;var u=this.documentId;for(var p=1;p<=this.pageCount;p++){if(this.isThumbnailsEnabled()&&q){this.reRenderThumbnailPage(p)}this.reRenderPage(p)}var r=performance.now();l.logger.logInfo("Reflow done "+(r-s)+" ms.");this.events.dispatchAll(l.EventNames.reflow,{viewerManager:this})};o.prototype.convertCanvasImageToInvertedImage=function(s,q,t){var p=0;var z=0;var v=s.getImageData(p,z,q,t);var u=v.data;for(var r=0;r<u.length;r+=4){u[r]=255-u[r];if((r+1)<u.length){u[r+1]=255-u[r+1]}if((r+2)<u.length){u[r+2]=255-u[r+2]}}s.putImageData(v,p,z)};o.prototype.getRadianAngle=function(p){return p*Math.PI/180};o.prototype.performPDFActions=function(t){var v=1,s=0,x=0,A=0,p=0,C=1,q="",B=null;if(t.length!=0){var r={value:false};var w=t[0].actionParams;this.events.dispatchAll(l.EventNames.onNavigationAction,{actionType:t[0].actionType,actionParams:w,cancel:r});if(!r.value){switch(t[0].actionType){case"goto":this.performGotoAction(w);break;case"uri":this.performURIAction(w);break;case"rgoto":v=w.pageNumber;break;case"launch":var z=w.launchAppOrFilePath;break;case"javascript":var y=w.javaScript;break;case"named":var u=w.actionName;this.performNamedAction(u);break}}}};o.prototype.performURIAction=function(q){var p=q.uri;switch(this.preferences.security.hyperlinkNavigation.access){case l.HyperlinkAccess.allow:window.open(p,"_blank");break;case l.HyperlinkAccess.block:break;case l.HyperlinkAccess.alwaysAsk:this.hyperlinkAccessPermisionDialog(p);break;case l.HyperlinkAccess.custom:this.hyperlinkCustomAccess(p);break}};o.prototype.hyperlinkCustomAccess=function(p){var q=document.createElement("a");q.setAttribute("href",p);q.hostname;if(this.preferences.security.hyperlinkNavigation.custom.blockedSites.indexOf(q.hostname)==-1){if(this.preferences.security.hyperlinkNavigation.custom.trustedSites.indexOf(q.hostname)!=-1){window.open(p,"_blank")}else{if(this.preferences.security.hyperlinkNavigation.custom.showPermissionDialog){this.hyperlinkAccessPermisionDialog(p)}else{window.open(p,"_blank")}}}q=null};o.prototype.hyperlinkAccessPermisionDialog=function(p){this.viewerDOM.warningBox.show(l.LocalizedStrings.msgdlg_warning_linkAction+"</br>"+p,function(){window.open(p,"_blank")})};o.prototype.calculateZoomValue=function(p,r){var t=$(this.viewerDOM.viewableArea).width()-this.getDivScrollBarWidth();var q=$(this.viewerDOM.viewableArea).height();var s=100;if(this.rotationAngle==0||this.rotationAngle==180||this.rotationAngle==-180){s=parseFloat(((q/p)*100).toFixed(2))}else{s=parseFloat(((q/p)*100).toFixed(2))}return s};o.prototype.performJavascriptAction=function(p){var q=this;this.showMessageBox(l.LocalizedStrings.msgdlg_warning_jsAction,function(){setTimeout(function(){q.hideMessageBox()},1500)})};o.prototype.performGotoAction=function(u){var x=1,t=0,y=0,A=0,q=0,C=1,r="",B=null;x=u.pageNumber;t=u.left;y=u.top;A=u.right;q=u.bottom;C=u.zoom;r=u.destType;var w=(Number)(this.maxPageHeight);var z=(Number)(this.maxPageWidth);if(this.pages[x]!=null){w=this.pages[x].height;z=this.pages[x].width}switch(r){case"XYZ":B=new g(x,t,y);if(C!=0){this.zoomTo(C*100)}this.setScrollPos(B);break;case"Fit":this.setZoomMode(l.ZoomMode.fitPage);this.scrollToPage(x);break;case"FitH":this.setZoomMode(l.ZoomMode.fitWidth);B=new g(x,t,y);this.setScrollPos(B);break;case"FitV":this.setZoomMode(l.ZoomMode.fitHeight);B=new g(x,t,y);this.setScrollPos(B);break;case"FitR":var s=y-q;var v=t-A;B=new g(x,t,y);this.setScrollPos(B);var p=this.calculateZoomValue(s,v);this.zoomTo(p);break;case"FitB":this.setZoomMode(l.ZoomMode.fitHeight);this.scrollToPage(x);break;case"FitBH":this.scrollToPage(x);this.setZoomMode(l.ZoomMode.fitWidth);B=new g(x,t,y);this.setScrollPos(B);break;case"FitBV":this.scrollToPage(x);this.setZoomMode(l.ZoomMode.fitHeight);B=new g(x,t,y);this.setScrollPos(B);break}};o.prototype.performRemoteGotoAction=function(p,r){var q=this;this.showMessageBox(l.LocalizedStrings.msgdlg_warning_jsActionGoto,function(){setTimeout(function(){q.hideMessageBox()},1500)})};o.prototype.performLaunchAction=function(p){var q=this;this.showMessageBox(l.LocalizedStrings.msgdlg_warning_jsLaunchApp,function(){setTimeout(function(){q.hideMessageBox()},1500)})};o.prototype.performNamedAction=function(p){switch(p){case"firstpage":this.firstPage();break;case"nextpage":this.nextPage();break;case"prevpage":this.prevPage();break;case"lastpage":this.lastPage();break;case"print":this.print();break;case"close":var q=this.documentUri;this.closeDocument(q);break}};o.prototype.getZoomValueForZoomMode=function(p){switch(p){case l.ZoomMode.actualSize:return h.ZOOMACTUALSIZE;case l.ZoomMode.fitHeight:return h.ZOOMPAGEHEIGHT;case l.ZoomMode.fitWidth:return h.ZOOMPAGEWIDTH;case l.ZoomMode.fitPage:return h.ZOOMPAGESIZE}return this.zoomFactor};o.prototype.getZoomValue=function(q){var p=null;switch(q){case"25%":p=h.ZOOM25;break;case"50%":p=h.ZOOM50;break;case"75%":p=h.ZOOM75;break;case"100%":p=h.ZOOM100;break;case"125%":p=h.ZOOM125;break;case"150%":p=h.ZOOM150;break;case"200%":p=h.ZOOM200;break;case l.LocalizedStrings.page_fit_actual_size:p=h.ZOOMACTUALSIZE;break;case l.LocalizedStrings.page_fit_height:p=h.ZOOMPAGEHEIGHT;break;case l.LocalizedStrings.page_fit_width:p=h.ZOOMPAGEWIDTH;break;case l.LocalizedStrings.fit_page:p=h.ZOOMPAGESIZE;break;default:p=h.ZOOMCUSTOM;break}return p};o.prototype.getCurrentPage=function(){var q;var t=this.viewerDOM.viewableArea;var u=this.documentId;q=Math.min($("#"+u+1).outerHeight(true),$(t).outerHeight(true));var r=Number(t.scrollTop);r+=Number(q)/2;var s=1,p=0;for(s=1;s<=Number(this.pageCount);s++){p=Number(p)+$("#"+u+s).outerHeight(true);if(Number(p)>=Number(r)){break}}return s};o.prototype.resetPageQualityState=function(){for(var p=1;p<=this.pageCount;p++){this.pageQuality[p]=false}};o.prototype.getPrevPageNumber=function(){if(this.currentPage>1){return this.currentPage-1}return 1};o.prototype.getNextPageNumber=function(){if(this.currentPage<this.pageCount){return this.currentPage+1}return this.pageCount};o.prototype.setCurrentPage=function(p){this.setCurrentPageDontFetch(p);if(this.pageRenderingState.length!=0){this.prioritizeAndRenderPages()}};o.prototype.setCurrentPageDontFetch=function(q){if(this.currentPage==q){return}this.currentPage=q;if(this.currentPage<this.pageCount){this.nextPageNumber=q+1}if(this.currentPage>1){this.prevPageNumber=q-1}this.updatePageNavButtonState();if(this.isThumbnailsEnabled()){var p=this.getUpdatedThumbnailPages().indexOf(this.currentPage);if(p==-1){this.scrolToThumbPage(this.currentPage)}else{this.updateThumbnailPageSelectionState(this.currentPage)}}};o.prototype.getUpdatedThumbnailPages=function(){this.updateThumbnailsVisiblePages();return this.thumbnailVisiblePages};o.prototype.updatePageNavButtonState=function(){$(this.viewerDOM.pageIndicator).val(this.currentPage+" / "+this.pageCount);var q=$(this.viewerDOM.pageIndicator).width();var p=this.getTextWidth(this.pageCount+" / "+this.pageCount,"18px arial");if(q<p){$(this.viewerDOM.pageIndicator).width(p);this.onToolbarResize.call()}};o.prototype.operationAllowed=function(p){var q=false;if(this.serverViewerPreferences!=null){switch(p){case m.AllowPrinting:q=this.serverViewerPreferences.FileOperations.AllowPrinting;break;case m.AllowUpload:q=this.serverViewerPreferences.FileOperations.AllowUpload;break;case m.AllowSave:q=this.serverViewerPreferences.FileOperations.AllowSave;break;case m.AllowDownload:q=this.serverViewerPreferences.FileOperations.AllowDownload;break;case m.AllowDownloadAs:q=this.serverViewerPreferences.FileOperations.AllowDownloadAs;break}}return q};o.prototype.setToolbarButtonUIState=function(){if(!this.operationAllowed(m.AllowUpload)){$(this.viewerDOM.openDocBtn).attr("disabled","disabled")}else{$(this.viewerDOM.openDocBtn).removeAttr("disabled")}if(this.documentLoaded){$(this.viewerDOM.redactBtn).removeAttr("disabled");$(this.viewerDOM.sidePaneToggleBtn).removeAttr("disabled");if(this.operationAllowed(m.AllowPrinting)){$(this.viewerDOM.printBtn).removeAttr("disabled")}else{$(this.viewerDOM.printBtn).attr("disabled","disabled")}if(this.operationAllowed(m.AllowSave)){$(this.viewerDOM.saveBtn).removeAttr("disabled")}else{$(this.viewerDOM.saveBtn).attr("disabled","disabled")}if(this.operationAllowed(m.AllowDownloadAs)){$("#gitdownloadAs").removeAttr("disabled")}else{$("#gitdownloadAs").attr("disabled","disabled")}if(this.operationAllowed(m.AllowDownload)){$(this.viewerDOM.downloadBtn).removeAttr("disabled")}else{$(this.viewerDOM.downloadBtn).attr("disabled","disabled");$("#gitdownloadAs").attr("disabled","disabled")}if((this.serverViewerPreferences.Interactivity.AllowSigning)&&(this.mimeType=="application/pdf")){$(this.viewerDOM.addSignatureBtn).removeAttr("disabled")}else{$(this.viewerDOM.addSignatureBtn).attr("disabled","disabled")}$(".git-docviewer-quickFind").removeAttr("disabled");$(this.viewerDOM.firstPage).removeAttr("disabled");$(this.viewerDOM.prevPage).removeAttr("disabled");$(this.viewerDOM.pageIndicator).removeAttr("disabled");$(this.viewerDOM.nextPage).removeAttr("disabled");$(this.viewerDOM.lastPage).removeAttr("disabled");$(this.viewerDOM.rotatePagesCounterClockwise).removeAttr("disabled");$(this.viewerDOM.rotatePagesClockwise).removeAttr("disabled");$(this.viewerDOM.zoomIn).removeAttr("disabled");$(this.viewerDOM.zoomOut).removeAttr("disabled");$(this.viewerDOM.invertBtn).removeAttr("disabled");$(this.viewerDOM.zoomDropdown).parent("span").removeAttr("disabled");$(this.viewerDOM.zoomDropdown).siblings("input").removeAttr("disabled");$(this.viewerDOM.zoomDropdown).removeAttr("disabled");$(this.viewerDOM.docPropertiesBtn).removeAttr("disabled");$(this.viewerDOM.viewer).find("#toggleMenuItem-id").find("*").removeAttr("disabled")}else{$(this.viewerDOM.redactBtn).attr("disabled","disabled");$(this.viewerDOM.printBtn).attr("disabled","disabled");$(this.viewerDOM.saveBtn).attr("disabled","disabled");$(this.viewerDOM.downloadBtn).attr("disabled","disabled");$(this.viewerDOM.addSignatureBtn).attr("disabled","disabled");$("#gitdownloadAs").attr("disabled","disabled");$(".git-docviewer-quickFind").attr("disabled","disabled");$(this.viewerDOM.firstPage).attr("disabled","disabled");$(this.viewerDOM.prevPage).attr("disabled","disabled");$(this.viewerDOM.pageIndicator).attr("disabled","disabled");$(this.viewerDOM.nextPage).attr("disabled","disabled");$(this.viewerDOM.lastPage).attr("disabled","disabled");$(this.viewerDOM.rotatePagesCounterClockwise).attr("disabled","disabled");$(this.viewerDOM.rotatePagesClockwise).attr("disabled","disabled");$(this.viewerDOM.zoomIn).attr("disabled","disabled");$(this.viewerDOM.zoomOut).attr("disabled","disabled");$(this.viewerDOM.invertBtn).attr("disabled","disabled");$(this.viewerDOM.docPropertiesBtn).attr("disabled","disabled");$(this.viewerDOM.zoomDropdown).parent("span").attr("disabled","disabled");$(this.viewerDOM.zoomDropdown).siblings("input").attr("disabled","disabled");$(this.viewerDOM.zoomDropdown).attr("disabled","disabled")}};o.prototype.onClickThumbnail=function(q){if(q.data!=null){var r=q.data;$(this).parent().children().removeClass("toggled");$(this).addClass("toggled");$(r.viewerDOM.bookmarkContent).hide();$(r.viewerDOM.thumbnailContent).show();r.bookmarkActive=false;r.thumbnailActive=true;var p=r.getUpdatedThumbnailPages().indexOf(r.currentPage);if(p==-1){r.scrolToThumbPage(r.currentPage)}else{r.updateThumbnailPageSelectionState(r.currentPage)}}};o.prototype.onClickDocumentPropertiesBtn=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){q.hideFloatingToolbar.call();q.viewerDOM.propertiesWindow.show(q)}}};o.prototype.onClickBookmark=function(p){if(p.data!=null){var q=p.data;if(q.docContainsBookmarks){$(this).parent().children().removeClass("toggled");$(this).addClass("toggled");$(q.viewerDOM.bookmarkContent).show();$(q.viewerDOM.thumbnailContent).hide();q.bookmarkActive=true;q.thumbnailActive=false}}};o.prototype.onThumbnailPaneScroll=function(p){if(p.data!=null){var q=p.data;q.updateThumbnailsVisiblePages();if(!q.isUserFastScrolling){q.prioritizeThumbnailPages()}}};o.prototype.debouncePrioritizePageRequest=function(q,p){var r=this;return function(){var t=this;var s=arguments;if(r.debounceTimerId!=-1){clearTimeout(r.debounceTimerId)}r.debounceTimerId=setTimeout(function(){q.apply(t,s);r.isUserFastScrolling=false},p)}};o.prototype.onScrollCallback=function(q){if(q.data==null){return}var r=q.data;var p=r.getCurrentPage();if(Number(r.currentPage)!=Number(p)){r.events.dispatchAll(l.EventNames.afterPageChange,{currentPageNumber:p,viewerManager:r});r.isUserFastScrolling=true;r.setCurrentPageDontFetch(p);r.debouncePageRequest()}};o.prototype.onPrintBtnClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){q.hideFloatingToolbar.call();q.printDocument()}}};o.prototype.onSaveBtnClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){q.hideFloatingToolbar.call();q.saveDocument()}}};o.prototype.onDownloadBtnClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){q.hideFloatingToolbar.call();q.downloadDocument(null)}}};o.prototype.onDownloadDropdownChange=function(p){if(p.data==null){return}var q=p.data;if(q.documentLoaded){var r=p.currentTarget.value;$(this).val("");if(r!=".temp"){if(q.operationAllowed(m.AllowDownload)){if(q.operationAllowed(m.AllowDownloadAs)){q.downloadAs(r)}}}}};o.prototype.bindEventsWithRedactions=function(){if(this.pageRegionSelectable){this.events.dispatchAll(l.EventNames.unSelectableRegionEvent,{viewerManager:this});this.pageRegionSelectable=false}else{this.events.dispatchAll(l.EventNames.bindSelectableRegionEvent,{viewerManager:this});this.pageRegionSelectable=true}};o.prototype.downloadDocument=function(r){var t=this;if(!this.documentLoaded){return null}if(!this.operationAllowed(m.AllowDownload)){return null}if(r!=null&&!this.operationAllowed(m.AllowDownloadAs)){return null}var s=r;if(r==null){s=this.mimeType}this.downloadFormat={value:""};if(r!=null){this.downloadFormat.value=r}var q={value:""};this.events.dispatchAll(l.EventNames.beforeDocumentDownload,{downloadFileMimetype:s,documentDownloadCancel:this.documentDownloadCancel,newFileName:q,format:this.downloadFormat,viewerManager:this});if(this.documentDownloadCancel.value==true){return}var p=jQuery.Deferred();this.serverCom.checkViewerRights(this.handlerUri).done(function(u){if(!u.download){p.reject(u)}else{t.saveDocument().done(function(v){var w=t.serverCom.getDocumentDownloadURL(t.revisionUri,t.password,q.value);if(t.downloadFormat.value!=""){w=t.serverCom.getDownloadDocumentAsURL(t.revisionUri,t.password,t.downloadFormat.value,q.value)}w.done(function(y){var x=document.getElementById("hiddenDownloader");if(x===null){x=document.createElement("iframe");x.id="hiddenDownloader";x.style.display="none";document.body.appendChild(x)}x.src=y.url;x.onload=function(){this.parentNode.removeChild(this)};p.resolve({downloadedFileMimetype:s});t.events.dispatchAll(l.EventNames.afterDocumentDownload,{viewerManager:t})});w.fail(function(x){p.reject(x)})}).fail(function(v){p.reject(v)})}}).fail(function(u){p.reject(u)});return p.promise()};o.prototype.onFullScreenBtnClick=function(p){if(p.data!=null){var s=p.data;var r=$;try{if(r.fullscreen!=null){if(r.fullscreen.isFullScreen()){r.fullscreen.exit()}else{r(s.viewerDOM.viewer).fullscreen()}}}catch(q){}}};o.prototype.onDownloadAsPDFBtnClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){q.downloadDocument(".pdf")}}};o.prototype.onDownloadAsDOCXBtnClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){q.downloadDocument(".docx")}}};o.prototype.onDownloadAsHTMLBtnClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){q.downloadDocument(".html")}}};o.prototype.onDownloadAsTIFFBtnClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){q.downloadDocument(".tiff")}}};o.prototype.onRedactionButtonClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){q.bindEventsWithRedactions()}}};o.prototype.onAddSignatureClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){if(q.serverViewerPreferences.Interactivity.AllowSigning&&(q.mimeType=="application/pdf")){if(q.currentSignature!=null){q.currentSignature.detach();q.currentSignature=null}if(q.signatureMenu!=null){q.signatureMenu.destroy()}q.signatureMenu=new l.SignatureMenu(null,q);q.signatureMenu.OnMenuSelect=function(t,r){var s=r.imageSrc;var u=r.UserName;if(t==null){q.renderSignatureOnPage(s,u,null)}};q.signatureMenu.show(l.SignatureMenuPosition.BelowSourceControl,q.viewerDOM.addSignatureBtn,q.viewerDOM.addSignatureBtn);p.stopPropagation()}}}};o.prototype.onInvertPagesBtnClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){q.hideFloatingToolbar.call();q.invertPages(!q.viewingInverted)}}};o.prototype.onRotateClockwiseClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){q.rotate(true)}}};o.prototype.onRotateCounterClockwiseClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){q.rotate(false)}}};o.prototype.onZoomDropdownChange=function(r){if(r.data!=null){var s=r.data;if(s.documentLoaded){var q=null;var t=$(s.viewerDOM.zoomDropdown).children("option").filter(":selected").text();var p=s.getZoomValue(t);if(Number(p)===p&&p%1===0){$(s.viewerDOM.zoomDropdown).siblings("input").val(p+"%")}else{$(s.viewerDOM.zoomDropdown).siblings("input").val(p.toFixed(2)+"%")}q=s.getZoomValue(t);s.zoom("predefined",q)}}};o.prototype.onFirstPageClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){q.scrollToPage(1)}}};o.prototype.onPrevPageClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){q.scrollToPage(q.getPrevPageNumber())}}};o.prototype.onNextPageClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){q.scrollToPage(q.getNextPageNumber())}}};o.prototype.onPageIndicatorClick=function(p){if(p.data!=null){var q=p.data;$(q.viewerDOM.pageIndicator).select()}};o.prototype.validateZoomValue=function(r){var p;if(r.indexOf("%")>-1){var q=r.split("%");p=q[0].trim()}else{p=r}return p};o.prototype.validatePageNumber=function(p){var q;if(p.indexOf("/")>-1){var r=p.split("/");q=parseInt(r[0].trim())}else{q=parseInt(p.trim())}return q};o.prototype.onZoomTextBlur=function(q){if(q.data==null){return}var r=q.data;if(!r.documentLoaded){return}var p=r.validateZoomValue($(this).val());if(p>0&&p<=300){r.zoom("predefined",p)}else{var p=r.zoomValue;if(Number(p)===p&&p%1===0){$(r.viewerDOM.zoomDropdown).siblings("input").val(p+"%")}else{$(r.viewerDOM.zoomDropdown).siblings("input").val(p.toFixed(1)+"%")}}};o.prototype.onPageIndicatorBlur=function(q){if(q.data==null){return}var r=q.data;if(!r.documentLoaded){return}var p=r.validatePageNumber($(this).val());if(r.currentPage!=p&&p!=null){if(p<=r.pageCount){if(p>0){r.scrollToPage(p)}else{r.scrollToPage(1)}}else{r.scrollToPage(r.pageCount)}}r.updatePageNavButtonState()};o.prototype.onZoomTextKeyDown=function(s){if(s.data==null){return}var u=s.data;if(!u.documentLoaded){return}var p=s.keyCode?s.keyCode:s.which;if(p==8||p==9||p==46||p==37||p==39||p==191||p==111||p==110||(p>=96&&p<=105)){return true}if(s.keyCode!=13&&s.keyCode!=9){var r=new RegExp("^[0-9]+$");var t=String.fromCharCode(!s.charCode?s.which:s.charCode);if(!r.test(t)){return false}}if(s.keyCode==13||s.keyCode==9){var q=u.validateZoomValue($(this).val());if(q!=null){if(q>0&&q<=300){u.zoom("predefined",q)}else{var q=u.zoomValue;if(Number(q)===q&&q%1===0){$(u.viewerDOM.zoomDropdown).siblings("input").val(q+"%")}else{$(u.viewerDOM.zoomDropdown).siblings("input").val(q.toFixed(1)+"%")}}}s.preventDefault()}};o.prototype.onPageIndicatorKeydown=function(s){if(s.data==null){return}var u=s.data;if(!u.documentLoaded){return}var q=s.keyCode?s.keyCode:s.which;if(q==8||q==9||q==46||q==37||q==39||q==191||q==111){return true}if(q>=96&&q<=105){return true}if(s.keyCode!=13&&s.keyCode!=9){var r=new RegExp("^[0-9]+$");var t=String.fromCharCode(!s.charCode?s.which:s.charCode);if(!r.test(t)){return false}}if(s.keyCode==13||s.keyCode==9){var p=u.validatePageNumber($(this).val());if(p!=null){if(p<=u.pageCount){if(p>0){u.scrollToPage(p)}else{u.scrollToPage(1)}}else{u.scrollToPage(u.pageCount)}}u.updatePageNavButtonState();s.preventDefault()}};o.prototype.onLastPageClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){if(q.currentPage<q.pageCount){q.scrollToPage(q.pageCount)}}}};o.prototype.onZoomInClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){q.zoom("in",null)}}};o.prototype.onZoomOutClick=function(p){if(p.data!=null){var q=p.data;if(q.documentLoaded){q.zoom("out",null)}}};o.prototype.getTextWidth=function(t,q){var u=document.createElement("canvas");if(u!=null){var p=u.getContext("2d");p.font=q;var r=0;if(!this.documentRenderingCompleted){r=10}var s=p.measureText(t).width+r;return s}return 100};o.prototype.scrolToControl=function(r,p){if(!this.documentLoaded){return}var q={easing:"swing",onAfter:p};$(this.viewerDOM.viewableArea).scrollTo(r,q)};o.prototype.scrollToPage=function(r){var t=this;if(!this.documentLoaded){return}l.logger.logInfo("scrolToPage "+r);var p=function(){t.events.dispatchAll(l.EventNames.afterPageChange,{currentPageNumber:r,viewerManager:t});t.setCurrentPage(r)};var q={easing:"swing",onAfter:p};var s="#"+this.documentId+r;this.events.dispatchAll(l.EventNames.beforePageChange,{currentPageNumber:this.currentPage,targetPageNumber:r,pagechangecancel:this.pageChangeCancel,viewerManager:this});if(this.pageChangeCancel.value==true){return}$(this.viewerDOM.viewableArea).scrollTo(s,q)};o.prototype.scrolToThumbPage=function(q){var v=this;if(!this.documentLoaded||!this.thumbnailActive){return}var s=this.thumbnailVisiblePages.sort(function(x,w){return x-w});var r=s[s.length-1];if(q==(r+1)){var u=$(this.viewerDOM.thumbnailContent).scrollTop();$(this.viewerDOM.thumbnailContent).scrollTop(u+$(".git-viewer-thumbnail-page-container:first").outerHeight());this.updateThumbnailPageSelectionState(q)}else{var p={easing:"swing",onAfter:function(){v.updateThumbnailPageSelectionState(q)}};var t="#"+this.documentId+"thumb"+q;$(this.viewerDOM.thumbnailContent).scrollTo(t,p)}};return o}());l.ViewerManager=d})(gnostice||(gnostice={}));var gnostice;(function(t){var g;(function(x){x[x.auto=0]="auto";x[x.fixed=1]="fixed";x[x["float"]=2]="float"})(g=t.NavigationPanePosition||(t.NavigationPanePosition={}));var u;(function(x){x[x.allow=0]="allow";x[x.block=1]="block";x[x.alwaysAsk=2]="alwaysAsk";x[x.custom=3]="custom"})(u=t.HyperlinkAccess||(t.HyperlinkAccess={}));var d=(function(){function x(){this.strokeColor="black";this.strokeWidth=t.StrokeWidth.Thin;this.allowSavingUserSignatures=true;this.maxNumberOfSavedUserSignatures=2;this.allowCreatingNewUserSignatures=true;this.allowUploadingNewUserSignatures=true;this.allowDeletingUserSignatures=true;this.maxNumberOfSignaturesAllowedPerPage=-1;this.maxNumberOfSignaturesAllowedPerDocument=-1;this.showSavePrompt=true;this.enableMobileSigning=false}return x}());t.SignatureFields=d;var w=(function(){function x(){this.showPermissionDialog=true}return x}());t.HyperlinkCustomAccess=w;var e=(function(){function x(){this.access=u.alwaysAsk;this.custom=new w()}return x}());t.HyperlinkNavigation=e;var a=(function(){function x(){this.enablePasswordDialog=true;this.maxNumberOfPasswordRetries=3}return x}());t.PasswordPreferences=a;var s=(function(){function x(){this.hyperlinkNavigation=new e();this.password=new a()}return x}());t.SecurityPreferences=s;var j=(function(){function x(){this.firstPage=true;this.prevPage=true;this.nextPage=true;this.lastPage=true;this.pageIndicator=true;this.gotoPage=true}return x}());t.VisibleNavigationControls=j;var i=(function(){function x(){this.fixedSteps=true;this.zoomIn=true;this.zoomOut=true}return x}());t.VisibleZoomControls=i;var o=(function(){function x(){this.clockwise=true;this.counterClockwise=true}return x}());t.VisibleRotationControls=o;var p=(function(){function x(){this.open=true;this.download=true;this.print=true;this.save=true;this.downloadAs=true;this.propertiesInfo=true}return x}());t.VisibleFileOperationControls=p;var b=(function(){function x(){this.allPages=true}return x}());t.VisibleColorInversionControls=b;var c=(function(){function x(){this.sign=true}return x}());t.VisibleSignatureControls=c;var r=(function(){function x(){this.fillColor="white";this.strokeColor="white";this.isFill=false;this.isStroke=false;this.enableRedaction=false}return x}());t.RedactionControls=r;var k=(function(){function x(){this.enableQuickSearch=true;this.visibleQuickSearchControls=true;this.highlightColor="yellow"}return x}());t.Search=k;var l=(function(){function x(){this.highlightColor="rgba(204, 215, 255, 0.5)";this.readonlyColor="rgba(128, 128, 128, 0.5)";this.focusColor="rgba(255, 255, 255, 0.8)";this.listContainerBackgroundColor="rgba(255, 255, 255, 1)";this.listItemHoverBackgroundColor="";this.allowJavaScriptExecution=true}return x}());t.FormFields=l;var n=(function(){function x(){this.commentsPanelDisplayColor="rgb(255, 245, 245)";this.userFieldDisplayColor="blue"}return x}());t.Annotations=n;var q=(function(){function x(){this.form=new l();this.annotations=new n();this.signatures=new d();this.redactionControls=new r()}return x}());t.InteractiveElements=q;var h=(function(){function x(){this.zoomValue=t.ZoomMode.actualSize;this.rotationAngle=t.RotationAngle.zero;this.colorInversionApplied=false;this.navigationPaneOpened=true}return x}());t.InitialViewPreferences=h;var m=(function(){function x(){this.enableBookmarks=true;this.enableThumbnails=true;this.visible=true;this.width=180;this.position=g.auto}return x}());t.NavigationPane=m;var v=(function(){function x(){this.language="en";this.resourcePath="Scripts/localization/"}return x}());t.Localization=v;var f=(function(){function x(){this.toolbarVisible=true;this.lazyLoading=true;this.showStatusNotifications=false;this.visibleFullScreen=true;this.visibleFileOperationControls=new p();this.visibleNavigationControls=new j();this.visibleZoomControls=new i();this.visibleRotationControls=new o();this.visibleColorInversionControls=new b();this.visibleSignatureControls=new c();this.navigationPane=new m();this.search=new k();this.interactiveElements=new q();this.initialView=new h();this.security=new s();this.localization=new v()}return x}());t.Preferences=f})(gnostice||(gnostice={}));var gnostice;(function(l){var b=(function(){function m(){}m.docInfoRetrieved="docInfoRetrieved";m.blankPageCreated="blankPageCreated";m.pageRendered="pageRendered";m.pageReRendered="pageReRendered";m.reflow="reflow";m.bindSelectableRegionEvent="bindSelectableRegionEvent";m.unSelectableRegionEvent="unSelectableRegionEvent";m.beforePageChange="beforePageChange";m.afterPageChange="afterPageChange";m.beforeZoomChange="beforeZoomChange";m.afterZoomChange="afterZoomChange";m.onDocumentClose="onDocumentClose";m.beforeDocumentLoad="beforeDocumentLoad";m.afterDocumentLoad="afterDocumentLoad";m.beforeDocumentUpload="beforeDocumentUpload";m.afterDocumentUpload="afterDocumentUpload";m.beforeDocumentPrint="beforeDocumentPrint";m.afterDocumentPrint="afterDocumentPrint";m.beforeDocumentClose="beforeDocumentClose";m.afterDocumentClose="afterDocumentClose";m.beforePageRotate="beforePageRotate";m.afterPageRotate="afterPageRotate";m.beforeDocumentDownload="beforeDocumentDownload";m.afterDocumentDownload="afterDocumentDownload";m.beforeDocumentSaveInternal="beforeDocumentSaveInternal";m.beforeDocumentSave="beforeDocumentSave";m.afterDocumentSave="afterDocumentSave";m.afterPageDraw="afterPageDraw";m.needDocumentPassword="needDocumentPassword";m.beforeFormSubmit="beforeFormSubmit";m.afterFormSubmit="afterFormSubmit";m.onFormLoaded="onFormLoaded";m.onFormModified="onFormModified";m.onFieldClicked="onFieldClicked";m.afterFieldClicked="afterFieldClicked";m.onFieldFocusIn="onFieldFocusIn";m.onFieldFocusOut="onFieldFocusOut";m.onFieldChanged="onFieldChanged";m.onSignaturePlaced="onSignaturePlaced";m.beforeSignatureNeededPrompt="beforeSignatureNeededPrompt";m.onNavigationAction="onNavigationAction";return m}());l.EventNames=b;var k=(function(){function m(){}m.logInfo=function(n){if(console!=null&&m.infoLogsEnabled){console.log(n)}};m.logError=function(n){if(console!=null&&m.errorLogsEnabled){console.log("Error: "+n)}};m.errorLogsEnabled=true;m.infoLogsEnabled=false;return m}());l.logger=k;var e;(function(m){m[m.zero=0]="zero";m[m.clockwise90=90]="clockwise90";m[m.clockwise180=180]="clockwise180";m[m.clockwise270=270]="clockwise270";m[m.counterClockwise90=-90]="counterClockwise90";m[m.counterClockwise180=-180]="counterClockwise180";m[m.counterClockwise270=-270]="counterClockwise270"})(e=l.RotationAngle||(l.RotationAngle={}));var g;(function(m){m[m.fitWidth=-1]="fitWidth";m[m.fitHeight=-2]="fitHeight";m[m.actualSize=-3]="actualSize";m[m.fitPage=-4]="fitPage"})(g=l.ZoomMode||(l.ZoomMode={}));var c=(function(){function m(n){this.eventDispatcher=n;this.signaturePlaceholderList=new Array()}m.prototype.setModule=function(n){this.signatureModule=n;while(this.signaturePlaceholderList.length>0){var o=this.signaturePlaceholderList.pop();this.signatureModule.AddSignaturePlaceholder(o)}};m.prototype.getAll=function(){if(this.signatureModule!=null){return this.signatureModule.GetAllSignatures()}return null};m.prototype.get=function(n){if(this.signatureModule!=null){return this.signatureModule.GetSignature(n)}return null};m.prototype.addPlaceholder=function(n){if(this.signatureModule!=null){this.signatureModule.AddSignaturePlaceholder(n)}else{this.signaturePlaceholderList.push(n)}};m.prototype.removeAllPlaceholders=function(){if(this.signatureModule!=null){this.signatureModule.removeAllSignaturePlaceholders()}else{this.signaturePlaceholderList=new Array()}};m.prototype.addEventListener=function(n,o){if(this.eventDispatcher!=null){return this.eventDispatcher.addEventListener(n,o)}};return m}());l.SignatureAPI=c;var i=(function(){function m(n){this.searchModule=n}m.prototype.findNext=function(o,n){if(n===void 0){n=null}if(this.searchModule!=null){return this.searchModule.findNext(o,n)}};m.prototype.findPrevious=function(o,n){if(n===void 0){n=null}if(this.searchModule!=null){return this.searchModule.findPrevious(o,n)}};m.prototype.findFirst=function(o,n){if(n===void 0){n=null}if(this.searchModule!=null){return this.searchModule.findFirst(o,n)}};m.prototype.findLast=function(o,n){if(n===void 0){n=null}if(this.searchModule!=null){return this.searchModule.findLast(o,n)}};return m}());l.SearchAPI=i;var d=(function(){function m(n){this.eventDispatcher=n}m.prototype.setModule=function(n){this.formsModule=n};m.prototype.getAllFormFields=function(){if(this.formsModule!=null){return this.formsModule.getAllFormFields()}};m.prototype.getFormField=function(n){if(this.formsModule!=null){return this.formsModule.getFormField(n)}};m.prototype.submitForm=function(s,r,p,n,o,q){if(r===void 0){r=l.SubmitMethod.POST}if(p===void 0){p=false}if(n===void 0){n=null}if(o===void 0){o=true}if(q===void 0){q=false}if(this.formsModule!=null){return this.formsModule.submitForm(s,r,n,o,p,q)}};m.prototype.resetForm=function(n,o){if(n===void 0){n=null}if(o===void 0){o=true}if(this.formsModule!=null){return this.formsModule.resetFields(n,o)}};m.prototype.focusForm=function(){if(this.formsModule!=null){return this.formsModule.focusForm()}};m.prototype.addEventListener=function(n,o,p){if(this.eventDispatcher!=null){return this.eventDispatcher.addFormsEventListener(n,o,p)}};return m}());l.FormsAPI=d;var a=(function(){function m(o,n){this.viewerManager=o;this.documentViewer=n}m.prototype.showNavigationPane=function(){this.viewerManager.refreshLeftRightPanel(true)};m.prototype.hideNavigationPane=function(){this.viewerManager.refreshLeftRightPanel(false)};m.prototype.refresh=function(){this.documentViewer.reflowToolbar();this.viewerManager.resizePagesOnViewerSizeChanges()};m.prototype.firstPage=function(){if(this.viewerManager!=null){this.viewerManager.firstPage()}};m.prototype.prevPage=function(){if(this.viewerManager!=null){this.viewerManager.prevPage()}};m.prototype.nextPage=function(){if(this.viewerManager!=null){this.viewerManager.nextPage()}};m.prototype.lastPage=function(){if(this.viewerManager!=null){this.viewerManager.lastPage()}};m.prototype.getCurrentPageNumber=function(){var n=0;if(this.viewerManager!=null){n=this.viewerManager.getCurrentPageNumber()}return n};m.prototype.zoomIn=function(){if(this.viewerManager!=null){this.viewerManager.zoomIn()}};m.prototype.zoomOut=function(){if(this.viewerManager!=null){this.viewerManager.zoomOut()}};m.prototype.rotatePages=function(n){if(this.viewerManager!=null){this.viewerManager.rotateTo(n)}};m.prototype.zoom=function(n){if(this.viewerManager!=null){if(n==g.fitPage||n==g.fitWidth||n==g.fitHeight||n==g.actualSize){this.viewerManager.setZoomMode(n)}else{this.viewerManager.zoomTo(n)}}};m.prototype.rotatePagesClockwise=function(){if(this.viewerManager!=null){this.viewerManager.rotatePagesClockwise()}};m.prototype.rotatePagesCounterClockwise=function(){if(this.viewerManager!=null){this.viewerManager.rotatePagesCounterClockwise()}};m.prototype.invertColors=function(n){if(this.viewerManager!=null){this.viewerManager.invertColors(n)}};m.prototype.gotoPage=function(n){if(this.viewerManager!=null){this.viewerManager.gotoPage(n)}};m.prototype.changeLanguage=function(n){if(this.documentViewer!=null){this.documentViewer.localizeResources(n)}};return m}());l.ViewAPI=a;var j;(function(m){m[m.NOTMOVABLE=0]="NOTMOVABLE";m[m.MOVABLE=1]="MOVABLE";m[m.HIDE=2]="HIDE"})(j=l.ToolBarResizeAction||(l.ToolBarResizeAction={}));var f=(function(){function m(q,o,n,p){if(n===void 0){n=j.MOVABLE}if(p===void 0){p="Control Name"}this.control=q;this.priority=o;this.actionType=n;this.description=p;this.width=0;this.visible=true}return m}());l.ToolbarControl=f;var h=(function(n){__extends(m,n);function m(r,p,o){if(p===void 0){p=null}if(o===void 0){o="DocumentHandler.axd"}var s=n.call(this)||this;s.docHandlerUri="DocumentHandler.axd";s.preferences=new l.Preferences();s.id=null;s.toolbarControlList=new Array();s.menuControlList=new Array();s.isOpenMenuItems=false;s.enableRedaction=false;s.redactModule=null;s.selectRectangleModule=null;s.searchModule=null;s.beforePageChange=function(u){var t={currentPageNumber:u.currentPageNumber,targetPageNumber:u.targetPageNumber,cancel:u.pagechangecancel};s.dispatchAll(b.beforePageChange,t)};s.afterPageChange=function(u){var t={pageNumber:u.currentPageNumber};s.dispatchAll(b.afterPageChange,t)};s.beforeZoomChange=function(u){var t={currentZoomPercentage:u.currentZoomPercentage,targetZoomPercentage:u.targetZoomPercentage,cancel:u.zoomChangeCancel};s.dispatchAll(b.beforeZoomChange,t)};s.afterZoomChange=function(u){var t={zoomPercentage:u.zoomPercentage};s.dispatchAll(b.afterZoomChange,t)};s.beforeDocumentLoad=function(u){var t={documentUri:u.documentUri,cancel:u.documentLoadCancel};s.dispatchAll(b.beforeDocumentLoad,t)};s.afterDocumentLoad=function(u){var t={mimetype:u.viewerManager.mimetype};s.dispatchAll(b.afterDocumentLoad,t)};s.beforeDocumentUpload=function(u){var t={cancel:u.documentUploadCancel,beforeSend:u.beforeSend};s.dispatchAll(b.beforeDocumentUpload,t);u.beforeSend=t.beforeSend};s.afterDocumentUpload=function(u){var t={documentUri:u.documentUri};s.dispatchAll(b.afterDocumentUpload,t)};s.beforeDocumentPrint=function(u){var t={documentUri:u.documentUri,cancel:u.printCancel};s.dispatchAll(b.beforeDocumentPrint,t)};s.afterDocumentPrint=function(u){var t={};s.dispatchAll(b.afterDocumentPrint,t)};s.beforeDocumentClose=function(u){var t={documentUri:u.documentUri,cancel:u.documentCloseCancel};s.dispatchAll(b.beforeDocumentClose,t)};s.afterDocumentClose=function(u){var t={};s.dispatchAll(b.afterDocumentClose,t)};s.beforeDocumentDownload=function(u){var t={downloadFileformat:u.downloadFileformat,cancel:u.documentDownloadCancel,newFileName:u.newFileName,downloadFormat:u.format};s.dispatchAll(b.beforeDocumentDownload,t)};s.afterDocumentDownload=function(u){var t={documentUri:u.viewerManager.documentUri};s.dispatchAll(b.afterDocumentDownload,t)};s.beforeDocumentSave=function(u){var t={documentUri:u.documentUri,cancel:u.saveCancel};s.dispatchAll(b.beforeDocumentSave,t)};s.afterDocumentSave=function(u){var t={documentUri:u.documentUri};s.dispatchAll(b.afterDocumentSave,t)};s.onNavigationAction=function(u){var t={actionType:u.actionType,actionParams:u.actionParams,cancel:u.cancel};s.dispatchAll(b.onNavigationAction,t)};s.needDocumentPassword=function(u){var t={password:u.password,documentUri:u.documentUri};s.dispatchAll(b.needDocumentPassword,t)};s.formsEventBeforeFormSubmit=function(u){var t={keyValuePair:u.data,cancel:u.cancelPosting};s.dispatchAllFormEvents(b.beforeFormSubmit,null,t)};s.formsEventAfterFormSubmit=function(u){var t={documentUri:u.documentUri};s.dispatchAllFormEvents(b.afterFormSubmit,null,t)};s.formsEventOnFormLoaded=function(t){s.dispatchAllFormEvents(b.onFormLoaded,null,t)};s.formsEventOnFormModified=function(t){delete t.viewerManager;s.dispatchAllFormEvents(b.onFormModified,null,t)};s.formsEventOnFieldClick=function(t){s.dispatchAllFormEvents(b.onFieldClicked,t.formField.name,t)};s.formsEventAfterFieldClick=function(t){s.dispatchAllFormEvents(b.afterFieldClicked,t.formField.name,t)};s.formsEventOnFieldFocusIn=function(t){s.dispatchAllFormEvents(b.onFieldFocusIn,t.formField.name,t)};s.formsEventOnFieldFocusOut=function(t){s.dispatchAllFormEvents(b.onFieldFocusOut,t.formField.name,t)};s.formsEventOnFieldChange=function(t){s.dispatchAllFormEvents(b.onFieldChanged,t.formField.name,t)};s.onSignaturesPlacesAction=function(t){s.dispatchAll(b.onSignaturePlaced,t)};s.onSignaturesNeedePromptAction=function(t){s.dispatchAll(b.beforeSignatureNeededPrompt,t)};s.beforePageRotate=function(u){var t={currentRotationAngle:u.currentRotationAngle,newRotationAngle:u.newRotationAngle,cancel:u.rotateCancel};s.dispatchAll(b.beforePageRotate,t);u.rotateCancel.value=t.cancel};s.afterPageRotate=function(u){var t={rotationAngle:u.currentRotationAngle};s.dispatchAll(b.afterPageRotate,t)};s.afterPageDraw=function(u){var t={pageNumber:u.pageNumber,zoomPercentage:u.zoomPercentage,rotationAngle:u.rotationAngle,actualPageWidth:u.actualPageWidth,actualPageHeight:u.actualPageHeight,pageScaleX:u.scaleX,pageScaleY:u.scaleY,context:u.context,source:u.source};s.dispatchAll(b.afterPageDraw,t)};s.id=r;s.docviewercontrol=$("#"+s.id)||null;s.docHandlerUri=o;s.fontAwesomePrefix=$(s.docviewercontrol).attr("data-fa-prefix")||"fas";var q=new l.Preferences();s.preferences=$.extend(q,p);s.localizeResources(s.preferences.localization.language);s.render();return s}m.prototype.localizeResources=function(q){var p=this;try{jQuery.i18n.properties({name:"Messages",mode:"map",path:this.preferences.localization.resourcePath,language:q,async:true,callback:function(){l.LocalizedStrings.tooltip_open_doc=jQuery.i18n.prop("tooltip_open_doc");l.LocalizedStrings.tooltip_print_doc=jQuery.i18n.prop("tooltip_print_doc");l.LocalizedStrings.tooltip_save_doc=jQuery.i18n.prop("tooltip_save_doc");l.LocalizedStrings.tooltip_download_doc=jQuery.i18n.prop("tooltip_download_doc");l.LocalizedStrings.tooltip_download_as_doc=jQuery.i18n.prop("tooltip_download_as_doc");l.LocalizedStrings.tooltip_download_pdf=jQuery.i18n.prop("tooltip_download_pdf");l.LocalizedStrings.tooltip_download_docx=jQuery.i18n.prop("tooltip_download_docx");l.LocalizedStrings.tooltip_download_tiff=jQuery.i18n.prop("tooltip_download_tiff");l.LocalizedStrings.tooltip_download_html=jQuery.i18n.prop("tooltip_download_html");l.LocalizedStrings.tooltip_show_first_page=jQuery.i18n.prop("tooltip_show_first_page");l.LocalizedStrings.tooltip_show_previous_page=jQuery.i18n.prop("tooltip_show_previous_page");l.LocalizedStrings.go_to_page=jQuery.i18n.prop("go_to_page");l.LocalizedStrings.tooltip_show_next_page=jQuery.i18n.prop("tooltip_show_next_page");l.LocalizedStrings.tooltip_show_last_page=jQuery.i18n.prop("tooltip_show_last_page");l.LocalizedStrings.tooltip_rotate_anti_clockwise=jQuery.i18n.prop("tooltip_rotate_anti_clockwise");l.LocalizedStrings.tooltip_rotate_clockwise=jQuery.i18n.prop("tooltip_rotate_clockwise");l.LocalizedStrings.tooltip_zoomout=jQuery.i18n.prop("tooltip_zoomout");l.LocalizedStrings.tooltip_zoomin=jQuery.i18n.prop("tooltip_zoomin");l.LocalizedStrings.tooltip_custom_zoom=jQuery.i18n.prop("tooltip_custom_zoom");l.LocalizedStrings.page_fit_actual_size=jQuery.i18n.prop("page_fit_actual_size");l.LocalizedStrings.page_fit_height=jQuery.i18n.prop("page_fit_height");l.LocalizedStrings.page_fit_width=jQuery.i18n.prop("page_fit_width");l.LocalizedStrings.fit_page=jQuery.i18n.prop("fit_page");l.LocalizedStrings.tooltip_full_screen=jQuery.i18n.prop("tooltip_full_screen");l.LocalizedStrings.tooltip_thumbnails=jQuery.i18n.prop("tooltip_thumbnails");l.LocalizedStrings.tooltip_bookmarks=jQuery.i18n.prop("tooltip_bookmarks");l.LocalizedStrings.tooltip_quick_find=jQuery.i18n.prop("tooltip_quick_find");l.LocalizedStrings.tooltip_find_prev=jQuery.i18n.prop("tooltip_find_prev");l.LocalizedStrings.tooltip_find_next=jQuery.i18n.prop("tooltip_find_next");l.LocalizedStrings.close=jQuery.i18n.prop("close");l.LocalizedStrings.tooltip_invert_color=jQuery.i18n.prop("tooltip_invert_color");l.LocalizedStrings.tooltip_properties_info=jQuery.i18n.prop("tooltip_properties_info");l.LocalizedStrings.tooltip_select_rect=jQuery.i18n.prop("tooltip_select_rect");l.LocalizedStrings.tooltip_signature=jQuery.i18n.prop("tooltip_signature");l.LocalizedStrings.msgdlg_alert_formFieldsRequired=jQuery.i18n.prop("msgdlg_alert_formFieldsRequired");l.LocalizedStrings.msgdlg_btnCaption_OK=jQuery.i18n.prop("msgdlg_btnCaption_OK");l.LocalizedStrings.msgdlg_btnCaption_Cancel=jQuery.i18n.prop("msgdlg_btnCaption_Cancel");l.LocalizedStrings.msgdlg_btnCaption_Allow=jQuery.i18n.prop("msgdlg_btnCaption_Allow");l.LocalizedStrings.msgdlg_btnCaption_Yes=jQuery.i18n.prop("msgdlg_btnCaption_Yes");l.LocalizedStrings.msgdlg_btnCaption_No=jQuery.i18n.prop("msgdlg_btnCaption_No");l.LocalizedStrings.msgdlg_warning_jsAction=jQuery.i18n.prop("msgdlg_warning_jsAction");l.LocalizedStrings.msgdlg_warning_jsActionGoto=jQuery.i18n.prop("msgdlg_warning_jsActionGoto");l.LocalizedStrings.msgdlg_warning_jsLaunchApp=jQuery.i18n.prop("msgdlg_warning_jsLaunchApp");l.LocalizedStrings.msgdlg_warning_linkAction=jQuery.i18n.prop("msgdlg_warning_linkAction");l.LocalizedStrings.msgdlg_password_title=jQuery.i18n.prop("msgdlg_password_title");l.LocalizedStrings.msgdlg_password_incorrect=jQuery.i18n.prop("msgdlg_password_incorrect");l.LocalizedStrings.msgdlg_password_retry_limit=jQuery.i18n.prop("msgdlg_password_retry_limit");l.LocalizedStrings.msgdlg_docinfo_tab_description=jQuery.i18n.prop("msgdlg_docinfo_tab_description");l.LocalizedStrings.msgdlg_docinfo_tab_security=jQuery.i18n.prop("msgdlg_docinfo_tab_security");l.LocalizedStrings.msgdlg_docinfo_filename=jQuery.i18n.prop("msgdlg_docinfo_filename");l.LocalizedStrings.msgdlg_docinfo_title=jQuery.i18n.prop("msgdlg_docinfo_title");l.LocalizedStrings.msgdlg_docinfo_author=jQuery.i18n.prop("msgdlg_docinfo_author");l.LocalizedStrings.msgdlg_docinfo_subject=jQuery.i18n.prop("msgdlg_docinfo_subject");l.LocalizedStrings.msgdlg_docinfo_keywords=jQuery.i18n.prop("msgdlg_docinfo_keywords");l.LocalizedStrings.msgdlg_docinfo_mimetype=jQuery.i18n.prop("msgdlg_docinfo_mimetype");l.LocalizedStrings.msgdlg_docinfo_fileext=jQuery.i18n.prop("msgdlg_docinfo_fileext");l.LocalizedStrings.msgdlg_docinfo_filesize=jQuery.i18n.prop("msgdlg_docinfo_filesize");l.LocalizedStrings.msgdlg_docinfo_created=jQuery.i18n.prop("msgdlg_docinfo_created");l.LocalizedStrings.msgdlg_docinfo_modified=jQuery.i18n.prop("msgdlg_docinfo_modified");l.LocalizedStrings.msgdlg_docinfo_creator=jQuery.i18n.prop("msgdlg_docinfo_creator");l.LocalizedStrings.msgdlg_docinfo_producer=jQuery.i18n.prop("msgdlg_docinfo_producer");l.LocalizedStrings.msgdlg_docinfo_securitymethod=jQuery.i18n.prop("msgdlg_docinfo_securitymethod");l.LocalizedStrings.msgdlg_docinfo_encryptionlevel=jQuery.i18n.prop("msgdlg_docinfo_encryptionlevel");l.LocalizedStrings.msgdlg_docinfo_openpassword=jQuery.i18n.prop("msgdlg_docinfo_openpassword");l.LocalizedStrings.msgdlg_docinfo_permissionspassword=jQuery.i18n.prop("msgdlg_docinfo_permissionspassword");l.LocalizedStrings.msgdlg_docinfo_commenting=jQuery.i18n.prop("msgdlg_docinfo_commenting");l.LocalizedStrings.msgdlg_docinfo_formfilling=jQuery.i18n.prop("msgdlg_docinfo_formfilling");l.LocalizedStrings.msgdlg_docinfo_yes=jQuery.i18n.prop("msgdlg_docinfo_yes");l.LocalizedStrings.msgdlg_docinfo_no=jQuery.i18n.prop("msgdlg_docinfo_no");l.LocalizedStrings.msgdlg_docinfo_allowed=jQuery.i18n.prop("msgdlg_docinfo_allowed");l.LocalizedStrings.msgdlg_docinfo_notallowed=jQuery.i18n.prop("msgdlg_docinfo_notallowed");l.LocalizedStrings.msgdlg_docinfo_none=jQuery.i18n.prop("msgdlg_docinfo_none");l.LocalizedStrings.msgdlg_docinfo_passwordencryption=jQuery.i18n.prop("msgdlg_docinfo_passwordencryption");l.LocalizedStrings.nav_pane_comments=jQuery.i18n.prop("nav_pane_comments");l.LocalizedStrings.nav_pane_no_comments=jQuery.i18n.prop("nav_pane_no_comments");l.LocalizedStrings.annot_add_new=jQuery.i18n.prop("annot_add_new");l.LocalizedStrings.annot_state_accepted=jQuery.i18n.prop("annot_state_accepted");l.LocalizedStrings.annot_state_rejected=jQuery.i18n.prop("annot_state_rejected");l.LocalizedStrings.annot_state_completed=jQuery.i18n.prop("annot_state_completed");l.LocalizedStrings.annot_state_cancelled=jQuery.i18n.prop("annot_state_cancelled");l.LocalizedStrings.annot_enter_reply=jQuery.i18n.prop("annot_enter_reply");l.LocalizedStrings.annot_reply=jQuery.i18n.prop("annot_reply");l.LocalizedStrings.nav_pane=jQuery.i18n.prop("nav_pane");l.LocalizedStrings.annot_by=jQuery.i18n.prop("annot_by");l.LocalizedStrings.form_validation_error_date=jQuery.i18n.prop("form_validation_error_date");l.LocalizedStrings.form_validation_error_time=jQuery.i18n.prop("form_validation_error_time");l.LocalizedStrings.form_validation_error_datetime=jQuery.i18n.prop("form_validation_error_datetime");l.LocalizedStrings.form_validation_error_input=jQuery.i18n.prop("form_validation_error_input");l.LocalizedStrings.notification_popup_success_header=jQuery.i18n.prop("notification_popup_success_header");l.LocalizedStrings.notification_popup_success_message=jQuery.i18n.prop("notification_popup_success_message");l.LocalizedStrings.notification_popup_failure_header=jQuery.i18n.prop("notification_popup_failure_header");l.LocalizedStrings.notification_popup_failure_message=jQuery.i18n.prop("notification_popup_failure_message");l.LocalizedStrings.signature_menu_addSignatureOption=jQuery.i18n.prop("signature_menu_addSignatureOption");l.LocalizedStrings.signature_menu_manageSignatureOption=jQuery.i18n.prop("signature_menu_manageSignatureOption");l.LocalizedStrings.signature_dlg_btn_insert=jQuery.i18n.prop("signature_dlg_btn_insert");l.LocalizedStrings.signature_dlg_btn_save_and_insert=jQuery.i18n.prop("signature_dlg_btn_save_and_insert");l.LocalizedStrings.signature_dlg_btn_clear=jQuery.i18n.prop("signature_dlg_btn_clear");l.LocalizedStrings.signature_dlg_btn_upload=jQuery.i18n.prop("signature_dlg_btn_upload");l.LocalizedStrings.signature_dlg_title_draw=jQuery.i18n.prop("signature_dlg_title_draw");l.LocalizedStrings.signature_dlg_title_upload=jQuery.i18n.prop("signature_dlg_title_upload");l.LocalizedStrings.signature_dlg_title_mysignatures=jQuery.i18n.prop("signature_dlg_title_mysignatures");l.LocalizedStrings.signature_dlg_edit_label_name=jQuery.i18n.prop("signature_dlg_edit_label_name");l.LocalizedStrings.progress_msg_uploading=jQuery.i18n.prop("progress_msg_uploading");l.LocalizedStrings.progress_msg_loading=jQuery.i18n.prop("progress_msg_loading");l.LocalizedStrings.progress_msg_loading_server=jQuery.i18n.prop("progress_msg_loading_server");p.applyLocalization()}})}catch(o){}};m.prototype.applyLocalization=function(){if(this.sidePaneToggleBtn!=null){$(this.sidePaneToggleBtn).attr("title",l.LocalizedStrings.nav_pane)}if(this.openDocBtn!=null){$(this.openDocBtn).attr("title",l.LocalizedStrings.tooltip_open_doc)}if(this.printBtn!=null){$(this.printBtn).attr("title",l.LocalizedStrings.tooltip_print_doc)}if(this.saveBtn!=null){$(this.saveBtn).attr("title",l.LocalizedStrings.tooltip_save_doc)}if(this.downloadBtn!=null){$(this.downloadBtn).attr("title",l.LocalizedStrings.tooltip_download_doc)}if(this.toolbarsaveAsCaratControl!=null){$(this.toolbarsaveAsCaratControl).attr("title",l.LocalizedStrings.tooltip_download_as_doc)}if(this.downloadAsCmbBox!=null){this.downloadAsCmbBox.options.length=0;var o=new Option("--Select--",".temp",true,true);o.style.display="none";this.downloadAsCmbBox.options.add(o);this.downloadAsCmbBox.options.add(new Option(l.LocalizedStrings.tooltip_download_pdf,".pdf"));this.downloadAsCmbBox.options.add(new Option(l.LocalizedStrings.tooltip_download_docx,".docx"));this.downloadAsCmbBox.options.add(new Option(l.LocalizedStrings.tooltip_download_tiff,".tiff"));this.downloadAsCmbBox.options.add(new Option(l.LocalizedStrings.tooltip_download_html,".html"))}if(this.firstPageBtn!=null){$(this.firstPageBtn).attr("title",l.LocalizedStrings.tooltip_show_first_page)}if(this.prevPageBtn!=null){$(this.prevPageBtn).attr("title",l.LocalizedStrings.tooltip_show_previous_page)}if(this.pagenumberInput!=null){$(this.pagenumberInput).attr({title:l.LocalizedStrings.go_to_page})}if(this.nextPageBtn!=null){$(this.nextPageBtn).attr("title",l.LocalizedStrings.tooltip_show_next_page)}if(this.lastPageBtn!=null){$(this.lastPageBtn).attr("title",l.LocalizedStrings.tooltip_show_last_page)}if(this.counterClockwiseBtn!=null){$(this.counterClockwiseBtn).attr("title",l.LocalizedStrings.tooltip_rotate_anti_clockwise)}if(this.clockwiseBtn!=null){$(this.clockwiseBtn).attr("title",l.LocalizedStrings.tooltip_rotate_clockwise)}if(this.zoomOutBtn!=null){$(this.zoomOutBtn).attr("title",l.LocalizedStrings.tooltip_zoomout)}if(this.zoomInBtn!=null){$(this.zoomInBtn).attr("title",l.LocalizedStrings.tooltip_zoomin)}if(this.zoominDropdown!=null){this.zoominDropdown.options.length=0;this.zoominDropdown.options.add(new Option("25%"));this.zoominDropdown.options.add(new Option("50%"));this.zoominDropdown.options.add(new Option("75%"));this.zoominDropdown.options.add(new Option("100%"));this.zoominDropdown.options.add(new Option("125%"));this.zoominDropdown.options.add(new Option("150%"));this.zoominDropdown.options.add(new Option("200%"));this.zoominDropdown.options.add(new Option(l.LocalizedStrings.page_fit_actual_size));this.zoominDropdown.options.add(new Option(l.LocalizedStrings.page_fit_height));this.zoominDropdown.options.add(new Option(l.LocalizedStrings.page_fit_width));this.zoominDropdown.options.add(new Option(l.LocalizedStrings.fit_page));this.zoominDropdown.options.add(new Option(l.LocalizedStrings.tooltip_custom_zoom))}if(this.invertAllPagesBtn!=null){$(this.invertAllPagesBtn).attr("title",l.LocalizedStrings.tooltip_invert_color)}if(this.propertiesInfoBtn!=null){$(this.propertiesInfoBtn).attr("title",l.LocalizedStrings.tooltip_properties_info)}if(this.redactBtn!=null){$(this.redactBtn).attr("title",l.LocalizedStrings.tooltip_select_rect)}if(this.addSignatureBtn!=null){$(this.addSignatureBtn).attr("title",l.LocalizedStrings.tooltip_signature)}if(this.fullScreenBtn!=null){$(this.fullScreenBtn).attr("title",l.LocalizedStrings.tooltip_full_screen)}if(this.thumbnailBtn!=null){$(this.thumbnailBtn).attr("title",l.LocalizedStrings.tooltip_thumbnails)}if(this.bookmarkBtn!=null){$(this.bookmarkBtn).attr("title",l.LocalizedStrings.tooltip_bookmarks)}if(this.searchModule!=null){this.searchModule.applyLocalization()}};m.prototype.render=function(){var F=this;var C=this;this.viewer=document.createElement("div");$(this.viewer).height("100%");$(this.viewer).width("100%");$(this.viewer).css({position:"relative","min-width":"280px"});$(this.viewer).attr("tabindex",0);var N=document.createElement("div");$(N).height("100%");$(N).width("100%");$(N).css("position","absolute");$(N).addClass("git-docviewer-container");var s=document.createElement("div");$(s).attr("class","git-docviewer-scrollablecanvas");$(s).attr("align","center");$(s).css({"box-sizing":"border-box",width:"100%",height:"100%",position:"relative","box-shadow":"inset 1px 0 0 hsla(0,0%,100%,.05)","float":"left"});if(C.preferences.search.enableQuickSearch){this.searchModule=new l.SearchModule(this.preferences.search.highlightColor)}if(this.enableRedaction){this.redactModule=new l.redactModule(this.preferences.interactiveElements.redactionControls.fillColor,this.preferences.interactiveElements.redactionControls.strokeColor,this.preferences.interactiveElements.redactionControls.isFill,this.preferences.interactiveElements.redactionControls.isStroke);this.redactModule.supportsRedactionLayer=true}if(!C.preferences.navigationPane.visible&&!C.preferences.toolbarVisible){C.preferences.navigationPane.enableThumbnails=false;C.preferences.navigationPane.enableBookmarks=false}if(C.preferences.toolbarVisible){$(s).css({"padding-top":"38px"});this.toolbar=document.createElement("DIV");$(this.toolbar).css({position:"absolute","z-index":"125",width:"100%","min-height":"37px","text-align":"center",left:"0px",right:"0px",cursor:"default"});this.container=document.createElement("DIV");$(this.container).css({position:"relative",left:"0",right:"0",width:"100%","text-align":"center"});$(this.container).addClass("git-docviewer-toolbar");this.placeholder=document.createElement("DIV");$(this.placeholder).css({position:"relative","z-index":"125",width:"100%","min-height":"37px","text-align":"center"});this.centerplaceholder=document.createElement("span");$(this.centerplaceholder).attr("class","git_xdoc_docviewer_toolbar_container_class_center");$(this.centerplaceholder).css({position:"relative",top:"5px;","min-width":"16px"});this.leftplaceholder=document.createElement("span");$(this.leftplaceholder).css({position:"relative","float":"left",margin:"2px 0px 0px 0px"});this.toggleplaceholder=document.createElement("span");$(this.toggleplaceholder).css({position:"relative","float":"right",margin:"2px 0px 0px 0px",right:"3px"});$(this.placeholder).append(this.leftplaceholder);$(this.placeholder).append(this.toggleplaceholder);$(this.container).append(this.placeholder);$(this.toolbar).append(this.container);if(C.preferences.navigationPane.visible&&(C.preferences.navigationPane.enableThumbnails||C.preferences.navigationPane.enableBookmarks)){this.sidePaneToggleBtn=document.createElement("div");$(this.sidePaneToggleBtn).attr("tabIndex","0");$(this.sidePaneToggleBtn).attr("id","sidebartool");$(this.sidePaneToggleBtn).addClass("git-docviewer-controlcontainer");$(this.sidePaneToggleBtn).addClass(this.fontAwesomePrefix+" fa-columns fa-lg");$(this.leftplaceholder).append(this.sidePaneToggleBtn);this.toolbarControlList.push(new f(this.sidePaneToggleBtn,1,j.NOTMOVABLE,"toggle"));var q=document.createElement("div");$(q).css({width:"0px",height:"25px","float":"left",border:"1px inset",margin:"3px 9px 3px 9px","border-color":"#C1C1C1"});$(this.leftplaceholder).append(q);this.toolbarControlList.push(new f(q,2,j.NOTMOVABLE,"sepLine0"))}if(C.preferences.visibleFileOperationControls.open){this.openDocBtn=document.createElement("div");$(this.openDocBtn).attr("tabIndex","0");$(this.openDocBtn).addClass("git-docviewer-controlcontainer");$(this.openDocBtn).addClass(this.fontAwesomePrefix+" fa-folder-open fa-lg");$(this.leftplaceholder).append(this.openDocBtn);this.toolbarControlList.push(new f(this.openDocBtn,0,j.NOTMOVABLE,"open"))}if(C.preferences.visibleFileOperationControls.print){this.printBtn=document.createElement("div");$(this.printBtn).attr("tabIndex","0");$(this.printBtn).attr("disabled","true");$(this.printBtn).addClass("git-docviewer-controlcontainer");$(this.printBtn).addClass(this.fontAwesomePrefix+" fa-print fa-lg");$(this.leftplaceholder).append(this.printBtn);this.toolbarControlList.push(new f(this.printBtn,9,j.MOVABLE,"print"))}if(C.preferences.visibleFileOperationControls.save){this.saveBtn=document.createElement("div");$(this.saveBtn).attr("tabIndex","0");$(this.saveBtn).attr("disabled","true");$(this.saveBtn).addClass("git-docviewer-controlcontainer");$(this.saveBtn).addClass(this.fontAwesomePrefix+" fa-save fa-lg");$(this.leftplaceholder).append(this.saveBtn);this.toolbarControlList.push(new f(this.saveBtn,6,j.MOVABLE,"save"))}var z=null;if(C.preferences.visibleFileOperationControls.download){this.downloadAsContainer=document.createElement("div");this.downloadBtn=document.createElement("div");$(this.downloadBtn).attr("tabIndex","0");$(this.downloadBtn).addClass("git-docviewer-download");$(this.downloadBtn).addClass(this.fontAwesomePrefix+" fa-download fa-lg");var D=document.createElement("div");if(C.preferences.visibleFileOperationControls.downloadAs){this.toolbarsaveAsCaratControl=document.createElement("div");$(this.toolbarsaveAsCaratControl).attr("tabIndex","0");$(this.toolbarsaveAsCaratControl).addClass("git-docviewer-downloadAs");$(this.toolbarsaveAsCaratControl).css({width:"14px",padding:"2px",left:"0px","float":"left",position:"relative",height:"30px"});$(this.toolbarsaveAsCaratControl).on("click",function(P){if($(C.downloadAsContainer).attr("disabled")=="disabled"){return}$(z).slideToggle(200);$(".clicker").toggleClass("active");P.stopPropagation();if(C.isOpenMenuItems){$(C.toggleMenuBtn).removeClass("toggled");$(C.menuItems).css("display","none");C.isOpenMenuItems=false}});$(D).append(this.toolbarsaveAsCaratControl);var o=document.createDocumentFragment();this.downloadAsCmbBox=document.createElement("select");$(this.downloadAsCmbBox).attr("tabIndex","-1");$(this.downloadAsCmbBox).attr("aria-label","download-as selection");$(this.downloadAsCmbBox).css({position:"absolute",top:"-3px",left:"0px",height:"34px",width:"18px",padding:"2px","border-width":"0px"});o.appendChild(this.downloadAsCmbBox);this.toolbarsaveAsCaratControl.appendChild(o);$(D).attr("disabled","disabled");$(D).attr("id","gitdownloadAs");$(D).addClass("click-nav")}$(this.downloadAsContainer).addClass("git-viewer-button-container");$(this.downloadBtn).attr("disabled","disabled");$(this.downloadAsContainer).append(this.downloadBtn);if(C.preferences.visibleFileOperationControls.downloadAs){$(this.downloadAsContainer).append(D)}$(this.leftplaceholder).append(this.downloadAsContainer);this.toolbarControlList.push(new f(this.downloadAsContainer,30,j.NOTMOVABLE,"downloadAs"))}if(this.preferences.search.enableQuickSearch&&this.preferences.search.visibleQuickSearchControls){this.searchBtn=this.searchModule.getQuickFindUIBtn();$(this.searchBtn).attr("tabIndex","0");$(this.searchBtn).attr("disabled","true");$(this.leftplaceholder).append(this.searchBtn);this.toolbarControlList.push(new f(this.searchBtn,7,j.MOVABLE,"quickSearch"))}var J=document.createElement("div");$(J).css({width:"0px",height:"25px","float":"left",border:"1px inset",margin:"3px 9px 3px 9px","border-color":"#C1C1C1"});$(this.leftplaceholder).append(J);this.toolbarControlList.push(new f(J,8,j.HIDE,"SepLine0"));if(C.preferences.visibleNavigationControls.firstPage){this.firstPageBtn=document.createElement("div");$(this.firstPageBtn).attr("tabIndex","0");$(this.firstPageBtn).attr("disabled","true");$(this.firstPageBtn).addClass("git-docviewer-controlcontainer");$(this.firstPageBtn).addClass(this.fontAwesomePrefix+" fa-step-backward fa-lg");$(this.leftplaceholder).append(this.firstPageBtn);this.toolbarControlList.push(new f(this.firstPageBtn,3,j.MOVABLE,"first"))}if(C.preferences.visibleNavigationControls.prevPage){this.prevPageBtn=document.createElement("div");$(this.prevPageBtn).attr("tabIndex","0");$(this.prevPageBtn).attr("disabled","true");$(this.prevPageBtn).addClass("git-docviewer-controlcontainer");$(this.prevPageBtn).addClass(this.fontAwesomePrefix+" fa-caret-left fa-lg");$(this.leftplaceholder).append(this.prevPageBtn);this.toolbarControlList.push(new f(this.prevPageBtn,10,j.NOTMOVABLE,"prev"))}if(C.preferences.visibleNavigationControls.pageIndicator){C.pagenumberInput=document.createElement("input");$(C.pagenumberInput).attr("tabIndex","0");$(C.pagenumberInput).attr("aria-label","page number input");$(C.pagenumberInput).attr("disabled","true");$(C.pagenumberInput).attr({type:"text","class":"git-docviewer-goto",id:"git_xdoc_docviewer_toolbar_id_goto",value:"0 / 0"});$(C.pagenumberInput).css({width:"55px",padding:"0px 6px",margin:"4px 2px","text-align":"center","min-height":"24px","min-width":"52px"});$(this.leftplaceholder).append(C.pagenumberInput);this.toolbarControlList.push(new f(this.pagenumberInput,11,j.NOTMOVABLE,"pageindicator"))}if(C.preferences.visibleNavigationControls.nextPage){this.nextPageBtn=document.createElement("div");$(this.nextPageBtn).attr("tabIndex","0");$(this.nextPageBtn).attr("disabled","true");$(this.nextPageBtn).addClass("git-docviewer-controlcontainer");$(this.nextPageBtn).addClass(this.fontAwesomePrefix+" fa-caret-right fa-lg");$(this.leftplaceholder).append(this.nextPageBtn);this.toolbarControlList.push(new f(this.nextPageBtn,12,j.NOTMOVABLE,"next"))}if(C.preferences.visibleNavigationControls.lastPage){this.lastPageBtn=document.createElement("div");$(this.lastPageBtn).attr("tabIndex","0");$(this.lastPageBtn).attr("disabled","true");$(this.lastPageBtn).addClass("git-docviewer-controlcontainer");$(this.lastPageBtn).addClass(this.fontAwesomePrefix+" fa-step-forward fa-lg");$(this.leftplaceholder).append(this.lastPageBtn);this.toolbarControlList.push(new f(this.lastPageBtn,4,j.MOVABLE,"last"))}var w=document.createElement("div");$(w).css({width:"0px",height:"25px","float":"left",border:"1px inset",margin:"3px 9px 3px 9px","border-color":"#C1C1C1"});$(this.leftplaceholder).append(w);this.toolbarControlList.push(new f(w,13,j.HIDE,"sepLine1"));if(C.preferences.visibleRotationControls.counterClockwise){this.counterClockwiseBtn=document.createElement("div");$(this.counterClockwiseBtn).attr("tabIndex","0");$(this.counterClockwiseBtn).attr("disabled","true");$(this.counterClockwiseBtn).addClass("git-docviewer-controlcontainer");$(this.counterClockwiseBtn).addClass(this.fontAwesomePrefix+" fa-undo fa-lg");$(C.leftplaceholder).append(this.counterClockwiseBtn);this.toolbarControlList.push(new f(this.counterClockwiseBtn,14,j.MOVABLE,"counterClockwise"))}if(C.preferences.visibleRotationControls.clockwise){this.clockwiseBtn=document.createElement("div");$(this.clockwiseBtn).attr("tabIndex","0");$(this.clockwiseBtn).attr("disabled","true");$(this.clockwiseBtn).addClass("git-docviewer-controlcontainer");$(this.clockwiseBtn).addClass(this.fontAwesomePrefix+" fa-redo fa-lg");$(C.leftplaceholder).append(this.clockwiseBtn);this.toolbarControlList.push(new f(this.clockwiseBtn,15,j.MOVABLE,"clockwise"))}var u=document.createElement("div");$(u).css({width:"0px",height:"25px","float":"left",border:"1px inset",margin:"3px 9px 3px 9px","border-color":"#C1C1C1"});$(this.leftplaceholder).append(u);this.toolbarControlList.push(new f(u,16,j.HIDE,"sepLine3"));if(C.preferences.visibleZoomControls.zoomOut){this.zoomOutBtn=document.createElement("div");$(this.zoomOutBtn).attr("tabIndex","0");$(this.zoomOutBtn).attr({disabled:"true"});$(this.zoomOutBtn).addClass("git-docviewer-controlcontainer");$(this.zoomOutBtn).addClass(this.fontAwesomePrefix+" fa-search-minus fa-lg");$(this.leftplaceholder).append(this.zoomOutBtn);this.toolbarControlList.push(new f(this.zoomOutBtn,17,j.MOVABLE,"zoomout"))}if(C.preferences.visibleZoomControls.zoomIn){this.zoomInBtn=document.createElement("div");$(this.zoomInBtn).attr("tabIndex","0");$(this.zoomInBtn).attr({disabled:"true"});$(this.zoomInBtn).addClass("git-docviewer-controlcontainer");$(this.zoomInBtn).addClass(this.fontAwesomePrefix+" fa-search-plus fa-lg");$(this.leftplaceholder).append(this.zoomInBtn);this.toolbarControlList.push(new f(this.zoomInBtn,18,j.MOVABLE,"zoomin"))}if(C.preferences.visibleZoomControls.fixedSteps){var E=document.createElement("span");$(E).attr("disabled","disabled");$(E).attr("class","git-viewer-button-container");$(E).css({"min-width":"68px",position:"relative","float":"left"});var v=document.createElement("input");$(v).attr("tabIndex","0");$(v).attr("aria-label","page zoom entry field");$(v).attr("type","text");$(v).val("100%");$(v).addClass("git-zoom-text-input");$(v).attr({disabled:"true"});$(E).append(v);this.zoominDropdown=document.createElement("select");$(this.zoominDropdown).attr("tabIndex","0");$(this.zoominDropdown).attr("aria-label","page zoom selection");$(this.zoominDropdown).css({height:"100%",width:"64px","margin-top":"4px","margin-left":"10px","background-color":"rgba(255, 255, 255, 0.8)",padding:"0px"});$(this.zoominDropdown).attr({disabled:"true"});$(E).append(C.zoominDropdown);$(C.leftplaceholder).append(E);this.toolbarControlList.push(new f(E,31,j.HIDE,"predefinedzoom"))}var r=document.createElement("div");$(r).css({width:"0px",height:"25px","float":"left",border:"1px inset",margin:"3px 9px 3px 9px","border-color":"#C1C1C1"});$(this.leftplaceholder).append(r);this.toolbarControlList.push(new f(r,21,j.HIDE,"sepLine4"));if(C.preferences.visibleColorInversionControls.allPages){this.invertAllPagesBtn=document.createElement("div");$(this.invertAllPagesBtn).attr("tabIndex","0");$(this.invertAllPagesBtn).attr("disabled","true");$(this.invertAllPagesBtn).addClass("git-docviewer-controlcontainer");$(this.invertAllPagesBtn).addClass(this.fontAwesomePrefix+" fa-tint-slash fa-lg");$(C.leftplaceholder).append(this.invertAllPagesBtn);this.toolbarControlList.push(new f(this.invertAllPagesBtn,22,j.MOVABLE,"invert"))}if(C.preferences.visibleFileOperationControls.propertiesInfo){this.propertiesInfoBtn=document.createElement("div");$(this.propertiesInfoBtn).attr("tabIndex","0");$(this.propertiesInfoBtn).attr("disabled","true");$(this.propertiesInfoBtn).addClass("git-docviewer-controlcontainer");$(this.propertiesInfoBtn).addClass(this.fontAwesomePrefix+" fa-info fa-lg");$(C.leftplaceholder).append(this.propertiesInfoBtn);this.toolbarControlList.push(new f(this.propertiesInfoBtn,23,j.MOVABLE,"properties"))}if(C.preferences.interactiveElements.redactionControls.enableRedaction){this.selectRectangleModule=new l.selectRectModule("");this.selectRectangleModule.supportsSelectionLayer=true;this.redactBtn=document.createElement("div");$(this.redactBtn).attr("tabIndex","0");$(this.redactBtn).attr("disabled","true");$(this.redactBtn).addClass("git-docviewer-controlcontainer");$(this.redactBtn).addClass("git-docviewer-redact");$(C.leftplaceholder).append(this.redactBtn);this.toolbarControlList.push(new f(this.redactBtn,24,j.MOVABLE,"invert"))}if(C.preferences.visibleSignatureControls.sign){this.addSignatureBtn=document.createElement("div");$(this.addSignatureBtn).attr("tabIndex","0");$(this.addSignatureBtn).addClass("git-docviewer-controlcontainer");$(this.addSignatureBtn).addClass(this.fontAwesomePrefix+" fa-file-signature fa-lg");$(C.leftplaceholder).append(this.addSignatureBtn);this.toolbarControlList.push(new f(this.addSignatureBtn,30,j.HIDE,"signature"))}if(C.preferences.visibleFullScreen){this.fullScreenBtn=document.createElement("div");$(this.fullScreenBtn).attr("tabIndex","0");$(this.fullScreenBtn).addClass("git-docviewer-controlcontainer");$(this.fullScreenBtn).addClass(this.fontAwesomePrefix+" fa-expand fa-lg");$(C.leftplaceholder).append(this.fullScreenBtn);this.toolbarControlList.push(new f(this.fullScreenBtn,26,j.MOVABLE,"fullscreen"))}$(this.viewer).on("fscreenopen",function(){$(C.fullScreenBtn).addClass("fa-compress");$(C.fullScreenBtn).removeClass("fa-expand")});$(this.viewer).on("fscreenclose",function(){$(C.fullScreenBtn).removeClass("fa-compress");$(C.fullScreenBtn).addClass("fa-expand")})}this.toggleMenuBtn=document.createElement("div");$(this.toggleMenuBtn).attr("tabIndex","0");$(this.toggleMenuBtn).css("float","left");$(this.toggleMenuBtn).attr("class","git-xdoc-viewer-toolbar-toggle-button");$(this.toggleMenuBtn).append("<div class='"+this.fontAwesomePrefix+" fa-bars fa-lg' style='width:30px;height:20px;margin: 0px;padding:8px 6px 6px 6px;' />");$(this.toggleMenuBtn).on("click",function(P){F.showMenuItems();P.stopPropagation();if(z!=null){$(z).hide(200);$(".clicker").removeClass("active")}});$(this.toggleMenuBtn).keypress(function(P){if(P.which!=13&&P.which!=32){return}F.showMenuItems();P.stopPropagation();if(z!=null){$(z).hide(200);$(".clicker").removeClass("active")}});$(C.toggleplaceholder).append(this.toggleMenuBtn);this.menuItems=document.createElement("span");$(this.menuItems).css("display","none");$(this.menuItems).attr("id","toggleMenuItem-id");$(this.menuItems).attr("class","doc_viewer_toolbar_button git-xdoc-viewer-toolbar-drpdwn-class-zoom");$(this.menuItems).click(function(P){P.stopPropagation();if(z!=null){$(z).hide(200);$(".clicker").removeClass("active")}});$(this.menuItems).keypress(function(P){if(P.which!=13&&P.which!=32){return}P.stopPropagation();if(z!=null){$(z).hide(200);$(".clicker").removeClass("active")}});var C=this;$(N).html("");if(C.preferences.toolbarVisible){$(N).append(this.menuItems);$(N).append(this.toolbar)}C.scrollableviewer=document.createElement("div");$(C.scrollableviewer).attr("align","center");$(C.scrollableviewer).css({width:"100%",height:"100%",position:"relative",overflow:"auto","-webkit-overflow-scrolling":"touch"});var x=new l.PrintProgressAnimation(this.viewer);var t=new l.ProgressAnimation(this.viewer,this.fontAwesomePrefix);var L=new l.YesNoCancelDialog(N);var y=new l.MessageBox(N);var O=new l.WarningBox(N);var M=new l.PasswordDialog(this.viewer,this.fontAwesomePrefix);var I=new l.PasswordWarningMessage(this.viewer);var A=new l.PropertiesWindow(this.viewer);var G=new l.SignatureDialog(this.viewer);var B=new l.NotificationTooltipControl(N,this.preferences);$(s).append(C.scrollableviewer);$(N).append(s);var H=document.createElement("div");$(H).css({"z-index":"50",width:"0px",top:"0",bottom:"0",position:"absolute","float":"left","background-color":"transparent"});$(H).attr({id:"leftPane"});$(H).attr({"class":"navPaneContainer"});var K=document.createElement("div");$(K).css({width:"100%",height:"36px","z-index":"5",overflow:"hidden","padding-top":"1px"});$(K).addClass("git-viewer-leftpane-header");if(C.preferences.navigationPane.enableThumbnails){this.thumbnailBtn=document.createElement("div");$(this.thumbnailBtn).attr("tabIndex","0");$(this.thumbnailBtn).addClass("git-docviewer-controlcontainer");$(this.thumbnailBtn).addClass(this.fontAwesomePrefix+" fa-copy fa-lg");$(this.thumbnailBtn).addClass("toggled");$(K).append(this.thumbnailBtn)}if(C.preferences.navigationPane.enableBookmarks){this.bookmarkBtn=document.createElement("div");$(this.bookmarkBtn).attr("tabIndex","0");$(this.bookmarkBtn).addClass("git-docviewer-controlcontainer");$(this.bookmarkBtn).addClass(this.fontAwesomePrefix+" fa-bookmark fa-lg");$(this.bookmarkBtn).attr("disabled","true");$(K).append(this.bookmarkBtn)}$(H).append(K);this.applyLocalization();var p=document.createElement("div");$(p).css({width:"100%",position:"absolute",top:"37px",bottom:"0",overflow:"auto"});$(p).addClass("git-viewer-toolbarContent");$(H).append(p);this.thumbnailContent=document.createElement("div");$(this.thumbnailContent).attr("id","thumbnail");$(this.thumbnailContent).css({width:"100%",bottom:"0",top:"0",position:"absolute",overflow:"auto"});$(this.thumbnailContent).addClass("git-thumbnail-content");$(p).append(this.thumbnailContent);this.bookmarkContent=document.createElement("div");$(this.bookmarkContent).attr("id","bookmark");$(this.bookmarkContent).css({width:"100%",bottom:"0",top:"0",position:"absolute",overflow:"auto",display:"none"});$(this.bookmarkContent).addClass("git-bookmark-content");$(p).append(this.bookmarkContent);$(this.viewer).append(H);$(this.viewer).append(N);$(C.docviewercontrol).append(this.viewer);this.uploaderBtn=document.createElement("input");$(this.uploaderBtn).attr("aria-label","file upload input");$(this.uploaderBtn).css({left:"-9999px",top:"-9999px",width:"1px",height:"1px",position:"fixed"});$(this.uploaderBtn).attr("type","file");$(this.uploaderBtn).attr("id",this.id+"-fileupload");$(this.uploaderBtn).attr("name","document");$(this.viewer).append(this.uploaderBtn);this.viewerDOM=new l.ViewerDOM(this.viewer,C.scrollableviewer,this.sidePaneToggleBtn,this.openDocBtn,this.printBtn,this.saveBtn,this.downloadBtn,this.downloadAsCmbBox,this.firstPageBtn,this.prevPageBtn,this.nextPageBtn,this.lastPageBtn,this.uploaderBtn,this.pagenumberInput,this.zoomInBtn,this.zoomOutBtn,this.zoominDropdown,this.clockwiseBtn,this.counterClockwiseBtn,this.invertAllPagesBtn,this.propertiesInfoBtn,this.fullScreenBtn,this.addSignatureBtn,this.redactBtn,this.bookmarkBtn,this.bookmarkContent,this.thumbnailBtn,this.thumbnailContent,t,y,L,O,B,M,I,A,x,G);this.Forms=new d(this);this.Signatures=new c(this);this.viewerManager=new l.ViewerManager(this,this.viewerDOM,this.docHandlerUri,this.id+"-fileupload",C.preferences,this.fontAwesomePrefix);this.View=new a(this.viewerManager,this);this.Search=new i(this.searchModule);if(this.redactModule!=null){this.viewerManager.registerPluggableModule(this.redactModule)}if(this.selectRectangleModule!=null){this.viewerManager.registerPluggableModule(this.selectRectangleModule)}if(this.searchModule!=null){this.viewerManager.registerPluggableModule(this.searchModule)}this.viewerManager.hideFloatingToolbar=(function(){if(F.isOpenMenuItems){$(F.toggleMenuBtn).removeClass("toggled");$(F.menuItems).css("display","none");F.isOpenMenuItems=false}});this.viewerManager.onToolbarResize=function(){C.reflowToolbar()};this.viewerManager.events.addEventListener(b.beforePageChange,this.beforePageChange);this.viewerManager.events.addEventListener(b.afterPageChange,this.afterPageChange);this.viewerManager.events.addEventListener(b.beforeZoomChange,this.beforeZoomChange);this.viewerManager.events.addEventListener(b.afterZoomChange,this.afterZoomChange);this.viewerManager.events.addEventListener(b.beforeDocumentLoad,this.beforeDocumentLoad);this.viewerManager.events.addEventListener(b.afterDocumentLoad,this.afterDocumentLoad);this.viewerManager.events.addEventListener(b.beforeDocumentUpload,this.beforeDocumentUpload);this.viewerManager.events.addEventListener(b.afterDocumentUpload,this.afterDocumentUpload);this.viewerManager.events.addEventListener(b.beforeDocumentPrint,this.beforeDocumentPrint);this.viewerManager.events.addEventListener(b.afterDocumentPrint,this.afterDocumentPrint);this.viewerManager.events.addEventListener(b.beforeDocumentClose,this.beforeDocumentClose);this.viewerManager.events.addEventListener(b.afterDocumentClose,this.afterDocumentClose);this.viewerManager.events.addEventListener(b.beforePageRotate,this.beforePageRotate);this.viewerManager.events.addEventListener(b.afterPageRotate,this.afterPageRotate);this.viewerManager.events.addEventListener(b.beforeDocumentDownload,this.beforeDocumentDownload);this.viewerManager.events.addEventListener(b.afterDocumentDownload,this.afterDocumentDownload);this.viewerManager.events.addEventListener(b.beforeDocumentSave,this.beforeDocumentSave);this.viewerManager.events.addEventListener(b.afterDocumentSave,this.afterDocumentSave);this.viewerManager.events.addEventListener(b.onNavigationAction,this.onNavigationAction);this.viewerManager.events.addEventListener(b.needDocumentPassword,this.needDocumentPassword);this.viewerManager.events.addFormsEventListener(b.beforeFormSubmit,null,function(P){return F.formsEventBeforeFormSubmit(P)});this.viewerManager.events.addFormsEventListener(b.afterFormSubmit,null,function(P){return F.formsEventAfterFormSubmit(P)});this.viewerManager.events.addFormsEventListener(b.onFormLoaded,null,function(P){return F.formsEventOnFormLoaded(P)});this.viewerManager.events.addFormsEventListener(b.onFormModified,null,function(P){return F.formsEventOnFormModified(P)});this.viewerManager.events.addFormsEventListener(b.onFieldClicked,"*",function(P){return F.formsEventOnFieldClick(P)});this.viewerManager.events.addFormsEventListener(b.afterFieldClicked,"*",function(P){return F.formsEventAfterFieldClick(P)});this.viewerManager.events.addFormsEventListener(b.onFieldFocusIn,"*",function(P){return F.formsEventOnFieldFocusIn(P)});this.viewerManager.events.addFormsEventListener(b.onFieldFocusOut,"*",function(P){return F.formsEventOnFieldFocusOut(P)});this.viewerManager.events.addFormsEventListener(b.onFieldChanged,"*",function(P){return F.formsEventOnFieldChange(P)});this.viewerManager.events.addEventListener(b.onSignaturePlaced,function(P){return F.onSignaturesPlacesAction(P)});this.viewerManager.events.addEventListener(b.beforeSignatureNeededPrompt,function(P){return F.onSignaturesNeedePromptAction(P)});this.viewerManager.events.addEventListener(b.afterPageDraw,this.afterPageDraw);this.applyToolbarControlWidth();this.reflowToolbar();this.viewerManager.refreshLeftRightPanel(this.preferences.initialView.navigationPaneOpened);$(document).click(function(){if(z!=null){$(z).hide(200);$(".clicker").removeClass("active")}if(C.isOpenMenuItems){$(C.toggleMenuBtn).removeClass("toggled");$(C.menuItems).css("display","none");C.isOpenMenuItems=false}})};m.prototype.loadDocument=function(p,o){if(o===void 0){o=""}if(this.viewerManager!=null){return this.viewerManager.loadDocument(p,o,null,null)}};m.prototype.loadDocumentFromServer=function(p,o){if(o===void 0){o=""}if(this.viewerManager!=null){this.viewerManager.loadDocumentFromServer(p,o)}};m.prototype.openDocument=function(){this.uploaderBtn.uploader.click()};m.prototype.closeDocument=function(o){if(this.viewerManager!=null){return this.viewerManager.closeDocument(o)}};m.prototype.uploadDocumentFromBuffer=function(o,p){if(p===void 0){p=""}if(this.viewerManager!=null){this.viewerManager.uploadDocumentFromBuffer(o,p)}};m.prototype.uploadDocumentFromUri=function(p,o){if(o===void 0){o=""}if(this.viewerManager!=null){this.viewerManager.uploadDocumentFromUri(p,o)}};m.prototype.download=function(){if(this.viewerManager!=null){return this.viewerManager.download()}};m.prototype.getDocumentUrl=function(){if(this.viewerManager!=null){return this.viewerManager.getServerDocumentURI()}};m.prototype.isDocumentRenderingCompleted=function(){if(this.viewerManager!=null){return this.viewerManager.IsRenderingCompleted()}};m.prototype.isPageFetchingCompleted=function(){if(this.viewerManager!=null){return this.viewerManager.isPageFetchingCompleted()}};m.prototype.downloadAs=function(o){if(this.viewerManager!=null){return this.viewerManager.downloadAs(o)}};m.prototype.print=function(){if(this.viewerManager!=null){return this.viewerManager.print()}};m.prototype.save=function(){if(this.viewerManager!=null){return this.viewerManager.save()}};m.prototype.showMenuItems=function(){$(this.toggleMenuBtn).addClass("toggled");var o=$(this.menuItems);if($(this.menuItems).css("display")==="none"){$(this.menuItems).css("display","inline-block");this.isOpenMenuItems=true}else{$(this.toggleMenuBtn).removeClass("toggled");$(this.menuItems).css("display","none");this.isOpenMenuItems=false}};m.prototype.applyToolbarControlWidth=function(){for(var o=0;o<this.toolbarControlList.length;o++){if(this.toolbarControlList[o]!=null){if(this.toolbarControlList[o].description=="pageindicator"){this.toolbarControlList[o].width=90}if(this.toolbarControlList[o].description=="predefinedzoom"){this.toolbarControlList[o].width=$(this.toolbarControlList[o].control).outerWidth(true)}else{this.toolbarControlList[o].width=$(this.toolbarControlList[o].control).outerWidth(true)}}}};m.prototype.reflowToolbar=function(){var v=false;var u=null;var x=null;while(!v){var t=this.calculateToolbarCurrentWidth();var p=$(this.toolbar).outerWidth(true);u=null;if(t>=p-1){var s=-1;for(var q=this.toolbarControlList.length-1;q>=0;q--){x=this.toolbarControlList[q];if(x!=null){if(x.actionType!=j.NOTMOVABLE){if(u!=null){if(x.visible){if(u.priority<x.priority){u=x;s=q}}}else{if(x.visible){u=x;s=q}}}}}if(s!=-1){var o=$(u.control).clone(true);var w=this.menuControlList.indexOf(null);var r=new f(o,u.priority,u.actionType,u.description);r.width=u.width;if(w==-1){this.menuControlList.push(r)}else{this.menuControlList[w]=r}$(u.control).hide();u.visible=false;this.toolbarControlList[s].visible=false;this.viewMenubarItems();this.viewToolbarControls()}else{v=true}}else{var s=-1;for(var q=this.menuControlList.length-1;q>=0;q--){x=this.menuControlList[q];if(x!=null){if(u!=null){if(u.priority>x.priority){u=x;s=q}}else{u=x;s=q}}}if(s!=-1&&(Math.abs(t-p)>(u.width+1))){for(var q=0;q<this.toolbarControlList.length;q++){if(this.toolbarControlList[q].description==u.description){this.toolbarControlList[q].visible=true;$(this.toolbarControlList[q].control).show()}}$(u.control).hide();this.menuControlList[s]=null;this.viewToolbarControls();this.viewMenubarItems()}else{v=true}}}};m.prototype.viewMenubarItems=function(){$(this.menuItems).empty();this.menuControlList=this.cleanArray(this.menuControlList);var p=0;for(var o=0;o<this.menuControlList.length;o++){if(this.menuControlList[o]!=null){if(this.menuControlList[o].actionType==j.MOVABLE){var q=$(this.menuControlList[o].control).clone(true);$(this.menuItems).append(q);if(this.viewerManager.documentLoaded){$(q).removeAttr("disabled")}$(q).show();p+=1}}}if(p==0){$(this.toggleMenuBtn).hide()}else{$(this.toggleMenuBtn).show()}};m.prototype.cleanArray=function(p){for(var o=0;o<p.length;o++){if(p[o]==null){p.splice(o,1);o--}}return p};m.prototype.viewToolbarControls=function(){if(this.menuControlList.length==0){$(this.toggleMenuBtn).hide()}for(var o=0;o<this.toolbarControlList.length;o++){if(this.toolbarControlList[o]!=null){if(this.toolbarControlList[o].visible){if(this.viewerManager.documentLoaded){$(this.toolbarControlList[o].control).removeAttr("disabled")}$(this.toolbarControlList[o].control).show()}else{$(this.toolbarControlList[o].control).hide()}}}};m.prototype.calculateToolbarCurrentWidth=function(){var o=0;var q=5;for(var p=0;p<this.toolbarControlList.length;p++){if(this.toolbarControlList[p]!=null){if(this.toolbarControlList[p].visible){if(this.toolbarControlList[p].actionType==j.NOTMOVABLE){o+=$(this.toolbarControlList[p].control).outerWidth(true);q+=$(this.toolbarControlList[p].control).outerWidth(true)}else{if(this.toolbarControlList[p].description=="sepLine0"){o+=$(this.toolbarControlList[p].control).outerWidth(true);q+=$(this.toolbarControlList[p].control).outerWidth(true)}else{o+=this.toolbarControlList[p].width}}}}}o+=$(this.toggleplaceholder).outerWidth(true);q+=$(this.toggleplaceholder).outerWidth(true);$(this.viewer).css("min-width",q);$(this.viewer).find(".git-docviewer-container").css("min-width",q);return o};return m}(l.EventDispatcher));l.DocumentViewer=h})(gnostice||(gnostice={}));var gnostice;(function(b){var c=(function(){function e(){this.isInclude=true}return e}());b.RedactRegion=c;var d=(function(){function e(){this.redactedDOMRegion=new Array();this.redactedRegion=new Array()}return e}());b.RedactionPage=d;var a=(function(f){__extends(e,f);function e(k,h,i,g){var j=f.call(this)||this;j.description="RedactModule";j.supportsRedactionLayer=false;j.redactionPage=new Array();j.onAfterDocumentLoad=function(o){var n=o.viewerManager;var l;for(var m=0;m<n.pluggableModules.length;m++){if(n.pluggableModules[m].description=="RedactModule"){l=n.pluggableModules[m];break}}if(l!=null){l.create(n)}};j.onDocumentInfoRetrived=function(m){var l=m.viewerManager;j.supportsRedactionLayer=false;if(m.mimeType==b.MimeTypes.PDF){j.supportsRedactionLayer=true}};j.onRotationChanged=function(o){var n=o.viewerManager;var l;for(var m=0;m<n.pluggableModules.length;m++){if(n.pluggableModules[m].description=="RedactModule"){l=n.pluggableModules[m];break}}if(l!=null){l.reDrawAllRedactionRegions(n)}};j.onZoomChanged=function(o){var n=o.viewerManager;var l;for(var m=0;m<n.pluggableModules.length;m++){if(n.pluggableModules[m].description=="RedactModule"){l=n.pluggableModules[m];break}}if(l!=null){l.reDrawAllRedactionRegions(n)}};j.onBeforeSave=function(m,o){if(!j.supportsRedactionLayer){return null}var l=j.convertDOMRegionToDocumentRegion(j.redactionPage,m);var n=j.convertRegionsInPoints(l);if(n!=null&&n.length>0){return{module:"redactRegions",value:n}}return null};j.onAfterSave=function(l,m){j.fixedRegions(l)};j.fColor=k;j.sColor=h;j.isFill=i;j.isStroke=g;return j}e.prototype.initialize=function(k,l){f.prototype.initialize.call(this,k,l);var h;for(var j=0;j<k.pluggableModules.length;j++){if(k.pluggableModules[j].description=="RedactModule"){h=k.pluggableModules[j];break}}var g=new b.RegionAction();g.name="Redact Region";g.action=h.AddRedactRegionsOnPage;k.regionActionList.push(g)};e.prototype.reDrawAllRedactionRegions=function(k){if(!this.supportsRedactionLayer){return}for(var h=0;h<this.redactionPage.length;h++){for(var g=0;g<this.redactionPage[h].redactedDOMRegion.length;g++){this.drawRedactRegion(h,g,k)}}};e.prototype.drawRedactRegion=function(r,t,j){var o=this.redactionPage[r].redactedRegion[t];var q=this.redactionPage[r].redactedDOMRegion[t];if(o!=null){var l=j.pages[r+1].width;var g=j.pages[r+1].height;var u=o.x;var s=o.y;var v=o.width;var n=o.height;if(j.rotationAngle==90){var k=s;s=u;u=g-k-n;var p=v;v=n;n=p}if(j.rotationAngle==180){var m=s;s=g-s-n;u=l-u-v}if(j.rotationAngle==270){var m=u;u=s;s=l-m-v;var i=n;n=v;v=i}u=u*j.zoomFactor;s=s*j.zoomFactor;v=v*j.zoomFactor;n=n*j.zoomFactor;$(q).css({top:s+"px",left:u+"px",width:v+"px",height:n+"px",position:"absolute"})}};e.prototype.AddRedactRegionsOnPage=function(q,j){var z;for(var m=0;m<j.pluggableModules.length;m++){if(j.pluggableModules[m].description=="RedactModule"){z=j.pluggableModules[m];break}}if(z!=null){var g=$("#"+j.documentId+q.pagenumber);var o=document.createElement("div");var t=q.posX;var s=q.posY;var v=q.w;var n=q.h;var k=j.pages[q.pagenumber].height*j.zoomFactor;var u=j.pages[q.pagenumber].width*j.zoomFactor;$(o).css({"z-index":"5000","background-color":this.fColor,top:s+"px",left:t+"px",width:v+"px",height:n+"px",position:"absolute",border:"1px solid gray",cursor:"move"});$(o).on("mousedown",function(h){$(this).css({opacity:"0.8"});h.stopPropagation()});$(o).on("mouseup",function(h){$(this).css({opacity:"1"});h.stopPropagation()});var l=document.createElement("div");$(l).addClass("git-region-delete");$(l).css({"z-index":"3010",opacity:"0.5",position:"absolute",right:"1px",bottom:"1px",width:"25px",height:"25px",cursor:"pointer"});$(o).append(l);$(o).on("hover",function(){$(l).css({opacity:"0.8"});$(o).css({border:"1px dashed blue"})},function(){$(l).css({opacity:"0.5"});$(o).css({border:"1px solid "+this.sColor})});$(g).append(o);var p=z.redactionPage[q.pagenumber-1].redactedRegion.length;$(l).on("click",function(h){$(o).remove();z.redactionPage[q.pagenumber-1].redactedRegion[p]=null;z.redactionPage[q.pagenumber-1].redactedDOMRegion[p]=null});$(l).on("mousedown",function(h){h.stopPropagation()});$(l).on("mouseup",function(h){h.stopPropagation()});var r=new c();r.x=q.posX/j.zoomFactor;r.y=q.posY/j.zoomFactor;r.width=q.w/j.zoomFactor;r.height=q.h/j.zoomFactor;r.pagenumber=q.pagenumber;r.sColor=z.sColor;r.fColor=z.fColor;r.isFill=z.isFill;r.isStroke=z.isStroke;$(o).resizable({containment:g,stop:function(i,D){if(p!=-1){var y=D.position.left/j.zoomFactor;var C=D.position.top/j.zoomFactor;var E=$(this).height()/j.zoomFactor;var w=$(this).width()/j.zoomFactor;if(j.rotationAngle==90){var A=y;y=C;C=$(g).width()/j.zoomFactor-A-$(this).width()/j.zoomFactor;var x=E;E=w;w=E}if(j.rotationAngle==180){var B=y;y=$(g).width()/j.zoomFactor-y-$(this).width()/j.zoomFactor;C=$(g).height()/j.zoomFactor-C-$(this).height()/j.zoomFactor}if(j.rotationAngle==270){var h=C;C=y;y=$(g).height()/j.zoomFactor-h-$(this).height()/j.zoomFactor;var x=E;E=w;w=E}z.redactionPage[q.pagenumber-1].redactedRegion[p].x=y;z.redactionPage[q.pagenumber-1].redactedRegion[p].y=C;z.redactionPage[q.pagenumber-1].redactedRegion[p].width=w;z.redactionPage[q.pagenumber-1].redactedRegion[p].height=E}}});$(o).draggable({containment:g,start:function(h,i){},drag:function(h,i){},stop:function(w,x){if(p!=-1){var A=x.position.left/j.zoomFactor;var y=x.position.top/j.zoomFactor;if(j.rotationAngle==90){var B=A;A=y;y=$(g).width()/j.zoomFactor-B-$(this).width()/j.zoomFactor}if(j.rotationAngle==180){var i=A;A=$(g).width()/j.zoomFactor-A-$(this).width()/j.zoomFactor;y=$(g).height()/j.zoomFactor-y-$(this).height()/j.zoomFactor}if(j.rotationAngle==270){var h=y;y=A;A=$(g).height()/j.zoomFactor-h-$(this).height()/j.zoomFactor}z.redactionPage[q.pagenumber-1].redactedRegion[p].x=A;z.redactionPage[q.pagenumber-1].redactedRegion[p].y=y;z.redactionPage[q.pagenumber-1].redactedRegion[p].width=$(this).width()/j.zoomFactor;z.redactionPage[q.pagenumber-1].redactedRegion[p].height=$(this).height()/j.zoomFactor}}});r=z.convertRotationToZeroAngle(r,j);z.redactionPage[q.pagenumber-1].redactedRegion.push(r);z.redactionPage[q.pagenumber-1].redactedDOMRegion.push(o);q.clearSelection()}};e.prototype.convertRotationToZeroAngle=function(o,j){var k=o.x;var r=o.y;var s=o.width;var p=o.height;var m=j.pages[o.pagenumber].width;var g=j.pages[o.pagenumber].height;if(j.rotationAngle==90){var l=k;k=r;r=g-l-s;var q=s;s=p;p=q}if(j.rotationAngle==180){var n=r;r=g-r-p;k=m-k-s}if(j.rotationAngle==270){var l=r;r=k;k=m-l-p;var i=p;p=s;s=i}o.x=k;o.y=r;o.width=s;o.height=p;return o};e.prototype.convertRegionsInPoints=function(h){var k=new Array();for(var g=0;g<h.length;g++){var j=new c();j.x=h[g].x==0?0:h[g].x*72/96;j.y=h[g].x==0?0:h[g].y*72/96;j.width=h[g].width==0?0:h[g].width*72/96;j.height=h[g].height==0?0:h[g].height*72/96;j.pagenumber=h[g].pagenumber;j.sColor=h[g].sColor;j.fColor=h[g].fColor;j.isFill=h[g].isFill;j.isStroke=h[g].isStroke;k.push(j)}return k};e.prototype.convertDOMRegionToDocumentRegion=function(g,l){var m=new Array();for(var k=0;k<g.length;k++){for(var h=0;h<g[k].redactedRegion.length;h++){if(g[k].redactedRegion[h]!=null){if(g[k].redactedRegion[h].isInclude){var n=new c();n.x=g[k].redactedRegion[h].x;n.y=g[k].redactedRegion[h].y;n.width=g[k].redactedRegion[h].width;n.height=g[k].redactedRegion[h].height;n.pagenumber=k+1;n.fColor=g[k].redactedRegion[h].fColor;n.sColor=g[k].redactedRegion[h].sColor;n.isFill=g[k].redactedRegion[h].isFill;n.isStroke=g[k].redactedRegion[h].isStroke;m.push(n)}}}}return m};e.prototype.getCurrentPageRegions=function(h,g,i){};e.prototype.create=function(h){this.redactionPage=new Array();for(var g=1;g<=h.pageCount;g++){var j=new d();this.redactionPage.push(j)}};e.prototype.reset=function(k){for(var h=0;h<this.redactionPage.length;h++){for(var g=0;g<this.redactionPage[h].redactedDOMRegion.length;g++){this.removeRedactRegion(h,g,k)}}this.redactionPage=new Array()};e.prototype.removeRedactRegion=function(g,j,h){var i=this.redactionPage[g].redactedRegion[j];var k=this.redactionPage[g].redactedDOMRegion[j];if(k!=null){$(k).remove()}};e.prototype.fixedRegions=function(k){for(var h=0;h<this.redactionPage.length;h++){for(var g=0;g<this.redactionPage[h].redactedDOMRegion.length;g++){this.staticRedactRegion(h,g,k)}}};e.prototype.staticRedactRegion=function(g,j,h){var i=this.redactionPage[g].redactedRegion[j];var k=this.redactionPage[g].redactedDOMRegion[j];if(k!=null){$(k).resizable("destroy");$(k).off("mousedown",null);$(k).off("mouseup",null);$(k).off("mousemove",null);$(k).off("hover",null,null);$(k).css({cursor:"","z-index":"200"});$(k).find(".git-region-delete").remove();$(k).css("border","0px solid white");i.isInclude=false}};return e}(b.PluggableModule));b.redactModule=a})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(){function c(f,e,d){this.vm=e;this.isMoving=false;this.selected=null;this.x_pos=0;this.y_pos=0;this.x_elem=0;this.y_elem=0;var g=this;g.afterMoveEvent=d;$(f).on("mousemove",g,this._move_elem);$(f).on("mouseup",g,this._destroy);$(f).on("mousedown",function(){g._drag_init(f,g);return false})}c.prototype._drag_init=function(d,e){e.isMoving=true;e.selected=d;e.x_elem=e.x_pos-e.selected.offsetLeft;e.y_elem=e.y_pos-e.selected.offsetTop};c.prototype._move_elem=function(g){g.data.x_pos=g.pageX;g.data.y_pos=g.pageY;if(g.data.selected!==null){if(g.data.isMoving){var f=g.data.x_pos-g.data.x_elem;var d=g.data.y_pos-g.data.y_elem;if(Math.min(f,d)>=0){g.data.selected.style.left=f+"px";g.data.selected.style.top=d+"px"}else{if((f<=0)&&(d<=0)){g.data.selected.style.left="0px";g.data.selected.style.top="0px"}else{if(d<=0){g.data.selected.style.left=f+"px";g.data.selected.style.top="0px"}else{if(f<=0){g.data.selected.style.left="0px";g.data.selected.style.top=d+"px"}}}}}}};c.prototype._destroy=function(f){f.data.isMoving=false;var d={vm:f.data.vm,left:$(f.data.selected).position().left,top:$(f.data.selected).position().top,width:$(f.data.selected).height(),height:$(f.data.selected).width(),element:$(f.data.selected)};f.data.afterMoveEvent(d);f.data.selected=null};return c}());a.ReSizableRegion=b})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(f){var e=d.call(this)||this;e.description="SelectionModule";e.supportsSelectionLayer=false;e.selectablePages=new Array();e.onAfterDocumentLoad=function(k){var j=k.viewerManager;var g;for(var h=0;h<j.pluggableModules.length;h++){if(j.pluggableModules[h].description=="SelectionModule"){g=j.pluggableModules[h];break}}if(g!=null){g.create(j)}};e.onDocumentInfoRetrived=function(h){var g=h.viewerManager;e.supportsSelectionLayer=false;if(h.mimeType==b.MimeTypes.PDF){e.supportsSelectionLayer=true}};e.onBindRedactEvents=function(h){var g=h.viewerManager;e.bindEvents()};e.onUnBindRedactEvents=function(h){var g=h.viewerManager;e.unbindEvents()};e.onZoomChanged=function(j){var h=j.viewerManager;if(!e.supportsSelectionLayer){return}if(e!=null){for(var g=0;g<e.selectablePages.length;g++){if(e.selectablePages[g].active){e.activeRegion=e.selectablePages[g];if(e.activeRegion!=null){e.activeRegion.drawRegion(e.activeRegion);e.activeRegion.showButton(e.activeRegion,true);e.activeRegion.applyAngle(e.activeRegion)}}}}};e.onRotationChanged=function(j){var h=j.viewerManager;if(!e.supportsSelectionLayer){return}if(e!=null){for(var g=0;g<e.selectablePages.length;g++){if(e.selectablePages[g].active){e.activeRegion=e.selectablePages[g];if(e.activeRegion!=null){e.activeRegion.drawRegion(e.activeRegion);e.activeRegion.showButton(e.activeRegion,true);e.activeRegion.applyAngle(e.activeRegion)}}}}};e.onPageReRendered=function(j){var h=j.viewerManager;if(!e.supportsSelectionLayer){return}if(e!=null){for(var g=0;g<e.selectablePages.length;g++){if(e.selectablePages[g].active){e.activeRegion=e.selectablePages[g];break}}if(e.activeRegion!=null){e.activeRegion.drawRegion(e.activeRegion);e.activeRegion.showButton(e.activeRegion,true)}}};return e}c.prototype.initialize=function(e,f){d.prototype.initialize.call(this,e,f);this.viewerManager.events.addEventListener(b.EventNames.bindSelectableRegionEvent,this.onBindRedactEvents);this.viewerManager.events.addEventListener(b.EventNames.unSelectableRegionEvent,this.onUnBindRedactEvents)};c.prototype.create=function(g){this.selectablePages=new Array();for(var f=1;f<=g.pageCount;f++){var e=$("#"+g.documentId+f);var h=new b.SelectRectangle(f,e,g);this.selectablePages.push(h)}};c.prototype.bindEvents=function(){for(var e=0;e<this.viewerManager.pageCount;e++){this.selectablePages[e].selectable()}};c.prototype.unbindEvents=function(){for(var e=0;e<this.viewerManager.pageCount;e++){this.selectablePages[e].removeSelection()}};return c}(b.PluggableModule));b.selectRectModule=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(){function c(d,e,f){this.pagenumber=d;this.drawingElement=e;this.vm=f;this.enableMove=false;this.active=false;this.redactionBtn=null;this.x1=0;this.x2=0;this.y1=0;this.y2=0;this.regionElement=document.createElement("div");$(this.regionElement).css({border:"1px dotted #000",position:"absolute","z-index":"3000","background-color":"#ADD8E6",opacity:"0.5",cursor:"default"});$(this.drawingElement).append(this.regionElement);var g=document.createElement("div");$(g).css({width:"100%",height:"100%",position:"relative"});this.redactionBtn=document.createElement("div");$(this.redactionBtn).css({position:"absolute","z-index":"3000",width:"32px",height:"32px",display:"none",cursor:"pointer"});this.appendDropDown(this.redactionBtn,f);$(this.redactionBtn).on("mouseup",function(h){h.stopPropagation()});$(this.redactionBtn).on("mousedown",function(h){h.stopPropagation()});$(this.redactionBtn).on("mousemove",function(h){h.stopPropagation()});$(e).append(this.redactionBtn);$(this.regionElement).append(g)}c.prototype.appendDropDown=function(d,e){var k=this;var l=document.createElement("ul");$(l).addClass("git-redact-list-ul");var m=document.createElement("li");$(m).css({"float":"left"});$(m).addClass("git-action-dropdown");var j=document.createElement("a");$(j).addClass("git-action-dropbtn");$(j).attr({"class":"git-actionlist"});var g=document.createElement("div");$(g).addClass("git-dropdown-content");var n;for(var h=0;h<e.regionActionList.length;h++){n=document.createElement("a");$(n).addClass("git-action-anchor");$(n).append("Redact");var f=h;$(n).on("click",function(){e.regionActionList[f].action.call(null,k,e);return false});$(g).append(n)}$(m).append(j);$(m).append(g);$(l).append(m);$(d).append(l)};c.prototype.removeSelection=function(){var d=this;$(d.drawingElement).off("mouseup",null);$(d.drawingElement).off("mousedown",null);$(d.drawingElement).off("mousemove",null);$(d.drawingElement).removeClass("git-draw-cursor");d.InitiallizeRegion()};c.prototype.InitiallizeRegion=function(){var d=this;d.x1=0;d.x2=0;d.y1=0;d.y2=0;d.mouseX1=0;d.mouseX2=0;d.mouseY1=0;d.mouseY2=0;d.drawRegion(d);d.showButton(d,false);d.active=false};c.prototype.selectable=function(){var d=this;$(d.drawingElement).addClass("git-draw-cursor");$(d.drawingElement).on("mouseup",function(f){d.enableMove=false;d.showButton(d,true)});$(d.drawingElement).on("mousedown",function(f){d.showButton(d,false);d.enableMove=true;d.mouseX1=f.pageX-$(d.drawingElement).offset().left;d.mouseY1=f.pageY-$(d.drawingElement).offset().top;d.mouseX1=d.mouseX1/d.vm.zoomfactor;d.mouseY1=d.mouseY1/d.vm.zoomfactor;d.x1=d.mouseX1;d.y1=d.mouseY1});$(d.drawingElement).on("mousemove",function(f){if(d.enableMove){d.mouseX2=f.pageX-$(d.drawingElement).offset().left;d.mouseY2=f.pageY-$(d.drawingElement).offset().top;d.mouseX2=d.mouseX2/d.vm.zoomfactor;d.mouseY2=d.mouseY2/d.vm.zoomfactor;d.x2=d.mouseX2;d.y2=d.mouseY2;d.drawRegion(d)}})};c.prototype.drawRegion=function(j){var f=Math.min(j.x1,j.x2)*j.vm.zoomfactor;var e=Math.max(j.x1,j.x2)*j.vm.zoomfactor;var h=Math.min(j.y1,j.y2)*j.vm.zoomfactor;var g=Math.max(j.y1,j.y2)*j.vm.zoomfactor;var i=e-f;var d=g-h;j.w=i;j.h=d;j.posX=f;j.posY=h;$(j.regionElement).css({left:f+"px",top:h+"px",width:i+"px",height:d+"px"});j.active=true};c.prototype.showButton=function(g,d){if(d){if((g.w!=0)&&(g.h!=0)){$(g.redactionBtn).show();var f=g.posX+g.w+4;var e=g.posY+g.h-$(g.redactionBtn).outerHeight()+6;$(g.redactionBtn).css({left:f+"px",top:e+"px"})}}else{$(g.redactionBtn).hide()}};c.prototype.applyAngle=function(p){var f=p.w;var r=p.h;var d=p.posX;var q=p.posY;var j=p.vm.pages[p.pagenumber].width*p.vm.zoomfactor;var e=p.vm.pages[p.pagenumber].height*p.vm.zoomfactor;if(p.vm.rotationAngle==90){var k=q;q=d;d=e-k-r;var o=f;f=r;r=o}if(p.vm.rotationAngle==180){var n=q;q=e-q-r;d=j-d-f}if(p.vm.rotationAngle==270){var n=d;d=q;q=j-n-f;var g=r;r=f;f=g}$(p.regionElement).css({left:d+"px",top:q+"px",width:f+"px",height:r+"px"});var m=$(p.redactionBtn).outerHeight();var i,s;i=d+f+4;s=q+r-m+6;$(p.redactionBtn).css({left:i+"px",top:s+"px"});p.w=f;p.h=r;p.posX=d;p.posY=q};c.prototype.clearSelection=function(){this.x1=0;this.x2=0;this.y1=0;this.y2=0;this.drawRegion(this);this.active=false;this.showButton(this,false)};c.prototype.getSelectedRegion=function(){};return c}());b.SelectRectangle=a})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(){function c(h,e,f,g,d,i){this.startPoint=h;this.control2=e;this.control1=f;this.endPoint=g;this.startWidth=d;this.endWidth=i}c.fromPoints=function(f,g){var e=this.calculateControlPoints(f[0],f[1],f[2]).c2;var d=this.calculateControlPoints(f[1],f[2],f[3]).c1;return new c(f[1],e,d,f[2],g.start,g.end)};c.calculateControlPoints=function(r,p,m){var q=r.x-p.x;var l=r.y-p.y;var o=p.x-m.x;var j=p.y-m.y;var u={x:(r.x+p.x)/2,y:(r.y+p.y)/2};var t={x:(p.x+m.x)/2,y:(p.y+m.y)/2};var f=Math.sqrt(q*q+l*l);var e=Math.sqrt(o*o+j*j);var d=u.x-t.x;var s=u.y-t.y;var g=e/(f+e);var n={x:t.x+d*g,y:t.y+s*g};var i=p.x-n.x;var h=p.y-n.y;return{c1:new a.Point(u.x+i,u.y+h),c2:new a.Point(t.x+i,t.y+h)}};c.prototype.length=function(){var k=10;var d=0;var m;var l;for(var j=0;j<=k;j+=1){var n=j/k;var g=this.point(n,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x);var f=this.point(n,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(j>0){var h=g-m;var e=f-l;d+=Math.sqrt(h*h+e*e)}m=g;l=f}return d};c.prototype.point=function(f,h,g,e,d){return(h*(1-f)*(1-f)*(1-f))+(3*g*(1-f)*(1-f)*f)+(3*e*(1-f)*f*f)+(d*f*f*f)};return c}());a.Bezier=b})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(){function c(d,f,e){this.x=d;this.y=f;this.time=e||Date.now()}c.prototype.distanceTo=function(d){return Math.sqrt(Math.pow(this.x-d.x,2)+Math.pow(this.y-d.y,2))};c.prototype.equals=function(d){return this.x===d.x&&this.y===d.y&&this.time===d.time};c.prototype.velocityFrom=function(d){return this.time!==d.time?this.distanceTo(d)/(this.time-d.time):0};return c}());a.Point=b})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(){function c(f,e){if(e===void 0){e={}}var g=this;this.canvas=f;this.options=e;this.wind=window;this._handleMouseDown=function(h){if(h.which===1){g._mouseButtonDown=true;g.canvasBoundingRect=g.canvas.getBoundingClientRect();g._strokeBegin(h)}};this._handleMouseMove=function(h){if(g._mouseButtonDown){g._strokeMoveUpdate(h)}};this._handleMouseUp=function(h){if(h.which===1&&g._mouseButtonDown){g._mouseButtonDown=false;g._strokeEnd(h)}};this._handleTouchStart=function(h){h.preventDefault();if(h.targetTouches.length===1){g.canvasBoundingRect=g.canvas.getBoundingClientRect();var i=h.changedTouches[0];g._strokeBegin(i)}};this._handleTouchMove=function(h){h.preventDefault();var i=h.targetTouches[0];g._strokeMoveUpdate(i)};this._handleTouchEnd=function(h){var i=h.target===g.canvas;if(i){h.preventDefault();var j=h.changedTouches[0];g._strokeEnd(j)}};this.velocityFilterWeight=e.velocityFilterWeight||0.7;this.minWidth=e.minWidth||0.5;this.maxWidth=e.maxWidth||2.5;this.throttle=("throttle" in e?e.throttle:16);this.minDistance=("minDistance" in e?e.minDistance:5);this.dotSize=e.dotSize||function d(){return(this.minWidth+this.maxWidth)/2};this.penColor=e.penColor||"black";this.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)";this.onBegin=e.onBegin;this.onEnd=e.onEnd;this._strokeMoveUpdate=this.throttle?a.throttle(c.prototype._strokeUpdate,this.throttle):c.prototype._strokeUpdate;this._ctx=f.getContext("2d");this.clear();this.on()}c.prototype.clear=function(){var f=this,d=f._ctx,e=f.canvas;d.fillStyle=this.backgroundColor;d.clearRect(0,0,e.width,e.height);d.fillRect(0,0,e.width,e.height);this._data=[];this._reset();this._isEmpty=true};c.prototype.fromDataURL=function(i,e,k){var j=this;if(e===void 0){e={}}var h=new Image();var g=e.ratio||window.devicePixelRatio||1;var f=e.width||this.canvas.width/g;var d=e.height||this.canvas.height/g;this._reset();h.onload=function(){j._ctx.drawImage(h,0,0,f,d);if(k){k()}};h.onerror=function(l){if(k){k(l)}};h.src=i;this._isEmpty=false};c.prototype.toDataURL=function(d,e){if(d===void 0){d="image/png"}switch(d){case"image/svg+xml":return this._toSVG();default:return this.canvas.toDataURL(d,e)}};c.prototype.on=function(){this.canvas.style.touchAction="none";if(this.wind.PointerEvent){this._handlePointerEvents()}else{this._handleMouseEvents();if("ontouchstart" in this.wind){this._handleTouchEvents()}}};c.prototype.off=function(){this.canvas.style.touchAction="auto";this.canvas.removeEventListener("pointerdown",this._handleMouseDown);this.canvas.removeEventListener("pointermove",this._handleMouseMove);document.removeEventListener("pointerup",this._handleMouseUp);this.canvas.removeEventListener("mousedown",this._handleMouseDown);this.canvas.removeEventListener("mousemove",this._handleMouseMove);document.removeEventListener("mouseup",this._handleMouseUp);this.canvas.removeEventListener("touchstart",this._handleTouchStart);this.canvas.removeEventListener("touchmove",this._handleTouchMove);this.canvas.removeEventListener("touchend",this._handleTouchEnd)};c.prototype.isEmpty=function(){return this._isEmpty};c.prototype.fromData=function(d){var e=this;this.clear();this._fromData(d,function(g){var f=g.color,h=g.curve;return e._drawCurve({color:f,curve:h})},function(h){var g=h.color,f=h.point;return e._drawDot({color:g,point:f})});this._data=d};c.prototype.toData=function(){return this._data};c.prototype._strokeBegin=function(d){var e={color:this.penColor,points:[]};if(typeof this.onBegin==="function"){this.onBegin(d)}this._data.push(e);this._reset();this._strokeUpdate(d)};c.prototype._strokeUpdate=function(d){if(this._data.length===0){this._strokeBegin(d);return}var l=d.clientX;var j=d.clientY;var m=this._createPoint(l,j);var e=this._data[this._data.length-1];var i=e.points;var k=i.length>0&&i[i.length-1];var h=k?m.distanceTo(k)<=this.minDistance:false;var g=e.color;if(!k||!(k&&h)){var f=this._addPoint(m);if(!k){this._drawDot({color:g,point:m})}else{if(f){this._drawCurve({color:g,curve:f})}}i.push({time:m.time,x:m.x,y:m.y})}};c.prototype._strokeEnd=function(d){this._strokeUpdate(d);if(typeof this.onEnd==="function"){this.onEnd(d)}};c.prototype._handlePointerEvents=function(){this._mouseButtonDown=false;this.canvas.addEventListener("pointerdown",this._handleMouseDown);this.canvas.addEventListener("pointermove",this._handleMouseMove);document.addEventListener("pointerup",this._handleMouseUp)};c.prototype._handleMouseEvents=function(){this._mouseButtonDown=false;this.canvas.addEventListener("mousedown",this._handleMouseDown);this.canvas.addEventListener("mousemove",this._handleMouseMove);document.addEventListener("mouseup",this._handleMouseUp)};c.prototype._handleTouchEvents=function(){this.canvas.addEventListener("touchstart",this._handleTouchStart);this.canvas.addEventListener("touchmove",this._handleTouchMove);this.canvas.addEventListener("touchend",this._handleTouchEnd)};c.prototype._reset=function(){this._lastPoints=[];this._lastVelocity=0;this._lastWidth=(this.minWidth+this.maxWidth)/2;this._ctx.fillStyle=this.penColor};c.prototype._createPoint=function(d,f){var e=this.canvas.getBoundingClientRect();return new a.Point(d-e.left,f-e.top,new Date().getTime())};c.prototype._addPoint=function(d){var g=this._lastPoints;g.push(d);if(g.length>2){if(g.length===3){g.unshift(g[0])}var e=this._calculateCurveWidths(g[1],g[2]);var f=a.Bezier.fromPoints(g,e);g.shift();return f}return null};c.prototype._calculateCurveWidths=function(h,d){var g=this.velocityFilterWeight*d.velocityFrom(h)+(1-this.velocityFilterWeight)*this._lastVelocity;var f=this._strokeWidth(g);var e={end:f,start:this._lastWidth};this._lastVelocity=g;this._lastWidth=f;return e};c.prototype._strokeWidth=function(d){return Math.max(this.maxWidth/(d+1),this.minWidth)};c.prototype._drawCurveSegment=function(d,g,f){var e=this._ctx;e.moveTo(d,g);e.arc(d,g,f,0,2*Math.PI,false);this._isEmpty=false};c.prototype._drawCurve=function(n){var g=n.color,f=n.curve;var v=this._ctx;var r=f.endWidth-f.startWidth;var j=Math.floor(f.length())*2;v.beginPath();v.fillStyle=g;for(var h=0;h<j;h+=1){var s=h/j;var k=s*s;var p=k*s;var q=1-s;var e=q*q;var l=e*q;var o=l*f.startPoint.x;o+=3*e*s*f.control1.x;o+=3*q*k*f.control2.x;o+=p*f.endPoint.x;var m=l*f.startPoint.y;m+=3*e*s*f.control1.y;m+=3*q*k*f.control2.y;m+=p*f.endPoint.y;var d=Math.min(f.startWidth+p*r,this.maxWidth);this._drawCurveSegment(o,m,d)}v.closePath();v.fill()};c.prototype._drawDot=function(g){var f=g.color,d=g.point;var e=this._ctx;var h=typeof this.dotSize==="function"?this.dotSize():this.dotSize;e.beginPath();this._drawCurveSegment(d.x,d.y,h);e.closePath();e.fillStyle=f;e.fill()};c.prototype._fromData=function(e,d,m){for(var i=0,k=e;i<k.length;i++){var o=k[i];var g=o.color,p=o.points;if(p.length>1){for(var h=0;h<p.length;h+=1){var l=p[h];var n=new a.Point(l.x,l.y,l.time);this.penColor=g;if(h===0){this._reset()}var f=this._addPoint(n);if(f){d({color:g,curve:f})}}}else{this._reset();m({color:g,point:p[0]})}}};c.prototype._toSVG=function(){var r=this;var g=this._data;var s=Math.max(window.devicePixelRatio||1,1);var k=0;var h=0;var f=this.canvas.width/s;var d=this.canvas.height/s;var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("width",this.canvas.width.toString());o.setAttribute("height",this.canvas.height.toString());this._fromData(g,function(v){var u=v.color,x=v.curve;var w=document.createElement("path");if(!isNaN(x.control1.x)&&!isNaN(x.control1.y)&&!isNaN(x.control2.x)&&!isNaN(x.control2.y)){var i="M "+x.startPoint.x.toFixed(3)+","+x.startPoint.y.toFixed(3)+" "+("C "+x.control1.x.toFixed(3)+","+x.control1.y.toFixed(3)+" ")+(x.control2.x.toFixed(3)+","+x.control2.y.toFixed(3)+" ")+(x.endPoint.x.toFixed(3)+","+x.endPoint.y.toFixed(3));w.setAttribute("d",i);w.setAttribute("stroke-width",(x.endWidth*2.25).toFixed(3));w.setAttribute("stroke",u);w.setAttribute("fill","none");w.setAttribute("stroke-linecap","round");o.appendChild(w)}},function(w){var v=w.color,i=w.point;var x=document.createElement("circle");var u=typeof r.dotSize==="function"?r.dotSize():r.dotSize;x.setAttribute("r",u.toString());x.setAttribute("cx",i.x.toString());x.setAttribute("cy",i.y.toString());x.setAttribute("fill",v);o.appendChild(x)});var q="data:image/svg+xml;base64,";var n='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+k+" "+h+" "+f+" "+d+'"')+(' width="'+f+'"')+(' height="'+d+'"')+">";var p=o.innerHTML;if(p===undefined){var j=document.createElement("dummy");var e=o.childNodes;j.innerHTML="";for(var m=0;m<e.length;m+=1){j.appendChild(e[m].cloneNode(true))}p=j.innerHTML}var t="</svg>";var l=n+p+t;return q+btoa(l)};return c}());a.SignaturePad=b})(gnostice||(gnostice={}));var gnostice;(function(a){function b(i,e){if(e===void 0){e=250}var f=0;var h=null;var k;var j;var g;var d=function(){f=Date.now();h=null;k=i.apply(j,g);if(!h){j=null;g=[]}};return function c(){var m=[];for(var o=0;o<arguments.length;o++){m[o]=arguments[o]}var l=Date.now();var n=e-(l-f);j=this;g=m;if(n<=0||n>e){if(h){clearTimeout(h);h=null}f=l;k=i.apply(j,g);if(!h){j=null;g=[]}}else{if(!h){h=window.setTimeout(d,n)}}return k}}a.throttle=b})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(){function c(d){var e=this;this.canvas=d;this.flag=false;this.prevX=0;this.currX=0;this.prevY=0;this.currY=0;this.dot_flag=false;this.x="black";this.y=2;this.ctx=this.canvas.getContext("2d");this.w=this.canvas.width;this.h=this.canvas.height;this.canvas.addEventListener("mousemove",function(f){e.findxy("move",f)},false);this.canvas.addEventListener("mousedown",function(f){e.boundingRect=e.canvas.getBoundingClientRect();e.findxy("down",f)},false);this.canvas.addEventListener("mouseup",function(f){e.findxy("up",f)},false);this.canvas.addEventListener("mouseout",function(f){e.findxy("out",f)},false)}c.prototype.color=function(d){switch(d.id){case"green":this.x="green";break;case"blue":this.x="blue";break;case"red":this.x="red";break;case"yellow":this.x="yellow";break;case"orange":this.x="orange";break;case"black":this.x="black";break;case"white":this.x="white";break}if(this.x=="white"){this.y=14}else{this.y=2}};c.prototype.draw=function(){this.ctx.beginPath();this.ctx.moveTo(this.prevX,this.prevY);this.ctx.lineTo(this.currX,this.currY);this.ctx.strokeStyle=this.x;this.ctx.lineWidth=this.y;this.ctx.stroke();this.ctx.closePath()};c.prototype.clear=function(){this.ctx.clearRect(0,0,this.w,this.h)};c.prototype.toData=function(){var d=this.canvas.toDataURL();return d};c.prototype.findxy=function(d,f){if(d=="down"){this.prevX=this.currX;this.prevY=this.currY;this.currX=f.clientX-this.boundingRect.left;this.currY=f.clientY-this.boundingRect.top;this.flag=true;this.dot_flag=true;if(this.dot_flag){this.ctx.beginPath();this.ctx.fillStyle=this.x;this.ctx.fillRect(this.currX,this.currY,2,2);this.ctx.closePath();this.dot_flag=false}}if(d=="up"||d=="out"){this.flag=false}if(d=="move"){if(this.flag){this.prevX=this.currX;this.prevY=this.currY;this.currX=f.clientX-this.boundingRect.left;this.currY=f.clientY-this.boundingRect.top;this.draw()}}};return c}());a.DrawingCanvas=b})(gnostice||(gnostice={}));var gnostice;(function(c){var b;(function(d){d[d.BelowSourceControl=0]="BelowSourceControl";d[d.LeftSideOfSourceControl=1]="LeftSideOfSourceControl";d[d.RightSideOfSourceControl=2]="RightSideOfSourceControl"})(b=c.SignatureMenuPosition||(c.SignatureMenuPosition={}));var a=(function(){function d(f,e){this.signaturePlaceholderWidget=f;this.vm=e;this.OnMenuSelect=function(g){}}d.prototype.isVisible=function(){return $(this.signatureMenuContainer).is(":visible")};d.prototype.hide=function(){$(this.signatureMenuContainer).hide()};d.prototype.show=function(j,g,f){var l=this;var i=0,h=0;switch(j){case b.BelowSourceControl:h=0;i=0;break;case b.LeftSideOfSourceControl:i=-100;h=0;break;case b.RightSideOfSourceControl:i=$(g).width()-10;h=0;break}this.signatureMenuContainer=document.createElement("div");$(this.signatureMenuContainer).css({position:"relative",top:h,left:i,padding:"7px 0px"});this.signatureMenuHTMLElement=document.createElement("div");$(this.signatureMenuHTMLElement).css({"background-color":"#f1f1f1","min-width":"130px",overflow:"auto","box-shadow":"0px 8px 16px 0px rgba(0, 0, 0, 0.2)","z-index":"123"});this.updateMySignatures(this.signatureMenuHTMLElement,this.vm);var e=document.createElement("div");$(e).addClass("sign-menu-item");var k=document.createElement("a");$(k).css({padding:"4px 4px","text-decoration":"none",display:"block",height:"25px","font-size":"12px","font-weight":"normal","font-family":"Arial, Helvetica, sans-serif",color:"black"});$(k).on("click",function(m){l.hide();l.vm.viewerDOM.signatureDialog.show(l.vm,l.signaturePlaceholderWidget);m.stopPropagation()});if(this.userSignatures.length>0){$(e).attr("title","Manage signatures");$(k).append(c.LocalizedStrings.signature_menu_manageSignatureOption)}else{$(e).attr("title","Add signature");$(k).append(c.LocalizedStrings.signature_menu_addSignatureOption)}$(e).append(k);if(!(!this.vm.preferences.interactiveElements.signatures.allowCreatingNewUserSignatures&&!this.vm.preferences.interactiveElements.signatures.allowUploadingNewUserSignatures&&!this.vm.preferences.interactiveElements.signatures.allowDeletingUserSignatures)){$(this.signatureMenuHTMLElement).append(e)}$(this.signatureMenuContainer).append(this.signatureMenuHTMLElement);$(f).append(this.signatureMenuContainer)};d.prototype.search=function(h,g){var f;for(var e=0;e<h.length;e++){if(h[e].Id==g){f=h[e]}}return f};d.prototype.updateMySignatures=function(l,j){this.userSignatures=j.getUserSignatures();if(this.userSignatures==null||this.userSignatures.length==0){return}var k=0;var f=this.userSignatures.length;for(var e=0;e<this.userSignatures.length;e++){var n=document.createElement("div");$(n).addClass("sign-menu-item");if(k<f){var g=document.createElement("div");$(g).css({position:"relative",margin:"2px",width:"80px",height:"40px","text-align":"center",padding:"0px"});var h=new Image();$(h).css({"max-width":"100%","max-height":"100%",position:"relative",left:"0px",top:"0px",right:"0px",bottom:"0px"});h.src=this.userSignatures[k].imageSrc;h.alt=this.userSignatures[k].Id;var m=this;$(h).click(function(o){m.hide();m.selectedSignatureId=this.alt;var i=m.search(m.userSignatures,this.alt);m.OnMenuSelect.call(m,m.signaturePlaceholderWidget,i);o.stopPropagation()});$(g).append(h);n.appendChild(g)}l.appendChild(n);k++;if(k>=f){break}}};d.prototype.destroy=function(){$(this.signatureMenuContainer).remove()};return d}());c.SignatureMenu=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(){function d(h,g,e,f){this.left=h;this.top=g;this.height=e;this.width=f}return d}());b.SignatureClientRect=a;var c=(function(){function d(e,h,g,f){this.pageNumber=e;this.ImageSrc=h;this.FullName=g;this.viewerManager=f;this.height=50;this.width=100;this.actualWidth=100;this.actualHeight=50;this.IsActive=false;this.IsRendered=false;this.draggable=true;this.resizable=true;this.isSizeFixed=false;this.moveAlongWithCursor=false;this.IsSaved=false;this.includeSignerName=true;this.includeDateTime=true;this.required=true;this.signatureTitleFontSize=12;this.fixedZoomSize=20;this.minSignatureSize={width:75,height:37.5};this.SignId="_"+Math.random().toString(36).substr(2,9)}d.prototype.savedSuccessfully=function(){$(this.actionControls).hide();if(this.draggable){if($(this.HTMLWidget).is(":data(ui-draggable)")){$(this.HTMLWidget).draggable("destroy")}}if(this.resizable){if($(this.HTMLWidget).is(":data(ui-resizable)")){$(this.HTMLWidget).resizable("destroy")}}this.IsSaved=true};d.prototype.FollowCursor=function(){this.moveAlongWithCursor=true};d.prototype.UnFollowCursor=function(){this.moveAlongWithCursor=false};d.prototype.setSignaturePlaceholder=function(e){this.signaturePlaceholderWidget=e;this.left=e.signatureClientRect.left;this.top=e.signatureClientRect.top;this.actualWidth=e.signatureClientRect.width;this.actualHeight=e.signatureClientRect.height;this.width=e.signatureClientRect.width;this.height=e.signatureClientRect.height;this.resizable=this.signaturePlaceholderWidget.signaturePlaceholder.allowUserResizing;this.draggable=this.signaturePlaceholderWidget.signaturePlaceholder.allowUserPositioning;this.includeDateTime=this.signaturePlaceholderWidget.signaturePlaceholder.includeDateTime;this.includeSignerName=this.signaturePlaceholderWidget.signaturePlaceholder.includeSignerName;this.required=this.signaturePlaceholderWidget.signaturePlaceholder.required;this.style=this.signaturePlaceholderWidget.signaturePlaceholder.style};d.prototype.render=function(e){var g=this;this.IsRendered=true;var f=this.viewerManager.zoomFactor;this.actionControls=document.createElement("div");$(this.actionControls).css({position:"absolute",left:"-2px",top:"-22px","background-color":"lavender",border:"solid 2px lightskyblue",color:"dimgray","min-width":"70px"});this.DeleteBtn=document.createElement("div");$(this.DeleteBtn).addClass(this.viewerManager.fontAwesomePrefix+" fa-trash-alt fa-lg");$(this.DeleteBtn).css({padding:"2px","float":"left"});$(this.DeleteBtn).on("click",function(){g.viewerManager.signatureModule.signatureWidgets[g.pageNumber].Remove(g.SignId);$(g.HTMLWidget).remove();if(g.signaturePlaceholderWidget!=null){g.signaturePlaceholderWidget.show()}});this.ZoomInBtn=document.createElement("div");$(this.ZoomInBtn).addClass(this.viewerManager.fontAwesomePrefix+" fa-plus-square fa-lg");$(this.ZoomInBtn).css({padding:"2px","float":"left"});$(this.ZoomInBtn).on("click",function(){var k=g.viewerManager.zoomFactor;var j=g.height/g.width;var l=(g.width*k)+g.fixedZoomSize;var i=(g.height*k)+(g.fixedZoomSize*j);var n=(g.viewerManager.pages[g.pageNumber].width-g.left)*k;var h=(g.viewerManager.pages[g.pageNumber].height-g.top)*k;if(n<l||h<i){var m=Math.min(n/l,h/i);g.width=(l*m)/k;g.height=(i*m)/k}else{g.width=l/k;g.height=i/k}g.reRender()});this.ZoomOutBtn=document.createElement("div");$(this.ZoomOutBtn).addClass(this.viewerManager.fontAwesomePrefix+" fa-minus-square fa-lg");$(this.ZoomOutBtn).css({padding:"2px","float":"left"});$(this.ZoomOutBtn).on("click",function(){var j=g.viewerManager.zoomFactor;var i=g.height/g.width;var k=(g.width*j)-g.fixedZoomSize;var h=(g.height*j)-(g.fixedZoomSize*i);if(g.minSignatureSize.width>k||g.minSignatureSize.height>h){var l=Math.max(g.minSignatureSize.width/k,g.minSignatureSize.height/h);g.width=(k*l)/j;g.height=(h*l)/j}else{g.width=k/j;g.height=h/j}g.reRender()});$(this.actionControls).append(this.DeleteBtn);if(this.resizable){$(this.actionControls).append(this.ZoomOutBtn);$(this.actionControls).append(this.ZoomInBtn)}this.HTMLWidget=document.createElement("div");$(this.HTMLWidget).css({position:"absolute","z-index":"121",display:"none",color:"black","background-color":"transparent",background:"transparent","text-align":"center",border:"dashed 1px #CCC",padding:"0px",margin:"0px",width:this.width*f,height:this.height*f});$(this.HTMLWidget).on("click",function(h){g.viewerManager.signatureModule.RemoveSelection();g.setActive(true);if(!g.moveAlongWithCursor){h.stopPropagation()}});if(!this.IsActive){$(this.HTMLWidget).css({border:"none"})}else{$(this.HTMLWidget).css({border:"dashed 1px #CCC"})}$(this.HTMLWidget).addClass("ui-widget-content");$(this.HTMLWidget).append(this.actionControls);if(!this.IsActive){$(this.actionControls).hide()}else{$(this.actionControls).show()}this.signatureImage=new Image();this.signatureImage.src=this.ImageSrc;this.signatureImage.onload=function(){var h=g.viewerManager.zoomFactor;$(g.HTMLWidget).css({left:g.left*h,top:g.top*h});$(g.HTMLWidget).show();if(g.signaturePlaceholderWidget!=null){g.signaturePlaceholderWidget.hide()}};$(this.signatureImage).css({width:"100%",height:"100%",display:"block"});$(this.HTMLWidget).append(this.signatureImage);if(this.includeSignerName){if(this.FullName!=""){this.userNameWidget=document.createElement("div");$(this.userNameWidget).html(this.FullName);$(this.userNameWidget).css({left:"0px",bottom:"0px",width:"100%",height:"20px",overflow:"hidden",display:"inline","white-space":"nowrap","text-overflow":"ellipsis","font-size":this.signatureTitleFontSize*f+"px"});$(this.HTMLWidget).append(this.userNameWidget)}}if(this.draggable){$(this.HTMLWidget).draggable({containment:"#"+this.viewerManager.documentId+this.pageNumber,cursor:"move",drag:function(i,h){var j=g.viewerManager.zoomFactor;g.left=h.position.left/j;g.top=h.position.top/j}})}if(this.resizable){$(this.HTMLWidget).resizable({containment:"#"+this.viewerManager.documentId+this.pageNumber,resize:function(h,i){var j=g.viewerManager.zoomFactor;g.width=i.size.width/j;g.height=i.size.height/j}})}$(e).append(this.HTMLWidget)};d.prototype.setActive=function(e){this.IsActive=e;if(this.IsRendered){this.reRender()}};d.prototype.getImageString=function(){return this.ImageSrc.split(",")[1]};d.prototype.getId=function(){if(this.signaturePlaceholderWidget!=null){return this.signaturePlaceholderWidget.signaturePlaceholder.id}else{return this.SignId}};d.prototype.getIncludeDateTime=function(){if(this.signaturePlaceholderWidget!=null){return this.signaturePlaceholderWidget.signaturePlaceholder.includeDateTime}else{return this.includeDateTime}};d.prototype.getDateTimeFormatTemplate=function(){if(this.signaturePlaceholderWidget!=null){return this.signaturePlaceholderWidget.signaturePlaceholder.dateTimeFormat}else{return this.dateTimeFormat}};d.prototype.getRequiredField=function(){if(this.signaturePlaceholderWidget!=null){return this.signaturePlaceholderWidget.signaturePlaceholder.required}else{return this.IsRendered}};d.prototype.ResizeAndGetImageString=function(f,i){var g=document.createElement("canvas");var e=g.getContext("2d");g.width=f;g.height=i;e.drawImage(this.signatureImage,0,0,f,i);return g.toDataURL().split(",")[1]};d.prototype.reRender=function(){var f=this;if(!this.IsSaved){if(!this.IsActive){$(this.HTMLWidget).css({border:"none"})}else{$(this.HTMLWidget).css({border:"dashed 1px #CCC"})}if(this.viewerManager.viewingInverted){this.getBase64Image(this.ImageSrc,function(g){f.signatureImage.src=g},"image/png")}else{this.signatureImage.src=this.ImageSrc}if(!this.IsActive){$(this.actionControls).hide()}else{$(this.actionControls).show()}}var e=this.viewerManager.zoomFactor;$(this.HTMLWidget).css({left:this.left*e,top:this.top*e,width:this.width*e,height:this.height*e,"z-index":"121"});if(this.includeSignerName){if(this.FullName!=""){$(this.userNameWidget).css({"font-size":this.signatureTitleFontSize*e+"px"})}}};d.prototype.getBase64Image=function(f,i,h){var g=this;var e=new Image();e.onload=function(){var k=document.createElement("canvas");var j=k.getContext("2d");var l;k.height=e.naturalHeight;k.width=e.naturalWidth;j.drawImage(e,0,0);g.convertCanvasImageToInvertedImage(e,j,k.width,k.height);l=k.toDataURL(h);i(l)};e.src=f;if(e.complete||e.complete===undefined){e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.src=f}};d.prototype.convertCanvasImageToInvertedImage=function(g,f,o,l){var n=0;var m=0;var e=f.getImageData(n,m,o,l);var k=e.data;for(var j=0;j<k.length;j+=4){k[j]=255-k[j];if((j+1)<k.length){k[j+1]=255-k[j+1]}if((j+2)<k.length){k[j+2]=255-k[j+2]}}f.putImageData(e,n,m)};d.prototype.detach=function(){$(this.HTMLWidget).detach()};d.prototype.attach=function(e,f){this.pageNumber=f;$(e).append(this.HTMLWidget)};return d}());b.SignatureWidget=c})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(){function e(){this.signatureWidget=new Array()}e.prototype.Add=function(f){this.signatureWidget.push(f)};e.prototype.Remove=function(g){var f=this;this.signatureWidget.forEach(function(i,h){if(i.SignId===g){f.signatureWidget.splice(h,1)}})};return e}());b.PageSignatureElements=a;var d=(function(){function e(){this.signaturePlaceholderWidget=new Array()}e.prototype.Add=function(f){this.signaturePlaceholderWidget.push(f)};e.prototype.Remove=function(g){var f=this;this.signaturePlaceholderWidget.forEach(function(i,h){if(i.signPlaceholderId===g){f.signaturePlaceholderWidget.splice(h,1)}})};return e}());b.PageSignaturePlaceholderWidgets=d;var c=(function(f){__extends(e,f);function e(){var g=f.call(this)||this;g.description="SignatureModule";g.supportsSignatureLayer=false;g.onAfterDocumentLoad=function(i){var h=g.viewerManager;g.signatureWidgets=new Array(h.pageCount)};g.onDocumentInfoRetrived=function(m){g.supportsSignatureLayer=false;if(m.mimeType==b.MimeTypes.PDF){g.supportsSignatureLayer=true;for(var i=1;i<=m.pageCount;i++){var h=g.signaturePlaceholderWidgets[i];if(h!=null){for(var k=0;k<h.signaturePlaceholderWidget.length;k++){var l=h.signaturePlaceholderWidget[k];l.initialize()}}}}};g.onPageRendered=function(l){if(!g.supportsSignatureLayer){return}var i=$("#"+g.viewerManager.documentId+l.pageNumber);var j=g.createPageSignaturePane(i,l.pageNumber);if(g.viewerManager.pages[l.pageNumber]==null){return}var h=g.viewerManager.rotationAngle;var k=g.viewerManager.pages[l.pageNumber].rotation|0;if((h+k)%360!=0){$(j).hide();return}else{$(j).show()}g.renderSignatureWidgets(j,l.pageNumber);g.renderSignaturePlaceholderWidget(j,l.pageNumber)};g.createPageSignaturePane=function(j,i){var h=$("#"+g.viewerManager.documentId+"sign_panel"+i)[0];if(h!=null){return h}h=document.createElement("div");$(h).addClass("git-sign-panel");$(h).attr("id",g.viewerManager.documentId+"sign_panel"+i);$(j).append(h);return h};g.onPageReRendered=function(l){if(!g.supportsSignatureLayer){return}var i=$("#"+g.viewerManager.documentId+l.pageNumber);var j=g.createPageSignaturePane(i,l.pageNumber);if(g.viewerManager.pages[l.pageNumber]==null){return}var h=g.viewerManager.rotationAngle;var k=g.viewerManager.pages[l.pageNumber].rotation|0;if((h+k)%360!=0){$(j).hide();return}else{$(j).show()}g.renderSignatureWidgets(j,l.pageNumber);g.renderSignaturePlaceholderWidget(j,l.pageNumber)};g.onRotationChanged=function(h){if(!g.supportsSignatureLayer){return}};g.onZoomChanged=function(l){if(!g.supportsSignatureLayer){return}var i=$("#"+g.viewerManager.documentId+l.pageNumber);var j=g.createPageSignaturePane(i,l.pageNumber);if(g.viewerManager.pages[l.pageNumber]==null){return}var h=g.viewerManager.rotationAngle;var k=g.viewerManager.pages[l.pageNumber].rotation|0;if((h+k)%360!=0){$(j).hide();return}else{$(j).show()}g.renderSignatureWidgets(j,l.pageNumber);g.renderSignaturePlaceholderWidget(j,l.pageNumber)};g.onBeforeSave=function(l,w){if(!g.supportsSignatureLayer){return}if(!l.serverViewerPreferences.Interactivity.AllowSigning){return}for(var h=1;h<=g.viewerManager.pageCount;h++){var i=g.signaturePlaceholderWidgets[h];if(i!=null){for(var n=0;n<i.signaturePlaceholderWidget.length;n++){var r=i.signaturePlaceholderWidget[n];if(!r.isSigned){if(r.signaturePlaceholder!=null){if(r.signaturePlaceholder.required){w.value=true;r.highlightAndBlink();l.events.dispatchAll(b.EventNames.beforeSignatureNeededPrompt,{cancel:w});break}}}}if(w.value){break}}}if(w.value){return}var o=new Array();var t;for(var h=1;h<=g.viewerManager.pageCount;h++){var s=g.signatureWidgets[h];if(s!=null){for(var n=0;n<s.signatureWidget.length;n++){var p=s.signatureWidget[n];if(!p.IsSaved){var v=new b.SignatureClientRect(p.left,p.top,p.height,p.width);var q=p.ResizeAndGetImageString(p.width,p.height);var u=p.FullName;var k=p.getIncludeDateTime();var m=p.getDateTimeFormatTemplate();t=new b.SignatureKeyValuePair(h,v,q,u,k,m);o.push(t)}}}}if(o.length>0){return{module:"signatures",value:o}}return null};g.onAfterSave=function(l,n){if(!g.supportsSignatureLayer){return}if(!l.serverViewerPreferences.Interactivity.AllowSigning){return}for(var h=1;h<=g.viewerManager.pageCount;h++){var m=g.signatureWidgets[h];if(m!=null){for(var k=0;k<m.signatureWidget.length;k++){var i=m.signatureWidget[k];i.savedSuccessfully();i.setActive(false);i.reRender()}}}};return g}e.prototype.initialize=function(g,h){f.prototype.initialize.call(this,g,h);this.userSignatures=new Array();this.signaturePlaceholderWidgets=new Array()};e.prototype.Save=function(g){this.userSignatures.push(g)};e.prototype.RemoveUserSignature=function(g){for(var h=0;h<this.userSignatures.length;h++){if(this.userSignatures[h].Id==g){this.userSignatures.splice(h,1)}}};e.prototype.AddSignature=function(i,j){if(j===void 0){j=true}var h=i.pageNumber;var g=null;if(this.signatureWidgets[h]==null){g=new a();this.signatureWidgets[h]=g}else{g=this.signatureWidgets[h]}g.Add(i)};e.prototype.GetAllSignatures=function(){var k=new Array();for(var i=1;i<=this.viewerManager.pageCount;i++){var o=this.signatureWidgets[i];if(o!=null){for(var m=0;m<o.signatureWidget.length;m++){var l=o.signatureWidget[m];if(!l.IsSaved){var h=new b.Signature();h.base64Image=l.getImageString();h.required=l.getRequiredField();h.id=l.getId();h.isSigned=true;h.pageNumber=i;k.push(h)}}}}for(var i=1;i<=this.viewerManager.pageCount;i++){var g=this.signaturePlaceholderWidgets[i];if(g!=null){for(var m=0;m<g.signaturePlaceholderWidget.length;m++){var n=g.signaturePlaceholderWidget[m];if(n.signaturePlaceholder!=null){var h=new b.Signature();h.required=n.signaturePlaceholder.required;h.id=n.signaturePlaceholder.id;h.isSigned=false;h.pageNumber=i;k.push(h)}}}}return k};e.prototype.GetSignature=function(k){var j=this.GetAllSignatures();var g=null;for(var h=0;h<j.length;h++){if(j[h].id==k){g=j[h]}}return g};e.prototype.AddSignaturePlaceholder=function(h){var g=h.pageNumber;var j=null;if(this.signaturePlaceholderWidgets[g]==null){j=new d();this.signaturePlaceholderWidgets[g]=j}else{j=this.signaturePlaceholderWidgets[g]}var i=new b.SignaturePlaceholderWidget(h,this.viewerManager);j.Add(i)};e.prototype.removeAllSignaturePlaceholders=function(){if(this.signaturePlaceholderWidgets.length!=0){this.signaturePlaceholderWidgets=new Array()}};e.prototype.renderSignatureWidgets=function(h,g){if(this.signatureWidgets[g]==null){return}var l=this.signatureWidgets[g];for(var k=0;k<l.signatureWidget.length;k++){var j=l.signatureWidget[k];j.reRender()}};e.prototype.renderSignaturePlaceholderWidget=function(h,g){if(this.signaturePlaceholderWidgets[g]==null){return}var l=this.signaturePlaceholderWidgets[g];for(var k=0;k<l.signaturePlaceholderWidget.length;k++){var j=l.signaturePlaceholderWidget[k];j.render(h)}};e.prototype.GetMySignatures=function(){if(!this.supportsSignatureLayer){return null}var g=new Array();for(var h=0;h<this.userSignatures.length;h++){var j=new b.MySignatureKeyValuePair(this.userSignatures[h].Id,this.userSignatures[h].getImageString(),this.userSignatures[h].UserName);g.push(j)}if(g.length>0){return{module:"mysignatures",value:g}}return null};e.prototype.getNumberOfSignaturesOnPageExist=function(h){if(!this.supportsSignatureLayer){return}if(!this.viewerManager.serverViewerPreferences.Interactivity.AllowSigning){return}var k=0;var l=this.signatureWidgets[h];if(l!=null){k+=l.signatureWidget.length}var g=this.signaturePlaceholderWidgets[h];if(g!=null){for(var j=0;j<g.signaturePlaceholderWidget.length;j++){if(!g.signaturePlaceholderWidget[j].isSigned){k++}}}return k};e.prototype.getNumberOfSignaturesOnDocument=function(){if(!this.supportsSignatureLayer){return}if(!this.viewerManager.serverViewerPreferences.Interactivity.AllowSigning){return}var k=0;for(var h=1;h<=this.viewerManager.pageCount;h++){var l=this.signatureWidgets[h];if(l!=null){k+=l.signatureWidget.length}}for(var h=1;h<=this.viewerManager.pageCount;h++){var g=this.signaturePlaceholderWidgets[h];if(g!=null){for(var j=0;j<g.signaturePlaceholderWidget.length;j++){if(!g.signaturePlaceholderWidget[j].isSigned){k++}}}}return k};e.prototype.RemoveSelection=function(){for(var k=1;k<=this.viewerManager.pageCount;k++){var l=this.signatureWidgets[k];if(l!=null){for(var h=0;h<l.signatureWidget.length;h++){var g=l.signatureWidget[h];g.setActive(false);g.reRender()}}}};return e}(b.PluggableModule));b.SignatureModule=c})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(){function c(f,e,d){if(d===void 0){d=""}this.imageSrc=f;this.UserName=e;if(d==""){this.Id="_"+Math.random().toString(36).substr(2,9)}else{this.Id=d}}c.prototype.getImageString=function(){return this.imageSrc.split(",")[1]};return c}());b.UserSignature=a})(gnostice||(gnostice={}));var gnostice;(function(i){var f;(function(k){k[k.pageAbsolute=0]="pageAbsolute";k[k.pageRelative=1]="pageRelative"})(f=i.SignaturePositionMode||(i.SignaturePositionMode={}));var c;(function(k){k[k.topLeft=1]="topLeft";k[k.topCenter=2]="topCenter";k[k.topRight=3]="topRight";k[k.bottomLeft=4]="bottomLeft";k[k.bottomCenter=5]="bottomCenter";k[k.bottomRight=6]="bottomRight"})(c=i.SignaturePositionAnchor||(i.SignaturePositionAnchor={}));var j=(function(){function k(){}return k}());i.SignatureRelativePosition=j;var h=(function(){function k(){}return k}());i.SignatureAbsolutePosition=h;var a=(function(){function k(){}return k}());i.SignaturePosition=a;var e;(function(k){k[k.Thin=1]="Thin";k[k.Medium=2]="Medium";k[k.Thick=3]="Thick"})(e=i.StrokeWidth||(i.StrokeWidth={}));var g=(function(){function k(){}return k}());i.SignatureStyle=g;var d=(function(){function k(){}return k}());i.SignatureSize=d;var b=(function(){function k(){}return k}());i.SignaturePlaceholder=b})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(){function c(d,e){this.signaturePlaceholder=d;this.viewerManager=e;this.isRendered=false;this.zoomFactor=0.2;this.isSigned=false}c.prototype.initialize=function(){this.isRendered=false};c.prototype.highlightAndBlink=function(){var d=this;this.viewerManager.scrolToControl(this.htmlWidget,function(){for(var e=1;e<=4;e++){$(d.htmlWidget).fadeOut(350).fadeIn(350)}})};c.prototype.getPageNumber=function(){return this.signaturePlaceholder.pageNumber};c.prototype.CalculateWidgetRect=function(){switch(this.signaturePlaceholder.position.mode){case b.SignaturePositionMode.pageAbsolute:this.CalculateRectForAbsolutePosition();break;case b.SignaturePositionMode.pageRelative:this.CalculateRectForRelative();break}};c.prototype.CalculateRectForAbsolutePosition=function(){var g,f,e,d;g=this.signaturePlaceholder.position.absolutePosition.x;f=this.signaturePlaceholder.position.absolutePosition.y;e=this.signaturePlaceholder.size.width;d=this.signaturePlaceholder.size.height;this.signatureClientRect=new b.SignatureClientRect(g,f,d,e)};c.prototype.CalculateRectForRelative=function(){var j=this.signaturePlaceholder.position.relativePosition.offset.x;var h=this.signaturePlaceholder.position.relativePosition.offset.y;var d=this.signaturePlaceholder.size.width;var l=this.signaturePlaceholder.size.height;var i=this.signaturePlaceholder.pageNumber;var k=this.viewerManager.pages[i].width;var f=this.viewerManager.pages[i].height;var e=0,g=0;switch(this.signaturePlaceholder.position.relativePosition.anchor){case b.SignaturePositionAnchor.topLeft:e=j;g=h;break;case b.SignaturePositionAnchor.topRight:e=k-j-d;g=h;break;case b.SignaturePositionAnchor.topCenter:e=(k/2)-(d/2);g=h;break;case b.SignaturePositionAnchor.bottomLeft:e=j;g=f-h-l;break;case b.SignaturePositionAnchor.bottomRight:e=k-j-d;g=f-h-l;break;case b.SignaturePositionAnchor.bottomCenter:e=(k/2)-(d/2);g=f-h-l;break}this.signatureClientRect=new b.SignatureClientRect(e,g,l,d)};c.prototype.render=function(d){var g=this;var f=this.viewerManager.zoomFactor;this.CalculateWidgetRect();if(!this.isRendered){this.htmlWidget=document.createElement("div");$(this.htmlWidget).css({position:"absolute","z-index":"122",color:"black","background-color":"rgba(201, 76, 76, 0.2)","text-align":"center",cursor:"pointer",width:this.signatureClientRect.width*f,height:this.signatureClientRect.height*f,left:this.signatureClientRect.left*f,top:this.signatureClientRect.top*f});var e=document.createElement("span");$(e).html("*Click here to sign");$(e).css({"font-weight":"bold"});$(this.htmlWidget).append(e);$(this.htmlWidget).on("click",function(h){if(g.viewerManager.signatureMenu!=null){g.viewerManager.signatureMenu.destroy()}g.viewerManager.signatureModule.RemoveSelection();g.viewerManager.signatureMenu=new b.SignatureMenu(g,g.viewerManager);g.viewerManager.signatureMenu.OnMenuSelect=function(k,i){var j=i.imageSrc;var l=i.UserName;g.viewerManager.renderSignatureOnPage(j,l,k)};g.viewerManager.signatureMenu.show(b.SignatureMenuPosition.RightSideOfSourceControl,g.htmlWidget,g.htmlWidget);h.stopPropagation()});$(d).append(this.htmlWidget);this.isRendered=true}else{$(this.htmlWidget).css({width:this.signatureClientRect.width*f,height:this.signatureClientRect.height*f,left:this.signatureClientRect.left*f,top:this.signatureClientRect.top*f})}};c.prototype.show=function(){$(this.htmlWidget).show();this.isSigned=false};c.prototype.hide=function(){$(this.htmlWidget).hide();this.isSigned=true};return c}());b.SignaturePlaceholderWidget=a})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(){function c(d){this.parentContainer=d;this.OnDrawingSubmit=function(f,e){};this.strokeColor="black";this.minStrokeWidth=0.5;this.maxStrokeWidth=2.5;this.allowSavingSignatures=true;this.transparentLayer=document.createElement("div");$(this.transparentLayer).attr({"class":"transparentoverlay"});this.dialogContentDiv=document.createElement("div");$(this.dialogContentDiv).attr({"class":"signatureDlg"});$(d).append(this.dialogContentDiv);$(d).append(this.transparentLayer);this.hide()}c.prototype.getSignatureImage=function(){var d=null;d=this.signaturePad.toDataURL();return d};c.prototype.getFullName=function(){var d=null;d=$(this.nameField).val();return d};c.prototype.getId=function(){if($("img.active-signature").length){return this.selectedSignatureId}else{return""}};c.prototype.search=function(g,f){var e;for(var d=0;d<g.length;d++){if(g[d].Id==f){e=g[d]}}return e};c.prototype.show=function(h,j){var i=this;if(j===void 0){j=null}if(h.preferences.interactiveElements.signatures!=null){this.ReadSignaturePreferences(h.preferences.interactiveElements.signatures)}if(j!=null){this.CalculateAndSetStrokeWidth(j.signaturePlaceholder.style.strokeWidth);this.SetStrokeColor(j.signaturePlaceholder.style.strokeColor)}$(this.dialogContentDiv).empty();this.userSignatures=h.getUserSignatures();this.signatureDialogTitle=document.createElement("div");$(this.signatureDialogTitle).css({padding:"10px","font-size":"medium",overflow:"hidden","border-top-left-radius":"5px","border-top-right-radius":"5px","background-color":"#DDE0E5"});if(this.userSignatures!=null&&this.userSignatures.length>0){$(this.signatureDialogTitle).html(a.LocalizedStrings.signature_menu_manageSignatureOption)}else{$(this.signatureDialogTitle).html(a.LocalizedStrings.signature_menu_addSignatureOption)}$(this.dialogContentDiv).append(this.signatureDialogTitle);var l=document.createElement("div");$(l).css({"-moz-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none",position:"relative","line-height":"initial","font-size":"initial","font-weight":"initial"});$(l).show();var e=document.createElement("div");$(e).attr("id","mySignatures");this.updateMySignatures(e,h);$(e).css({width:"25%",height:"308px",overflow:"auto","float":"left","border-right":"1px solid rgb(221, 224, 238)"});$(l).append(e);var m=document.createElement("div");$(m).css({width:"74%",height:"308px","float":"left"});this.userDetailsForms(m,h);this.canvasActionButtons(m);this.renderSignatureCanvas(m);$(l).append(m);$(this.dialogContentDiv).append(l);var k=document.createElement("div");$(k).css({height:"1px","background-color":"rgb(221, 224, 229)",width:"100%","float":"left"});$(this.dialogContentDiv).append(k);this.optionContainer=document.createElement("div");$(this.optionContainer).addClass("signature-dialog-option-container");var g=document.createElement("div");$(g).css({padding:"6px"});$(g).addClass("signature-dialog-button-container");$(g).append(this.optionContainer);if(!this.allowSavingSignatures){$(this.optionContainer).hide()}this.insertAndSaveBtn=document.createElement("input");$(this.insertAndSaveBtn).attr({type:"Button",value:a.LocalizedStrings.signature_dlg_btn_save_and_insert});$(this.insertAndSaveBtn).css({"line-height":"initial","font-size":"initial"});$(this.insertAndSaveBtn).attr("disabled","disabled");$(this.insertAndSaveBtn).on("click",function(){i.OnDrawingSubmit.call(i,j,true);i.hide()});$(g).append(this.insertAndSaveBtn);this.insertBtn=document.createElement("input");$(this.insertBtn).css({"line-height":"initial","font-size":"initial"});$(this.insertBtn).attr({type:"Button",value:a.LocalizedStrings.signature_dlg_btn_insert});$(this.insertBtn).attr("disabled","disabled");$(this.insertBtn).on("click",function(){i.OnDrawingSubmit.call(i,j,false);i.hide()});$(g).append(this.insertBtn);this.closeBtn=document.createElement("input");$(this.closeBtn).css({"line-height":"initial","font-size":"initial"});$(this.closeBtn).attr({type:"Button",value:a.LocalizedStrings.msgdlg_btnCaption_Cancel});$(this.closeBtn).on("click",function(){i.hide()});$(g).append(this.closeBtn);$(this.dialogContentDiv).append(g);var d=($(this.parentContainer).innerHeight()/2)-$(this.dialogContentDiv).outerHeight()/2;var f=($(this.parentContainer).innerWidth()/2)-$(this.dialogContentDiv).outerWidth()/2;$(this.dialogContentDiv).css({top:d+"px",left:f+"px"});if(this.userSignatures!=null&&this.maxNumberOfSavedUserSignatures<=this.userSignatures.length){$(this.insertAndSaveBtn).prop("disabled","true")}else{$(this.insertAndSaveBtn).removeProp("disabled")}$(this.transparentLayer).show();$(this.dialogContentDiv).show();$(this.closeBtn).focus()};c.prototype.ReadSignaturePreferences=function(d){this.SetStrokeColor(d.strokeColor);this.CalculateAndSetStrokeWidth(d.strokeWidth);this.allowSavingSignatures=d.allowSavingUserSignatures;this.maxNumberOfSavedUserSignatures=d.maxNumberOfSavedUserSignatures;this.allowCreatingNewUserSignatures=d.allowCreatingNewUserSignatures;this.allowUploadingNewUserSignatures=d.allowUploadingNewUserSignatures;this.allowDeletingUserSignatures=d.allowDeletingUserSignatures};c.prototype.SetStrokeColor=function(d){this.strokeColor=d};c.prototype.CalculateAndSetStrokeWidth=function(d){switch(d){case a.StrokeWidth.Thin:this.minStrokeWidth=0.5;this.maxStrokeWidth=2.5;break;case a.StrokeWidth.Medium:this.minStrokeWidth=0.75;this.maxStrokeWidth=3;break;case a.StrokeWidth.Thick:this.minStrokeWidth=1;this.maxStrokeWidth=3.5;break}};c.prototype.renderSignatureCanvas=function(d){var f=this;var e=document.createElement("div");$(e).css({"float":"left",position:"relative",width:"470px",height:"220px","-moz-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"});this.signatureCanvas=document.createElement("canvas");$(this.signatureCanvas).attr({"class":"signature-pad"});$(this.signatureCanvas).attr({height:"220",width:"470"});$(this.signatureCanvas).css({"margin-left":"8px",border:"1px solid lightblue",position:"absolute"});$(e).append(this.signatureCanvas);$(d).append(e);this.signaturePad=new a.SignaturePad(this.signatureCanvas,{backgroundColor:"rgba(255, 255, 255, 0)",penColor:this.strokeColor,minWidth:this.minStrokeWidth,maxWidth:this.maxStrokeWidth});this.signaturePad.onEnd=function(g){$(f.insertBtn).removeAttr("disabled");f.updateInsertAndSaveButtonState()};if(!this.allowCreatingNewUserSignatures){this.signaturePad.off()}};c.prototype.updateInsertAndSaveButtonState=function(){if(this.userSignatures!=null&&this.maxNumberOfSavedUserSignatures<=this.userSignatures.length){$(this.insertAndSaveBtn).prop("disabled","true")}else{$(this.insertAndSaveBtn).removeAttr("disabled")}};c.prototype.canvasActionButtons=function(d){var j=this;var g=document.createElement("div");$(g).css({"float":"left","padding-left":"7px","padding-bottom":"2px","font-size":"14px","line-height":"initial","font-weight":"initial"});if(this.allowCreatingNewUserSignatures){$(g).html(a.LocalizedStrings.signature_dlg_title_draw)}else{$(g).html(a.LocalizedStrings.signature_dlg_title_upload)}$(d).append(g);var f=document.createElement("div");$(f).css({"float":"right"});var i=document.createElement("a");$(i).attr("href","#");$(i).html(a.LocalizedStrings.signature_dlg_btn_clear);$(i).css({"padding-right":"6px","padding-left":"6px","line-height":"initial","font-size":"initial","font-weight":"initial"});$(i).on("click",function(){j.signaturePad.clear();$(j.insertAndSaveBtn).attr("disabled","disabled");$(j.insertBtn).attr("disabled","disabled");$("#saveSign").prop("checked",false);$("img.active-signature").removeClass("active-signature")});$(f).append(i);var e=document.createElement("a");$(e).attr("href","#");$(e).html(a.LocalizedStrings.signature_dlg_btn_upload);$(e).css({"padding-right":"8px","padding-left":"8px","line-height":"initial","font-size":"initial","font-weight":"initial"});var h=document.createElement("input");$(h).css({left:"-9999px",top:"-9999px",width:"1px",height:"1px",position:"fixed"});$(h).attr("type","file");$(h).attr("accept",".png, .jpg, .jpeg, .bmp, .ICO, .cur, .gif");$(h).on("change",function(l){l.preventDefault();$("img.active-signature").removeClass("active-signature");if(l.target.files&&l.target.files[0]){var k=new FileReader();k.onload=function(o){var n=j.signatureCanvas.getContext("2d");var m=new Image();m.onload=function(){var p=a.Util.getRectSizeToFit(m.width,m.height,j.signatureCanvas.width,j.signatureCanvas.height);n.clearRect(0,0,j.signatureCanvas.width,j.signatureCanvas.height);n.drawImage(m,p.left,p.top,p.width,p.height);if(j.userSignatures!=null&&j.maxNumberOfSavedUserSignatures<=j.userSignatures.length){$(j.insertAndSaveBtn).prop("disabled","true")}else{$(j.insertAndSaveBtn).removeAttr("disabled")}$(j.insertBtn).removeAttr("disabled");$("#saveSign").prop("checked",false);j.signaturePad.on()};$(m).attr("src",o.target.result);j.uploadedSignature=o.target.result};k.readAsDataURL(l.target.files[0])}});$(f).append(h);$(e).on("click",function(k){$(h).click();k.preventDefault()});$(f).append(e);if(this.allowUploadingNewUserSignatures){$(d).append(f)}};c.prototype.userDetailsForms=function(e,j){var h=document.createElement("table");$(h).css({margin:"5px",width:"90%","line-height":"initial","font-size":"initial","font-weight":"initial"});var d=document.createElement("tr");var g=document.createElement("td");$(g).css({padding:"0px",margin:"0px"});var i=document.createElement("label");$(i).css({"line-height":"initial","font-size":"initial","font-weight":"initial",padding:"0px",margin:"2px"});$(i).html(a.LocalizedStrings.signature_dlg_edit_label_name);$(g).append(i);d.appendChild(g);$(h).append(d);var k=document.createElement("tr");var f=document.createElement("td");$(f).css({padding:"0px",margin:"0px"});this.nameField=document.createElement("input");$(this.nameField).css({"line-height":"initial","font-size":"initial","font-weight":"initial"});$(this.nameField).attr({type:"text"});$(this.nameField).val(j.userName);$(f).append(this.nameField);k.appendChild(f);$(h).append(k);$(e).append(h)};c.prototype.updateMySignatures=function(o,m){this.userSignatures=m.getUserSignatures();if(this.userSignatures==null||this.userSignatures.length==0){return}var p=document.createElement("div");$(p).css({padding:"5px","background-color":"aqua"});$(p).html(a.LocalizedStrings.signature_dlg_title_mysignatures);$(o).append(p);var q=document.createElement("table");$(q).css({margin:"10px"});var n=0;var h=this.userSignatures.length;for(var g=0;g<this.userSignatures.length;g++){var l=document.createElement("tr");var f=document.createElement("td");if(n<h){var j=document.createElement("div");$(j).css({position:"relative",margin:"2px"});var k=new Image();k.src=this.userSignatures[n].imageSrc;k.alt=this.userSignatures[n].Id;var e=this;$(k).click(function(r){$("img.active-signature").removeClass("active-signature");$(this).addClass("active-signature");e.selectedSignatureId=this.alt;e.signaturePad.clear();var i=e.search(e.userSignatures,this.alt);e.signaturePad.fromDataURL(i.imageSrc,{width:e.signatureCanvas.width,height:e.signatureCanvas.height});$(e.nameField).val(i.UserName);$("#saveSign").prop("checked",false);$(e.insertAndSaveBtn).attr("disabled","disabled");$(e.insertBtn).removeAttr("disabled");e.signaturePad.off()});$(j).append(k);f.appendChild(j);if(this.allowDeletingUserSignatures){var d=document.createElement("div");$(d).css({position:"absolute",top:"0px",right:"-1px",width:"20px",height:"20px","background-color":"lightblue","text-align":"center"});$(d).attr("id","deleteSign");$(d).html("x");$(d).on("click",{selectedSignatureId:this.userSignatures[n].Id,signatureDialog:this},function(i){var s=i.data.selectedSignatureId;$(this).parentsUntil("tr").remove();m.signatureModule.RemoveUserSignature(s);var r=i.data.signatureDialog;$(r.insertAndSaveBtn).attr("disabled","disabled");$(r.insertBtn).attr("disabled","disabled");r.signaturePad.clear()});$(j).append(d)}}l.appendChild(f);n++;q.appendChild(l);if(n>=h){break}}$(o).append(q)};c.prototype.hide=function(){$(this.dialogContentDiv).empty();$(this.transparentLayer).hide();$(this.dialogContentDiv).hide()};c.prototype.resizeCanvas=function(){var d=Math.max(window.devicePixelRatio||1,1);this.signatureCanvas.width=this.signatureCanvas.offsetWidth*d;this.signatureCanvas.height=this.signatureCanvas.offsetHeight*d;this.signatureCanvas.getContext("2d").scale(d,d)};return c}());a.SignatureDialog=b})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(){function c(){}return c}());b.Signature=a})(gnostice||(gnostice={}));var gnostice;(function(b){var a=(function(d){__extends(c,d);function c(h,e,f,g){var i=d.call(this)||this;i.splitter=h;i.parentPanel=e;i.isCollapsed=f;i.expandableWidth=g;i.children=new Array();i.collapsing=false;i.expanding=false;i.resizerPaneWidth=13;i.constructView();$(i.rightPaneResizer).click(function(){i.toggle();i.dispatchAll("PaneToggle",{isCollapsed:i.isCollapsed})});return i}c.prototype.setExpandableWidth=function(e){this.expandableWidth=e};c.prototype.expand=function(){this.expanding=true;try{if(this.splitter.rightPanelWidth<=this.resizerPaneWidth){this.splitter.setPosition(this.splitter.leftPanelWidth,Math.max(this.expandableWidth,this.resizerPaneWidth));$(this.resizerIcon).addClass("fa-caret-right");$(this.resizerIcon).removeClass("fa-caret-left");this.isCollapsed=false}}catch(f){}finally{this.expanding=false}};c.prototype.collapse=function(){this.collapsing=true;try{if(this.splitter.rightPanelWidth>this.resizerPaneWidth||this.splitter.rightPanelWidth==0){this.splitter.setPosition(this.splitter.leftPanelWidth,this.resizerPaneWidth);$(this.resizerIcon).addClass("fa-caret-left");$(this.resizerIcon).removeClass("fa-caret-right");this.isCollapsed=true}}catch(f){}finally{this.collapsing=false}};c.prototype.toggle=function(){if(this.splitter.rightPanelWidth>this.resizerPaneWidth){this.collapse()}else{this.expand()}};c.prototype.add=function(e){this.children.push(e);$(this.rightToolbarContent).append(e)};c.prototype.clearAllChildren=function(){$(this.rightToolbarContent).find(".git_side_pane_element").remove();this.children.length=0};c.prototype.get=function(e){if(e<this.children.length){return this.children[e]}return null};c.prototype.destroy=function(){$("div.git-viewer-rightpane").remove();this.splitter.rightPanelWidth=0};c.prototype.constructView=function(){this.destroy();this.rightViewerPane=document.createElement("div");$(this.rightViewerPane).css({"z-index":"50",width:"0px",top:"0",bottom:"0",position:"absolute","float":"right"});$(this.rightViewerPane).attr({id:"rightPane","class":"git-viewer-rightpane"});var e=document.createElement("div");$(e).css({width:"100%",height:"36px","z-index":"5",overflow:"hidden","vertical-align":"central","text-align":"center"});$(e).addClass("git-viewer-rightpane-header");$(this.rightViewerPane).append(e);this.rightToolbarContent=document.createElement("div");$(this.rightToolbarContent).css({width:"100%",position:"absolute",top:"36px",bottom:"0",overflow:"hidden","overflow-x":"hidden"});$(this.rightToolbarContent).addClass("git-viewer-comment-toolbarContent");$(this.rightViewerPane).append(this.rightToolbarContent);$(this.parentPanel).append(this.rightViewerPane);this.rightPaneResizer=document.createElement("div");$(this.rightPaneResizer).addClass("git-right-pane-resizer");$(this.rightPaneResizer).css({width:this.resizerPaneWidth+"px",bottom:"0",top:"2px",position:"absolute",left:"0px",overflow:"hidden",display:"block"});$(this.rightToolbarContent).append(this.rightPaneResizer);this.resizerIcon=document.createElement("div");$(this.resizerIcon).addClass("fas fa-2x");$(this.resizerIcon).css({position:"relative","text-align":"middle",top:"50%"});$(this.rightPaneResizer).append(this.resizerIcon);if(this.isCollapsed){this.collapse()}else{this.expand()}};return c}(b.EventDispatcher));b.RightPane=a})(gnostice||(gnostice={}));var gnostice;(function(a){var b=(function(){function c(){}c.tooltip_open_doc="Open document";c.tooltip_print_doc="Print document";c.tooltip_save_doc="Save document changes";c.tooltip_download_doc="Download document";c.tooltip_download_as_doc="Download as document";c.tooltip_download_pdf="Download as PDF";c.tooltip_download_docx="Download as DOCX";c.tooltip_download_tiff="Download as TIFF";c.tooltip_download_html="Download as HTML";c.tooltip_show_first_page="Show first page";c.tooltip_show_previous_page="Show previous page";c.go_to_page="Go to page";c.tooltip_show_next_page="Show next page";c.tooltip_show_last_page="Show last page";c.tooltip_rotate_anti_clockwise="Rotate current view counterclockwise, change is not saved";c.tooltip_rotate_clockwise="Rotate current view clockwise, change is not saved";c.tooltip_zoomout="Zoom out";c.tooltip_zoomin="Zoom in";c.tooltip_custom_zoom="Custom";c.page_fit_actual_size="Actual size";c.page_fit_height="Fit height";c.page_fit_width="Fit width";c.fit_page="Fit page";c.tooltip_full_screen="View document in full screen window";c.tooltip_thumbnails="Thumbnails";c.tooltip_bookmarks="Bookmarks";c.tooltip_quick_find="Quick find";c.tooltip_find_prev="Find previous";c.tooltip_find_next="Find next";c.close="Close";c.tooltip_invert_color="Invert color, change is not saved";c.tooltip_properties_info="View document properties";c.tooltip_select_rect="Select rectangle";c.tooltip_signature="Insert signature";c.msgdlg_alert_formFieldsRequired="At least one required field is empty. Please fill in the required fields before continuing.";c.msgdlg_btnCaption_OK="OK";c.msgdlg_btnCaption_Cancel="Cancel";c.msgdlg_btnCaption_Allow="Allow";c.msgdlg_btnCaption_Yes="Yes";c.msgdlg_btnCaption_No="No";c.msgdlg_warning_jsAction="Application can not perform PDF Javascript actions.";c.msgdlg_warning_jsActionGoto="Application can not perform remote go to action.";c.msgdlg_warning_jsLaunchApp="Application can not launch another application or open a file path.";c.msgdlg_warning_linkAction="The document is trying to connect to:";c.msgdlg_password_title="Please enter the password to open the document.";c.msgdlg_password_incorrect="Incorrect password. Please try again.";c.msgdlg_password_retry_limit="Password attempts has exceeded the maximum retry limit.";c.msgdlg_docinfo_tab_description="Description";c.msgdlg_docinfo_tab_security="Security";c.msgdlg_docinfo_filename="File name";c.msgdlg_docinfo_title="Title";c.msgdlg_docinfo_author="Author";c.msgdlg_docinfo_subject="Subject";c.msgdlg_docinfo_keywords="Keywords";c.msgdlg_docinfo_mimetype="MIME type";c.msgdlg_docinfo_fileext="File extension";c.msgdlg_docinfo_filesize="File size";c.msgdlg_docinfo_created="Created";c.msgdlg_docinfo_modified="Modified";c.msgdlg_docinfo_creator="Creator";c.msgdlg_docinfo_producer="Producer";c.msgdlg_docinfo_securitymethod="Security method";c.msgdlg_docinfo_encryptionlevel="Encryption level";c.msgdlg_docinfo_openpassword="Open password set";c.msgdlg_docinfo_permissionspassword="Permissions password set";c.msgdlg_docinfo_commenting="Commenting allowed";c.msgdlg_docinfo_formfilling="Form-filling allowed";c.msgdlg_docinfo_yes="Yes";c.msgdlg_docinfo_no="No";c.msgdlg_docinfo_allowed="Allowed";c.msgdlg_docinfo_notallowed="Not allowed";c.msgdlg_docinfo_none="None";c.msgdlg_docinfo_passwordencryption="Password encryption";c.nav_pane_comments="Comments";c.nav_pane_no_comments="No comment";c.annot_add_new="Add sticky note";c.annot_state_accepted="Accepted";c.annot_state_rejected="Rejected";c.annot_state_completed="Completed";c.annot_state_cancelled="Cancelled";c.annot_enter_reply="Enter a reply";c.annot_reply="Reply";c.nav_pane="Navigation pane";c.annot_by="by:";c.form_validation_error_date="Invalid date. Please ensure that the value entered matches the format.";c.form_validation_error_time="Invalid time. Please ensure that the value entered matches the format.";c.form_validation_error_datetime="Invalid date or time. Please ensure that the value entered matches the format.";c.form_validation_error_input="Invalid input. Please ensure that the value entered matches the format.";c.notification_popup_success_header="Success!";c.notification_popup_success_message="Document changes saved";c.notification_popup_failure_header="Failed!";c.notification_popup_failure_message="Unable to save document changes";c.signature_menu_addSignatureOption="Create signature";c.signature_menu_manageSignatureOption="Manage signatures";c.signature_dlg_btn_insert="Insert";c.signature_dlg_btn_save_and_insert="Save & Insert";c.signature_dlg_btn_clear="Clear";c.signature_dlg_btn_upload="Upload";c.signature_dlg_title_draw="Draw your signature";c.signature_dlg_title_upload="Upload your signature";c.signature_dlg_title_mysignatures="My signatures";c.signature_dlg_edit_label_name="Full name";c.progress_msg_uploading="Uploading document to server...";c.progress_msg_loading="Loading document...";c.progress_msg_loading_server="Loading document from server...";return c}());a.LocalizedStrings=b})(gnostice||(gnostice={}));